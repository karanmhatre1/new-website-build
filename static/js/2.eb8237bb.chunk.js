/*! For license information please see 2.eb8237bb.chunk.js.LICENSE.txt */
(this["webpackJsonpnew-karan"]=this["webpackJsonpnew-karan"]||[]).push([[2],[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";t.exports=n(141)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(5);var i=n(40);function a(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(r.a)(t);if(e){var o=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(5);function i(t,e,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return Tu})),n.d(e,"b",(function(){return As})),n.d(e,"c",(function(){return Qa})),n.d(e,"d",(function(){return Ft})),n.d(e,"e",(function(){return Gn})),n.d(e,"f",(function(){return pn})),n.d(e,"g",(function(){return En})),n.d(e,"h",(function(){return To})),n.d(e,"i",(function(){return A})),n.d(e,"j",(function(){return Fu})),n.d(e,"k",(function(){return cn})),n.d(e,"l",(function(){return Eo})),n.d(e,"m",(function(){return ku})),n.d(e,"n",(function(){return S})),n.d(e,"o",(function(){return dt})),n.d(e,"p",(function(){return ns})),n.d(e,"q",(function(){return Ns})),n.d(e,"r",(function(){return w})),n.d(e,"s",(function(){return ma})),n.d(e,"t",(function(){return cu})),n.d(e,"u",(function(){return is})),n.d(e,"v",(function(){return Lu})),n.d(e,"w",(function(){return Ta})),n.d(e,"x",(function(){return Ca})),n.d(e,"y",(function(){return ys})),n.d(e,"z",(function(){return Y})),n.d(e,"A",(function(){return Z})),n.d(e,"B",(function(){return ho})),n.d(e,"C",(function(){return ao})),n.d(e,"D",(function(){return mo})),n.d(e,"E",(function(){return vo})),n.d(e,"F",(function(){return I})),n.d(e,"G",(function(){return N})),n.d(e,"H",(function(){return D})),n.d(e,"I",(function(){return Is})),n.d(e,"J",(function(){return Mu})),n.d(e,"K",(function(){return y})),n.d(e,"L",(function(){return nn})),n.d(e,"M",(function(){return Et})),n.d(e,"N",(function(){return pe})),n.d(e,"O",(function(){return Hn})),n.d(e,"P",(function(){return hn})),n.d(e,"Q",(function(){return cs})),n.d(e,"R",(function(){return ls})),n.d(e,"S",(function(){return P})),n.d(e,"T",(function(){return L})),n.d(e,"U",(function(){return j})),n.d(e,"V",(function(){return R})),n.d(e,"W",(function(){return Ts})),n.d(e,"X",(function(){return ze})),n.d(e,"Y",(function(){return wu})),n.d(e,"Z",(function(){return b})),n.d(e,"ab",(function(){return x})),n.d(e,"bb",(function(){return Kn})),n.d(e,"cb",(function(){return xu})),n.d(e,"db",(function(){return wo})),n.d(e,"eb",(function(){return go})),n.d(e,"fb",(function(){return nl})),n.d(e,"gb",(function(){return Dt})),n.d(e,"hb",(function(){return Cs})),n.d(e,"ib",(function(){return H})),n.d(e,"jb",(function(){return M})),n.d(e,"kb",(function(){return ka})),n.d(e,"lb",(function(){return Qn})),n.d(e,"mb",(function(){return uu})),n.d(e,"nb",(function(){return $a})),n.d(e,"ob",(function(){return Za})),n.d(e,"pb",(function(){return ae})),n.d(e,"qb",(function(){return os})),n.d(e,"rb",(function(){return al})),n.d(e,"sb",(function(){return mu})),n.d(e,"tb",(function(){return _})),n.d(e,"ub",(function(){return ut})),n.d(e,"vb",(function(){return Fs})),n.d(e,"wb",(function(){return rt})),n.d(e,"xb",(function(){return nt})),n.d(e,"yb",(function(){return Ct})),n.d(e,"zb",(function(){return Nt})),n.d(e,"Ab",(function(){return Ms})),n.d(e,"Bb",(function(){return xa})),n.d(e,"Cb",(function(){return at}));for(var r,i=n(11),a=n.n(i),o=n(13),s=n(18),u=n(16),l=n(15),c=n(40),h=n(6),f=n(5),d=n(9),p=n(3),v=n(4),m=n(0),g=n(2),y={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},b=1,x=2,w=0,S=2,k=100,T=301,E=302,C=306,O=307,M=1e3,A=1001,P=1002,L=1003,R=1004,j=1005,I=1006,D=1007,N=1008,B=1009,z=1012,F=1014,V=1015,U=1016,q=1020,H=1022,W=1023,G=1026,X=1027,Y=2300,Z=2301,Q=2302,J=2400,K=2401,$=2402,tt=2500,et=2501,nt=1,rt=2,it=3e3,at=3001,ot=3007,st=3002,ut=0,lt=7680,ct=35044,ht=35048,ft="300 es",dt=function(){function t(){Object(m.a)(this,t)}return Object(g.a)(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t);t.target=null}}}}]),t}(),pt=[],vt=0;vt<256;vt++)pt[vt]=(vt<16?"0":"")+vt.toString(16);var mt=1234567,gt=Math.PI/180,yt=180/Math.PI;function _t(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(pt[255&t]+pt[t>>8&255]+pt[t>>16&255]+pt[t>>24&255]+"-"+pt[255&e]+pt[e>>8&255]+"-"+pt[e>>16&15|64]+pt[e>>24&255]+"-"+pt[63&n|128]+pt[n>>8&255]+"-"+pt[n>>16&255]+pt[n>>24&255]+pt[255&r]+pt[r>>8&255]+pt[r>>16&255]+pt[r>>24&255]).toUpperCase()}function bt(t,e,n){return Math.max(e,Math.min(n,t))}function xt(t,e){return(t%e+e)%e}function wt(t,e,n){return(1-n)*t+n*e}function St(t){return 0===(t&t-1)&&0!==t}function kt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Tt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Et=Object.freeze({__proto__:null,DEG2RAD:gt,RAD2DEG:yt,generateUUID:_t,clamp:bt,euclideanModulo:xt,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:wt,damp:function(t,e,n,r){return wt(t,e,1-Math.exp(-n*r))},pingpong:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(xt(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(mt=t%2147483647),((mt=16807*mt%2147483647)-1)/2147483646},degToRad:function(t){return t*gt},radToDeg:function(t){return t*yt},isPowerOfTwo:St,ceilPowerOfTwo:kt,floorPowerOfTwo:Tt,setQuaternionFromProperEuler:function(t,e,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((e+r)/2),c=o((e+r)/2),h=a((e-r)/2),f=o((e-r)/2),d=a((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(s*c,u*h,u*f,s*l);break;case"YZY":t.set(u*f,s*c,u*h,s*l);break;case"ZXZ":t.set(u*h,u*f,s*c,s*l);break;case"XZX":t.set(s*c,u*p,u*d,s*l);break;case"YXY":t.set(u*d,s*c,u*p,s*l);break;case"ZYZ":t.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),Ct=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,t),this.x=e,this.y=n}return Object(g.a)(t,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),t}();Ct.prototype.isVector2=!0;var Ot,Mt=function(){function t(){Object(m.a)(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(g.a)(t,[{key:"set",value:function(t,e,n,r,i,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=o,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*x,i[6]=a*m+o*_+s*w,i[1]=u*p+l*g+c*b,i[4]=u*v+l*y+c*x,i[7]=u*m+l*_+c*w,i[2]=h*p+f*g+d*b,i[5]=h*v+f*y+d*x,i[8]=h*m+f*_+d*w,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*a*l-e*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=l*a-o*u,h=o*s-l*i,f=u*i-a*s,d=e*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return t[0]=c*p,t[1]=(r*u-l*n)*p,t[2]=(o*n-r*a)*p,t[3]=h*p,t[4]=(l*e-r*s)*p,t[5]=(r*i-o*e)*p,t[6]=f*p,t[7]=(n*s-u*e)*p,t[8]=(a*e-n*i)*p,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+t,-r*u,r*s,-r*(-u*a+s*o)+o+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*a+n*u,r[6]=e*o+n*l,r[1]=-n*i+e*s,r[4]=-n*a+e*u,r[7]=-n*o+e*l,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();Mt.prototype.isMatrix3=!0;var At=function(){function t(){Object(m.a)(this,t)}return Object(g.a)(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ot&&(Ot=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ot.width=t.width,Ot.height=t.height;var n=Ot.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ot}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}]),t}(),Pt=0,Lt=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:N,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:B,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:it;return Object(m.a)(this,n),t=e.call(this),Object.defineProperty(Object(d.a)(t),"id",{value:Pt++}),t.uuid=_t(),t.name="",t.image=r,t.mipmaps=[],t.mapping=i,t.wrapS=a,t.wrapT=o,t.magFilter=s,t.minFilter=u,t.anisotropy=h,t.format=l,t.internalFormat=null,t.type=c,t.offset=new Ct(0,0),t.repeat=new Ct(1,1),t.center=new Ct(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new Mt,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=f,t.version=0,t.onUpdate=null,t}return Object(g.a)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}},{key:"toJSON",value:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=_t()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Rt(r[a].image)):i.push(Rt(r[a]))}else i=Rt(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case M:t.x=t.x-Math.floor(t.x);break;case A:t.x=t.x<0?0:1;break;case P:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case M:t.y=t.y-Math.floor(t.y);break;case A:t.y=t.y<0?0:1;break;case P:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(dt);function Rt(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?At.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Lt.DEFAULT_IMAGE=void 0,Lt.DEFAULT_MAPPING=300,Lt.prototype.isTexture=!0;var jt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return Object(g.a)(t,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,r,i,a=.01,o=.1,s=t.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(d-v)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(d+v)<o&&Math.abs(u+f+m-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var g=(u+1)/2,y=(f+1)/2,_=(m+1)/2,b=(l+h)/4,x=(c+p)/4,w=(d+v)/4;return g>y&&g>_?g<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(g)),i=x/n):y>_?y<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(y)),i=w/r):_<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(_)),r=w/i),this.set(n,r,i,e),this}var S=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(c-p)/S,this.z=(h-l)/S,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),t}();jt.prototype.isVector4=!0;var It=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;return Object(m.a)(this,n),(a=e.call(this)).width=t,a.height=r,a.depth=1,a.scissor=new jt(0,0,t,r),a.scissorTest=!1,a.viewport=new jt(0,0,t,r),i=i||{},a.texture=new Lt(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.image={},a.texture.image.width=t,a.texture.image.height=r,a.texture.image.depth=1,a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:I,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a}return Object(g.a)(n,[{key:"setTexture",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(dt);It.prototype.isWebGLRenderTarget=!0,function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;return Object(m.a)(this,n),(a=e.call(this,t,r,i)).samples=4,a}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.samples=t.samples,this}}]),n}(It).prototype.isWebGLMultisampleRenderTarget=!0;var Dt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,t),this._x=e,this._y=n,this._z=r,this._w=i}return Object(g.a)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,a=t._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],r=e[4],i=e[8],a=e[1],o=e[5],s=e[9],u=e[2],l=e[6],c=e[10],h=n+o+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(bt(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,f=Math.sin(e*c)/l;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){this.copy(t).slerp(e,n)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}},{key:"slerpFlat",value:function(t,e,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return t[e+0]=s,t[e+1]=u,t[e+2]=l,void(t[e+3]=c);if(1===o)return t[e+0]=h,t[e+1]=f,t[e+2]=d,void(t[e+3]=p);if(c!==p||s!==h||u!==f||l!==d){var v=1-o,m=s*h+u*f+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,m*g);v=Math.sin(v*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(s=s*v+h*x,u=u*v+f*x,l=l*v+d*x,c=c*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return t[e]=o*d+l*c+s*f-u*h,t[e+1]=s*d+l*h+u*c-o*f,t[e+2]=u*d+l*f+o*h-s*c,t[e+3]=l*d-o*c-s*h-u*f,t}}]),t}();Dt.prototype.isQuaternion=!0;var Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(m.a)(this,t),this.x=e,this.y=n,this.z=r}return Object(g.a)(t,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(zt.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(zt.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*r-o*n,l=s*n+o*e-i*r,c=s*r+i*n-a*e,h=-i*e-a*n-o*r;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return Bt.copy(this).projectOnVector(t),this.sub(Bt)}},{key:"reflect",value:function(t){return this.sub(Bt.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(bt(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),t}();Nt.prototype.isVector3=!0;var Bt=new Nt,zt=new Dt,Ft=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt(-1/0,-1/0,-1/0);Object(m.a)(this,t),this.min=e,this.max=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Ut.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Nt),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Nt),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),qt.copy(e.boundingBox),qt.applyMatrix4(t.matrixWorld),this.union(qt));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Nt),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,Ut),Ut.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(Qt),Jt.subVectors(this.max,Qt),Ht.subVectors(t.a,Qt),Wt.subVectors(t.b,Qt),Gt.subVectors(t.c,Qt),Xt.subVectors(Wt,Ht),Yt.subVectors(Gt,Wt),Zt.subVectors(Ht,Gt);var e=[0,-Xt.z,Xt.y,0,-Yt.z,Yt.y,0,-Zt.z,Zt.y,Xt.z,0,-Xt.x,Yt.z,0,-Yt.x,Zt.z,0,-Zt.x,-Xt.y,Xt.x,0,-Yt.y,Yt.x,0,-Zt.y,Zt.x,0];return!!te(e,Ht,Wt,Gt,Jt)&&(!!te(e=[1,0,0,0,1,0,0,0,1],Ht,Wt,Gt,Jt)&&(Kt.crossVectors(Xt,Yt),te(e=[Kt.x,Kt.y,Kt.z],Ht,Wt,Gt,Jt)))}},{key:"clampPoint",value:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Nt),e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Ut.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Ut).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(Vt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Vt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Vt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Vt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Vt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Vt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Vt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Vt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Vt)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();Ft.prototype.isBox3=!0;var Vt=[new Nt,new Nt,new Nt,new Nt,new Nt,new Nt,new Nt,new Nt],Ut=new Nt,qt=new Ft,Ht=new Nt,Wt=new Nt,Gt=new Nt,Xt=new Nt,Yt=new Nt,Zt=new Nt,Qt=new Nt,Jt=new Nt,Kt=new Nt,$t=new Nt;function te(t,e,n,r,i){for(var a=0,o=t.length-3;a<=o;a+=3){$t.fromArray(t,a);var s=i.x*Math.abs($t.x)+i.y*Math.abs($t.y)+i.z*Math.abs($t.z),u=e.dot($t),l=n.dot($t),c=r.dot($t);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var ee=new Ft,ne=new Nt,re=new Nt,ie=new Nt,ae=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(m.a)(this,t),this.center=e,this.radius=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):ee.setFromPoints(t).getCenter(n);for(var r=0,i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Nt),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ft),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){ie.subVectors(t,this.center);var e=ie.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(ie.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(t){return re.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ne.copy(t.center).add(re)),this.expandByPoint(ne.copy(t.center).sub(re)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),oe=new Nt,se=new Nt,ue=new Nt,le=new Nt,ce=new Nt,he=new Nt,fe=new Nt,de=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt(0,0,-1);Object(m.a)(this,t),this.origin=e,this.direction=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Nt),e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,oe)),this}},{key:"closestPointToPoint",value:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Nt),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=oe.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(oe.copy(this.direction).multiplyScalar(e).add(this.origin),oe.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,r){se.copy(t).add(e).multiplyScalar(.5),ue.copy(e).sub(t).normalize(),le.copy(this.origin).sub(se);var i,a,o,s,u=.5*t.distanceTo(e),l=-this.direction.dot(ue),c=le.dot(this.direction),h=-le.dot(ue),f=le.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-h,s=u*d,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(ue).multiplyScalar(a).add(se),o}},{key:"intersectSphere",value:function(t,e){oe.subVectors(t.center,this.origin);var n=oe.dot(this.direction),r=oe.dot(oe)-n*n,i=t.radius*t.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,a=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,a=(t.min.y-h.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,oe)}},{key:"intersectTriangle",value:function(t,e,n,r,i){ce.subVectors(e,t),he.subVectors(n,t),fe.crossVectors(ce,he);var a,o=this.direction.dot(fe);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}le.subVectors(this.origin,t);var s=a*this.direction.dot(he.crossVectors(le,he));if(s<0)return null;var u=a*this.direction.dot(ce.cross(le));if(u<0)return null;if(s+u>o)return null;var l=-a*le.dot(fe);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),pe=function(){function t(){Object(m.a)(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(g.a)(t,[{key:"set",value:function(t,e,n,r,i,a,o,s,u,l,c,h,f,d,p,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,r=1/ve.setFromMatrixColumn(t,0).length(),i=1/ve.setFromMatrixColumn(t,1).length(),a=1/ve.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-o*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=a*s}else if("YXZ"===t.order){var v=s*l,m=s*c,g=u*l,y=u*c;e[0]=v+y*o,e[4]=g*o-m,e[8]=a*u,e[1]=a*c,e[5]=a*l,e[9]=-o,e[2]=m*o-g,e[6]=y+v*o,e[10]=a*s}else if("ZXY"===t.order){var _=s*l,b=s*c,x=u*l,w=u*c;e[0]=_-w*o,e[4]=-a*c,e[8]=x+b*o,e[1]=b+x*o,e[5]=a*l,e[9]=w-_*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var S=a*l,k=a*c,T=o*l,E=o*c;e[0]=s*l,e[4]=T*u-k,e[8]=S*u+E,e[1]=s*c,e[5]=E*u+S,e[9]=k*u-T,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var C=a*s,O=a*u,M=o*s,A=o*u;e[0]=s*l,e[4]=A-C*c,e[8]=M*c+O,e[1]=c,e[5]=a*l,e[9]=-o*l,e[2]=-u*l,e[6]=O*c+M,e[10]=C-A*c}else if("XZY"===t.order){var P=a*s,L=a*u,R=o*s,j=o*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=P*c+j,e[5]=a*l,e[9]=L*c-R,e[2]=R*c-L,e[6]=o*l,e[10]=j*c+P}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(ge,t,ye)}},{key:"lookAt",value:function(t,e,n){var r=this.elements;return xe.subVectors(t,e),0===xe.lengthSq()&&(xe.z=1),xe.normalize(),_e.crossVectors(n,xe),0===_e.lengthSq()&&(1===Math.abs(n.z)?xe.x+=1e-4:xe.z+=1e-4,xe.normalize(),_e.crossVectors(n,xe)),_e.normalize(),be.crossVectors(xe,_e),r[0]=_e.x,r[4]=be.x,r[8]=xe.x,r[1]=_e.y,r[5]=be.y,r[9]=xe.y,r[2]=_e.z,r[6]=be.z,r[10]=xe.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],S=r[8],k=r[12],T=r[1],E=r[5],C=r[9],O=r[13],M=r[2],A=r[6],P=r[10],L=r[14],R=r[3],j=r[7],I=r[11],D=r[15];return i[0]=a*x+o*T+s*M+u*R,i[4]=a*w+o*E+s*A+u*j,i[8]=a*S+o*C+s*P+u*I,i[12]=a*k+o*O+s*L+u*D,i[1]=l*x+c*T+h*M+f*R,i[5]=l*w+c*E+h*A+f*j,i[9]=l*S+c*C+h*P+f*I,i[13]=l*k+c*O+h*L+f*D,i[2]=d*x+p*T+v*M+m*R,i[6]=d*w+p*E+v*A+m*j,i[10]=d*S+p*C+v*P+m*I,i[14]=d*k+p*O+v*L+m*D,i[3]=g*x+y*T+_*M+b*R,i[7]=g*w+y*E+_*A+b*j,i[11]=g*S+y*C+_*P+b*I,i[15]=g*k+y*O+_*L+b*D,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*a*h-r*a*f+r*u*l-i*s*l)+t[11]*(+e*u*c-e*o*f-i*a*c+n*a*f+i*o*l-n*u*l)+t[15]*(-r*o*l-e*s*c+e*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],v=t[14],m=t[15],g=c*v*u-p*h*u+p*s*f-o*v*f-c*s*m+o*h*m,y=d*h*u-l*v*u-d*s*f+a*v*f+l*s*m-a*h*m,_=l*p*u-d*c*u+d*o*f-a*p*f-l*o*m+a*c*m,b=d*c*s-l*p*s-d*o*h+a*p*h+l*o*v-a*c*v,x=e*g+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return t[0]=g*w,t[1]=(p*h*i-c*v*i-p*r*f+n*v*f+c*r*m-n*h*m)*w,t[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,t[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*f-n*s*f)*w,t[4]=y*w,t[5]=(l*v*i-d*h*i+d*r*f-e*v*f-l*r*m+e*h*m)*w,t[6]=(d*s*i-a*v*i-d*r*u+e*v*u+a*r*m-e*s*m)*w,t[7]=(a*h*i-l*s*i+l*r*u-e*h*u-a*r*f+e*s*f)*w,t[8]=_*w,t[9]=(d*c*i-l*p*i-d*n*f+e*p*f+l*n*m-e*c*m)*w,t[10]=(a*p*i-d*o*i+d*n*u-e*p*u-a*n*m+e*o*m)*w,t[11]=(l*o*i-a*c*i-l*n*u+e*c*u+a*n*f-e*o*f)*w,t[12]=b*w,t[13]=(l*p*r-d*c*r+d*n*h-e*p*h-l*n*v+e*c*v)*w,t[14]=(d*o*r-a*p*r-d*n*s+e*p*s+a*n*v-e*o*v)*w,t[15]=(a*c*r-l*o*r+l*n*s-e*c*s-a*n*h+e*o*h)*w,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var r=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,v=a*c,m=o*c,g=s*u,y=s*l,_=s*c,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+m))*b,r[1]=(f+_)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(f-_)*x,r[5]=(1-(h+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,n){var r=this.elements,i=ve.set(r[0],r[1],r[2]).length(),a=ve.set(r[4],r[5],r[6]).length(),o=ve.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],me.copy(this);var s=1/i,u=1/a,l=1/o;return me.elements[0]*=s,me.elements[1]*=s,me.elements[2]*=s,me.elements[4]*=u,me.elements[5]*=u,me.elements[6]*=u,me.elements[8]*=l,me.elements[9]*=l,me.elements[10]*=l,e.setFromRotationMatrix(me),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(t,e,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),u=1/(n-r),l=1/(a-i),c=(e+t)*s,h=(n+r)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();pe.prototype.isMatrix4=!0;var ve=new Nt,me=new pe,ge=new Nt(0,0,0),ye=new Nt(1,1,1),_e=new Nt,be=new Nt,xe=new Nt,we=new pe,Se=new Dt,ke=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;Object(m.a)(this,t),this._x=e,this._y=n,this._z=r,this._order=i}return Object(g.a)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t,e,n){var r=t.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(bt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-bt(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(bt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-bt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(bt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-bt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,n){return we.makeRotationFromQuaternion(t),this.setFromRotationMatrix(we,e,n)}},{key:"setFromVector3",value:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)}},{key:"reorder",value:function(t){return Se.setFromEuler(this),this.setFromQuaternion(Se,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new Nt(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}]),t}();ke.prototype.isEuler=!0,ke.DefaultOrder="XYZ",ke.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Te=function(){function t(){Object(m.a)(this,t),this.mask=1}return Object(g.a)(t,[{key:"set",value:function(t){this.mask=1<<t|0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!==(this.mask&t.mask)}}]),t}(),Ee=0,Ce=new Nt,Oe=new Dt,Me=new pe,Ae=new Nt,Pe=new Nt,Le=new Nt,Re=new Dt,je=new Nt(1,0,0),Ie=new Nt(0,1,0),De=new Nt(0,0,1),Ne={type:"added"},Be={type:"removed"},ze=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;Object(m.a)(this,n),t=e.call(this),Object.defineProperty(Object(d.a)(t),"id",{value:Ee++}),t.uuid=_t(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var r=new Nt,i=new ke,a=new Dt,o=new Nt(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(Object(d.a)(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new pe},normalMatrix:{value:new Mt}}),t.matrix=new pe,t.matrixWorld=new pe,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new Te,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return Object(g.a)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return Oe.setFromAxisAngle(t,e),this.quaternion.multiply(Oe),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Oe.setFromAxisAngle(t,e),this.quaternion.premultiply(Oe),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(je,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(Ie,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(De,t)}},{key:"translateOnAxis",value:function(t,e){return Ce.copy(t).applyQuaternion(this.quaternion),this.position.add(Ce.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(je,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(Ie,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(De,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(Me.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?Ae.copy(t):Ae.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Pe.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Me.lookAt(Pe,Ae,this.up):Me.lookAt(Ae,Pe,this.up),this.quaternion.setFromRotationMatrix(Me),r&&(Me.extractRotation(r.matrixWorld),Oe.setFromRotationMatrix(Me),this.quaternion.premultiply(Oe.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Be)),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(Be)}return this.children.length=0,this}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),Me.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Me.multiply(t.parent.matrixWorld)),t.applyMatrix4(Me),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Nt),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Dt),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pe,t,Le),t}},{key:"getWorldScale",value:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Nt),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pe,Re,t),t}},{key:"getWorldDirection",value:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Nt),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(t.shapes,l)}else i(t.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(i(t.materials,this.material[h]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(t.animations,v))}}if(e){var m=S(t.geometries),g=S(t.materials),y=S(t.textures),_=S(t.images),b=S(t.shapes),x=S(t.skeletons),w=S(t.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w)}return n.object=r,n;function S(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}]),n}(dt);ze.DefaultUp=new Nt(0,1,0),ze.DefaultMatrixAutoUpdate=!0,ze.prototype.isObject3D=!0;var Fe=new Nt,Ve=new Nt,Ue=new Mt,qe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,t),this.normal=e,this.constant=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,n){var r=Fe.subVectors(n,e).cross(Ve.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Nt),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Nt);var n=t.delta(Fe),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Nt),t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||Ue.getNormalMatrix(t),r=this.coplanarPoint(Fe).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();qe.prototype.isPlane=!0;var He=new Nt,We=new Nt,Ge=new Nt,Xe=new Nt,Ye=new Nt,Ze=new Nt,Qe=new Nt,Je=new Nt,Ke=new Nt,$e=new Nt,tn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nt;Object(m.a)(this,t),this.a=e,this.b=n,this.c=r}return Object(g.a)(t,[{key:"set",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return He.subVectors(this.c,this.b),We.subVectors(this.a,this.b),.5*He.cross(We).length()}},{key:"getMidpoint",value:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Nt),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new qe),t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,r,i,a){return t.getUV(e,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Nt);var n,r,i=this.a,a=this.b,o=this.c;Ye.subVectors(a,i),Ze.subVectors(o,i),Je.subVectors(t,i);var s=Ye.dot(Je),u=Ze.dot(Je);if(s<=0&&u<=0)return e.copy(i);Ke.subVectors(t,a);var l=Ye.dot(Ke),c=Ze.dot(Ke);if(l>=0&&c<=l)return e.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(Ye,n);$e.subVectors(t,o);var f=Ye.dot($e),d=Ze.dot($e);if(d>=0&&f<=d)return e.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),e.copy(i).addScaledVector(Ze,r);var v=l*d-f*c;if(v<=0&&c-l>=0&&f-d>=0)return Qe.subVectors(o,a),r=(c-l)/(c-l+(f-d)),e.copy(a).addScaledVector(Qe,r);var m=1/(v+p+h);return n=p*m,r=h*m,e.copy(i).addScaledVector(Ye,n).addScaledVector(Ze,r)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Nt),r.subVectors(n,e),He.subVectors(t,e),r.cross(He);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,n,r,i){He.subVectors(r,e),We.subVectors(n,e),Ge.subVectors(t,e);var a=He.dot(He),o=He.dot(We),s=He.dot(Ge),u=We.dot(We),l=We.dot(Ge),c=a*u-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Nt),0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-o*l)*h,d=(a*l-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(t,e,n,r){return this.getBarycoord(t,e,n,r,Xe),Xe.x>=0&&Xe.y>=0&&Xe.x+Xe.y<=1}},{key:"getUV",value:function(t,e,n,r,i,a,o,s){return this.getBarycoord(t,e,n,r,Xe),s.set(0,0),s.addScaledVector(i,Xe.x),s.addScaledVector(a,Xe.y),s.addScaledVector(o,Xe.z),s}},{key:"isFrontFacing",value:function(t,e,n,r){return He.subVectors(n,e),We.subVectors(t,e),He.cross(We).dot(r)<0}}]),t}(),en=0;function nn(){Object.defineProperty(this,"id",{value:en++}),this.uuid=_t(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=w,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=k,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=lt,this.stencilZFail=lt,this.stencilZPass=lt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}nn.prototype=Object.assign(Object.create(dt.prototype),{constructor:nn,isMaterial:!0,onBuild:function(){},onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==w&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),a=r(t.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(nn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},an={h:0,s:0,l:0},on={h:0,s:0,l:0};function sn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function un(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ln(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var cn=function(){function t(e,n,r){return Object(m.a)(this,t),void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return Object(g.a)(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:"setHSL",value:function(t,e,n){if(t=xt(t,1),e=bt(e,0,1),n=bt(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=sn(i,r,t+1/3),this.g=sn(i,r,t),this.b=sn(i,r,t-1/3)}return this}},{key:"setStyle",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}},{key:"setColorName",value:function(t){var e=rn[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copyGammaToLinear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}},{key:"copyLinearToGamma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}},{key:"convertGammaToLinear",value:function(t){return this.copyGammaToLinear(this,t),this}},{key:"convertLinearToGamma",value:function(t){return this.copyLinearToGamma(this,t),this}},{key:"copySRGBToLinear",value:function(t){return this.r=un(t.r),this.g=un(t.g),this.b=un(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=ln(t.r),this.g=ln(t.g),this.b=ln(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)e=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:e=(i-a)/l+(i<a?6:0);break;case i:e=(a-r)/l+2;break;case a:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,n){return this.getHSL(an),an.h+=t,an.s+=e,an.l+=n,this.setHSL(an.h,an.s,an.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(an),t.getHSL(on);var n=wt(an.h,on.h,e),r=wt(an.s,on.s,e),i=wt(an.l,on.l,e);return this.setHSL(n,r,i),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();cn.NAMES=rn,cn.prototype.isColor=!0,cn.prototype.r=1,cn.prototype.g=1,cn.prototype.b=1;var hn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshBasicMaterial",r.color=new cn(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.skinning=!1,r.morphTargets=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}}]),n}(nn);hn.prototype.isMeshBasicMaterial=!0;var fn=new Nt,dn=new Ct,pn=function(){function t(e,n,r){if(Object(m.a)(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===r,this.usage=ct,this.updateRange={offset:0,count:-1},this.version=0,this.onUploadCallback=function(){}}return Object(g.a)(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new cn),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Ct),e[n++]=a.x,e[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Nt),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new jt),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)dn.fromBufferAttribute(this,e),dn.applyMatrix3(t),this.setXY(e,dn.x,dn.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)fn.fromBufferAttribute(this,r),fn.applyMatrix3(t),this.setXYZ(r,fn.x,fn.y,fn.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)fn.x=this.getX(e),fn.y=this.getY(e),fn.z=this.getZ(e),fn.applyMatrix4(t),this.setXYZ(e,fn.x,fn.y,fn.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)fn.x=this.getX(e),fn.y=this.getY(e),fn.z=this.getZ(e),fn.applyNormalMatrix(t),this.setXYZ(e,fn.x,fn.y,fn.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)fn.x=this.getX(e),fn.y=this.getY(e),fn.z=this.getZ(e),fn.transformDirection(t),this.setXYZ(e,fn.x,fn.y,fn.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==ct&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}]),t}();pn.prototype.isBufferAttribute=!0;var vn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){return Object(m.a)(this,n),e.call(this,new Uint16Array(t),r,i)}return n}(pn),mn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){return Object(m.a)(this,n),e.call(this,new Uint32Array(t),r,i)}return n}(pn);(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){return Object(m.a)(this,n),e.call(this,new Uint16Array(t),r,i)}return n})(pn).prototype.isFloat16BufferAttribute=!0;var gn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){return Object(m.a)(this,n),e.call(this,new Float32Array(t),r,i)}return n}(pn);function yn(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var _n=0,bn=new pe,xn=new ze,wn=new Nt,Sn=new Ft,kn=new Ft,Tn=new Nt,En=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),t=e.call(this),Object.defineProperty(Object(d.a)(t),"id",{value:_n++}),t.uuid=_t(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return Object(g.a)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(yn(t)>65535?mn:vn)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Mt).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"rotateX",value:function(t){return bn.makeRotationX(t),this.applyMatrix4(bn),this}},{key:"rotateY",value:function(t){return bn.makeRotationY(t),this.applyMatrix4(bn),this}},{key:"rotateZ",value:function(t){return bn.makeRotationZ(t),this.applyMatrix4(bn),this}},{key:"translate",value:function(t,e,n){return bn.makeTranslation(t,e,n),this.applyMatrix4(bn),this}},{key:"scale",value:function(t,e,n){return bn.makeScale(t,e,n),this.applyMatrix4(bn),this}},{key:"lookAt",value:function(t){return xn.lookAt(t),xn.updateMatrix(),this.applyMatrix4(xn.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(wn).negate(),this.translate(wn.x,wn.y,wn.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new gn(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ft);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Nt(-1/0,-1/0,-1/0),new Nt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Sn.setFromBufferAttribute(i),this.morphTargetsRelative?(Tn.addVectors(this.boundingBox.min,Sn.min),this.boundingBox.expandByPoint(Tn),Tn.addVectors(this.boundingBox.max,Sn.max),this.boundingBox.expandByPoint(Tn)):(this.boundingBox.expandByPoint(Sn.min),this.boundingBox.expandByPoint(Sn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new ae);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Nt,1/0);if(t){var n=this.boundingSphere.center;if(Sn.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var a=e[r];kn.setFromBufferAttribute(a),this.morphTargetsRelative?(Tn.addVectors(Sn.min,kn.min),Sn.expandByPoint(Tn),Tn.addVectors(Sn.max,kn.max),Sn.expandByPoint(Tn)):(Sn.expandByPoint(kn.min),Sn.expandByPoint(kn.max))}Sn.getCenter(n);for(var o=0,s=0,u=t.count;s<u;s++)Tn.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(Tn));if(e)for(var l=0,c=e.length;l<c;l++)for(var h=e[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)Tn.fromBufferAttribute(h,d),f&&(wn.fromBufferAttribute(t,d),Tn.add(wn)),o=Math.max(o,n.distanceToSquared(Tn));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,r=e.position.array,i=e.normal.array,a=e.uv.array,o=r.length/3;void 0===e.tangent&&this.setAttribute("tangent",new pn(new Float32Array(4*o),4));for(var s=e.tangent.array,u=[],l=[],c=0;c<o;c++)u[c]=new Nt,l[c]=new Nt;var h=new Nt,f=new Nt,d=new Nt,p=new Ct,v=new Ct,m=new Ct,g=new Nt,y=new Nt,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var b=0,x=_.length;b<x;++b)for(var w=_[b],S=w.start,k=S,T=S+w.count;k<T;k+=3)D(n[k+0],n[k+1],n[k+2]);for(var E=new Nt,C=new Nt,O=new Nt,M=new Nt,A=0,P=_.length;A<P;++A)for(var L=_[A],R=L.start,j=R,I=R+L.count;j<I;j+=3)N(n[j+0]),N(n[j+1]),N(n[j+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function D(t,e,n){h.fromArray(r,3*t),f.fromArray(r,3*e),d.fromArray(r,3*n),p.fromArray(a,2*t),v.fromArray(a,2*e),m.fromArray(a,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[t].add(g),u[e].add(g),u[n].add(g),l[t].add(y),l[e].add(y),l[n].add(y))}function N(t){O.fromArray(i,3*t),M.copy(O);var e=u[t];E.copy(e),E.sub(O.multiplyScalar(O.dot(e))).normalize(),C.crossVectors(M,e);var n=C.dot(l[t])<0?-1:1;s[4*t]=E.x,s[4*t+1]=E.y,s[4*t+2]=E.z,s[4*t+3]=n}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new pn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Nt,o=new Nt,s=new Nt,u=new Nt,l=new Nt,c=new Nt,h=new Nt,f=new Nt;if(t)for(var d=0,p=t.count;d<p;d+=3){var v=t.getX(d+0),m=t.getX(d+1),g=t.getX(d+2);a.fromBufferAttribute(e,v),o.fromBufferAttribute(e,m),s.fromBufferAttribute(e,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,_=e.count;y<_;y+=3)a.fromBufferAttribute(e,y+0),o.fromBufferAttribute(e,y+1),s.fromBufferAttribute(e,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,a=t.attributes[r],o=a.array,s=a.itemSize*e,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Tn.fromBufferAttribute(t,e),Tn.normalize(),t.setXYZ(e,Tn.x,Tn.y,Tn.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=t.normalized,a=new n.constructor(e.length*r),o=0,s=0,u=0,l=e.length;u<l;u++){o=e[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new pn(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=t(i[a],r);e.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,f=c.length;h<f;h++){var d=t(c[h],r);l.push(d)}e.morphAttributes[u]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];e.addGroup(g.start,g.count,g.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];t.data.attributes[a]=o.toJSON(t.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(t.data))}h.length>0&&(s[l]=h,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(t.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(t.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),t}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var r=t.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(e))}var o=t.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(e));this.morphAttributes[s]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var f=t.groups,d=0,p=f.length;d<p;d++){var v=f[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(dt);En.prototype.isBufferGeometry=!0;var Cn=new pe,On=new de,Mn=new ae,An=new Nt,Pn=new Nt,Ln=new Nt,Rn=new Nt,jn=new Nt,In=new Nt,Dn=new Nt,Nn=new Nt,Bn=new Nt,zn=new Ct,Fn=new Ct,Vn=new Ct,Un=new Nt,qn=new Nt,Hn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new En,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hn;return Object(m.a)(this,n),(t=e.call(this)).type="Mesh",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Mn.copy(r.boundingSphere),Mn.applyMatrix4(a),!1!==t.ray.intersectsSphere(Mn)&&(Cn.copy(a).invert(),On.copy(t.ray).applyMatrix4(Cn),null===r.boundingBox||!1!==On.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),_=Math.min(m.start+m.count,d.start+d.count);y<_;y+=3){var b=o.getX(y),x=o.getX(y+1),w=o.getX(y+2);(n=Wn(this,g,t,On,s,u,l,c,h,b,x,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,e.push(n))}else for(var S=Math.max(0,d.start),k=Math.min(o.count,d.start+d.count);S<k;S+=3){var T=o.getX(S),E=o.getX(S+1),C=o.getX(S+2);(n=Wn(this,i,t,On,s,u,l,c,h,T,E,C))&&(n.faceIndex=Math.floor(S/3),e.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var O=0,M=f.length;O<M;O++)for(var A=f[O],P=i[A.materialIndex],L=Math.max(A.start,d.start),R=Math.min(A.start+A.count,d.start+d.count);L<R;L+=3){(n=Wn(this,P,t,On,s,u,l,c,h,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),n.face.materialIndex=A.materialIndex,e.push(n))}else for(var j=Math.max(0,d.start),I=Math.min(s.count,d.start+d.count);j<I;j+=3){(n=Wn(this,i,t,On,s,u,l,c,h,j,j+1,j+2))&&(n.faceIndex=Math.floor(j/3),e.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(ze);function Wn(t,e,n,r,i,a,o,s,u,l,c,h){An.fromBufferAttribute(i,l),Pn.fromBufferAttribute(i,c),Ln.fromBufferAttribute(i,h);var f=t.morphTargetInfluences;if(e.morphTargets&&a&&f){Dn.set(0,0,0),Nn.set(0,0,0),Bn.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=f[d],m=a[d];0!==v&&(Rn.fromBufferAttribute(m,l),jn.fromBufferAttribute(m,c),In.fromBufferAttribute(m,h),o?(Dn.addScaledVector(Rn,v),Nn.addScaledVector(jn,v),Bn.addScaledVector(In,v)):(Dn.addScaledVector(Rn.sub(An),v),Nn.addScaledVector(jn.sub(Pn),v),Bn.addScaledVector(In.sub(Ln),v)))}An.add(Dn),Pn.add(Nn),Ln.add(Bn)}t.isSkinnedMesh&&e.skinning&&(t.boneTransform(l,An),t.boneTransform(c,Pn),t.boneTransform(h,Ln));var g=function(t,e,n,r,i,a,o,s){if(null===(1===e.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,e.side!==S,s)))return null;qn.copy(s),qn.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(qn);return u<n.near||u>n.far?null:{distance:u,point:qn.clone(),object:t}}(t,e,n,r,An,Pn,Ln,Un);if(g){s&&(zn.fromBufferAttribute(s,l),Fn.fromBufferAttribute(s,c),Vn.fromBufferAttribute(s,h),g.uv=tn.getUV(Un,An,Pn,Ln,zn,Fn,Vn,new Ct)),u&&(zn.fromBufferAttribute(u,l),Fn.fromBufferAttribute(u,c),Vn.fromBufferAttribute(u,h),g.uv2=tn.getUV(Un,An,Pn,Ln,zn,Fn,Vn,new Ct));var y={a:l,b:c,c:h,normal:new Nt,materialIndex:0};tn.getNormal(An,Pn,Ln,y.normal),g.face=y}return g}Hn.prototype.isMesh=!0;var Gn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(m.a)(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=Object(d.a)(t);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],f=[],p=[],v=0,g=0;function y(t,e,n,r,i,a,o,s,u,d,m){for(var y=a/u,_=o/d,b=a/2,x=o/2,w=s/2,S=u+1,k=d+1,T=0,E=0,C=new Nt,O=0;O<k;O++)for(var M=O*_-x,A=0;A<S;A++){var P=A*y-b;C[t]=P*r,C[e]=M*i,C[n]=w,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),p.push(A/u),p.push(1-O/d),T+=1}for(var L=0;L<d;L++)for(var R=0;R<u;R++){var j=v+R+S*L,I=v+R+S*(L+1),D=v+(R+1)+S*(L+1),N=v+(R+1)+S*L;c.push(j,I,N),c.push(I,D,N),E+=6}l.addGroup(g,E,m),g+=E,v+=T}return y("z","y","x",-1,-1,a,i,r,u,s,0),y("z","y","x",1,-1,a,i,-r,u,s,1),y("x","z","y",1,1,r,a,i,o,u,2),y("x","z","y",1,-1,r,a,-i,o,u,3),y("x","y","z",1,-1,r,i,a,o,s,4),y("x","y","z",-1,-1,r,i,-a,o,s,5),t.setIndex(c),t.setAttribute("position",new gn(h,3)),t.setAttribute("normal",new gn(f,3)),t.setAttribute("uv",new gn(p,2)),t}return n}(En);function Xn(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Yn(t){for(var e={},n=0;n<t.length;n++){var r=Xn(t[n]);for(var i in r)e[i]=r[i]}return e}var Zn={clone:Xn,merge:Yn},Qn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(t)),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Xn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);for(var r in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(e.extensions=a),e}}]),n}(nn);Qn.prototype.isShaderMaterial=!0;var Jn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="Camera",t.matrixWorldInverse=new pe,t.projectionMatrix=new pe,t.projectionMatrixInverse=new pe,t}return Object(g.a)(n,[{key:"copy",value:function(t,e){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Nt),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){Object(h.a)(Object(f.a)(n.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(ze);Jn.prototype.isCamera=!0;var Kn=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Object(m.a)(this,n),(t=e.call(this)).type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=a,t.far=o,t.focus=10,t.aspect=i,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return Object(g.a)(n,[{key:"copy",value:function(t,e){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*yt*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*gt*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*yt*Math.atan(Math.tan(.5*gt*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*gt*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,e-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),n}(Jn);Kn.prototype.isPerspectiveCamera=!0;var $n=90,tr=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;if(Object(m.a)(this,n),(a=e.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),Object(c.a)(a);a.renderTarget=i;var o=new Kn($n,1,t,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Nt(1,0,0)),a.add(o);var s=new Kn($n,1,t,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Nt(-1,0,0)),a.add(s);var u=new Kn($n,1,t,r);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new Nt(0,1,0)),a.add(u);var l=new Kn($n,1,t,r);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(new Nt(0,-1,0)),a.add(l);var h=new Kn($n,1,t,r);h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Nt(0,0,1)),a.add(h);var f=new Kn($n,1,t,r);return f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new Nt(0,0,-1)),a.add(f),a}return Object(g.a)(n,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=Object(l.a)(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=t.xr.enabled,f=t.getRenderTarget();t.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,a),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(f),t.xr.enabled=h}}]),n}(ze),er=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c,h){var f;return Object(m.a)(this,n),t=void 0!==t?t:[],r=void 0!==r?r:T,u=void 0!==u?u:H,(f=e.call(this,t,r,i,a,o,s,u,l,c,h))._needsFlipEnvMap=!0,f.flipY=!1,f}return Object(g.a)(n,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),n}(Lt);er.prototype.isCubeTexture=!0;var nr=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;return Object(m.a)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),a=e.call(this,t,t,r),r=r||{},a.texture=new er(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:I,a.texture._needsFlipEnvMap=!1,a}return Object(g.a)(n,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=W,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Gn(5,5,5),o=new Qn({name:"CubemapFromEquirect",uniforms:Xn(n),vertexShader:r,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=e;var s=new Hn(a,o),u=e.minFilter;return e.minFilter===N&&(e.minFilter=I),new tr(1,10,this).update(t,s),e.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(t,e,n,r){for(var i=t.getRenderTarget(),a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,r);t.setRenderTarget(i)}}]),n}(It);nr.prototype.isWebGLCubeRenderTarget=!0;var rr=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c,h,f,d){var p;return Object(m.a)(this,n),(p=e.call(this,null,s,u,l,c,h,a,o,f,d)).image={data:t||null,width:r||1,height:i||1},p.magFilter=void 0!==c?c:L,p.minFilter=void 0!==h?h:L,p.generateMipmaps=!1,p.flipY=!1,p.unpackAlignment=1,p.needsUpdate=!0,p}return n}(Lt);rr.prototype.isDataTexture=!0;var ir=new ae,ar=new Nt,or=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qe,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new qe,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new qe,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new qe,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new qe;Object(m.a)(this,t),this.planes=[e,n,r,i,a,o]}return Object(g.a)(t,[{key:"set",value:function(t,e,n,r,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return e[0].setComponents(o-r,c-s,p-h,y-v).normalize(),e[1].setComponents(o+r,c+s,p+h,y+v).normalize(),e[2].setComponents(o+i,c+u,p+f,y+m).normalize(),e[3].setComponents(o-i,c-u,p-f,y-m).normalize(),e[4].setComponents(o-a,c-l,p-d,y-g).normalize(),e[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ir.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ir)}},{key:"intersectsSprite",value:function(t){return ir.center.set(0,0,0),ir.radius=.7071067811865476,ir.applyMatrix4(t.matrixWorld),this.intersectsSphere(ir)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(ar.x=r.normal.x>0?t.max.x:t.min.x,ar.y=r.normal.y>0?t.max.y:t.min.y,ar.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ar)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();function sr(){var t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ur(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){var a=r.get(e);(!a||a.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var o=r.get(e);void 0===o?r.set(e,function(e,r){var i=e.array,a=e.usage,o=t.createBuffer();t.bindBuffer(r,o),t.bufferData(r,i,a),e.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){var a=r.array,o=r.updateRange;t.bindBuffer(i,e),-1===o.count?t.bufferSubData(i,0,a):(n?t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,e,i),o.version=e.version)}}}}var lr=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),h=l+1,f=c+1,d=r/l,p=i/c,v=[],g=[],y=[],_=[],b=0;b<f;b++)for(var x=b*p-u,w=0;w<h;w++){var S=w*d-s;g.push(S,-x,0),y.push(0,0,1),_.push(w/l),_.push(1-b/c)}for(var k=0;k<c;k++)for(var T=0;T<l;T++){var E=T+h*k,C=T+h*(k+1),O=T+1+h*(k+1),M=T+1+h*k;v.push(E,C,M),v.push(C,O,M)}return t.setIndex(v),t.setAttribute("position",new gn(g,3)),t.setAttribute("normal",new gn(y,3)),t.setAttribute("uv",new gn(_,2)),t}return n}(En),cr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},hr={common:{diffuse:{value:new cn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mt},uv2Transform:{value:new Mt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new cn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mt}},sprite:{diffuse:{value:new cn(15658734)},opacity:{value:1},center:{value:new Ct(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mt}}},fr={basic:{uniforms:Yn([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:Yn([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.fog,hr.lights,{emissive:{value:new cn(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:Yn([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.fog,hr.lights,{emissive:{value:new cn(0)},specular:{value:new cn(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:Yn([hr.common,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.roughnessmap,hr.metalnessmap,hr.fog,hr.lights,{emissive:{value:new cn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},toon:{uniforms:Yn([hr.common,hr.aomap,hr.lightmap,hr.emissivemap,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.gradientmap,hr.fog,hr.lights,{emissive:{value:new cn(0)}}]),vertexShader:cr.meshtoon_vert,fragmentShader:cr.meshtoon_frag},matcap:{uniforms:Yn([hr.common,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:Yn([hr.points,hr.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:Yn([hr.common,hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:Yn([hr.common,hr.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:Yn([hr.common,hr.bumpmap,hr.normalmap,hr.displacementmap,{opacity:{value:1}}]),vertexShader:cr.normal_vert,fragmentShader:cr.normal_frag},sprite:{uniforms:Yn([hr.sprite,hr.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new Mt},t2D:{value:null}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},cube:{uniforms:Yn([hr.envmap,{opacity:{value:1}}]),vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:Yn([hr.common,hr.displacementmap,{referencePosition:{value:new Nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:Yn([hr.lights,hr.fog,{color:{value:new cn(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};function dr(t,e,n,r,i){var a,o,s=new cn(0),u=0,l=null,c=0,h=null;function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return s},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),f(s,u=e)},getClearAlpha:function(){return u},setClearAlpha:function(t){f(s,u=t)},render:function(n,i,d,p){var v=!0===i.isScene?i.background:null;v&&v.isTexture&&(v=e.get(v));var m=t.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?f(s,u):v&&v.isColor&&(f(v,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.mapping===C)?(void 0===o&&((o=new Hn(new Gn(1,1,1),new Qn({name:"BackgroundCubeMaterial",uniforms:Xn(fr.cube.uniforms),vertexShader:fr.cube.vertexShader,fragmentShader:fr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=v,o.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,l===v&&c===v.version&&h===t.toneMapping||(o.material.needsUpdate=!0,l=v,c=v.version,h=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):v&&v.isTexture&&(void 0===a&&((a=new Hn(new lr(2,2),new Qn({name:"BackgroundMaterial",uniforms:Xn(fr.background.uniforms),vertexShader:fr.background.vertexShader,fragmentShader:fr.background.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),a.material.uniforms.uvTransform.value.copy(v.matrix),l===v&&c===v.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=v,c=v.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function pr(t,e,n,r){var i=t.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),l=u;function c(e){return r.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function f(t){for(var e=[],n=[],r=[],a=0;a<i;a++)e[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function d(){for(var t=l.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function p(t){v(t,0)}function v(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var e=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function g(e,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,a,o,s):t.vertexAttribIPointer(e,n,i,o,s)}function y(){_(),l!==u&&c((l=u).object)}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,_){var b=!1;if(o){var x=function(e,n,i){var o=!0===i.wireframe,u=s[e.id];void 0===u&&(u={},s[e.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=f(r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(y,h,u);l!==x&&c((l=x).object),(b=function(t,e){var n=l.attributes,r=t.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==e}(y,_))&&function(t,e){var n={},r=t.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}l.attributes=n,l.attributesNum=i,l.index=e}(y,_)}else{var w=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===w||(l.geometry=y.id,l.program=h.id,l.wireframe=w,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==_&&n.update(_,34963),b&&(!function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var f=l[h];if(f>=0){var y=u[h];if(void 0!==y){var _=y.normalized,b=y.itemSize,x=n.get(y);if(void 0===x)continue;var w=x.buffer,S=x.type,k=x.bytesPerElement;if(y.isInterleavedBufferAttribute){var T=y.data,E=T.stride,C=y.offset;T&&T.isInstancedInterleavedBuffer?(v(f,T.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=T.meshPerAttribute*T.count)):p(f),t.bindBuffer(34962,w),g(f,b,S,_,E*k,C*k)}else y.isInstancedBufferAttribute?(v(f,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(f),t.bindBuffer(34962,w),g(f,b,S,_,0,0)}else if("instanceMatrix"===h){var O=n.get(i.instanceMatrix);if(void 0===O)continue;var M=O.buffer,A=O.type;v(f+0,1),v(f+1,1),v(f+2,1),v(f+3,1),t.bindBuffer(34962,M),t.vertexAttribPointer(f+0,4,A,!1,64,0),t.vertexAttribPointer(f+1,4,A,!1,64,16),t.vertexAttribPointer(f+2,4,A,!1,64,32),t.vertexAttribPointer(f+3,4,A,!1,64,48)}else if("instanceColor"===h){var P=n.get(i.instanceColor);if(void 0===P)continue;var L=P.buffer,R=P.type;v(f,1),t.bindBuffer(34962,L),t.vertexAttribPointer(f,3,R,!1,12,0)}else if(void 0!==c){var j=c[h];if(void 0!==j)switch(j.length){case 2:t.vertexAttrib2fv(f,j);break;case 3:t.vertexAttrib3fv(f,j);break;case 4:t.vertexAttrib4fv(f,j);break;default:t.vertexAttrib1fv(f,j)}}}}m()}(i,u,h,y),null!==_&&t.bindBuffer(34963,n.get(_).buffer))},reset:y,resetDefaultState:_,dispose:function(){for(var t in y(),s){var e=s[t];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var r=n[t.id];for(var i in r)h(r[i].object),delete r[i];delete n[t.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function vr(t,e,n,r){var i,a=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=t,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function mr(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),v=t.getParameter(36348),m=t.getParameter(36349),g=c>0,y=a||e.has("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?t.getParameter(36183):0}}function gr(t){var e=this,n=null,r=0,i=!1,a=!1,o=new qe,s=new Mt,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){var a=null!==t?t.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(t[f]).applyMatrix4(h,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){var o=0!==t.length||e||0!==r||i;return i=e,n=c(t,a,0),r=t.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(e,o,s){var h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||a&&!d)a?c(null):l();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function yr(t){var e=new WeakMap;function n(t,e){return 303===e?t.mapping=T:304===e&&(t.mapping=E),t}function r(t){var n=t.target;n.removeEventListener("dispose",r);var i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping;if(303===a||304===a){if(e.has(i))return n(e.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=t.getRenderTarget(),u=new nr(o.height/2);return u.fromEquirectangularTexture(t,i),e.set(i,u),t.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){e=new WeakMap}}}function _r(t){var e={};function n(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){var e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function br(t,e,n,r){var i={},a=new WeakMap;function o(t){var s=t.target;for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(e.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){var n=[],r=t.index,i=t.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(yn(n)>65535?mn:vn)(n,1);_.version=o;var b=a.get(t);b&&e.remove(b),a.set(t,_)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",o),i[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(var r in n)e.update(n[r],34962);var i=t.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var e=a.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return a.get(t)}}}function xr(t,e,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,a,e*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*o,l),n.update(u,i,l)}}}function wr(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Sr(t,e){return t[0]-e[0]}function kr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Tr(t){for(var e={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,a,o,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=e[a.id];if(void 0===c){c=[];for(var h=0;h<l;h++)c[h]=[h,0];e[a.id]=c}for(var f=0;f<l;f++){var d=c[f];d[0]=f,d[1]=u[f]}c.sort(kr);for(var p=0;p<8;p++)p<l&&c[p][1]?(r[p][0]=c[p][0],r[p][1]=c[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(Sr);for(var v=o.morphTargets&&a.morphAttributes.position,m=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var _=r[y],b=_[0],x=_[1];b!==Number.MAX_SAFE_INTEGER&&x?(v&&a.getAttribute("morphTarget"+y)!==v[b]&&a.setAttribute("morphTarget"+y,v[b]),m&&a.getAttribute("morphNormal"+y)!==m[b]&&a.setAttribute("morphNormal"+y,m[b]),n[y]=x,g+=x):(v&&!0===a.hasAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),m&&!0===a.hasAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var w=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(t,"morphTargetBaseInfluence",w),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Er(t,e,n,r){var i=new WeakMap;function a(t){var e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){var o=r.render.frame,s=t.geometry,u=e.get(t,s);return i.get(u)!==o&&(e.update(u),i.set(u,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}fr.physical={uniforms:Yn([fr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ct(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new cn(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag};var Cr=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,n),(t=e.call(this,null)).image={data:r,width:i,height:a,depth:o},t.magFilter=L,t.minFilter=L,t.wrapR=A,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return n}(Lt);Cr.prototype.isDataTexture2DArray=!0;var Or=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,n),(t=e.call(this,null)).image={data:r,width:i,height:a,depth:o},t.magFilter=L,t.minFilter=L,t.wrapR=A,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return n}(Lt);Or.prototype.isDataTexture3D=!0;var Mr=new Lt,Ar=new Cr,Pr=new Or,Lr=new er,Rr=[],jr=[],Ir=new Float32Array(16),Dr=new Float32Array(9),Nr=new Float32Array(4);function Br(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,a=Rr[i];if(void 0===a&&(a=new Float32Array(i),Rr[i]=a),0!==e){r.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function zr(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Fr(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Vr(t,e){var n=jr[e];void 0===n&&(n=new Int32Array(e),jr[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Ur(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zr(n,e))return;t.uniform2fv(this.addr,e),Fr(n,e)}}function Hr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(zr(n,e))return;t.uniform3fv(this.addr,e),Fr(n,e)}}function Wr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zr(n,e))return;t.uniform4fv(this.addr,e),Fr(n,e)}}function Gr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(zr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,r))return;Nr.set(r),t.uniformMatrix2fv(this.addr,!1,Nr),Fr(n,r)}}function Xr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(zr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,r))return;Dr.set(r),t.uniformMatrix3fv(this.addr,!1,Dr),Fr(n,r)}}function Yr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(zr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,r))return;Ir.set(r),t.uniformMatrix4fv(this.addr,!1,Ir),Fr(n,r)}}function Zr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Qr(t,e){var n=this.cache;zr(n,e)||(t.uniform2iv(this.addr,e),Fr(n,e))}function Jr(t,e){var n=this.cache;zr(n,e)||(t.uniform3iv(this.addr,e),Fr(n,e))}function Kr(t,e){var n=this.cache;zr(n,e)||(t.uniform4iv(this.addr,e),Fr(n,e))}function $r(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ti(t,e){var n=this.cache;zr(n,e)||(t.uniform2uiv(this.addr,e),Fr(n,e))}function ei(t,e){var n=this.cache;zr(n,e)||(t.uniform3uiv(this.addr,e),Fr(n,e))}function ni(t,e){var n=this.cache;zr(n,e)||(t.uniform4uiv(this.addr,e),Fr(n,e))}function ri(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Mr,i)}function ii(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Pr,i)}function ai(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Lr,i)}function oi(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ar,i)}function si(t,e){t.uniform1fv(this.addr,e)}function ui(t,e){var n=Br(e,this.size,2);t.uniform2fv(this.addr,n)}function li(t,e){var n=Br(e,this.size,3);t.uniform3fv(this.addr,n)}function ci(t,e){var n=Br(e,this.size,4);t.uniform4fv(this.addr,n)}function hi(t,e){var n=Br(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function fi(t,e){var n=Br(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function di(t,e){var n=Br(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function pi(t,e){t.uniform1iv(this.addr,e)}function vi(t,e){t.uniform2iv(this.addr,e)}function mi(t,e){t.uniform3iv(this.addr,e)}function gi(t,e){t.uniform4iv(this.addr,e)}function yi(t,e){t.uniform1uiv(this.addr,e)}function _i(t,e){t.uniform2uiv(this.addr,e)}function bi(t,e){t.uniform3uiv(this.addr,e)}function xi(t,e){t.uniform4uiv(this.addr,e)}function wi(t,e,n){var r=e.length,i=Vr(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(e[a]||Mr,i[a])}function Si(t,e,n){var r=e.length,i=Vr(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(e[a]||Lr,i[a])}function ki(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ur;case 35664:return qr;case 35665:return Hr;case 35666:return Wr;case 35674:return Gr;case 35675:return Xr;case 35676:return Yr;case 5124:case 35670:return Zr;case 35667:case 35671:return Qr;case 35668:case 35672:return Jr;case 35669:case 35673:return Kr;case 5125:return $r;case 36294:return ti;case 36295:return ei;case 36296:return ni;case 35678:case 36198:case 36298:case 36306:case 35682:return ri;case 35679:case 36299:case 36307:return ii;case 35680:case 36300:case 36308:case 36293:return ai;case 36289:case 36303:case 36311:case 36292:return oi}}(e.type)}function Ti(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return si;case 35664:return ui;case 35665:return li;case 35666:return ci;case 35674:return hi;case 35675:return fi;case 35676:return di;case 5124:case 35670:return pi;case 35667:case 35671:return vi;case 35668:case 35672:return mi;case 35669:case 35673:return gi;case 5125:return yi;case 36294:return _i;case 36295:return bi;case 36296:return xi;case 35678:case 36198:case 36298:case 36306:case 35682:return wi;case 35680:case 36300:case 36308:case 36293:return Si}}(e.type)}function Ei(t){this.id=t,this.seq=[],this.map={}}Ti.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Fr(e,t)},Ei.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(t,e[o.id],n)}};var Ci=/(\w+)(\])?(\[|\.)?/g;function Oi(t,e){t.seq.push(e),t.map[e.id]=e}function Mi(t,e,n){var r=t.name,i=r.length;for(Ci.lastIndex=0;;){var a=Ci.exec(r),o=Ci.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){Oi(n,void 0===l?new ki(s,t,e):new Ti(s,t,e));break}var c=n.map[s];void 0===c&&Oi(n,c=new Ei(s)),n=c}}function Ai(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);Mi(i,t.getUniformLocation(e,i.name),this)}}function Pi(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Ai.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Ai.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},Ai.upload=function(t,e,n,r){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}},Ai.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var a=t[r];a.id in e&&n.push(a)}return n};var Li=0;function Ri(t){switch(t){case it:return["Linear","( value )"];case at:return["sRGB","( value )"];case st:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case ot:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function ji(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function Ii(t,e){var n=Ri(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Di(t,e){var n=Ri(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ni(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bi(t){return""!==t}function zi(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Fi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Vi=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ui(t){return t.replace(Vi,qi)}function qi(t,e){var n=cr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ui(n)}var Hi=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Wi=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gi(t){return t.replace(Wi,Yi).replace(Hi,Xi)}function Xi(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Yi(t,e,n,r)}function Yi(t,e,n,r){for(var i="",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Zi(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Qi(t,e,n,r){var i,a,o=t.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===b?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===x?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case T:case E:e="ENVMAP_TYPE_CUBE";break;case C:case O:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),f=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case E:case O:e="ENVMAP_MODE_REFRACTION"}return e}(n),d=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),p=t.gammaFactor>0?t.gammaFactor:1,v=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bi).join("\n")}(n),m=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(Bi).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(Bi).join("\n")).length>0&&(a+="\n")):(i=[Zi(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bi).join("\n"),a=[v,Zi(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?cr.tonemapping_pars_fragment:"",0!==n.toneMapping?Ni("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",cr.encodings_pars_fragment,n.map?Ii("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ii("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ii("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ii("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ii("lightMapTexelToLinear",n.lightMapEncoding):"",Di("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bi).join("\n")),u=Fi(u=zi(u=Ui(u),n),n),l=Fi(l=zi(l=Ui(l),n),n),u=Gi(u),l=Gi(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===ft?"":"out highp vec4 pc_fragColor;",n.glslVersion===ft?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,w,S=y+a+l,k=Pi(o,35633,y+i+u),M=Pi(o,35632,S);if(o.attachShader(g,k),o.attachShader(g,M),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),t.debug.checkShaderErrors){var A=o.getProgramInfoLog(g).trim(),P=o.getShaderInfoLog(k).trim(),L=o.getShaderInfoLog(M).trim(),R=!0,j=!0;if(!1===o.getProgramParameter(g,35714)){R=!1;var I=ji(o,k,"vertex"),D=ji(o,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(g,35715),"gl.getProgramInfoLog",A,I,D)}else""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==P&&""!==L||(j=!1);j&&(this.diagnostics={runnable:R,programLog:A,vertexShader:{log:P,prefix:i},fragmentShader:{log:L,prefix:a}})}return o.deleteShader(k),o.deleteShader(M),this.getUniforms=function(){return void 0===_&&(_=new Ai(o,g)),_},this.getAttributes=function(){return void 0===w&&(w=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var a=t.getActiveAttrib(e,i).name;n[a]=t.getAttribLocation(e,a)}return n}(o,g)),w},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Li++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=k,this.fragmentShader=M,this}function Ji(t,e,n,r,i,a){var o=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures,f=r.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(t){var e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=it,e}return{getParameters:function(i,o,p,m,g){var y,_,b=m.fog,x=i.isMeshStandardMaterial?m.environment:null,w=e.get(i.envMap||x),k=d[i.type],T=g.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(l)return 1024;var n=c,r=Math.floor((n-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(g):0;if(null!==i.precision&&(f=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead."),k){var E=fr[k];y=E.vertexShader,_=E.fragmentShader}else y=i.vertexShader,_=i.fragmentShader;var M=t.getRenderTarget();return{isWebGL2:s,shaderID:k,shaderName:i.type,vertexShader:y,fragmentShader:_,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null!==M?v(M.texture):t.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:v(w),envMapCubeUV:!!w&&(w.mapping===C||w.mapping===O),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:i.normalMapType===ut,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&g.geometry&&g.geometry.attributes.color&&4===g.geometry.attributes.color.itemSize,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmissionMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap)&&!!i.displacementMap,fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:i.skinning&&T>0,maxBones:T,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===S,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(!1===e.isRawShaderMaterial){for(var i=0;i<p.length;i++)n.push(e[p[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=d[t.type];if(n){var r=fr[n];e=Zn.clone(r.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var r,a=0,s=o.length;a<s;a++){var u=o[a];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new Qi(t,n,e,i),o.push(r)),r},releaseProgram:function(t){if(0===--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},programs:o}}function Ki(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function $i(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ta(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ea(t){var e=[],n=0,r=[],i=[],a={id:-1};function o(r,i,o,s,u,l){var c=e[n],h=t.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},e[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=h.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,a,s,u){var l=o(t,e,n,a,s,u);(!0===n.transparent?i:r).push(l)},unshift:function(t,e,n,a,s,u){var l=o(t,e,n,a,s,u);(!0===n.transparent?i:r).unshift(l)},finish:function(){for(var t=n,r=e.length;t<r;t++){var i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){r.length>1&&r.sort(t||$i),i.length>1&&i.sort(e||ta)}}}function na(t){var e=new WeakMap;return{get:function(n,r){var i;return!1===e.has(n)?(i=new ea(t),e.set(n,[i])):r>=e.get(n).length?(i=new ea(t),e.get(n).push(i)):i=e.get(n)[r],i},dispose:function(){e=new WeakMap}}}function ra(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Nt,color:new cn};break;case"SpotLight":n={position:new Nt,direction:new Nt,color:new cn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Nt,color:new cn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Nt,skyColor:new cn,groundColor:new cn};break;case"RectAreaLight":n={color:new cn,position:new Nt,halfWidth:new Nt,halfHeight:new Nt}}return t[e.id]=n,n}}}var ia=0;function aa(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function oa(t,e){for(var n=new ra,r=function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new Nt);var o=new Nt,s=new pe,u=new pe;return{setup:function(a){for(var o=0,s=0,u=0,l=0;l<9;l++)i.probe[l].set(0,0,0);var c=0,h=0,f=0,d=0,p=0,v=0,m=0,g=0;a.sort(aa);for(var y=0,_=a.length;y<_;y++){var b=a[y],x=b.color,w=b.intensity,S=b.distance,k=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)o+=x.r*w,s+=x.g*w,u+=x.b*w;else if(b.isLightProbe)for(var T=0;T<9;T++)i.probe[T].addScaledVector(b.sh.coefficients[T],w);else if(b.isDirectionalLight){var E=n.get(b);if(E.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){var C=b.shadow,O=r.get(b);O.shadowBias=C.bias,O.shadowNormalBias=C.normalBias,O.shadowRadius=C.radius,O.shadowMapSize=C.mapSize,i.directionalShadow[c]=O,i.directionalShadowMap[c]=k,i.directionalShadowMatrix[c]=b.shadow.matrix,v++}i.directional[c]=E,c++}else if(b.isSpotLight){var M=n.get(b);if(M.position.setFromMatrixPosition(b.matrixWorld),M.color.copy(x).multiplyScalar(w),M.distance=S,M.coneCos=Math.cos(b.angle),M.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),M.decay=b.decay,b.castShadow){var A=b.shadow,P=r.get(b);P.shadowBias=A.bias,P.shadowNormalBias=A.normalBias,P.shadowRadius=A.radius,P.shadowMapSize=A.mapSize,i.spotShadow[f]=P,i.spotShadowMap[f]=k,i.spotShadowMatrix[f]=b.shadow.matrix,g++}i.spot[f]=M,f++}else if(b.isRectAreaLight){var L=n.get(b);L.color.copy(x).multiplyScalar(w),L.halfWidth.set(.5*b.width,0,0),L.halfHeight.set(0,.5*b.height,0),i.rectArea[d]=L,d++}else if(b.isPointLight){var R=n.get(b);if(R.color.copy(b.color).multiplyScalar(b.intensity),R.distance=b.distance,R.decay=b.decay,b.castShadow){var j=b.shadow,I=r.get(b);I.shadowBias=j.bias,I.shadowNormalBias=j.normalBias,I.shadowRadius=j.radius,I.shadowMapSize=j.mapSize,I.shadowCameraNear=j.camera.near,I.shadowCameraFar=j.camera.far,i.pointShadow[h]=I,i.pointShadowMap[h]=k,i.pointShadowMatrix[h]=b.shadow.matrix,m++}i.point[h]=R,h++}else if(b.isHemisphereLight){var D=n.get(b);D.skyColor.copy(b.color).multiplyScalar(w),D.groundColor.copy(b.groundColor).multiplyScalar(w),i.hemi[p]=D,p++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=hr.LTC_FLOAT_1,i.rectAreaLTC2=hr.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=hr.LTC_HALF_1,i.rectAreaLTC2=hr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=s,i.ambient[2]=u;var N=i.hash;N.directionalLength===c&&N.pointLength===h&&N.spotLength===f&&N.rectAreaLength===d&&N.hemiLength===p&&N.numDirectionalShadows===v&&N.numPointShadows===m&&N.numSpotShadows===g||(i.directional.length=c,i.spot.length=f,i.rectArea.length=d,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,N.directionalLength=c,N.pointLength=h,N.spotLength=f,N.rectAreaLength=d,N.hemiLength=p,N.numDirectionalShadows=v,N.numPointShadows=m,N.numSpotShadows=g,i.version=ia++)},setupView:function(t,e){for(var n=0,r=0,a=0,l=0,c=0,h=e.matrixWorldInverse,f=0,d=t.length;f<d;f++){var p=t[f];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),u.identity(),s.copy(p.matrixWorld),s.premultiply(h),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var _=i.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),_.direction.normalize(),c++}}},state:i}}function sa(t,e){var n=new oa(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function ua(t,e){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new sa(t,e),n.set(r,[i])):a>=n.get(r).length?(i=new sa(t,e),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var la=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.skinning=!1,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),n}(nn);la.prototype.isMeshDepthMaterial=!0;var ca=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshDistanceMaterial",r.referencePosition=new Nt,r.nearDistance=1,r.farDistance=1e3,r.skinning=!1,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),n}(nn);ca.prototype.isMeshDistanceMaterial=!0;function ha(t,e,n){var r=new or,i=new Ct,a=new Ct,o=new jt,s=[],u=[],l={},c=n.maxTextureSize,h={0:1,1:w,2:S},f=new Qn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ct},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new En;p.setAttribute("position",new pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Hn(p,f),m=this;function g(n,r){var i=e.update(v);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,d,v,null)}function y(t,e,n){var r=t<<0|e<<1|n<<2,i=s[r];return void 0===i&&(i=new la({depthPacking:3201,morphTargets:t,skinning:e}),s[r]=i),i}function _(t,e,n){var r=t<<0|e<<1|n<<2,i=u[r];return void 0===i&&(i=new ca({morphTargets:t,skinning:e}),u[r]=i),i}function x(e,n,r,i,a,o,s){var u=null,c=y,f=e.customDepthMaterial;if(!0===i.isPointLight&&(c=_,f=e.customDistanceMaterial),void 0===f){var d=!1;!0===r.morphTargets&&(d=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var p=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?p=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),u=c(d,p,!0===e.isInstancedMesh)}else u=f;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var v=u.uuid,m=r.uuid,g=l[v];void 0===g&&(g={},l[v]=g);var b=g[m];void 0===b&&(b=u.clone(),g[m]=b),u=b}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=a,u.farDistance=o),u}function k(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=e.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var v=x(n,u,p,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,v,n,d)}}else if(l.visible){var m=x(n,u,l,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,y=0,_=g.length;y<_;y++)k(g[y],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b,this.render=function(e,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var v=e[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/_.x),i.x=a.x*_.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/_.y),i.y=a.y*_.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var b={minFilter:I,magFilter:I,format:W};y.map=new It(i.x,i.y,b),y.map.texture.name=v.name+".shadowMap",y.mapPass=new It(i.x,i.y,b),y.camera.updateProjectionMatrix()}if(null===y.map){var x={minFilter:L,magFilter:L,format:W};y.map=new It(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}t.setRenderTarget(y.map),t.clear();for(var w=y.getViewportCount(),S=0;S<w;S++){var T=y.getViewport(S);o.set(a.x*T.x,a.y*T.y,a.x*T.z,a.y*T.w),f.viewport(o),y.updateMatrices(v,S),r=y.getFrustum(),k(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,t.setRenderTarget(u,l,h)}}}function fa(t,e,n){var r,i,a=n.isWebGL2;var o=new function(){var e=!1,n=new jt,r=null,i=new jt(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,a,o,s){!0===s&&(e*=o,r*=o,a*=o),n.set(e,r,a,o),!1===i.equals(n)&&(t.clearColor(e,r,a,o),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?F(2929):V(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},l=new function(){var e=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?F(2960):V(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,o){r===e&&i===n&&a===o||(t.stencilFunc(e,n,o),r=e,i=n,a=o)},setOp:function(e,n,r){o===e&&s===n&&u===r||(t.stencilOp(e,n,r),o=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},c={},h=null,f={},d=null,p=!1,v=null,m=null,g=null,y=null,_=null,b=null,x=null,w=!1,T=null,E=null,C=null,O=null,M=null,A=t.getParameter(35661),P=!1,L=0,R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(R)[1]),P=L>=1):-1!==R.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),P=L>=2);var j=null,I={},D=new jt(0,0,t.canvas.width,t.canvas.height),N=new jt(0,0,t.canvas.width,t.canvas.height);function B(e,n,r){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<r;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var z={};function F(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function V(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}z[3553]=B(3553,3553,1),z[34067]=B(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),F(2929),s.setFunc(3),G(!1),X(1),F(2884),W(0);var U=(r={},Object(u.a)(r,k,32774),Object(u.a)(r,101,32778),Object(u.a)(r,102,32779),r);if(a)U[103]=32775,U[104]=32776;else{var q=e.get("EXT_blend_minmax");null!==q&&(U[103]=q.MIN_EXT,U[104]=q.MAX_EXT)}var H=(i={},Object(u.a)(i,200,0),Object(u.a)(i,201,1),Object(u.a)(i,202,768),Object(u.a)(i,204,770),Object(u.a)(i,210,776),Object(u.a)(i,208,774),Object(u.a)(i,206,772),Object(u.a)(i,203,769),Object(u.a)(i,205,771),Object(u.a)(i,209,775),Object(u.a)(i,207,773),i);function W(e,n,r,i,a,o,s,u){if(0!==e){if(!1===p&&(F(3042),p=!0),5===e)a=a||n,o=o||r,s=s||i,n===m&&a===_||(t.blendEquationSeparate(U[n],U[a]),m=n,_=a),r===g&&i===y&&o===b&&s===x||(t.blendFuncSeparate(H[r],H[i],H[o],H[s]),g=r,y=i,b=o,x=s),v=e,w=null;else if(e!==v||u!==w){if(m===k&&_===k||(t.blendEquation(32774),m=k,_=k),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}g=null,y=null,b=null,x=null,v=e,w=u}}else!0===p&&(V(3042),p=!1)}function G(e){T!==e&&(e?t.frontFace(2304):t.frontFace(2305),T=e)}function X(e){0!==e?(F(2884),e!==E&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):V(2884),E=e}function Y(e,n,r){e?(F(32823),O===n&&M===r||(t.polygonOffset(n,r),O=n,M=r)):V(32823)}function Z(e){void 0===e&&(e=33984+A-1),j!==e&&(t.activeTexture(e),j=e)}return{buffers:{color:o,depth:s,stencil:l},enable:F,disable:V,bindFramebuffer:function(e,n){null===n&&null!==h&&(n=h),f[e]!==n&&(t.bindFramebuffer(e,n),f[e]=n,a&&(36009===e&&(f[36160]=n),36160===e&&(f[36009]=n)))},bindXRFramebuffer:function(e){e!==h&&(t.bindFramebuffer(36160,e),h=e)},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:W,setMaterial:function(t,e){t.side===S?V(2884):F(2884);var n=1===t.side;e&&(n=!n),G(n),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),o.setMask(t.colorWrite);var r=t.stencilWrite;l.setTest(r),r&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Y(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?F(32926):V(32926)},setFlipSided:G,setCullFace:X,setLineWidth:function(e){e!==C&&(P&&t.lineWidth(e),C=e)},setPolygonOffset:Y,setScissorTest:function(t){t?F(3089):V(3089)},activeTexture:Z,bindTexture:function(e,n){null===j&&Z();var r=I[j];void 0===r&&(r={type:void 0,texture:void 0},I[j]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||z[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=I[j];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===D.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===N.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),N.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===a&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},j=null,I={},h=null,f={},d=null,p=!1,v=null,m=null,g=null,y=null,_=null,b=null,x=null,w=!1,T=null,E=null,C=null,O=null,M=null,D.set(0,0,t.canvas.width,t.canvas.height),N.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),l.reset()}}}function da(t,e,n,r,i,a,o){var s,l,c,h=i.isWebGL2,f=i.maxTextures,d=i.maxCubemapSize,p=i.maxTextureSize,v=i.maxSamples,m=new WeakMap,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(at){}function y(t,e){return g?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function _(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?Tt:Math.floor,o=a(i*t.width),s=a(i*t.height);void 0===c&&(c=y(o,s));var u=n?y(o,s):c;return u.width=o,u.height=s,u.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return St(t.width)&&St(t.height)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==L&&t.minFilter!==I}function w(e,n,i,a){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,a))}function S(n,r,i){if(!1===h)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function k(t){return t===L||t===R||t===j?9728:9729}function T(e){var n=e.target;n.removeEventListener("dispose",T),function(e){var n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&m.delete(n),o.memory.textures--}function E(e){var n=e.target;n.removeEventListener("dispose",E),function(e){var n=e.texture,i=r.get(e),a=r.get(n);if(!e)return;void 0!==a.__webglTexture&&t.deleteTexture(a.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)t.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[o]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);r.remove(n),r.remove(e)}(n),o.memory.textures--}var C=0;function O(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void K(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function B(e,i){var o=r.get(e);e.version>0&&o.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;J(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=o||s?s?r.image[l].image:r.image[l]:_(r.image[l],!1,!0,d);var c,f=u[0],p=b(f)||h,v=a.convert(r.format),m=a.convert(r.type),g=S(r.internalFormat,v,m);if(Q(34067,r,p),o){for(var y=0;y<6;y++){c=u[y].mipmaps;for(var k=0;k<c.length;k++){var T=c[k];r.format!==W&&r.format!==H?null!==v?n.compressedTexImage2D(34069+y,k,g,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+y,k,g,T.width,T.height,0,v,m,T.data)}}e.__maxMipLevel=c.length-1}else{c=r.mipmaps;for(var E=0;E<6;E++)if(s){n.texImage2D(34069+E,0,g,u[E].width,u[E].height,0,v,m,u[E].data);for(var C=0;C<c.length;C++){var O=c[C].image[E].image;n.texImage2D(34069+E,C+1,g,O.width,O.height,0,v,m,O.data)}}else{n.texImage2D(34069+E,0,g,v,m,u[E]);for(var M=0;M<c.length;M++){var A=c[M];n.texImage2D(34069+E,M+1,g,v,m,A.image[E])}}e.__maxMipLevel=c.length}x(r,p)&&w(34067,r,f.width,f.height);e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(o,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}var Y=(s={},Object(u.a)(s,M,10497),Object(u.a)(s,A,33071),Object(u.a)(s,P,33648),s),Z=(l={},Object(u.a)(l,L,9728),Object(u.a)(l,R,9984),Object(u.a)(l,j,9986),Object(u.a)(l,I,9729),Object(u.a)(l,D,9985),Object(u.a)(l,N,9987),l);function Q(n,a,o){if(o?(t.texParameteri(n,10242,Y[a.wrapS]),t.texParameteri(n,10243,Y[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,Y[a.wrapR]),t.texParameteri(n,10240,Z[a.magFilter]),t.texParameteri(n,10241,Z[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===A&&a.wrapT===A||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,k(a.magFilter)),t.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==L&&a.minFilter!==I&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(a.type===V&&!1===e.has("OES_texture_float_linear"))return;if(!1===h&&a.type===U&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function J(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T),e.__webglTexture=t.createTexture(),o.memory.textures++)}function K(e,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),J(e,r),n.activeTexture(33984+i),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);var s,u=function(t){return!h&&(t.wrapS!==A||t.wrapT!==A||t.minFilter!==L&&t.minFilter!==I)}(r)&&!1===b(r.image),l=_(r.image,u,!1,p),c=b(l)||h,f=a.convert(r.format),d=a.convert(r.type),v=S(r.internalFormat,f,d);Q(o,r,c);var m=r.mipmaps;if(r.isDepthTexture)v=6402,h?v=r.type===V?36012:r.type===F?33190:r.type===q?35056:33189:r.type===V&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===G&&6402===v&&r.type!==z&&r.type!==F&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=z,d=a.convert(r.type)),r.format===X&&6402===v&&(v=34041,r.type!==q&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=q,d=a.convert(r.type))),n.texImage2D(3553,0,v,l.width,l.height,0,f,d,null);else if(r.isDataTexture)if(m.length>0&&c){for(var g=0,y=m.length;g<y;g++)s=m[g],n.texImage2D(3553,g,v,s.width,s.height,0,f,d,s.data);r.generateMipmaps=!1,e.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,l.width,l.height,0,f,d,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var k=0,T=m.length;k<T;k++)s=m[k],r.format!==W&&r.format!==H?null!==f?n.compressedTexImage2D(3553,k,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,k,v,s.width,s.height,0,f,d,s.data);e.__maxMipLevel=m.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,f,d,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,f,d,l.data),e.__maxMipLevel=0;else if(m.length>0&&c){for(var E=0,C=m.length;E<C;E++)s=m[E],n.texImage2D(3553,E,v,f,d,s);r.generateMipmaps=!1,e.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,f,d,l),e.__maxMipLevel=0;x(r,c)&&w(o,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function $(e,i,o,s){var u=i.texture,l=a.convert(u.format),c=a.convert(u.type),h=S(u.internalFormat,l,c);32879===s||35866===s?n.texImage3D(s,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(s,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,r.get(u).__webglTexture,0),n.bindFramebuffer(36160,null)}function tt(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===V?i=36012:o.type===F&&(i=33190));var s=nt(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=nt(n);t.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var l=n.texture,c=a.convert(l.format),h=a.convert(l.type),f=S(l.internalFormat,c,h);if(r){var d=nt(n);t.renderbufferStorageMultisample(36161,d,f,n.width,n.height)}else t.renderbufferStorage(36161,f,n.width,n.height)}t.bindRenderbuffer(36161,null)}function et(e){var i=r.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),O(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===G)t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==X)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,e)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),tt(i.__webglDepthbuffer[o],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),tt(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function nt(t){return h&&t.isWebGLMultisampleRenderTarget?Math.min(v,t.samples):0}var rt=!1,it=!1;this.allocateTextureUnit=function(){var t=C;return t>=f&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+f),C+=1,t},this.resetTextureUnits=function(){C=0},this.setTexture2D=O,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?K(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?K(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=B,this.setupRenderTarget=function(e){var i=e.texture,s=r.get(e),u=r.get(i);e.addEventListener("dispose",E),u.__webglTexture=t.createTexture(),u.__version=i.version,o.memory.textures++;var l=!0===e.isWebGLCubeRenderTarget,c=!0===e.isWebGLMultisampleRenderTarget,f=i.isDataTexture3D||i.isDataTexture2DArray,d=b(e)||h;if(!h||i.format!==H||i.type!==V&&i.type!==U||(i.format=W,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){s.__webglFramebuffer=[];for(var p=0;p<6;p++)s.__webglFramebuffer[p]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),c)if(h){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var v=a.convert(i.format),m=a.convert(i.type),g=S(i.internalFormat,v,m),y=nt(e);t.renderbufferStorageMultisample(36161,y,g,e.width,e.height),n.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),tt(s.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,u.__webglTexture),Q(34067,i,d);for(var _=0;_<6;_++)$(s.__webglFramebuffer[_],e,36064,34069+_);x(i,d)&&w(34067,i,e.width,e.height),n.bindTexture(34067,null)}else{var k=3553;if(f)if(h)k=i.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(k,u.__webglTexture),Q(k,i,d),$(s.__webglFramebuffer,e,36064,k),x(i,d)&&w(3553,i,e.width,e.height),n.bindTexture(3553,null)}e.depthBuffer&&et(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(x(e,b(t)||h)){var i=t.isWebGLCubeRenderTarget?34067:3553,a=r.get(e).__webglTexture;n.bindTexture(i,a),w(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(h){var i=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024);var s=r.get(e);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===rt&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),rt=!0),t=t.texture),O(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===it&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),it=!0),t=t.texture),B(t,e)}}function pa(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(t===B)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(t===z)return 5123;if(1013===t)return 5124;if(t===F)return 5125;if(t===V)return 5126;if(t===U)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(t===H)return 6407;if(t===W)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===G)return 6402;if(t===X)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===q?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var va=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(this,n),(t=e.call(this)).cameras=r,t}return n}(Kn);va.prototype.isArrayCamera=!0;var ma=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="Group",t}return n}(ze);ma.prototype.isGroup=!0;var ga={type:"move"},ya=function(){function t(){Object(m.a)(this,t),this._targetRay=null,this._grip=null,this._hand=null}return Object(g.a)(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Nt),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Nt),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var r=null,i=null,a=null,o=this._targetRay,u=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&null!==(r=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ga)),l&&t.hand){a=!0;var c,h=Object(s.a)(t.hand.values());try{for(h.s();!(c=h.n()).done;){var f=c.value,d=e.getJointPose(f,n);if(void 0===l.joints[f.jointName]){var p=new ma;p.matrixAutoUpdate=!1,p.visible=!1,l.joints[f.jointName]=p,l.add(p)}var v=l.joints[f.jointName];null!==d&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=d.radius),v.visible=null!==d}}catch(_){h.e(_)}finally{h.f()}var m=l.joints["index-finger-tip"],g=l.joints["thumb-tip"],y=m.position.distanceTo(g.position);l.inputState.pinching&&y>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&y<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&null!==(i=e.getPose(t.gripSpace,n))&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==r),null!==u&&(u.visible=null!==i),null!==l&&(l.visible=null!==a),this}}]),t}(),_a=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;Object(m.a)(this,n),i=e.call(this);var s=Object(d.a)(i),u=t.state,l=null,c=1,h=null,f="local-floor",p=null,v=[],g=new Map,y=new Kn;y.layers.enable(1),y.viewport=new jt;var _=new Kn;_.layers.enable(2),_.viewport=new jt;var b=[y,_],x=new va;x.layers.enable(1),x.layers.enable(2);var w=null,S=null;function k(t){var e=g.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function T(){g.forEach((function(t,e){t.disconnect(e)})),g.clear(),w=null,S=null,u.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),P.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function E(t){for(var e=l.inputSources,n=0;n<v.length;n++)g.set(e[n],v[n]);for(var r=0;r<t.removed.length;r++){var i=t.removed[r],a=g.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),g.delete(i))}for(var o=0;o<t.added.length;o++){var s=t.added[o],u=g.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}i.enabled=!1,i.isPresenting=!1,i.getController=function(t){var e=v[t];return void 0===e&&(e=new ya,v[t]=e),e.getTargetRaySpace()},i.getControllerGrip=function(t){var e=v[t];return void 0===e&&(e=new ya,v[t]=e),e.getGripSpace()},i.getHand=function(t){var e=v[t];return void 0===e&&(e=new ya,v[t]=e),e.getHandSpace()},i.setFramebufferScaleFactor=function(t){c=t,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(t){f=t,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return h},i.getSession=function(){return l},i.setSession=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(l=e)){t.next=24;break}if(l.addEventListener("select",k),l.addEventListener("selectstart",k),l.addEventListener("selectend",k),l.addEventListener("squeeze",k),l.addEventListener("squeezestart",k),l.addEventListener("squeezeend",k),l.addEventListener("end",T),l.addEventListener("inputsourceschange",E),!0===(n=r.getContextAttributes()).xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:c},o=new XRWebGLLayer(l,r,i),l.updateRenderState({baseLayer:o}),t.next=19,l.requestReferenceSpace(f);case 19:h=t.sent,P.setContext(l),P.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var C=new Nt,O=new Nt;function M(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}i.getCamera=function(t){x.near=_.near=y.near=t.near,x.far=_.far=y.far=t.far,w===x.near&&S===x.far||(l.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,S=x.far);var e=t.parent,n=x.cameras;M(x,e);for(var r=0;r<n.length;r++)M(n[r],e);t.matrixWorld.copy(x.matrixWorld),t.matrix.copy(x.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);for(var i=t.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){C.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);var r=C.distanceTo(O),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),v=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(v),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var m=o+p,g=s+p,y=f-v,_=d+(r-v),b=u*s/g*m,x=l*s/g*m;t.projectionMatrix.makePerspective(y,_,b,x,m,g)}(x,y,_):x.projectionMatrix.copy(y.projectionMatrix),x};var A=null;var P=new sr;return P.setAnimationLoop((function(t,e){if(null!==(p=e.getViewerPose(h))){var n=p.views,r=l.renderState.baseLayer;u.bindXRFramebuffer(r.framebuffer);var i=!1;n.length!==x.cameras.length&&(x.cameras.length=0,i=!0);for(var a=0;a<n.length;a++){var o=n[a],s=r.getViewport(o),c=b[a];c.matrix.fromArray(o.transform.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===a&&x.matrix.copy(c.matrix),!0===i&&x.cameras.push(c)}}for(var f=l.inputSources,d=0;d<v.length;d++){var m=v[d],g=f[d];m.update(g,e,h)}A&&A(t,e)})),i.setAnimationLoop=function(t){A=t},i.dispose=function(){},i}return n}(dt);function ba(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var r,i,a=t.get(n).envMap;if(a){e.envMap.value=a,e.flipEnvMap.value=a.isCubeTexture&&a._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var o=t.get(a).__maxMipLevel;void 0!==o&&(e.maxMipLevel.value=o)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,a){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xa(t){var e=void 0!==(t=t||{}).canvas?t.canvas:function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=it,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,_=null,b=-1,x=null,w=new jt,S=new jt,k=null,T=e.width,E=e.height,C=1,O=null,M=null,A=new jt(0,0,T,E),P=new jt(0,0,T,E),L=!1,R=new or,j=!1,I=!1,D=new pe,N=new Nt,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return null===_?C:1}var q,H,G,X,Y,Z,Q,J,K,$,tt,et,nt,rt,at,ot,st,ut,lt,ct,ht,ft,dt=n;function pt(t,n){for(var r=0;r<t.length;r++){var i=t[r],a=e.getContext(i,n);if(null!==a)return a}return null}try{var vt={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(e.addEventListener("webglcontextlost",_t,!1),e.addEventListener("webglcontextrestored",bt,!1),null===dt){var mt=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&mt.shift(),null===(dt=pt(mt,vt)))throw pt(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===dt.getShaderPrecisionFormat&&(dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(It){throw console.error("THREE.WebGLRenderer: "+It.message),It}function gt(){q=new _r(dt),H=new mr(dt,q,t),q.init(H),ht=new pa(dt,q,H),G=new fa(dt,q,H),X=new wr(dt),Y=new Ki,Z=new da(dt,q,G,Y,H,ht,X),Q=new yr(v),J=new ur(dt,H),ft=new pr(dt,q,J,H),K=new br(dt,J,X,ft),$=new Er(dt,K,J,X),ut=new Tr(dt),at=new gr(Y),tt=new Ji(v,Q,q,H,ft,at),et=new ba(Y),nt=new na(Y),rt=new ua(q,H),st=new dr(v,Q,G,$,s),ot=new ha(v,$,H),lt=new vr(dt,q,X,H),ct=new xr(dt,q,X,H),X.programs=tt.programs,v.capabilities=H,v.extensions=q,v.properties=Y,v.renderLists=nt,v.shadowMap=ot,v.state=G,v.info=X}gt();var yt=new _a(v,dt);function _t(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var t=X.autoReset,e=ot.enabled,n=ot.autoUpdate,r=ot.needsUpdate,i=ot.type;gt(),X.autoReset=t,ot.enabled=e,ot.autoUpdate=n,ot.needsUpdate=r,ot.type=i}function xt(t){var e=t.target;e.removeEventListener("dispose",xt),function(t){(function(t){var e=Y.get(t).programs;void 0!==e&&e.forEach((function(t){tt.releaseProgram(t)}))})(t),Y.remove(t)}(e)}this.xr=yt,this.getContext=function(){return dt},this.getContextAttributes=function(){return dt.getContextAttributes()},this.forceContextLoss=function(){var t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(T,E,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Ct),t.set(T,E)},this.setSize=function(t,n,r){yt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,E=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Ct),t.set(T*C,E*C).floor()},this.setDrawingBufferSize=function(t,n,r){T=t,E=n,C=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new jt),t.copy(w)},this.getViewport=function(t){return t.copy(A)},this.setViewport=function(t,e,n,r){t.isVector4?A.set(t.x,t.y,t.z,t.w):A.set(t,e,n,r),G.viewport(w.copy(A).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(P)},this.setScissor=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),G.scissor(S.copy(P).multiplyScalar(C).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(t){G.setScissorTest(L=t)},this.setOpaqueSort=function(t){O=t},this.setTransparentSort=function(t){M=t},this.getClearColor=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),t=new cn),t.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),dt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",_t,!1),e.removeEventListener("webglcontextrestored",bt,!1),nt.dispose(),rt.dispose(),Y.dispose(),Q.dispose(),$.dispose(),ft.dispose(),yt.dispose(),yt.removeEventListener("sessionstart",St),yt.removeEventListener("sessionend",Tt),Et.stop()},this.renderBufferImmediate=function(t,e){ft.initAttributes();var n=Y.get(t);t.hasPositions&&!n.position&&(n.position=dt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=dt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=dt.createBuffer()),t.hasColors&&!n.color&&(n.color=dt.createBuffer());var r=e.getAttributes();t.hasPositions&&(dt.bindBuffer(34962,n.position),dt.bufferData(34962,t.positionArray,35048),ft.enableAttribute(r.position),dt.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(dt.bindBuffer(34962,n.normal),dt.bufferData(34962,t.normalArray,35048),ft.enableAttribute(r.normal),dt.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(dt.bindBuffer(34962,n.uv),dt.bufferData(34962,t.uvArray,35048),ft.enableAttribute(r.uv),dt.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(dt.bindBuffer(34962,n.color),dt.bufferData(34962,t.colorArray,35048),ft.enableAttribute(r.color),dt.vertexAttribPointer(r.color,3,5126,!1,0,0)),ft.disableUnusedAttributes(),dt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,a){null===e&&(e=z);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Rt(t,e,r,i);G.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=K.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&ut.update(i,n,r,s),ft.setup(i,r,s,n,u);var f=lt;null!==u&&(c=J.get(u),(f=ct).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),_=Math.min(d,p+v,m+g)-1,b=Math.max(0,_-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(G.setLineWidth(r.wireframeLinewidth*F()),f.setMode(1)):f.setMode(4);else if(i.isLine){var x=r.linewidth;void 0===x&&(x=1),G.setLineWidth(x*F()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,b,w)}else f.render(y,b)}},this.compile=function(t,e){(f=rt.get(t)).init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(),t.traverse((function(e){var n=e.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Pt(n[r],t,e)}else Pt(n,t,e)}))};var wt=null;function St(){Et.stop()}function Tt(){Et.start()}var Et=new sr;function Ot(t,e,n,r){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||R.intersectsSprite(t)){r&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(D);var i=$.update(t),a=t.material;a.visible&&h.push(t,i,a,n,N.z,null)}}else if(t.isImmediateRenderObject)r&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(D),h.push(t,null,t.material,n,N.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==X.render.frame&&(t.skeleton.update(),t.skeleton.frame=X.render.frame),!t.frustumCulled||R.intersectsObject(t))){r&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(D);var o=$.update(t),s=t.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&h.push(t,o,p,n,N.z,d)}else s.visible&&h.push(t,o,s,n,N.z,null)}for(var v=t.children,m=0,g=v.length;m<g;m++)Ot(v[m],e,n,r)}}function Mt(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;if(n.isArrayCamera)for(var h=n.cameras,d=0,p=h.length;d<p;d++){var v=h[d];s.layers.test(v.layers)&&(G.viewport(w.copy(v.viewport)),f.setupLightsView(v),At(s,e,v,u,l,c))}else At(s,e,n,u,l,c)}}function At(t,e,n,r,i,a){if(t.onBeforeRender(v,e,n,r,i,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var o=Rt(n,e,i,t);G.setMaterial(i),ft.reset(),function(t,e){t.render((function(t){v.renderBufferImmediate(t,e)}))}(t,o)}else v.renderBufferDirect(n,e,r,i,t,a);t.onAfterRender(v,e,n,r,i,a)}function Pt(t,e,n){!0!==e.isScene&&(e=z);var r=Y.get(t),i=f.state.lights,a=f.state.shadowsArray,o=i.state.version,s=tt.getParameters(t,i.state,a,e,n),u=tt.getProgramCacheKey(s),l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=Q.get(t.envMap||r.environment),void 0===l&&(t.addEventListener("dispose",xt),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Lt(t,s),c}else s.uniforms=tt.getUniforms(t),t.onBuild(s,v),t.onBeforeCompile(s,v),c=tt.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=at.uniform),Lt(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=Ai.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Lt(t,e){var n=Y.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas}function Rt(t,e,n,r){!0!==e.isScene&&(e=z),Z.resetTextureUnits();var i=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===_?v.outputEncoding:_.texture.encoding,s=Q.get(n.envMap||a),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=Y.get(n),c=f.state.lights;if(!0===j&&(!0===I||t!==x)){var h=t===x&&n.id===b;at.setState(n,t,h)}var d=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==o||r.isInstancedMesh&&!1===l.instancing?d=!0:r.isInstancedMesh||!0!==l.instancing?l.envMap!==s||n.fog&&l.fog!==i?d=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===at.numPlanes&&l.numIntersection===at.numIntersection?l.vertexAlphas!==u&&(d=!0):d=!0:d=!0:(d=!0,l.__version=n.version);var p=l.currentProgram;!0===d&&(p=Pt(n,e,r));var m,g,y=!1,w=!1,S=!1,k=p.getUniforms(),T=l.uniforms;if(G.useProgram(p.program)&&(y=!0,w=!0,S=!0),n.id!==b&&(b=n.id,w=!0),y||x!==t){if(k.setValue(dt,"projectionMatrix",t.projectionMatrix),H.logarithmicDepthBuffer&&k.setValue(dt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),x!==t&&(x=t,w=!0,S=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var O=k.map.cameraPosition;void 0!==O&&O.setValue(dt,N.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&k.setValue(dt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&k.setValue(dt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){k.setOptional(dt,r,"bindMatrix"),k.setOptional(dt,r,"bindMatrixInverse");var M=r.skeleton;if(M){var A=M.bones;if(H.floatVertexTextures){if(null===M.boneTexture){var P=Math.sqrt(4*A.length);P=kt(P),P=Math.max(P,4);var L=new Float32Array(P*P*4);L.set(M.boneMatrices);var R=new rr(L,P,P,W,V);M.boneMatrices=L,M.boneTexture=R,M.boneTextureSize=P}k.setValue(dt,"boneTexture",M.boneTexture,Z),k.setValue(dt,"boneTextureSize",M.boneTextureSize)}else k.setOptional(dt,M,"boneMatrices")}}return(w||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,k.setValue(dt,"receiveShadow",r.receiveShadow)),w&&(k.setValue(dt,"toneMappingExposure",v.toneMappingExposure),l.needsLights&&(g=S,(m=T).ambientLightColor.needsUpdate=g,m.lightProbe.needsUpdate=g,m.directionalLights.needsUpdate=g,m.directionalLightShadows.needsUpdate=g,m.pointLights.needsUpdate=g,m.pointLightShadows.needsUpdate=g,m.spotLights.needsUpdate=g,m.spotLightShadows.needsUpdate=g,m.rectAreaLights.needsUpdate=g,m.hemisphereLights.needsUpdate=g),i&&n.fog&&et.refreshFogUniforms(T,i),et.refreshMaterialUniforms(T,n,C,E),Ai.upload(dt,l.uniformsList,T,Z)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ai.upload(dt,l.uniformsList,T,Z),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&k.setValue(dt,"center",r.center),k.setValue(dt,"modelViewMatrix",r.modelViewMatrix),k.setValue(dt,"normalMatrix",r.normalMatrix),k.setValue(dt,"modelMatrix",r.matrixWorld),p}Et.setAnimationLoop((function(t){wt&&wt(t)})),"undefined"!==typeof window&&Et.setContext(window),this.setAnimationLoop=function(t){wt=t,yt.setAnimationLoop(t),null===t?Et.stop():Et.start()},yt.addEventListener("sessionstart",St),yt.addEventListener("sessionend",Tt),this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0===e||!0===e.isCamera){if(!0!==m){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===yt.enabled&&!0===yt.isPresenting&&(e=yt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(v,t,e,n||_),(f=rt.get(t,p.length)).init(),p.push(f),D.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),R.setFromProjectionMatrix(D),I=this.localClippingEnabled,j=at.init(this.clippingPlanes,I,e),(h=nt.get(t,d.length)).init(),d.push(h),Ot(t,e,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(O,M),!0===j&&at.beginShadows();var i=f.state.shadowsArray;ot.render(i,t,e),f.setupLights(),f.setupLightsView(e),!0===j&&at.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),st.render(h,t,e,r);var a=h.opaque,o=h.transparent;a.length>0&&Mt(a,t,e),o.length>0&&Mt(o,t,e),null!==_&&(Z.updateRenderTargetMipmap(_),Z.updateMultisampleRenderTarget(_)),!0===t.isScene&&t.onAfterRender(v,t,e),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),ft.resetDefaultState(),b=-1,x=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=t,g=e,y=n,t&&void 0===Y.get(t).__webglFramebuffer&&Z.setupRenderTarget(t);var r=null,i=!1,a=!1;if(t){var o=t.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(a=!0);var s=Y.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=s[e],i=!0):r=t.isWebGLMultisampleRenderTarget?Y.get(t).__webglMultisampledFramebuffer:s,w.copy(t.viewport),S.copy(t.scissor),k=t.scissorTest}else w.copy(A).multiplyScalar(C).floor(),S.copy(P).multiplyScalar(C).floor(),k=L;if(G.bindFramebuffer(36160,r),G.viewport(w),G.scissor(S),G.setScissorTest(k),i){var u=Y.get(t.texture);dt.framebufferTexture2D(36160,36064,34069+e,u.__webglTexture,n)}else if(a){var l=Y.get(t.texture),c=e||0;dt.framebufferTextureLayer(36160,36064,l.__webglTexture,n||0,c)}},this.readRenderTargetPixels=function(t,e,n,r,i,a,o){if(t&&t.isWebGLRenderTarget){var s=Y.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){G.bindFramebuffer(36160,s);try{var u=t.texture,l=u.format,c=u.type;if(l!==W&&ht.convert(l)!==dt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===U&&(q.has("EXT_color_buffer_half_float")||H.isWebGL2&&q.has("EXT_color_buffer_float"));if(c!==B&&ht.convert(c)!==dt.getParameter(35738)&&(c!==V||!(H.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===dt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&dt.readPixels(e,n,r,i,ht.convert(l),ht.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==_?Y.get(_).__webglFramebuffer:null;G.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),o=ht.convert(e.format);Z.setTexture2D(e,0),dt.copyTexImage2D(3553,n,o,t.x,t.y,i,a,0),G.unbindTexture()},this.copyTextureToTexture=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.image.width,a=e.image.height,o=ht.convert(n.format),s=ht.convert(n.type);Z.setTexture2D(n,0),dt.pixelStorei(37440,n.flipY),dt.pixelStorei(37441,n.premultiplyAlpha),dt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?dt.texSubImage2D(3553,r,t.x,t.y,i,a,o,s,e.image.data):e.isCompressedTexture?dt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):dt.texSubImage2D(3553,r,t.x,t.y,o,s,e.image),0===r&&n.generateMipmaps&&dt.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=n.image,s=o.width,u=o.height,l=o.data,c=ht.convert(r.format),h=ht.convert(r.type);if(r.isDataTexture3D)Z.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(r,0),a=35866}dt.pixelStorei(37440,r.flipY),dt.pixelStorei(37441,r.premultiplyAlpha),dt.pixelStorei(3317,r.unpackAlignment);var f=dt.getParameter(3314),d=dt.getParameter(32878),p=dt.getParameter(3316),m=dt.getParameter(3315),g=dt.getParameter(32877);dt.pixelStorei(3314,s),dt.pixelStorei(32878,u),dt.pixelStorei(3316,t.min.x),dt.pixelStorei(3315,t.min.y),dt.pixelStorei(32877,t.min.z),dt.texSubImage3D(a,i,e.x,e.y,e.z,t.max.x-t.min.x+1,t.max.y-t.min.y+1,t.max.z-t.min.z+1,c,h,l),dt.pixelStorei(3314,f),dt.pixelStorei(32878,d),dt.pixelStorei(3316,p),dt.pixelStorei(3315,m),dt.pixelStorei(32877,g),0===i&&r.generateMipmaps&&dt.generateMipmap(a),G.unbindTexture()}},this.initTexture=function(t){Z.setTexture2D(t,0),G.unbindTexture()},this.resetState=function(){g=0,y=0,_=null,G.reset(),ft.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n})(xa).prototype.isWebGL1Renderer=!0;var wa=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Object(m.a)(this,t),this.name="",this.color=new cn(e),this.density=n}return Object(g.a)(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),t}();wa.prototype.isFogExp2=!0;var Sa=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Object(m.a)(this,t),this.name="",this.color=new cn(e),this.near=n,this.far=r}return Object(g.a)(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();Sa.prototype.isFog=!0;var ka=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Object(d.a)(t)})),t}return Object(g.a)(n,[{key:"copy",value:function(t,e){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),n}(ze);ka.prototype.isScene=!0;var Ta=function(){function t(e,n){Object(m.a)(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=ct,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=_t(),this.onUploadCallback=function(){}}return Object(g.a)(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_t()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var n=new t(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_t()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}();Ta.prototype.isInterleavedBuffer=!0;var Ea=new Nt,Ca=function(){function t(e,n,r,i){Object(m.a)(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=!0===i}return Object(g.a)(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)Ea.x=this.getX(e),Ea.y=this.getY(e),Ea.z=this.getZ(e),Ea.applyMatrix4(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)Ea.x=this.getX(e),Ea.y=this.getY(e),Ea.z=this.getZ(e),Ea.applyNormalMatrix(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)Ea.x=this.getX(e),Ea.y=this.getY(e),Ea.z=this.getZ(e),Ea.transformDirection(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new pn(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),t}();Ca.prototype.isInterleavedBufferAttribute=!0;var Oa,Ma=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="SpriteMaterial",r.color=new cn(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(nn);Ma.prototype.isSpriteMaterial=!0;var Aa=new Nt,Pa=new Nt,La=new Nt,Ra=new Ct,ja=new Ct,Ia=new pe,Da=new Nt,Na=new Nt,Ba=new Nt,za=new Ct,Fa=new Ct,Va=new Ct,Ua=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;if(Object(m.a)(this,n),(r=e.call(this)).type="Sprite",void 0===Oa){Oa=new En;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Ta(i,5);Oa.setIndex([0,1,2,0,2,3]),Oa.setAttribute("position",new Ca(a,3,0,!1)),Oa.setAttribute("uv",new Ca(a,2,3,!1))}return r.geometry=Oa,r.material=void 0!==t?t:new Ma,r.center=new Ct(.5,.5),r}return Object(g.a)(n,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pa.setFromMatrixScale(this.matrixWorld),Ia.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),La.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pa.multiplyScalar(-La.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;qa(Da.set(-.5,-.5,0),La,a,Pa,n,r),qa(Na.set(.5,-.5,0),La,a,Pa,n,r),qa(Ba.set(.5,.5,0),La,a,Pa,n,r),za.set(0,0),Fa.set(1,0),Va.set(1,1);var o=t.ray.intersectTriangle(Da,Na,Ba,!1,Aa);if(null!==o||(qa(Na.set(-.5,.5,0),La,a,Pa,n,r),Fa.set(0,1),null!==(o=t.ray.intersectTriangle(Da,Ba,Na,!1,Aa)))){var s=t.ray.origin.distanceTo(Aa);s<t.near||s>t.far||e.push({distance:s,point:Aa.clone(),uv:tn.getUV(Aa,Da,Na,Ba,za,Fa,Va,new Ct),face:null,object:this})}}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),n}(ze);function qa(t,e,n,r,i,a){Ra.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(ja.x=a*Ra.x-i*Ra.y,ja.y=i*Ra.x+a*Ra.y):ja.copy(Ra),t.copy(e),t.x+=ja.x,t.y+=ja.y,t.applyMatrix4(Ia)}Ua.prototype.isSprite=!0;var Ha=new Nt,Wa=new jt,Ga=new jt,Xa=new Nt,Ya=new pe,Za=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new pe,i.bindMatrixInverse=new pe,i}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new jt,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,r=this.geometry;Wa.fromBufferAttribute(r.attributes.skinIndex,t),Ga.fromBufferAttribute(r.attributes.skinWeight,t),Ha.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var a=Ga.getComponent(i);if(0!==a){var o=Wa.getComponent(i);Ya.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),e.addScaledVector(Xa.copy(Ha).applyMatrix4(Ya),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(Hn);Za.prototype.isSkinnedMesh=!0;var Qa=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="Bone",t}return n}(ze);Qa.prototype.isBone=!0;var Ja=new pe,Ka=new pe,$a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(m.a)(this,t),this.uuid=_t(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return Object(g.a)(t,[{key:"init",value:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new pe)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var t=0,e=this.bones.length;t<e;t++){var n=new pe;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=t.length;i<a;i++){var o=t[i]?t[i].matrixWorld:Ka;Ja.multiplyMatrices(o,e[i]),Ja.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new t(this.bones,this.boneInverses)}},{key:"getBoneByName",value:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,e){this.uuid=t.uuid;for(var n=0,r=t.bones.length;n<r;n++){var i=t.bones[n],a=e[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Qa),this.bones.push(a),this.boneInverses.push((new pe).fromArray(t.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,r=0,i=e.length;r<i;r++){var a=e[r];t.bones.push(a.uuid);var o=n[r];t.boneInverses.push(o.toArray())}return t}}]),t}(),to=new pe,eo=new pe,no=[],ro=new Hn,io=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;return Object(m.a)(this,n),(a=e.call(this,t,r)).instanceMatrix=new pn(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,r=this.count;if(ro.geometry=this.geometry,ro.material=this.material,void 0!==ro.material)for(var i=0;i<r;i++){this.getMatrixAt(i,to),eo.multiplyMatrices(n,to),ro.matrixWorld=eo,ro.raycast(t,no);for(var a=0,o=no.length;a<o;a++){var s=no[a];s.instanceId=i,s.object=this,e.push(s)}no.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new pn(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Hn);io.prototype.isInstancedMesh=!0;var ao=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="LineBasicMaterial",r.color=new cn(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.morphTargets=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}]),n}(nn);ao.prototype.isLineBasicMaterial=!0;var oo=new Nt,so=new Nt,uo=new pe,lo=new de,co=new ae,ho=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new En,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ao;return Object(m.a)(this,n),(t=e.call(this)).type="Line",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)oo.fromBufferAttribute(e,r-1),so.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=oo.distanceTo(so);t.setAttribute("lineDistance",new gn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),co.copy(n.boundingSphere),co.applyMatrix4(r),co.radius+=i,!1!==t.ray.intersectsSphere(co)){uo.copy(r).invert(),lo.copy(t.ray).applyMatrix4(uo);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Nt,l=new Nt,c=new Nt,h=new Nt,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(lo.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=t.ray.origin.distanceTo(h);_<t.near||_>t.far||e.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;b<x;b+=f){if(u.fromBufferAttribute(p,b),l.fromBufferAttribute(p,b+1),!(lo.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(ze);ho.prototype.isLine=!0;var fo=new Nt,po=new Nt,vo=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="LineSegments",i}return Object(g.a)(n,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)fo.fromBufferAttribute(e,r),po.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+fo.distanceTo(po);t.setAttribute("lineDistance",new gn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(ho);vo.prototype.isLineSegments=!0;var mo=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="LineLoop",i}return n}(ho);mo.prototype.isLineLoop=!0;var go=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="PointsMaterial",r.color=new cn(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.morphTargets=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}]),n}(nn);go.prototype.isPointsMaterial=!0;var yo=new pe,_o=new de,bo=new ae,xo=new Nt,wo=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new En,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new go;return Object(m.a)(this,n),(t=e.call(this)).type="Points",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bo.copy(n.boundingSphere),bo.applyMatrix4(r),bo.radius+=i,!1!==t.ray.intersectsSphere(bo)){yo.copy(r).invert(),_o.copy(t.ray).applyMatrix4(yo);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var f=u.getX(c);xo.fromBufferAttribute(l,f),So(xo,f,s,r,t,e,this)}else for(var d=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);d<p;d++)xo.fromBufferAttribute(l,d),So(xo,d,s,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(ze);function So(t,e,n,r,i,a,o){var s=_o.distanceSqToPoint(t);if(s<n){var u=new Nt;_o.closestPointToPoint(t,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:o})}}wo.prototype.isPoints=!0,function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c){var h;Object(m.a)(this,n),(h=e.call(this,t,r,i,a,o,s,u,l,c)).format=void 0!==u?u:H,h.minFilter=void 0!==s?s:I,h.magFilter=void 0!==o?o:I,h.generateMipmaps=!1;var f=Object(d.a)(h);return"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){f.needsUpdate=!0,t.requestVideoFrameCallback(e)})),h}return Object(g.a)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Lt).prototype.isVideoTexture=!0;var ko=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c,h,f,d){var p;return Object(m.a)(this,n),(p=e.call(this,null,s,u,l,c,h,a,o,f,d)).image={width:r,height:i},p.mipmaps=t,p.flipY=!1,p.generateMipmaps=!1,p}return n}(Lt);ko.prototype.isCompressedTexture=!0;var To=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c){var h;return Object(m.a)(this,n),(h=e.call(this,t,r,i,a,o,s,u,l,c)).needsUpdate=!0,h}return n}(Lt);To.prototype.isCanvasTexture=!0,function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s,u,l,c,h){var f;if(Object(m.a)(this,n),(h=void 0!==h?h:G)!==G&&h!==X)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&h===G&&(i=z),void 0===i&&h===X&&(i=q),(f=e.call(this,null,a,o,s,u,l,h,i,c)).image={width:t,height:r},f.magFilter=void 0!==u?u:L,f.minFilter=void 0!==l?l:L,f.flipY=!1,f.generateMipmaps=!1,f}return n}(Lt).prototype.isDepthTexture=!0;var Eo=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;Object(m.a)(this,n),(t=e.call(this)).type="CylinderGeometry",t.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var h=Object(d.a)(t);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],g=[],y=0,_=[],b=a/2,x=0;function w(){for(var t=new Nt,e=new Nt,n=0,u=(i-r)/a,d=0;d<=s;d++){for(var m=[],w=d/s,S=w*(i-r)+r,k=0;k<=o;k++){var T=k/o,E=T*c+l,C=Math.sin(E),O=Math.cos(E);e.x=S*C,e.y=-w*a+b,e.z=S*O,p.push(e.x,e.y,e.z),t.set(C,u,O).normalize(),v.push(t.x,t.y,t.z),g.push(T,1-w),m.push(y++)}_.push(m)}for(var M=0;M<o;M++)for(var A=0;A<s;A++){var P=_[A][M],L=_[A+1][M],R=_[A+1][M+1],j=_[A][M+1];f.push(P,L,j),f.push(L,R,j),n+=6}h.addGroup(x,n,0),x+=n}function S(t){for(var e=y,n=new Ct,a=new Nt,s=0,u=!0===t?r:i,d=!0===t?1:-1,m=1;m<=o;m++)p.push(0,b*d,0),v.push(0,d,0),g.push(.5,.5),y++;for(var _=y,w=0;w<=o;w++){var S=w/o*c+l,k=Math.cos(S),T=Math.sin(S);a.x=u*T,a.y=b*d,a.z=u*k,p.push(a.x,a.y,a.z),v.push(0,d,0),n.x=.5*k+.5,n.y=.5*T*d+.5,g.push(n.x,n.y),y++}for(var E=0;E<o;E++){var C=e+E,O=_+E;!0===t?f.push(O,O+1,C):f.push(O+1,O,C),s+=3}h.addGroup(x,s,!0===t?1:2),x+=s}return w(),!1===u&&(r>0&&S(!0),i>0&&S(!1)),t.setIndex(f),t.setAttribute("position",new gn(p,3)),t.setAttribute("normal",new gn(v,3)),t.setAttribute("uv",new gn(g,2)),t}return n}(En),Co=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(m.a)(this,n),(i=e.call(this)).type="PolyhedronGeometry",i.parameters={vertices:t,indices:r,radius:a,detail:o};var s=[],u=[];function l(t){for(var e=new Nt,n=new Nt,i=new Nt,a=0;a<r.length;a+=3)v(r[a+0],e),v(r[a+1],n),v(r[a+2],i),c(e,n,i,t)}function c(t,e,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=t.clone().lerp(n,o/i),u=e.clone().lerp(n,o/i),l=i-o,c=0;c<=l;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(u,c/l)}for(var h=0;h<i;h++)for(var f=0;f<2*(i-h)-1;f++){var d=Math.floor(f/2);f%2===0?(p(a[h][d+1]),p(a[h+1][d]),p(a[h][d])):(p(a[h][d+1]),p(a[h+1][d+1]),p(a[h+1][d]))}}function h(t){for(var e=new Nt,n=0;n<s.length;n+=3)e.x=s[n+0],e.y=s[n+1],e.z=s[n+2],e.normalize().multiplyScalar(t),s[n+0]=e.x,s[n+1]=e.y,s[n+2]=e.z}function f(){for(var t=new Nt,e=0;e<s.length;e+=3){t.x=s[e+0],t.y=s[e+1],t.z=s[e+2];var n=_(t)/2/Math.PI+.5,r=b(t)/Math.PI+.5;u.push(n,1-r)}g(),d()}function d(){for(var t=0;t<u.length;t+=6){var e=u[t+0],n=u[t+2],r=u[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(u[t+0]+=1),n<.2&&(u[t+2]+=1),r<.2&&(u[t+4]+=1))}}function p(t){s.push(t.x,t.y,t.z)}function v(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function g(){for(var t=new Nt,e=new Nt,n=new Nt,r=new Nt,i=new Ct,a=new Ct,o=new Ct,l=0,c=0;l<s.length;l+=9,c+=6){t.set(s[l+0],s[l+1],s[l+2]),e.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),o.set(u[c+4],u[c+5]),r.copy(t).add(e).add(n).divideScalar(3);var h=_(r);y(i,c+0,t,h),y(a,c+2,e,h),y(o,c+4,n,h)}}function y(t,e,n,r){r<0&&1===t.x&&(u[e]=t.x-1),0===n.x&&0===n.z&&(u[e]=r/2/Math.PI+.5)}function _(t){return Math.atan2(t.z,-t.x)}function b(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}return l(o),h(a),f(),i.setAttribute("position",new gn(s,3)),i.setAttribute("normal",new gn(s.slice(),3)),i.setAttribute("uv",new gn(u,2)),0===o?i.computeVertexNormals():i.normalizeNormals(),i}return n}(En),Oo=(new Nt,new Nt,new Nt,new tn,function(t,e,n){n=n||2;var r,i,a,o,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=Mo(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,r){var i,a,o,s=[];for(i=0,a=e.length;i<a;i++)(o=Mo(t,e[i]*r,i<a-1?e[i+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),s.push(Fo(o));for(s.sort(Do),i=0;i<s.length;i++)No(s[i],n),n=Ao(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=a=t[0],i=o=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return Po(f,d,n,r,i,l),d});function Mo(t,e,n,r,i){var a,o;if(i===function(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}(t,e,n,r)>0)for(a=e;a<n;a+=r)o=Qo(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=Qo(a,t[a],t[a+1],o);return o&&Ho(o,o.next)&&(Jo(o),o=o.next),o}function Ao(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ho(r,r.next)&&0!==qo(r.prev,r,r.next))r=r.next;else{if(Jo(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Po(t,e,n,r,i,a,o){if(t){!o&&a&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=zo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,u,l=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(t,r,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?Ro(t,r,i,a):Lo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Jo(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?Po(t=jo(Ao(t),e,n),e,n,r,i,a,2):2===o&&Io(t,e,n,r,i,a):Po(Ao(t),e,n,r,i,a,1);break}}}function Lo(t){var e=t.prev,n=t,r=t.next;if(qo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Vo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ro(t,e,n,r){var i=t.prev,a=t,o=t.next;if(qo(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=zo(s,u,e,n,r),f=zo(l,c,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Vo(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&qo(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Vo(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Vo(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&qo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Vo(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function jo(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!Ho(i,a)&&Wo(i,r,r.next,a)&&Yo(i,a)&&Yo(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),Jo(r),Jo(r.next),r=t=a),r=r.next}while(r!==t);return Ao(r)}function Io(t,e,n,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Uo(o,s)){var u=Zo(o,s);return o=Ao(o,o.next),u=Ao(u,u.next),Po(o,e,n,r,i,a),void Po(u,e,n,r,i,a)}s=s.next}o=o.next}while(o!==t)}function Do(t,e){return t.x-e.x}function No(t,e){if(e=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Vo(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),Yo(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&Bo(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(t,e)){var n=Zo(e,t);Ao(e,e.next),Ao(n,n.next)}}function Bo(t,e){return qo(t.prev,t,e.prev)<0&&qo(e.next,t,t.next)<0}function zo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fo(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Vo(t,e,n,r,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(r-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Uo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Wo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Yo(t,e)&&Yo(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(qo(t.prev,t,e.prev)||qo(t,e.prev,e))||Ho(t,e)&&qo(t.prev,t,t.next)>0&&qo(e.prev,e,e.next)>0)}function qo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ho(t,e){return t.x===e.x&&t.y===e.y}function Wo(t,e,n,r){var i=Xo(qo(t,e,n)),a=Xo(qo(t,e,r)),o=Xo(qo(n,r,t)),s=Xo(qo(n,r,e));return i!==a&&o!==s||(!(0!==i||!Go(t,n,e))||(!(0!==a||!Go(t,r,e))||(!(0!==o||!Go(n,t,r))||!(0!==s||!Go(n,e,r)))))}function Go(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Xo(t){return t>0?1:t<0?-1:0}function Yo(t,e){return qo(t.prev,t,t.next)<0?qo(t,e,t.next)>=0&&qo(t,t.prev,e)>=0:qo(t,e,t.prev)<0||qo(t,t.next,e)<0}function Zo(t,e){var n=new Ko(t.i,t.x,t.y),r=new Ko(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Qo(t,e,n,r){var i=new Ko(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Jo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ko(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var $o=function(){function t(){Object(m.a)(this,t)}return Object(g.a)(t,null,[{key:"area",value:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],r=[],i=[];ts(t),es(n,t);var a=t.length;e.forEach(ts);for(var o=0;o<e.length;o++)r.push(a),a+=e[o].length,es(n,e[o]);for(var s=Oo(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),t}();function ts(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function es(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var ns=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;Object(m.a)(this,n),(i=e.call(this)).type="ExtrudeGeometry",i.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];for(var a=Object(d.a)(i),o=[],s=[],u=0,l=t.length;u<l;u++){c(t[u])}function c(t){var e=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,h=void 0!==r.bevelSize?r.bevelSize:c-2,f=void 0!==r.bevelOffset?r.bevelOffset:0,d=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,v=void 0!==r.UVGenerator?r.UVGenerator:rs;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=r.amount);var m,g,y,_,b,x=!1;p&&(m=p.getSpacedPoints(i),x=!0,l=!1,g=p.computeFrenetFrames(i,!1),y=new Nt,_=new Nt,b=new Nt),l||(d=0,c=0,h=0,f=0);var w=t.extractPoints(n),S=w.shape,k=w.holes;if(!$o.isClockWise(S)){S=S.reverse();for(var T=0,E=k.length;T<E;T++){var C=k[T];$o.isClockWise(C)&&(k[T]=C.reverse())}}for(var O=$o.triangulateShape(S,k),M=S,A=0,P=k.length;A<P;A++){var L=k[A];S=S.concat(L)}function R(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var j=S.length,I=O.length;function D(t,e,n){var r,i,a,o=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=o*o+s*s,h=o*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=e.x-s/f,v=e.y+o/f,m=((n.x-l/d-p)*l-(n.y+u/d-v)*u)/(o*l-s*u),g=(r=p+o*m-t.x)*r+(i=v+s*m-t.y)*i;if(g<=2)return new Ct(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Ct(r/a,i/a)}for(var N=[],B=0,z=M.length,F=z-1,V=B+1;B<z;B++,F++,V++)F===z&&(F=0),V===z&&(V=0),N[B]=D(M[B],M[F],M[V]);for(var U,q=[],H=N.concat(),W=0,G=k.length;W<G;W++){var X=k[W];U=[];for(var Y=0,Z=X.length,Q=Z-1,J=Y+1;Y<Z;Y++,Q++,J++)Q===Z&&(Q=0),J===Z&&(J=0),U[Y]=D(X[Y],X[Q],X[J]);q.push(U),H=H.concat(U)}for(var K=0;K<d;K++){for(var $=K/d,tt=c*Math.cos($*Math.PI/2),et=h*Math.sin($*Math.PI/2)+f,nt=0,rt=M.length;nt<rt;nt++){var it=R(M[nt],N[nt],et);Lt(it.x,it.y,-tt)}for(var at=0,ot=k.length;at<ot;at++){var st=k[at];U=q[at];for(var ut=0,lt=st.length;ut<lt;ut++){var ct=R(st[ut],U[ut],et);Lt(ct.x,ct.y,-tt)}}}for(var ht=h+f,ft=0;ft<j;ft++){var dt=l?R(S[ft],H[ft],ht):S[ft];x?(_.copy(g.normals[0]).multiplyScalar(dt.x),y.copy(g.binormals[0]).multiplyScalar(dt.y),b.copy(m[0]).add(_).add(y),Lt(b.x,b.y,b.z)):Lt(dt.x,dt.y,0)}for(var pt=1;pt<=i;pt++)for(var vt=0;vt<j;vt++){var mt=l?R(S[vt],H[vt],ht):S[vt];x?(_.copy(g.normals[pt]).multiplyScalar(mt.x),y.copy(g.binormals[pt]).multiplyScalar(mt.y),b.copy(m[pt]).add(_).add(y),Lt(b.x,b.y,b.z)):Lt(mt.x,mt.y,u/i*pt)}for(var gt=d-1;gt>=0;gt--){for(var yt=gt/d,_t=c*Math.cos(yt*Math.PI/2),bt=h*Math.sin(yt*Math.PI/2)+f,xt=0,wt=M.length;xt<wt;xt++){var St=R(M[xt],N[xt],bt);Lt(St.x,St.y,u+_t)}for(var kt=0,Tt=k.length;kt<Tt;kt++){var Et=k[kt];U=q[kt];for(var Ot=0,Mt=Et.length;Ot<Mt;Ot++){var At=R(Et[Ot],U[Ot],bt);x?Lt(At.x,At.y+m[i-1].y,m[i-1].x+_t):Lt(At.x,At.y,u+_t)}}}function Pt(t,e){for(var n=t.length;--n>=0;){var r=n,a=n-1;a<0&&(a=t.length-1);for(var o=0,s=i+2*d;o<s;o++){var u=j*o,l=j*(o+1);jt(e+r+u,e+a+u,e+a+l,e+r+l)}}}function Lt(t,n,r){e.push(t),e.push(n),e.push(r)}function Rt(t,e,n){It(t),It(e),It(n);var r=o.length/3,i=v.generateTopUV(a,o,r-3,r-2,r-1);Dt(i[0]),Dt(i[1]),Dt(i[2])}function jt(t,e,n,r){It(t),It(e),It(r),It(e),It(n),It(r);var i=o.length/3,s=v.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);Dt(s[0]),Dt(s[1]),Dt(s[3]),Dt(s[1]),Dt(s[2]),Dt(s[3])}function It(t){o.push(e[3*t+0]),o.push(e[3*t+1]),o.push(e[3*t+2])}function Dt(t){s.push(t.x),s.push(t.y)}!function(){var t=o.length/3;if(l){for(var e=0,n=j*e,r=0;r<I;r++){var s=O[r];Rt(s[2]+n,s[1]+n,s[0]+n)}n=j*(e=i+2*d);for(var u=0;u<I;u++){var c=O[u];Rt(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<I;h++){var f=O[h];Rt(f[2],f[1],f[0])}for(var p=0;p<I;p++){var v=O[p];Rt(v[0]+j*i,v[1]+j*i,v[2]+j*i)}}a.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;Pt(M,e),e+=M.length;for(var n=0,r=k.length;n<r;n++){var i=k[n];Pt(i,e),e+=i.length}a.addGroup(t,o.length/3-t,1)}()}return i.setAttribute("position",new gn(o,3)),i.setAttribute("uv",new gn(s,2)),i.computeVertexNormals(),i}return Object(g.a)(n,[{key:"toJSON",value:function(){var t=En.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}]),n}(En),rs={generateTopUV:function(t,e,n,r,i){var a=e[3*n],o=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new Ct(a,o),new Ct(s,u),new Ct(l,c)]},generateSideWallUV:function(t,e,n,r,i,a){var o=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],f=e[3*i],d=e[3*i+1],p=e[3*i+2],v=e[3*a],m=e[3*a+1],g=e[3*a+2];return Math.abs(s-c)<.01?[new Ct(o,1-u),new Ct(l,1-h),new Ct(f,1-p),new Ct(v,1-g)]:[new Ct(s,1-u),new Ct(c,1-h),new Ct(d,1-p),new Ct(m,1-g)]}};var is=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(t=e.call(this,o,s,r,i)).type="IcosahedronGeometry",t.parameters={radius:r,detail:i},t}return n}(Co),as=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Object(m.a)(this,n),(r=e.call(this)).type="ShapeGeometry",r.parameters={shapes:t,curveSegments:i};var a=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(t))f(t);else for(var h=0;h<t.length;h++)f(t[h]),r.addGroup(l,c,h),l+=c,c=0;function f(t){var e=o.length/3,n=t.extractPoints(i),r=n.shape,l=n.holes;!1===$o.isClockWise(r)&&(r=r.reverse());for(var h=0,f=l.length;h<f;h++){var d=l[h];!0===$o.isClockWise(d)&&(l[h]=d.reverse())}for(var p=$o.triangulateShape(r,l),v=0,m=l.length;v<m;v++){var g=l[v];r=r.concat(g)}for(var y=0,_=r.length;y<_;y++){var b=r[y];o.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var x=0,w=p.length;x<w;x++){var S=p[x],k=S[0]+e,T=S[1]+e,E=S[2]+e;a.push(k,T,E),c+=3}}return r.setIndex(a),r.setAttribute("position",new gn(o,3)),r.setAttribute("normal",new gn(s,3)),r.setAttribute("uv",new gn(u,2)),r}return Object(g.a)(n,[{key:"toJSON",value:function(){var t=En.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}]),n}(En);var os=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;Object(m.a)(this,n),(t=e.call(this)).type="SphereGeometry",t.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),h=0,f=[],d=new Nt,p=new Nt,v=[],g=[],y=[],_=[],b=0;b<=a;b++){var x=[],w=b/a,S=0;0==b&&0==u?S=.5/i:b==a&&c==Math.PI&&(S=-.5/i);for(var k=0;k<=i;k++){var T=k/i;d.x=-r*Math.cos(o+T*s)*Math.sin(u+w*l),d.y=r*Math.cos(u+w*l),d.z=r*Math.sin(o+T*s)*Math.sin(u+w*l),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),_.push(T+S,1-w),x.push(h++)}f.push(x)}for(var E=0;E<a;E++)for(var C=0;C<i;C++){var O=f[E][C+1],M=f[E][C],A=f[E+1][C],P=f[E+1][C+1];(0!==E||u>0)&&v.push(O,M,P),(E!==a-1||c<Math.PI)&&v.push(M,A,P)}return t.setIndex(v),t.setAttribute("position",new gn(g,3)),t.setAttribute("normal",new gn(y,3)),t.setAttribute("uv",new gn(_,2)),t}return n}(En),ss=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="ShadowMaterial",r.color=new cn(0),r.transparent=!0,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this}}]),n}(nn);ss.prototype.isShadowMaterial=!0;var us=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this,t)).type="RawShaderMaterial",r}return n}(Qn);us.prototype.isRawShaderMaterial=!0;var ls=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new cn(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new cn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=ut,r.normalScale=new Ct(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.vertexTangents=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this}}]),n}(nn);ls.prototype.isMeshStandardMaterial=!0;var cs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new Ct(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty(Object(d.a)(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=bt(2.5*(t-1)/(t+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new cn).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this}}]),n}(ls);cs.prototype.isMeshPhysicalMaterial=!0;var hs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshPhongMaterial",r.color=new cn(16777215),r.specular=new cn(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new cn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=ut,r.normalScale=new Ct(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(nn);hs.prototype.isMeshPhongMaterial=!0;var fs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new cn(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new cn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=ut,r.normalScale=new Ct(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(nn);fs.prototype.isMeshToonMaterial=!0;var ds=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=ut,r.normalScale=new Ct(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(nn);ds.prototype.isMeshNormalMaterial=!0;var ps=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="MeshLambertMaterial",r.color=new cn(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new cn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(nn);ps.prototype.isMeshLambertMaterial=!0;var vs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new cn(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=ut,r.normalScale=new Ct(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.skinning=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(nn);vs.prototype.isMeshMatcapMaterial=!0;var ms=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(t),r}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),n}(ao);ms.prototype.isLineDashedMaterial=!0;var gs={arraySlice:function(t,e,n){return gs.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*e,u=0;u!==e;++u)i[o++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(e.push(a.time),n.push.apply(n,o)),a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(e.push(a.time),o.toArray(n,n.length)),a=t[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(e.push(a.time),n.push(o)),a=t[i++]}while(void 0!==a)}},subclip:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=gs.convertArray(c,u.times.constructor),u.values=gs.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=e/r,o=function(e){var r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,f=void 0;if(a<=r.times[0]){var d=s,p=u-s;f=gs.arraySlice(r.values,d,p)}else if(a>=r.times[h]){var v=h*u+s,m=v+u-s;f=gs.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,_=u-s;g.evaluate(a),f=gs.arraySlice(g.resultBuffer,y,_)}"quaternion"===i&&(new Dt).fromArray(f).normalize().conjugate().toArray(f);for(var b=o.times.length,x=0;x<b;++x){var w=x*c+l;if("quaternion"===i)Dt.multiplyQuaternionsFlat(o.values,w,f,0,o.values,w);else for(var S=c-2*l,k=0;k<S;++k)o.values[w+k]-=f[k]}},s=0;s<i;++s)o(s);return t.blendMode=et,t}},ys=function(){function t(e,n,r,i){Object(m.a)(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return Object(g.a)(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var a;n:{r:if(!(t<r)){for(var o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,t<(r=e[++n]))break e}a=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===u)break;if(r=i,t>=(i=e[--n-1]))break e}a=n,n=0}for(;n<a;){var l=n+a>>>1;t<e[l]?a=l:n=l+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,a=0;a!==r;++a)e[a]=n[i+a];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();ys.prototype.beforeStart_=ys.prototype.copySampleValue_,ys.prototype.afterEnd_=ys.prototype.copySampleValue_;var _s=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a){var o;return Object(m.a)(this,n),(o=e.call(this,t,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:J,endingEnd:J},o}return Object(g.a)(n,[{key:"intervalChanged_",value:function(t,e,n){var r=this.parameterPositions,i=t-2,a=t+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case K:i=t,o=2*e-n;break;case $:o=e+r[i=r.length-2]-r[i+1];break;default:i=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case K:a=t,s=2*n-e;break;case $:a=1,s=n+r[1]-r[0];break;default:a=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,_=f*v-f*p,b=0;b!==o;++b)i[b]=m*a[l+b]+g*a[u+b]+y*a[s+b]+_*a[c+b];return i}}]),n}(ys),bs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a){return Object(m.a)(this,n),e.call(this,t,r,i,a)}return Object(g.a)(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=(n-e)/(r-e),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),n}(ys),xs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a){return Object(m.a)(this,n),e.call(this,t,r,i,a)}return Object(g.a)(n,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),n}(ys),ws=function(){function t(e,n,r,i){if(Object(m.a)(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gs.convertArray(n,this.TimeBufferType),this.values=gs.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return Object(g.a)(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new xs(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new bs(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new _s(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case Y:e=this.InterpolantFactoryMethodDiscrete;break;case Z:e=this.InterpolantFactoryMethodLinear;break;case Q:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y;case this.InterpolantFactoryMethodLinear:return Z;case this.InterpolantFactoryMethodSmooth:return Q}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<t;)++i;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=gs.arraySlice(n,i,a),this.values=gs.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==r&&gs.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=gs.arraySlice(this.times),e=gs.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Q,i=t.length-1,a=1,o=1;o<i;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==t[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=e[l+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)e[v+m]=e[p+m]}++a}}if(i>0){t[a]=t[i];for(var g=i*n,y=a*n,_=0;_!==n;++_)e[y+_]=e[g+_];++a}return a!==t.length?(this.times=gs.arraySlice(t,0,a),this.values=gs.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=gs.arraySlice(this.times,0),e=gs.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(t){var e,n=t.constructor;if(n.toJSON!==this.toJSON)e=n.toJSON(t);else{e={name:t.name,times:gs.convertArray(t.times,Array),values:gs.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}]),t}();ws.prototype.TimeBufferType=Float32Array,ws.prototype.ValueBufferType=Float32Array,ws.prototype.DefaultInterpolation=Z;var Ss=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n}(ws);Ss.prototype.ValueTypeName="bool",Ss.prototype.ValueBufferType=Array,Ss.prototype.DefaultInterpolation=Y,Ss.prototype.InterpolantFactoryMethodLinear=void 0,Ss.prototype.InterpolantFactoryMethodSmooth=void 0;var ks=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n}(ws);ks.prototype.ValueTypeName="color";var Ts=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n}(ws);Ts.prototype.ValueTypeName="number";var Es=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a){return Object(m.a)(this,n),e.call(this,t,r,i,a)}return Object(g.a)(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(r-e),u=t*o,l=u+o;u!==l;u+=4)Dt.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(ys),Cs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new Es(this.times,this.values,this.getValueSize(),t)}}]),n}(ws);Cs.prototype.ValueTypeName="quaternion",Cs.prototype.DefaultInterpolation=Z,Cs.prototype.InterpolantFactoryMethodSmooth=void 0;var Os=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n}(ws);Os.prototype.ValueTypeName="string",Os.prototype.ValueBufferType=Array,Os.prototype.DefaultInterpolation=Y,Os.prototype.InterpolantFactoryMethodLinear=void 0,Os.prototype.InterpolantFactoryMethodSmooth=void 0;var Ms=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return n}(ws);Ms.prototype.ValueTypeName="vector";var As=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tt;Object(m.a)(this,t),this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=_t(),this.duration<0&&this.resetDuration()}return Object(g.a)(t,[{key:"resetDuration",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,a=n.length;i!==a;++i)e.push(Ps(n[i]).scale(r));var o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,a=n.length;i!==a;++i)e.push(ws.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,r){for(var i=e.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=gs.getKeyframeOrder(s);s=gs.sortedArray(s,1,l),u=gs.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Ts(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/n))}return new this(t,-1,a)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],e,n));return h}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var a=[],o=[];gs.flattenJSON(n,a,o,r),0!==a.length&&i.push(new t(e,a,o))}},r=[],i=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,u=t.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[f].morphTargets.length;++g){var y=c[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Ts(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(a||1)}else{var _=".bones["+e[l].name+"]";n(Ms,_+".position",c,"pos",r),n(Cs,_+".quaternion",c,"rot",r),n(Ms,_+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),t}();function Ps(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ts;case"vector":case"vector2":case"vector3":case"vector4":return Ms;case"color":return ks;case"quaternion":return Cs;case"bool":case"boolean":return Ss;case"string":return Os}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];gs.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Ls={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Rs=function t(e,n,r){Object(m.a)(this,t);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){s++,!1===a&&void 0!==i.onStart&&i.onStart(t,o,s),a=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return u?u(t):t},this.setURLModifier=function(t){return u=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var r=l[e],i=l[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}},js=new Rs,Is=function(){function t(e){Object(m.a)(this,t),this.manager=void 0!==e?e:js,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return Object(g.a)(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),Ds={},Ns=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){return Object(m.a)(this,n),e.call(this,t)}return Object(g.a)(n,[{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ls.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;if(void 0===Ds[t]){var o,s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout((function(){e&&e(h),i.manager.itemEnd(t)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{for(var m in Ds[t]=[],Ds[t].push({onLoad:e,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",t,!0),o.addEventListener("load",(function(e){var n=this.response,r=Ds[t];if(delete Ds[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ls.add(t,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),o.addEventListener("progress",(function(e){for(var n=Ds[t],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(e)}}),!1),o.addEventListener("error",(function(e){var n=Ds[t];delete Ds[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),o.addEventListener("abort",(function(e){var n=Ds[t];delete Ds[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(m,this.requestHeader[m]);o.send(null)}return i.manager.itemStart(t),o}Ds[t].push({onLoad:e,onProgress:n,onError:r})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),n}(Is),Bs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){return Object(m.a)(this,n),e.call(this,t)}return Object(g.a)(n,[{key:"load",value:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ls.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Ls.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}]),n}(Is),zs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){return Object(m.a)(this,n),e.call(this,t)}return Object(g.a)(n,[{key:"load",value:function(t,e,n,r){var i=new er,a=new Bs(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(t[n],(function(t){i.images[n]=t,6===++o&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}]),n}(Is),Fs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){return Object(m.a)(this,n),e.call(this,t)}return Object(g.a)(n,[{key:"load",value:function(t,e,n,r){var i=new Lt,a=new Bs(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?H:W,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}]),n}(Is),Vs=function(){function t(){Object(m.a)(this,t),this.type="Curve",this.arcLengthDivisions=200}return Object(g.a)(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=t;a++)i+=(e=this.getPoint(a/t)).distanceTo(r),n.push(i),r=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(t,e){var n,r=this.getLengths(),i=0,a=r.length;n=e||t*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(t,e){var n=1e-4,r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=e||(a.isVector2?new Ct:new Nt);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new Nt,r=[],i=[],a=[],o=new Nt,s=new pe,u=0;u<=t;u++){var l=u/t;r[u]=this.getTangentAt(l,new Nt),r[u].normalize()}i[0]=new Nt,a[0]=new Nt;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=t;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(bt(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===e){var m=Math.acos(bt(i[0].dot(i[t]),-1,1));m/=t,r[0].dot(o.crossVectors(i[0],i[t]))>0&&(m=-m);for(var g=1;g<=t;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),Us=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(m.a)(this,n),(t=e.call(this)).type="EllipseCurve",t.aX=r,t.aY=i,t.xRadius=a,t.yRadius=o,t.aStartAngle=s,t.aEndAngle=u,t.aClockwise=l,t.aRotation=c,t}return Object(g.a)(n,[{key:"getPoint",value:function(t,e){for(var n=e||new Ct,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(Vs);Us.prototype.isEllipseCurve=!0;var qs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a,o,s){var u;return Object(m.a)(this,n),(u=e.call(this,t,r,i,i,a,o,s)).type="ArcCurve",u}return n}(Us);function Hs(){var t=0,e=0,n=0,r=0;function i(i,a,o,s){t=i,e=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(t,e,n,r,a){i(e,n,a*(n-t),a*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,a,o,s){var u=(e-t)/a-(n-t)/(a+o)+(n-e)/o,l=(n-e)/o-(r-e)/(o+s)+(r-n)/s;i(e,n,u*=o,l*=o)},calc:function(i){var a=i*i;return t+e*i+n*a+r*(a*i)}}}qs.prototype.isArcCurve=!0;var Ws=new Nt,Gs=new Hs,Xs=new Hs,Ys=new Hs,Zs=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Object(m.a)(this,n),(t=e.call(this)).type="CatmullRomCurve3",t.points=r,t.closed=i,t.curveType=a,t.tension=o,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*t,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?e=a[(u-1)%o]:(Ws.subVectors(a[0],a[1]).add(a[0]),e=Ws);var c=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(Ws.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=Ws),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(e.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),Gs.initNonuniformCatmullRom(e.x,c.x,h.x,n.x,d,p,v),Xs.initNonuniformCatmullRom(e.y,c.y,h.y,n.y,d,p,v),Ys.initNonuniformCatmullRom(e.z,c.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(Gs.initCatmullRom(e.x,c.x,h.x,n.x,this.tension),Xs.initCatmullRom(e.y,c.y,h.y,n.y,this.tension),Ys.initCatmullRom(e.z,c.z,h.z,n.z,this.tension));return i.set(Gs.calc(l),Xs.calc(l),Ys.calc(l)),i}},{key:"copy",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:"fromJSON",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new Nt).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(Vs);function Qs(t,e,n,r,i){var a=.5*(r-e),o=.5*(i-n),s=t*t;return(2*n-2*r+a+o)*(t*s)+(-3*n+3*r-2*a-o)*s+a*t+n}function Js(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Ks(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}Zs.prototype.isCatmullRomCurve3=!0;var $s=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ct,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ct,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ct;return Object(m.a)(this,n),(t=e.call(this)).type="CubicBezierCurve",t.v0=r,t.v1=i,t.v2=a,t.v3=o,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,n=e,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Ks(t,r.x,i.x,a.x,o.x),Ks(t,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Vs);$s.prototype.isCubicBezierCurve=!0;var tu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Nt;return Object(m.a)(this,n),(t=e.call(this)).type="CubicBezierCurve3",t.v0=r,t.v1=i,t.v2=a,t.v3=o,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,n=e,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Ks(t,r.x,i.x,a.x,o.x),Ks(t,r.y,i.y,a.y,o.y),Ks(t,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Vs);tu.prototype.isCubicBezierCurve3=!0;var eu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ct,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct;return Object(m.a)(this,n),(t=e.call(this)).type="LineCurve",t.v1=r,t.v2=i,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"getTangent",value:function(t,e){var n=e||new Ct;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Vs);eu.prototype.isLineCurve=!0;var nu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt;return Object(m.a)(this,n),(t=e.call(this)).type="LineCurve3",t.isLineCurve3=!0,t.v1=r,t.v2=i,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Vs),ru=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ct,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ct;return Object(m.a)(this,n),(t=e.call(this)).type="QuadraticBezierCurve",t.v0=r,t.v1=i,t.v2=a,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,n=e,r=this.v0,i=this.v1,a=this.v2;return n.set(Js(t,r.x,i.x,a.x),Js(t,r.y,i.y,a.y)),n}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Vs);ru.prototype.isQuadraticBezierCurve=!0;var iu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nt;return Object(m.a)(this,n),(t=e.call(this)).type="QuadraticBezierCurve3",t.v0=r,t.v1=i,t.v2=a,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt,n=e,r=this.v0,i=this.v1,a=this.v2;return n.set(Js(t,r.x,i.x,a.x),Js(t,r.y,i.y,a.y),Js(t,r.z,i.z,a.z)),n}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Vs);iu.prototype.isQuadraticBezierCurve3=!0;var au=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(this,n),(t=e.call(this)).type="SplineCurve",t.points=r,t}return Object(g.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct,n=e,r=this.points,i=(r.length-1)*t,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(Qs(o,s.x,u.x,l.x,c.x),Qs(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t}},{key:"fromJSON",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new Ct).fromArray(i))}return this}}]),n}(Vs);au.prototype.isSplineCurve=!0;var ou=Object.freeze({__proto__:null,ArcCurve:qs,CatmullRomCurve3:Zs,CubicBezierCurve:$s,CubicBezierCurve3:tu,EllipseCurve:Us,LineCurve:eu,LineCurve3:nu,QuadraticBezierCurve:ru,QuadraticBezierCurve3:iu,SplineCurve:au}),su=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="Path",r.currentPoint=new Ct,t&&r.setFromPoints(t),r}return Object(g.a)(n,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new eu(this.currentPoint.clone(),new Ct(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){var i=new ru(this.currentPoint.clone(),new Ct(t,e),new Ct(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,i,a){var o=new $s(this.currentPoint.clone(),new Ct(t,e),new Ct(n,r),new Ct(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new au(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,r,i,a),this}},{key:"absarc",value:function(t,e,n,r,i,a){return this.absellipse(t,e,n,n,r,i,a),this}},{key:"ellipse",value:function(t,e,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(t,e,n,r,i,a,o,s){var u=new Us(t,e,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:"fromJSON",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return Object(g.a)(n,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new eu(e,t))}},{key:"getPoint",value:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push((new ou[i.type]).fromJSON(i))}return this}}]),n}(Vs)),uu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this,t)).uuid=_t(),r.type="Shape",r.holes=[],r}return Object(g.a)(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){Object(h.a)(Object(f.a)(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push((new su).fromJSON(i))}return this}}]),n}(su),lu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(m.a)(this,n),(r=e.call(this)).type="Light",r.color=new cn(t),r.intensity=i,r}return Object(g.a)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),n}(ze);lu.prototype.isLight=!0;var cu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i){var a;return Object(m.a)(this,n),(a=e.call(this,t,i)).type="HemisphereLight",a.position.copy(ze.DefaultUp),a.updateMatrix(),a.groundColor=new cn(r),a}return Object(g.a)(n,[{key:"copy",value:function(t){return lu.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),n}(lu);cu.prototype.isHemisphereLight=!0;var hu=new pe,fu=new Nt,du=new Nt,pu=function(){function t(e){Object(m.a)(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ct(512,512),this.map=null,this.mapPass=null,this.matrix=new pe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new or,this._frameExtents=new Ct(1,1),this._viewportCount=1,this._viewports=[new jt(0,0,1,1)]}return Object(g.a)(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;fu.setFromMatrixPosition(t.matrixWorld),e.position.copy(fu),du.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(du),e.updateMatrixWorld(),hu.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),vu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this,new Kn(50,1,.5,500))).focus=1,t}return Object(g.a)(n,[{key:"updateMatrices",value:function(t){var e=this.camera,r=2*yt*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=t.distance||e.far;r===e.fov&&i===e.aspect&&a===e.far||(e.fov=r,e.aspect=i,e.far=a,e.updateProjectionMatrix()),Object(h.a)(Object(f.a)(n.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.focus=t.focus,this}}]),n}(pu);vu.prototype.isSpotLightShadow=!0;var mu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="SpotLight",i.position.copy(ze.DefaultUp),i.updateMatrix(),i.target=new ze,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.shadow=new vu,i}return Object(g.a)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(lu);mu.prototype.isSpotLight=!0;var gu=new pe,yu=new Nt,_u=new Nt,bu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this,new Kn(90,1,.5,500)))._frameExtents=new Ct(4,2),t._viewportCount=6,t._viewports=[new jt(2,1,1,1),new jt(0,1,1,1),new jt(3,1,1,1),new jt(1,1,1,1),new jt(3,0,1,1),new jt(1,0,1,1)],t._cubeDirections=[new Nt(1,0,0),new Nt(-1,0,0),new Nt(0,0,1),new Nt(0,0,-1),new Nt(0,1,0),new Nt(0,-1,0)],t._cubeUps=[new Nt(0,1,0),new Nt(0,1,0),new Nt(0,1,0),new Nt(0,1,0),new Nt(0,0,1),new Nt(0,0,-1)],t}return Object(g.a)(n,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),yu.setFromMatrixPosition(t.matrixWorld),n.position.copy(yu),_u.copy(n.position),_u.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(_u),n.updateMatrixWorld(),r.makeTranslation(-yu.x,-yu.y,-yu.z),gu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gu)}}]),n}(pu);bu.prototype.isPointLightShadow=!0;var xu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new bu,i}return Object(g.a)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}]),n}(lu);xu.prototype.isPointLight=!0;var wu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Object(m.a)(this,n),(t=e.call(this)).type="OrthographicCamera",t.zoom=1,t.view=null,t.left=r,t.right=i,t.top=a,t.bottom=o,t.near=s,t.far=u,t.updateProjectionMatrix(),t}return Object(g.a)(n,[{key:"copy",value:function(t,e){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}},{key:"setViewOffset",value:function(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,a=n+t,o=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]),n}(Jn);wu.prototype.isOrthographicCamera=!0;var Su=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){return Object(m.a)(this,n),e.call(this,new wu(-5,5,5,-5,.5,500))}return n}(pu);Su.prototype.isDirectionalLightShadow=!0;var ku=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="DirectionalLight",i.position.copy(ze.DefaultUp),i.updateMatrix(),i.target=new ze,i.shadow=new Su,i}return Object(g.a)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(lu);ku.prototype.isDirectionalLight=!0;var Tu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="AmbientLight",i}return n}(lu);Tu.prototype.isAmbientLight=!0;var Eu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Object(m.a)(this,n),(i=e.call(this,t,r)).type="RectAreaLight",i.width=a,i.height=o,i}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}]),n}(lu);Eu.prototype.isRectAreaLight=!0;var Cu=function(){function t(){Object(m.a)(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Nt)}return Object(g.a)(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*r),e.addScaledVector(a[2],.488603*i),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*r*1.092548),e.addScaledVector(a[5],r*i*1.092548),e.addScaledVector(a[6],.315392*(3*i*i-1)),e.addScaledVector(a[7],n*i*1.092548),e.addScaledVector(a[8],.546274*(n*n-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*r),e.addScaledVector(a[2],1.023328*i),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*r),e.addScaledVector(a[5],.858086*r*i),e.addScaledVector(a[6],.743125*i*i-.247708),e.addScaledVector(a[7],.858086*n*i),e.addScaledVector(a[8],.429043*(n*n-r*r)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}]),t}();Cu.prototype.isSphericalHarmonics3=!0;var Ou=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cu,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(m.a)(this,n),(t=e.call(this,void 0,i)).sh=r,t}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.sh.copy(t.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.object.sh=this.sh.toArray(),e}}]),n}(lu);Ou.prototype.isLightProbe=!0;var Mu=function(){function t(){Object(m.a)(this,t)}return Object(g.a)(t,null,[{key:"decodeText",value:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(i){return e}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}}]),t}(),Au=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).type="InstancedBufferGeometry",t.instanceCount=1/0,t}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),n}(En);Au.prototype.isInstancedBufferGeometry=!0;var Pu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r,i,a){var o;return Object(m.a)(this,n),"number"===typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=e.call(this,t,r,i)).meshPerAttribute=a||1,o}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"toJSON",value:function(){var t=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),n}(pn);Pu.prototype.isInstancedBufferAttribute=!0;var Lu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),r=e.call(this,t),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return Object(g.a)(n,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ls.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Ls.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}]),n}(Is);Lu.prototype.isImageBitmapLoader=!0;var Ru=function(){function t(){Object(m.a)(this,t),this.type="ShapePath",this.color=new cn,this.subPaths=[],this.currentPath=null}return Object(g.a)(t,[{key:"moveTo",value:function(t,e){return this.currentPath=new su,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:"lineTo",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,i,a){return this.currentPath.bezierCurveTo(t,e,n,r,i,a),this}},{key:"splineThru",value:function(t){return this.currentPath.splineThru(t),this}},{key:"toShapes",value:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],a=new uu;a.curves=i.curves,e.push(a)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=e[i],s=e[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[a],u=-u,s=e[i],l=-l),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=l*(t.x-o.x)-u*(t.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return r}var i,a,o,s=$o.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===e)return n(u);var l=[];if(1===u.length)return a=u[0],(o=new uu).curves=a.curves,l.push(o),l;var c=!s(u[0].getPoints());c=t?!c:c;var h,f,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(a=u[g]).getPoints()),(i=t?!i:i)?(!c&&p[m]&&m++,p[m]={s:new uu,p:h},p[m].s.curves=a.curves,c&&m++,v[m]=[]):v[m].push({h:a,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var _=!1,b=[],x=0,w=p.length;x<w;x++)d[x]=[];for(var S=0,k=p.length;S<k;S++)for(var T=v[S],E=0;E<T.length;E++){for(var C=T[E],O=!0,M=0;M<p.length;M++)r(C.p,p[M].p)&&(S!==M&&b.push({froms:S,tos:M,hole:E}),O?(O=!1,d[M].push(C)):_=!0);O&&d[S].push(C)}b.length>0&&(_||(v=d))}for(var A=0,P=p.length;A<P;A++){o=p[A].s,l.push(o);for(var L=0,R=(f=v[A]).length;L<R;L++)o.holes.push(f[L].h)}return l}}]),t}(),ju=function(){function t(e){Object(m.a)(this,t),this.type="Font",this.data=e}return Object(g.a)(t,[{key:"generateShapes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Iu(t,e,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),t}();function Iu(t,e,n){for(var r=Array.from(t),i=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=a;else{var h=Du(c,i,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}function Du(t,e,n,r,i){var a=i.glyphs[t]||i.glyphs["?"];if(a){var o,s,u,l,c,h,f,d,p=new Ru;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;){switch(v[m++]){case"m":o=v[m++]*e+n,s=v[m++]*e+r,p.moveTo(o,s);break;case"l":o=v[m++]*e+n,s=v[m++]*e+r,p.lineTo(o,s);break;case"q":u=v[m++]*e+n,l=v[m++]*e+r,c=v[m++]*e+n,h=v[m++]*e+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=v[m++]*e+n,l=v[m++]*e+r,c=v[m++]*e+n,h=v[m++]*e+r,f=v[m++]*e+n,d=v[m++]*e+r,p.bezierCurveTo(c,h,f,d,u,l)}}return{offsetX:a.ha*e,path:p}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}ju.prototype.isFont=!0;var Nu,Bu=function(){return void 0===Nu&&(Nu=new(window.AudioContext||window.webkitAudioContext)),Nu},zu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){return Object(m.a)(this,n),e.call(this,t)}return Object(g.a)(n,[{key:"load",value:function(t,e,n,r){var i=this,a=new Ns(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{var a=n.slice(0);Bu().decodeAudioData(a,(function(t){e(t)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(t)}}),n,r)}}]),n}(Is);(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(m.a)(this,n),i=e.call(this,void 0,a);var o=(new cn).set(t),s=(new cn).set(r),u=new Nt(o.r,o.g,o.b),l=new Nt(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(h),i}return n})(Ou).prototype.isHemisphereLightProbe=!0,function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(m.a)(this,n),r=e.call(this,void 0,i);var a=(new cn).set(t);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(Ou).prototype.isAmbientLightProbe=!0;var Fu=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(m.a)(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Object(g.a)(t,[{key:"start",value:function(){this.startTime=Vu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=Vu();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}();function Vu(){return("undefined"===typeof performance?Date:performance).now()}var Uu=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).type="Audio",r.listener=t,r.context=t.context,r.gain=r.context.createGain(),r.gain.connect(t.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Object(g.a)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(ze),qu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Object(m.a)(this,t),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}return Object(g.a)(t,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}]),t}(),Hu=function(){function t(e,n,r){var i,a,o;switch(Object(m.a)(this,t),this.binding=e,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return Object(g.a)(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=e*this._origIndex;this._mixBufferRegion(n,r,s,1-i,e)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var u=e,l=e+e;u!==l;++u)if(n[u]!==n[u+e]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,a=r;i!==a;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)t[e+a]=t[n+a]}},{key:"_slerp",value:function(t,e,n,r){Dt.slerpFlat(t,e,t,e,t,n,r)}},{key:"_slerpAdditive",value:function(t,e,n,r,i){var a=this._workIndex*i;Dt.multiplyQuaternionsFlat(t,a,t,e,t,n),Dt.slerpFlat(t,e,t,e,t,a,r)}},{key:"_lerp",value:function(t,e,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*r}}},{key:"_lerpAdditive",value:function(t,e,n,r,i){for(var a=0;a!==i;++a){var o=e+a;t[o]=t[o]+t[n+a]*r}}}]),t}(),Wu="\\[\\]\\.:\\/",Gu=new RegExp("[\\[\\]\\.:\\/]","g"),Xu="[^\\[\\]\\.:\\/]",Yu="[^"+Wu.replace("\\.","")+"]",Zu=/((?:WC+[\/:])*)/.source.replace("WC",Xu),Qu=/(WCOD+)?/.source.replace("WCOD",Yu),Ju=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xu),Ku=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xu),$u=new RegExp("^"+Zu+Qu+Ju+Ku+"$"),tl=["material","materials","bones"],el=function(){function t(e,n,r){Object(m.a)(this,t);var i=r||nl.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}return Object(g.a)(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),nl=function(){function t(e,n,r){Object(m.a)(this,t),this.path=n,this.parsedPath=r||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Object(g.a)(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var u=e[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,n,r){return e&&e.isAnimationObjectGroup?new t.Composite(e,n,r):new t(e,n,r)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(Gu,"")}},{key:"parseTrackName",value:function(t){var e=$u.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==tl.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var a=t(i.children);if(a)return a}return null}(t.children);if(r)return r}return null}}]),t}();nl.Composite=el,nl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},nl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},nl.prototype.GetterByBindingType=[nl.prototype._getValue_direct,nl.prototype._getValue_array,nl.prototype._getValue_arrayElement,nl.prototype._getValue_toArray],nl.prototype.SetterByBindingTypeAndVersioning=[[nl.prototype._setValue_direct,nl.prototype._setValue_direct_setNeedsUpdate,nl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nl.prototype._setValue_array,nl.prototype._setValue_array_setNeedsUpdate,nl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nl.prototype._setValue_arrayElement,nl.prototype._setValue_arrayElement_setNeedsUpdate,nl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nl.prototype._setValue_fromArray,nl.prototype._setValue_fromArray_setNeedsUpdate,nl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function t(){Object(m.a)(this,t),this.uuid=_t(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return Object(g.a)(t,[{key:"add",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=t.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=e[f];if(void 0===d){d=s++,e[f]=d,t.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new nl(h,n[p],r[p]))}else if(d<u){o=t[d];var m=--u,g=t[m];e[g.uuid]=d,t[d]=g,e[f]=m,t[m]=h;for(var y=0,_=a;y!==_;++y){var b=i[y],x=b[m],w=b[d];b[d]=x,void 0===w&&(w=new nl(h,n[y],r[y])),b[m]=w}}else t[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=e[u];if(void 0!==l&&l>=i){var c=i++,h=t[c];e[h.uuid]=l,t[l]=h,e[u]=c,t[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=e[l];if(void 0!==c)if(delete e[l],c<i){var h=--i,f=t[h],d=--a,p=t[d];e[f.uuid]=c,t[c]=f,e[p.uuid]=h,t[h]=p,t.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],_=g[d];g[c]=y,g[h]=_,g.pop()}}else{var b=--a,x=t[b];b>0&&(e[x.uuid]=c),t[c]=x,t.pop();for(var w=0,S=r;w!==S;++w){var k=n[w];k[c]=k[b],k.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[t]=r,a.push(t),o.push(e),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new nl(d,t,e)}return c}},{key:"unsubscribe_",value:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),t}().prototype.isAnimationObjectGroup=!0;var rl=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Object(m.a)(this,t),this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:J,endingEnd:J},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(g.a)(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,a=i/r,o=r/i;t.warp(1,a,e),this.warp(o,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(t-i)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case et:for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);break;case tt:default:for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),l[f].accumulate(r,s)}}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}},{key:"_updateTimeScale",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,r=this.time+t,i=this._loopCount,a=2202===n;if(0===t)return-1===i?r:a&&1===(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=e||r<0){var o=Math.floor(r/e);r-=e*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return e-r}return r}},{key:"_setEndings",value:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=K,r.endingEnd=K):(r.endingStart=t?this.zeroSlopeAtStart?K:J:$,r.endingEnd=e?this.zeroSlopeAtEnd?K:J:$)}},{key:"_scheduleFading",value:function(t,e,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=e,o[1]=i+t,s[1]=n,this}}]),t}();(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this))._root=t,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return Object(g.a)(n,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(d=new Hu(nl.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var r=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=r.length,r.push(t),a.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_addInactiveBinding",value:function(t,e,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[e];void 0===a&&(a={},r[e]=a),a[n]=t,t._cacheIndex=i.length,i.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new bs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}},{key:"clipAction",value:function(t,e,n){var r=e||this._root,i=r.uuid,a="string"===typeof t?As.findByName(r,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:tt),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new rl(this,a,e,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?As.findByName(n,t):t,a=i?i.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(r,t,i,a)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(dt).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var il=function(){function t(e){Object(m.a)(this,t),"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}return Object(g.a)(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}();(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(m.a)(this,n),(i=e.call(this,t,r)).meshPerAttribute=a||1,i}return Object(g.a)(n,[{key:"copy",value:function(t){return Object(h.a)(Object(f.a)(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"clone",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"clone",this).call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:"toJSON",value:function(t){var e=Object(h.a)(Object(f.a)(n.prototype),"toJSON",this).call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),n})(Ta).prototype.isInstancedInterleavedBuffer=!0,function(){function t(e,n,r,i,a){Object(m.a)(this,t),this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return Object(g.a)(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}}]),t}().prototype.isGLBufferAttribute=!0;var al=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(m.a)(this,t),this.radius=e,this.phi=n,this.theta=r,this}return Object(g.a)(t,[{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(bt(e/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),ol=new Ct,sl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ct(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ct(-1/0,-1/0);Object(m.a)(this,t),this.min=e,this.max=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=ol.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ct),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ct),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Ct),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Ct),e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return ol.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();sl.prototype.isBox2=!0;var ul=new Nt,ll=new Nt,cl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nt;Object(m.a)(this,t),this.start=e,this.end=n}return Object(g.a)(t,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"getCenter",value:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Nt),t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Nt),t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Nt),this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){ul.subVectors(t,this.start),ll.subVectors(this.end,this.start);var n=ll.dot(ll),r=ll.dot(ul)/n;return e&&(r=bt(r,0,1)),r}},{key:"closestPointToPoint",value:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Nt),this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();(function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;return Object(m.a)(this,n),(r=e.call(this)).material=t,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return n})(ze).prototype.isImmediateRenderObject=!0;var hl=new Nt,fl=new pe,dl=new pe,pl=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(t){var r;Object(m.a)(this,n);for(var i=vl(t),a=new En,o=[],s=[],u=new cn(0,0,1),l=new cn(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}a.setAttribute("position",new gn(o,3)),a.setAttribute("color",new gn(s,3));var f=new ao({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=e.call(this,a,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=t,r.bones=i,r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r}return Object(g.a)(n,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,r=this.geometry,i=r.getAttribute("position");dl.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<e.length;a++){var s=e[a];s.parent&&s.parent.isBone&&(fl.multiplyMatrices(dl,s.matrixWorld),hl.setFromMatrixPosition(fl),i.setXYZ(o,hl.x,hl.y,hl.z),fl.multiplyMatrices(dl,s.parent.matrixWorld),hl.setFromMatrixPosition(fl),i.setXYZ(o+1,hl.x,hl.y,hl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Object(h.a)(Object(f.a)(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(vo);function vl(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,vl(t.children[n]));return e}var ml=function(t){Object(p.a)(n,t);var e=Object(v.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Object(m.a)(this,n),a=new cn(a),o=new cn(o);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],f=0,d=0,p=-l;f<=i;f++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var v=f===s?a:o;v.toArray(h,d),d+=3,v.toArray(h,d),d+=3,v.toArray(h,d),d+=3,v.toArray(h,d),d+=3}var g=new En;g.setAttribute("position",new gn(c,3)),g.setAttribute("color",new gn(h,3));var y=new ao({vertexColors:!0,toneMapped:!1});return(t=e.call(this,g,y)).type="GridHelper",t}return n}(vo);var gl=new Float32Array(1),yl=(new Int32Array(gl.buffer),Math.pow(2,8),[.125,.215,.35,.446,.526,.582]),_l=5+yl.length,bl=(r={},Object(u.a)(r,it,0),Object(u.a)(r,at,1),Object(u.a)(r,st,2),Object(u.a)(r,3004,3),Object(u.a)(r,3005,4),Object(u.a)(r,3006,5),Object(u.a)(r,ot,6),new hn({side:1,depthWrite:!1,depthTest:!1})),xl=(new Hn(new Gn,bl),wl());xl._lodPlanes,xl._sizeLods,xl._sigmas,Math.sqrt(5);function wl(){for(var t=[],e=[],n=[],r=8,i=0;i<_l;i++){var a=Math.pow(2,r);e.push(a);var o=1/a;i>4?o=yl[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(g,18*p),f.set(c,12*p);var y=[p,p,p,p,p,p];d.set(y,6*p)}var _=new En;_.setAttribute("position",new pn(h,3)),_.setAttribute("uv",new pn(f,2)),_.setAttribute("faceIndex",new pn(d,1)),t.push(_),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}Vs.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Vs.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},su.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},ml.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},pl.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Is.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Mu.extractUrlBase(t)},Is.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},sl.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},sl.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},sl.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},sl.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Ft.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ft.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ft.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Ft.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Ft.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},ae.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},or.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},cl.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Mt.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Mt.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Mt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Mt.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Mt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Mt.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},pe.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},pe.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},pe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Nt).setFromMatrixColumn(this,3)},pe.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},pe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},pe.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pe.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},pe.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},pe.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},pe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},pe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},pe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},pe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},pe.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},pe.prototype.makeFrustum=function(t,e,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,a)},pe.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},qe.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Dt.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Dt.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},de.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},de.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},de.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},tn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},tn.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},tn.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},tn.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},tn.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},tn.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),tn.getBarycoord(t,e,n,r,i)},tn.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),tn.getNormal(t,e,n,r)},uu.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},uu.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ns(this,t)},uu.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new as(this,t)},Ct.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ct.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Ct.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nt.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Nt.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Nt.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Nt.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Nt.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Nt.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Nt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Nt.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Nt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},jt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},jt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ze.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},ze.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ze.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},ze.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ze.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(ze.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Hn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Hn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Za.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Kn.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(lu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(pn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ht},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ht)}}}),pn.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?ht:ct),this},pn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},pn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},En.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},En.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new pn(arguments[1],arguments[2])))},En.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},En.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},En.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},En.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},En.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(En.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Ta.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?ht:ct),this},Ta.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ns.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ns.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ns.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ka.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},il.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new cn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Qn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),xa.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},xa.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},xa.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},xa.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},xa.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},xa.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},xa.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},xa.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},xa.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},xa.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},xa.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},xa.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},xa.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},xa.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},xa.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},xa.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},xa.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},xa.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},xa.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},xa.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},xa.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},xa.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},xa.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},xa.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},xa.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(xa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?at:it}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(ha.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(It.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Uu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new zu).load(t,(function(t){e.setBuffer(t)})),this},qu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},tr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},tr.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},At.crossOrigin=void 0,At.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Fs;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},At.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new zs;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},At.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},At.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"128"}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="128")},function(t,e,n){var r,i,a;(function(o,s){var u=(o=o||n(102)).window,l=o.document,c=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,r=Object.create,i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,r=this.length;n<r;n++)t.call(e,this[n],n,this)},u=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},c=function(t,e,n){if(t){var r=i(t,"length");(r&&"number"===typeof r.value?o:u).call(t,e,n=n||t)}return n};function h(e,n,r,o,s){var u={};function l(t,l){"string"===typeof(l=l||(l=i(n,t))&&(l.get?l:l.value))&&"#"===l[0]&&(l=e[l.substring(1)]||l);var c,h="function"===typeof l,d=l,p=s||h&&!l.base?l&&l.get?t in e:e[t]:null;s&&p||(h&&p&&(l.base=p),h&&!1!==o&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&"function"===typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(i(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),a(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&l(c);for(var c in u){var h=u[c],d=e["set"+h],p=e["get"+h]||d&&e["is"+h];!p||!0!==o&&0!==p.length||l(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,r=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,r),h(this,e,null,n,r)}for(var i=1,a=arguments.length;i<a;i++)this.inject(arguments[i]);return this},extend:function(){for(var t,e,n,i=this,o=0,s=arguments.length;o<s&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:c,create:r,define:a,describe:i,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||"Object"===e.name)},pick:function(t,e){return t!==s?t:e},slice:function(t,e,r){return n.call(t,e,r)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?v.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"===typeof t&&"object"===typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var n,r=Object.keys(t);if((n=r.length)!==Object.keys(e).length)return!1;for(;n--;){var i=r[n];if(!e.hasOwnProperty(i)||!c.equals(t[i],e[i]))return!1}}return!0}return!1},read:function(t,e,n,r){if(this===c){var i=this.peek(t,e);return t.__index++,i}var a=this.prototype,o=a._readIndex,u=e||o&&t.__index||0,l=t.length,h=t[u];if(r=r||l-u,h instanceof this||n&&n.readNull&&null==h&&r<=1)return o&&(t.__index=u+1),h&&n&&n.clone?h.clone():h;if(h=c.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+r<l?c.slice(t,u,u+r):t)||h,o){t.__index=u+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=s),h.__read=s}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,r){for(var i,a=[],o=e||0,s=r?o+r:t.length,u=o;u<s;u++)a.push(Array.isArray(i=t[u])?this.read(i,0,n):this.read(t,u,n,1));return a},readNamed:function(t,e,n,r,i){var a=this.getNamed(t,e),o=a!==s;if(o){var u=t.__filtered;if(!u){var l=this.getSource(t);(u=t.__filtered=c.create(l)).__unfiltered=l}u[e]=s}return this.read(o?[a]:t,n,r,i)},readSupported:function(t,e){var n=this.getSource(t),r=this,i=!1;return n&&Object.keys(n).forEach((function(n){if(n in e){var a=r.readNamed(t,n);a!==s&&(e[n]=a),i=!0}})),i},getSource:function(t){var e=t.__source;if(e===s){var n=1===t.length&&t[0];e=t.__source=n&&c.isPlainObject(n)?n:null}return e},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,r){var i;function a(r){if((!n||!(r in n))&&(!i||!(r in i))){var a=e[r];a!==s&&(t[r]=a)}}if(r){for(var o,u={},l=0,c=r.length;l<c;l++)(o=r[l])in e&&(a(o),u[o]=!0);i=u}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"===typeof t},serialize:function(t,e,n,r){e=e||{};var i,a=!r;if(a&&(e.formatter=new v(e.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,r=this.references[n];if(!r){this.length++;var i=e.call(t),a=t._class;a&&i[0]!==a&&i.unshift(a),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),t&&t._serialize){i=t._serialize(e,r);var o=t._class;!o||t._compactSerialize||!a&&n||i[0]===o||i.unshift(o)}else if(Array.isArray(t)){i=[];for(var s=0,u=t.length;s<u;s++)i[s]=c.serialize(t[s],e,n,r)}else if(c.isPlainObject(t)){i={};var l=Object.keys(t);for(s=0,u=l.length;s<u;s++){var h=l[s];i[h]=c.serialize(t[h],e,n,r)}}else i="number"===typeof t?e.formatter.number(t,e.precision):t;return a&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(t,e,n,r,i){var a=t,o=!n,s=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h=(u=c.exports[u])?1:0,f=t.length;h<f;h++)a.push(c.deserialize(t[h],e,n,l,s));if(u){var d=a;a=e?e(u,d,o||i):new u(d)}}else if(c.isPlainObject(t))for(var p in a={},r&&(n.dictionary=a),t)a[p]=c.deserialize(t[p],e,n);return s?a[1]:a},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize("string"===typeof t?JSON.parse(t):t,(function(t,n,r){var i=r&&e&&e.constructor===t,a=i?e:c.create(t.prototype);if(1===n.length&&a instanceof C&&(i||!(a instanceof M))){var o=n[0];c.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([{insert:!0}])))}return(i?a.set:t).apply(a,n),i&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var r=t.length;t.length+=n;for(var i=0;i<n;i++)t[r+i]=e[i]}return t},splice:function(t,e,n,r){var i=e&&e.length,a=n===s;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<i;o++)e[o]._index=n+o;if(a)return c.push(t,e),[];var u=[n,r];e&&c.push(u,e);for(var l=t.splice.apply(t,u),h=(o=0,l.length);o<h;o++)l[o]._index=s;for(o=n+i,h=t.length;o<h;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!==typeof t)c.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,r=n&&n[t],i=this._callbacks=this._callbacks||{};-1===(i=i[t]=i[t]||[]).indexOf(e)&&(i.push(e),r&&r.install&&1===i.length&&r.install.call(this,t))}return this},off:function(t,e){if("string"===typeof t){var n,r=this._eventTypes,i=r&&r[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(i&&i.uninstall&&i.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}c.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var r=c.slice(arguments,1),i=e&&e.target&&!e.currentTarget;n=n.slice(),i&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,r)){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,r=t?"install":"uninstall";if(e)for(var i in n)if(n[i].length>0){var a=e[i],o=a&&a[r];o&&o.call(this,i)}},statics:{inject:function t(e){var n=e._events;if(n){var r={};c.each(n,(function(t,n){var i="string"===typeof t,a=i?t:n,o=c.capitalize(a),s=a.substring(2).toLowerCase();r[s]=i?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=r}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){ft=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=ut.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:lt.nativeModes},ut.release(n)}if(!this.agent){var r=o.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a="darwin"===i?"mac":i,s=e.agent=e.browser={platform:a};a&&(s[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,r,i){if(!s.chrome){var a="opera"===e?r:/^(node|trident)$/.test(e)?i:n;s.version=a,s.versionNumber=parseFloat(a),e={trident:"msie",jsdom:"node"}[e]||e,s.name=e,s[e]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.12.15",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ft.PaperScript.execute(t,this,e);return K.updateFocus(),n},install:function(t){var e=this;for(var n in c.each(["project","view","tool"],(function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ft=this,this.project=new E(t),this},createCanvas:function(t,e){return ut.getCanvas(t,e)},activate:function(){ft=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),d=c.extend(h,{initialize:function(t){this._scope=ft,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p={findItemBoundsCollisions:function(t,e,n){function r(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var r=t[n].getBounds();e[n]=[r.left,r.top,r.right,r.bottom]}return e}var i=r(t),a=e&&e!==t?r(e):i;return this.findBoundsCollisions(i,a,n||0)},findCurveBoundsCollisions:function(t,e,n,r){function i(t){for(var e=Math.min,n=Math.max,r=new Array(t.length),i=0;i<t.length;i++){var a=t[i];r[i]=[e(a[0],a[2],a[4],a[6]),e(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return r}var a=i(t),o=e&&e!==t?i(e):a;if(r){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),u=this.findBoundsCollisions(a,o,n||0,!0,!0),l=[],c=0,h=s.length;c<h;c++)l[c]={hor:s[c],ver:u[c]};return l}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(t,e,n,r,i){var a=!e||t===e,o=a?t:t.concat(e),s=t.length,u=o.length;function l(t,e,n){for(var r=0,i=t.length;r<i;){var a=i+r>>>1;o[t[a]][e]<n?r=a+1:i=a}return r-1}for(var c=r?1:0,h=c+2,f=r?0:1,d=f+2,p=new Array(u),v=0;v<u;v++)p[v]=v;p.sort((function(t,e){return o[t][c]-o[e][c]}));var m=[],g=new Array(s);for(v=0;v<u;v++){var y=p[v],_=o[y],b=a?y:y-s,x=y<s,w=a||!x,S=x?[]:null;if(m.length){var k=l(m,h,_[c]-n)+1;if(m.splice(0,k),a&&i){S=S.concat(m);for(var T=0;T<m.length;T++){g[O=m[T]].push(b)}}else{var E=_[d],C=_[f];for(T=0;T<m.length;T++){var O=m[T],M=o[O],A=O<s,P=a||O>=s;(i||(x&&P||w&&A)&&E>=M[f]-n&&C<=M[d]+n)&&(x&&P&&S.push(a?O:O-s),w&&A&&g[O].push(b))}}}if(x&&(t===e&&S.push(y),g[y]=S),m.length){var L=l(m,h,_[h]);m.splice(L+1,0,y)}else m.push(y)}for(v=0;v<g.length;v++){var R=g[v];R&&R.sort((function(t,e){return t-e}))}return g}},v=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});v.instance=new v;var m=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E},o=1e-12,s=112e-18;function u(t,e,n){return t<e?e:t>n?n:t}function l(t,e,r){function i(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*r,o=e*e+t*r;if(3*n(a)<o){var s=i(t),u=i(e),l=i(r),c=e*e,h=t*r;a=c-h+(u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1]-(s[0]*l[0]-h+s[0]*l[1]+s[1]*l[0]+s[1]*l[1]))}return a}function c(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?i(2,-Math.round(a(t))):0}return{EPSILON:o,MACHINE_EPSILON:s,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=o},isMachineZero:function(t){return t>=-112e-18&&t<=s},clamp:u,integrate:function(n,r,i,a){for(var o=t[a-2],s=e[a-2],u=.5*(i-r),l=u+r,c=0,h=a+1>>1,f=1&a?s[c++]*n(l):0;c<h;){var d=u*o[c];f+=s[c++]*(n(l+d)+n(l-d))}return u*f},findRoot:function(t,e,r,i,a,o,s){for(var l=0;l<o;l++){var c=t(r),h=c/e(r),f=r-h;if(n(h)<s){r=f;break}c>0?(a=r,r=f<=i?.5*(i+a):f):(i=r,r=f>=a?.5*(i+a):f)}return u(r,i,a)},solveQuadratic:function(t,e,i,a,h,f){var d,p=1/0;if(n(t)<o){if(n(e)<o)return n(i)<o?-1:0;d=-i/e}else{var v=l(t,e*=-.5,i);if(v&&n(v)<s){var m=c(n(t),n(e),n(i));m&&(v=l(t*=m,e*=m,i*=m))}if(v>=-112e-18){var g=v<0?0:r(v),y=e+(e<0?-g:g);0===y?p=-(d=i/t):(d=y/t,p=i/y)}}var _=0,b=null==h,x=h-o,w=f+o;return isFinite(d)&&(b||d>x&&d<w)&&(a[_++]=b?d:u(d,h,f)),p!==d&&isFinite(p)&&(b||p>x&&p<w)&&(a[_++]=b?p:u(p,h,f)),_},solveCubic:function(t,e,a,l,h,f,d){var p,v,g,y,_,b=c(n(t),n(e),n(a),n(l));function x(n){var r=t*(p=n);y=(r+(v=r+e))*p+(g=v*p+a),_=g*p+l}if(b&&(t*=b,e*=b,a*=b,l*=b),n(t)<o)t=e,v=a,g=l,p=1/0;else if(n(l)<o)v=e,g=a,p=0;else{x(-e/t/3);var w=_/t,S=i(n(w),1/3),k=w<0?-1:1,T=-y/t,E=T>0?1.324717957244746*Math.max(S,r(T)):S,C=p-k*E;if(C!==p){do{x(C),C=0===y?p:p-_/y/(1+s)}while(k*C>k*p);n(t)*p*p>n(l/p)&&(v=((g=-l/p)-a)/p)}}var O=m.solveQuadratic(t,v,g,h,f,d),M=null==f;return isFinite(p)&&(0===O||O>0&&p!==h[0]&&p!==h[1])&&(M||p>f-o&&p<d+o)&&(h[O++]=M?p:u(p,f,d)),O}}},g={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},y=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if("number"===n){var a="number"===typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var t=v.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=y.read(arguments),e=this.getLength()*t.getLength();if(m.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=y.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=y.read(t),n=e.x-this.x,r=e.y-this.y,i=n*n+r*r,a=c.read(t);return a?i:Math.sqrt(i)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,r=new y(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,r=Math.sin(t),i=Math.cos(t);return n=new y(n.x*i-n.y*r,n.x*r+n.y*i),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=y.read(arguments);return new y(this.x+t.x,this.y+t.y)},subtract:function(){var t=y.read(arguments);return new y(this.x-t.x,this.y-t.y)},multiply:function(){var t=y.read(arguments);return new y(this.x*t.x,this.y*t.y)},divide:function(){var t=y.read(arguments);return new y(this.x/t.x,this.y/t.y)},modulo:function(){var t=y.read(arguments);return new y(this.x%t.x,this.y%t.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=arguments,e=y.read(t),n=c.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=y.read(arguments);return y.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=y.read(arguments);return y.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=m.isZero;return t(this.x)&&t(this.y)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.x)||isNaN(this.y)})),isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=y.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=y.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=y.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new y(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=y.read(t),n=y.read(t);return new y(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=y.read(t),n=y.read(t);return new y(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(t,e,n,r){return Math.abs(t*r-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))},isOrthogonal:function(t,e,n,r){return Math.abs(t*n+e*r)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new y(e(this.x),e(this.y))}}),{})),_=y.extend({initialize:function(t,e,n,r){this._x=t,this._y=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if("number"===n){var a="number"===typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=v.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=m.isZero;return t(this.width)&&t(this.height)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.width)||isNaN(this.height)})),statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}}),{})),x=b.extend({initialize:function(t,e,n,r){this._width=t,this._height=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,r){var i,a=arguments,o=typeof t;if("number"===o?(this._set(t,e,n,r),i=4):"undefined"===o||null===t?(this._set(0,0,0,0),i=null===t?1:0):1===a.length&&(Array.isArray(t)?(this._set.apply(this,t),i=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),i=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),c.readSupported(a,this)&&(i=1))),i===s){var u,l,h=y.readNamed(a,"from"),f=c.peek(a),d=h.x,p=h.y;if(f&&f.x!==s||c.hasNamed(a,"to")){var v=y.readNamed(a,"to");u=v.x-d,l=v.y-p,u<0&&(d=v.x,u=-u),l<0&&(p=v.y,l=-l)}else{var m=b.read(a);u=m.width,l=m.height}this._set(d,p,u,l),i=a.__index}var g=a.__filtered;return g&&(this.__filtered=g),this.__read&&(this.__read=i),this},set:"#initialize",_set:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=v.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?y:_)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:x)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,n=this._sy,r=t.width,i=t.height;e&&(this.x+=(this.width-r)*e),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?y:_)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=y.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,r-e,i-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,r-e,i-n)},include:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new w(e,n,r-e,i-n)},expand:function(){var t=b.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),r=/^[RL]/.test(n);e>=4&&(t[1]+=r?"Y":"X");var i=t[r?0:1],a=t[r?1:0],o="get"+i,s="get"+a,u="set"+i,l="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?y:_)(this[o](),this[s](),this,c)},this[c]=function(){var t=y.read(arguments);this[u](t.x),this[l](t.y)}}),{beans:!0})),S=w.extend({initialize:function(t,e,n,r,i,a){this._set(t,e,n,r,!0),this._owner=i,this._setter=a},_set:function(t,e,n,r,i){return this._x=t,this._y=e,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return c.each(["x","y","width","height"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),k=c.extend({_class:"Matrix",initialize:function t(e,n){var r=arguments,i=r.length,a=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):a=!1:i?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,r,i,a,o){return this._a=t,this._b=e,this._c=n,this._d=r,this._tx=i,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new k(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=v.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=y.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=y.read(arguments,1),n=e.x,r=e.y,i=Math.cos(t),a=Math.sin(t),o=n-n*i+r*a,s=r-n*a-r*i,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*u+a*c,this._b=i*l+a*h,this._c=-a*u+i*c,this._d=-a*l+i*h,this._tx+=o*u+s*c,this._ty+=o*l+s*h,this._changed(),this},shear:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0}),r=Math.PI/180,i=new y(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(i,n)},append:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=t._a,s=t._c,u=t._b,l=t._d,c=t._tx,h=t._ty;this._a=o*n+u*i,this._c=s*n+l*i,this._b=o*r+u*a,this._d=s*r+l*a,this._tx+=c*n+h*i,this._ty+=c*r+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=this._tx,s=this._ty,u=t._a,l=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=u*n+l*r,this._c=u*i+l*a,this._b=c*n+h*r,this._d=c*i+h*a,this._tx=u*o+l*s+f,this._ty=c*o+h*s+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,r=this._d,i=this._tx,a=this._ty,o=t*r-e*n,s=null;return o&&!isNaN(o)&&isFinite(i)&&isFinite(a)&&(this._a=r/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-r*i)/o,this._ty=(e*i-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new k(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var r=t.x,i=t.y;return e||(e=new y),e._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var r=0,i=2*n;r<i;r+=2){var a=t[r],o=t[r+1];e[r]=a*this._a+o*this._c+this._tx,e[r+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,r=e+t.width,i=n+t.height,a=[e,n,r,n,r,i,e,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var r=this._transformCorners(t),i=r.slice(0,2),a=i.slice(),o=2;o<8;o++){var s=r[o],u=1&o;s<i[u]?i[u]=s:s>a[u]&&(a[u]=s)}return e||(e=new w),e._set(i[0],i[1],a[0]-i[0],a[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(t,e,n){var r=this._a,i=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,l=r*o-i*a,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new y),c=e._set((h*o-f*a)/l,(f*r-h*i)/l,n)}return c},decompose:function(){var t,e,n,r=this._a,i=this._b,a=this._c,o=this._d,s=r*o-i*a,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);t=Math.acos(r/h)*(i>0?1:-1),e=[h,s/h],n=[l(r*a+i*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,l(r*a+i*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new y(e),skewing:new y(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),T=c.extend({_class:"Line",initialize:function(t,e,n,r,i){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=r,a=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return T.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return T.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return T.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return y.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return y.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,r,i,a,o,s,u,l){u||(n-=t,r-=e,o-=i,s-=a);var c=n*s-r*o;if(!m.isMachineZero(c)){var h=t-i,f=e-a,d=(o*f-s*h)/c,p=(n*f-r*h)/c,v=-1e-12,g=1+1e-12;if(l||v<d&&d<g&&v<p&&p<g)return l||(d=d<=0?0:d>=1?1:d),new y(t+d*n,e+d*r)}},getSide:function(t,e,n,r,i,a,o,s){o||(n-=t,r-=e);var u=i-t,l=u*r-(a-e)*n;return!s&&m.isMachineZero(l)&&(l=(u*n+u*n)/(n*n+r*r))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,n,r,i,a,o){return o||(n-=t,r-=e),0===n?r>0?i-t:t-i:0===r?n<0?a-e:e-a:((i-t)*r-(a-e)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(t,e,n,r,i,a,o){return Math.abs(T.getSignedDistance(t,e,n,r,i,a,o))}}}),E=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=K.create(this,t||ut.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&e){var i=this._changesById,a=e._id,o=i[a];o?o.flags|=t:r.push(i[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new M({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:L,match:function(n){var r=n._definition,i=r._id;return e[i]||(e[i]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var r=t[n],i=r._selection;1&i&&r.isInserted()?e.push(r):i||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof M){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new M(C.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return C._getItems(this,t)},getItem:function(t){return C._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var r in n){var i=n[r];for(var a in e){var o=e[a];o&&o!=n&&delete o[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,i=new c({offset:new y(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new k],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(t,i);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,u,s,l);t.restore()}}}),C=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new k,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),r=n&&!0===t.internal,i=this._matrix=new k,a=n&&t.project||ft.project,o=ft.settings;return this._id=r?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&i.translate(e),i._owner=this,this._style=new Z(a._currentStyle,this,a),r||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(s,this,!0),n&&t!==C.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},r=this;function i(i){for(var a in i){var o=r[a];c.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=c.serialize(o,t,"data"!==a,e))}}return i(this._serializeFields),this instanceof O||i(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=s),16&t&&(this._globalMatrix=s),n&&72&t&&C._clearBoundsCache(n),2&t&&C._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=c.capitalize(t),n="_"+t,r={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(r[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,r=t.length;n<r;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,r=e.length;n<r;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?y:_,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new _(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof k,r=c.set({},n?e:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&t,r).rect;return arguments.length?i:new S(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,r=new k,i=t.getCenter();r.translate(i),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new k).translate(n.getTranslation())),e=this.getBounds()),r.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(C._updateBoundsCache(this,e.cacheItem),C._getBounds(n,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var r=e.internal&&!n,i=e.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=i&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,r),s=this._bounds;if(C._updateBoundsCache(this._parent||this._symbol,i),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var u=this._getBounds(t||a,e),l=u.rect||u,c=this._style,h=u.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:l.clone(),nonscaling:h,internal:r}}return{rect:l,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(e),r.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,r=e.list,i=r.length;n<i;n++){var a=r[n];a!==t&&(a._bounds=a._position=s,a._boundsCache&&C._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var r=1/0,i=-r,a=r,o=i,s=!1;n=n||{};for(var u=0,l=t.length;u<l;u++){var c=t[u];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;r=Math.min(f.x,r),a=Math.min(f.y,a),i=Math.max(f.x+f.width,i),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(r)?new w(r,a,i-r,o-a):new w,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new _(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),r=this._decomposed,i=new k,a=m.isZero;if(a(t.x)||a(t.y))i.translate(r.translation),n&&i.rotate(n),i.scale(e.x,e.y),this._matrix.set(i);else{var o=this.getPosition(!0);i.translate(o),n&&i.rotate(n),i.scale(e.x/t.x,e.y/t.y),n&&i.rotate(-n),i.translate(o.negate()),this.transform(i)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){e=null;for(var i=0,a=r.length;i<a;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof M)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(C.NO_INSERT),n=this._children,r=c.pick(t?t.insert:s,t===s||!0===t),i=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!i||e.copyContent(this),n||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){n=o._children;for(var u=a,l=1;n[a];)a=u+" "+l++;a!==u&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,r=e&&e.length;n<r;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var a=n[r];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?c.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n,r,i;c.isPlainObject(t)?(n=t.resolution,r=t.insert,i=t.raster):(n=t,r=e),i?i.matrix.reset(!0):i=new P(C.NO_INSERT);var a=this.getStrokeBounds(),o=(n||this.getView().getResolution())/72,u=a.getTopLeft().floor(),l=a.getBottomRight().ceil(),h=new b(l.subtract(u)),f=h.multiply(o);if(i.setSize(f,!0),!f.isZero()){var d=i.getContext(!0),p=(new k).scale(o).translate(u.negate());d.save(),p.applyToContext(d),this.draw(d,new c({matrices:[p]})),d.restore()}return i.transform((new k).translate(u.add(h.divide(2))).scale(1/o)),(r===s||r)&&i.insertAbove(this),i},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(y.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(y.read(t),j.getOptions(t))}function e(){var t=arguments,e=y.read(t),n=j.getOptions(t),r=[];return this._hitTest(e,new c({all:r},n)),r}function n(t,e,n,r){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o!==r&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return E.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new b(F._getStrokePadding(a,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var s,u,l=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var r=n?s["get"+n]():f.getPosition();if(t.subtract(r).divide(o).length<=1)return new j(e,f,{name:n?c.hyphenate(n):e,point:r})}var v=e.position,m=e.center,g=e.bounds;if(l&&this._parent&&(v||m||g)){if((m||g)&&(s=this.getInternalBounds()),!(u=v&&p("position")||m&&p("center","Center"))&&g)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],_=0;_<8&&!u;_++)u=p("bounds",y[_]);u=d(u)}return u||(u=this._hitTestChildren(t,e,i)||l&&d(this._hitTestSelf(t,e,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new j("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var i=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"===typeof e)return this instanceof e;i=this._class}if("function"===typeof e)return!!e(i);if(e){if(e.test)return e.test(i);if(c.isPlainObject(e))return function t(e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=n[r];if(c.isPlainObject(i)&&c.isPlainObject(a)){if(!t(i,a))return!1}else if(!c.equals(i,a))return!1}return!0}(e,i)}return c.equals(i,e)},getItems:function(t){return C._getItems(this,t,this._matrix)},getItem:function(t){return C._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,r,i,a){if(!i){var o="object"===typeof n&&n,s=o&&o.overlapping,u=o&&o.inside,l=(y=s||u)&&w.read([y]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!s,rect:l,path:s&&new F.Rectangle({rectangle:l,insert:!1})},o&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,f=i.items;r=(l=i.rect)&&(r||new k);for(var d=0,p=h&&h.length;d<p;d++){var v=h[d],m=r&&r.appended(v._matrix),g=!0;if(l){var y=v.getBounds(m);if(!l.intersects(y))continue;l.contains(y)||i.overlapping&&(y.contains(l)||i.path.intersects(v,m))||(g=!1)}if(g&&v.matches(n)&&(f.push(v),a))break;if(!1!==i.recursive&&t(v,n,m,i,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(s,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var r={},i=(e=c.slice(e)).length-1;i>=0;i--){var a=(l=e[i])&&l._id;!l||r[a]?e.splice(i,1):(l._remove(!1,!0),r[a]=!0)}c.splice(n,e,t,0);for(var o=this._project,s=o._changes,u=(i=0,e.length);i<u;i++){var l,h=(l=e[i])._name;l._parent=this,l._setProject(o,!0),h&&l.setName(h),s&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),r=t!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(s,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,r=this._name,i=n[r],a=i?i.indexOf(this):-1;-1!==a&&(e[r]==this&&delete e[r],i.splice(a,1),i.length?e[r]=i[0]:delete n[r])}},_remove:function(t,e){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,i,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var r=0;r<n;r++)if(!e[r].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),r=e(t),i=0,a=Math.min(n.length,r.length);i<a;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,r=(e?c:y).read(n),i=y.read(n,0,{readNull:!0});return this.transform((new k)[t](r,i||this.getPosition(!0)))}}),{translate:function(){var t=new k;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var r=this._matrix,i=t&&!t.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||e&&this._children);if(!i&&!a)return this;if(i){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,s=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&s.transform(t),u&&u.transform(t)}if(a&&(a=this._transformContent(r,e,n))){var l=this._pivot;l&&r._transformPoint(l,l,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(i||a)&&this._changed(25);var f=i&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90===0){for(var d in c){var p=c[d];if(p.nonscaling)delete c[d];else if(a||!p.internal){var v=p.rect;t._transformBounds(v,v)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else i&&h&&this._pivot&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var r=this._children;if(r){for(var i=0,a=r.length;i<a;i++)r[i].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=t.height/t.width,a=(e?r>i:r<i)?t.width/n.width:t.height/n.height,o=new w(new y,new b(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,i)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,i),t.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),s=r.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ft.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new k).scale(c,c)),f=h.transform(new y(r.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,i=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){i=i?i.appended(o):o,r.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,u,l,c=this._blendMode,h=m.clamp(this._opacity,0,1),f="normal"===c,d=lt.nativeModes[c],p=f&&1===h||e.dontStart||e.clip||(d||f&&h<1)&&this._canComposite(),v=e.pixelRatio||1;if(!p){var g=this.getStrokeBounds(i);if(!g.width||!g.height)return void r.pop();l=e.offset,u=e.offset=g.getTopLeft().floor(),s=t,t=ut.getContext(g.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,_=!p&&e.clipItem,b=!y||_;if(p?(t.globalAlpha=h,d&&(t.globalCompositeOperation=c)):b&&t.translate(-u.x,-u.y),b&&(p?a:i).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(v,0,0,v,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,i,y),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),p||(lt.process(c,t,s,h,u.subtract(l).multiply(v)),ut.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof V)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,r,i){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(i)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,r),u){var d=this.getPosition(!0),p=this._parent,v=p?p.localToGlobal(d):d,m=v.x,g=v.y;t.beginPath(),t.arc(m,g,f,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=f,b=n+1,x=0;x<4;x++){var w=y[x],S=w[0],k=w[1];t.moveTo(m+S*_,g+k*_),t.lineTo(m+S*b,g+k*b),t.stroke()}}if(s){var T=h._transformCorners(this.getInternalBounds());t.beginPath();for(x=0;x<8;x++)t[x?"lineTo":"moveTo"](T[x],T[++x]);t.closePath(),t.stroke();for(x=0;x<8;x++)t.fillRect(T[x]-f,T[++x]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],(function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var r=n&&n.easing,i=n&&n.start,a=null!=n&&("number"===typeof n?n:n.duration),o=new ot(this,t,e,a,r,i);return a&&this.on("frame",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),O=C.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,r=e.length;n<r;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,r){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,n,r,i)},_draw:function(t,e){var n=e.clip,r=!n&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var i=this._children,a=0,o=i.length;a<o;a++){var s=i[a];s!==r&&s.draw(t,e)}}}),M=O.extend({_class:"Layer",initialize:function(){O.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new x(t.width,t.height,this,"setSize")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,r=t.height;"rectangle"===e?this._radius.set(b.min(this._radius,t.divide(2).abs())):"circle"===e?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new x(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){n=b.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(F[c.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ft.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,r){var i=this._style,a=i.hasFill(),o=i.hasStroke(),s=e.dontFinish||e.clip,u=!r;if(a||o||s){var l=this._type,c=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,v=p.width,m=p.height;if(u&&"rectangle"===l&&0===f&&0===d)t.rect(-v/2,-m/2,v,m);else{var g=v/2,y=m/2,_=.44771525016920644,b=f*_,x=d*_,w=[-g,-y+d,-g,-y+x,-g+b,-y,-g+f,-y,g-f,-y,g-b,-y,g,-y+x,g,-y+d,g,y-d,g,y-x,g-b,y,g-f,y,-g+f,y,-g+b,y,-g,y-x,-g,y-d];r&&r.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),g!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),g!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(i.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),r=this._style,i=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(n=t._transformBounds(n)),i?n.expand(F._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var r=t._radius;if(!r.isZero())for(var i=t._size.divide(2),a=1;a<=4;a++){var o=new y(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(i),u=s.subtract(o.multiply(r));if(new w(n?s.add(o.multiply(n)):s,u).contains(e))return{point:u,quadrant:a}}}function e(t,e,n,r){var i=t.divide(e);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var r=t(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,a,o){var s=!1,u=this._style,l=i.stroke&&u.hasStroke(),c=i.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(F._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var v=p.multiply(2),m=t(this,r,v);if(m)s=e(r.subtract(m.point),f,p,m.quadrant);else{var g=new w(this._size).setCenter(0,0),y=g.expand(v),_=g.expand(v.negate());s=y._containsPoint(r)&&!_._containsPoint(r)}}else s=e(r,f,p)}return s?new j(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,r,i){var a=c.create(A.prototype);return a._type=t,a._size=n,a._radius=r,a._initialize(c.getNamed(i),e),a}return{Circle:function(){var e=arguments,n=y.readNamed(e,"center"),r=c.readNamed(e,"radius");return t("circle",n,new b(2*r),r,e)},Rectangle:function(){var e=arguments,n=w.readNamed(e,"rectangle"),r=b.min(b.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),r,e)},Ellipse:function(){var e=arguments,n=A._readEllipse(e),r=n.radius;return t("ellipse",n.center,r.multiply(2),r,e)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,"radius"))e=y.readNamed(t,"center"),n=b.readNamed(t,"radius");else{var r=w.readNamed(t,"rectangle");e=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),P=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==s&&y.read(arguments))){var n,r=typeof t,i="string"===r?l.getElementById(t):"object"===r?t:null;if(i&&i!==C.NO_INSERT)if(i.getContext||null!=i.naturalHeight)n=i;else if(i){var a=b.read(arguments);a.isZero()||(n=ut.getCanvas(a))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var r=ut.getCanvas(t._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new x(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n=b.read(arguments);if(n.equals(this._size))e&&this.clear();else if(n.width>0&&n.height>0){var r=!e&&this.getElement();this._setImage(ut.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ut.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new y(0,0).transform(t),n=new y(1,0).transform(t).subtract(e),r=new y(0,1).transform(t).subtract(e);return new b(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),r=t&&t.type||"load";n&&e.responds(r)&&(ft=n._scope,e.emit(r,new tt(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&J.add(t,{load:function(r){e._setImage(t),n(r)},error:n})},_setImage:function(t){this._canvas&&ut.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=ut.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ut.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"===typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=ut.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new P(C.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=y.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof z?(n=t,e=t.getBounds()):"object"===typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=Math.min(e.width,32),i=Math.min(e.height,32),a=P._sampleContext;a?a.clearRect(0,0,33,33):a=P._sampleContext=ut.getContext(new b(32)),a.save();var o=(new k).scale(r/e.width,i/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),u=this._size;s&&a.drawImage(s,-u.width/2,-u.height/2),a.restore();for(var l=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],f=0,d=0,p=l.length;d<p;d+=4){var v=l[d+3];f+=v,v/=255,h[0]+=l[d]*v,h[1]+=l[d+1]*v,h[2]+=l[d+2]*v}for(d=0;d<3;d++)h[d]/=f;return f?G.read(h):null},getPixel:function(){var t=y.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new G("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=y.read(t),n=G.read(t),r=n._convert("rgb"),i=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*r[0],s[1]=255*r[1],s[2]=255*r[2],s[3]=null!=i?255*i:255,a.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=y.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new j("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){t.globalAlpha=m.clamp(this._opacity,0,1),this._setStyles(t,e,n);var i=this._smoothing,a="off"===i;Q.setPrefixed(t,a?"imageSmoothingEnabled":"imageSmoothingQuality",!a&&i),t.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),L=C.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&y.read(arguments,1))||this.setDefinition(t instanceof R?t:new R(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var r=e.extend({all:!1}),i=this._definition._item._hitTest(t,r,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),R=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=g.get(),this.project=ft.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new y),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new L(this,t)},clone:function(){return new R(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),j=c.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&c.read(t);return new c({type:null,tolerance:ft.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),I=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,r,i,a){var o,u,l,c,h=arguments.length;h>0&&(null==t||"object"===typeof t?1===h&&t&&"point"in t?(o=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(o=t,u=e,l=n,c=r):(o=[t,e],u=n!==s?[n,r]:null,l=i!==s?[i,a]:null)),new D(o,this,"_point"),new D(u,this,"_handleIn"),new D(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),c.serialize(i,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,r=e._curves,i=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(n=i>0?r[i-1]:e._closed?r[r.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=r[i])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new B(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var r=t||{},i=r.type,a=r.factor,o=this.getPrevious(),u=this.getNext(),l=(o||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),d=c.getDistance(h);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");if(o&&u){var p=l.subtract(h),v=a===s?.4:a,m=v*f/(f+d);e||this.setHandleIn(p.multiply(m)),n||this.setHandleOut(p.multiply(m-v))}}else{var g=a===s?.5:a,_=Math.pow(f,g),b=_*_,x=Math.pow(d,g),w=x*x;if(!e&&o){var S=2*w+3*x*_+b,k=3*x*(x+_);this.setHandleIn(0!==k?new y((w*l._x+S*c._x-b*h._x)/k-c._x,(w*l._y+S*c._y-b*h._y)/k-c._y):new y)}if(!n&&u){S=2*b+3*_*x+w,k=3*_*(_+x);this.setHandleOut(0!==k?new y((b*h._x+S*c._x-w*l._x)/k-c._x,(b*h._y+S*c._y-w*l._y)/k-c._y):new y)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new I(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new I(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var r=1-n,i=n,a=t._point,o=e._point,s=t._handleIn,u=e._handleIn,l=e._handleOut,c=t._handleOut;this._point._set(r*a._x+i*o._x,r*a._y+i*o._y,!0),this._handleIn._set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut._set(r*c._x+i*l._x,r*c._y+i*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=r._x,s=r._y,u=2;return e[0]=o,e[1]=s,i&&(e[u++]=i._x+o,e[u++]=i._y+s),a&&(e[u++]=a._x+o,e[u++]=a._y+s),t&&(t._transformCoordinates(e,e,u/2),o=e[0],s=e[1],n?(r._x=o,r._y=s,u=2,i&&(i._x=e[u++]-o,i._y=e[u++]-s),a&&(a._x=e[u++]-o,a._y=e[u++]-s)):(i||(e[u++]=o,e[u++]=s),a||(e[u++]=o,e[u++]=s))),e}}),D=y.extend({initialize:function(t,e,n){var r,i,a;if(t)if((r=t[0])!==s)i=t[1];else{var o=t;(r=o.x)===s&&(r=(o=y.read(arguments)).x),i=o.y,a=o.selected}else r=i=0;this._x=r,this._y=i,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=m.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),N=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,r,i,a,o,s){var u,l,c,h,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?"segment1"in t?(u=new I(t.segment1),l=new I(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new I(t),l=new I(e)):4===p?(c=t,f=e,d=n,h=r):8===p&&(c=[t,e],h=[o,s],f=[n-t,r-e],d=[i-o,a-s]):(u=new I,l=new I),this._segment1=u||new I(c,null,f),this._segment2=l||new I(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new N(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return N.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return N.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new y(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=N.getLength(this.getValues(),0,1)),this._length},getArea:function(){return N.getArea(this.getValues())},getLine:function(){return new T(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new N(N.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return N.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=.99999999){var r=N.subdivide(this.getValues(),t),i=r[0],a=r[1],o=e||this.hasHandles(),s=this._segment1,u=this._segment2,l=this._path;o&&(s._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=i[6],h=i[7],f=new I(new y(c,h),o&&new y(i[4]-c,i[5]-h),o&&new y(a[2]-c,a[3]-h));l?(l.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new N(f,u))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new N(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,r){var i=t._point,a=t._handleOut,o=e._handleIn,s=e._point,u=i.x,l=i.y,c=s.x,h=s.y,f=r?[u,l,u,l,c,h,c,h]:[u,l,u+a._x,l+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*i,d=h*r+e*a,p=h*i+e*o,v=h*a+e*u,m=h*o+e*l,g=h*u+e*c,y=h*f+e*p,_=h*d+e*v,b=h*p+e*m,x=h*v+e*g,w=h*y+e*b,S=h*_+e*x;return[[n,r,f,d,y,_,w,S],[w,S,b,x,m,g,l,c]]},getMonoCurves:function(t,e){var n=[],r=e?0:1,i=t[r+0],a=t[r+2],o=t[r+4],s=t[r+6];if(i>=a===a>=o&&a>=o===o>=s||N.isStraight(t))n.push(t);else{var u=3*(a-o)-i+s,l=2*(i+o)-4*a,c=a-i,h=[],f=m.solveQuadratic(u,l,c,h,1e-8,.99999999);if(f){h.sort();var d=h[0],p=N.subdivide(t,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=N.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(t)}return n},solveCubic:function(t,e,n,r,i,a){var o=t[e],s=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(o<n&&l<n&&s<n&&u<n||o>n&&l>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,d=l-o-h-f;c=m.solveCubic(d,f,h,o-n,r,i,a)}return c},getTimeOf:function(t,e){var n=new y(t[0],t[1]),r=new y(t[6],t[7]),i=1e-7;if(null===(e.isClose(n,1e-12)?0:e.isClose(r,1e-12)?1:null))for(var a=[e.x,e.y],o=[],s=0;s<2;s++)for(var u=N.solveCubic(t,s,a[s],o,0,1),l=0;l<u;l++){var c=o[l];if(e.isClose(N.getPoint(t,c),i))return c}return e.isClose(n,i)?0:e.isClose(r,i)?1:null},getNearestTime:function(t,e){if(N.isStraight(t)){var n=t[0],r=t[1],i=t[6]-n,a=t[7]-r,o=i*i+a*a;if(0===o)return 0;var s=((e.x-n)*i+(e.y-r)*a)/o;return s<1e-12?0:s>.999999999999?1:N.getTimeOf(t,new y(n+s*i,r+s*a))}var u=1/0,l=0;function c(n){if(n>=0&&n<=1){var r=e.getDistance(N.getPoint(t,n),!0);if(r<u)return u=r,l=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var f=.005;f>1e-8;)c(l-f)||c(l+f)||(f/=2);return l},getPart:function(t,e,n){var r=e>n;if(r){var i=e;e=n,n=i}return e>0&&(t=N.subdivide(t,e)[1]),n<1&&(t=N.subdivide(t,(n-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=3*i-2*n-u,h=3*a-2*r-l,f=3*o-2*u-n,d=3*s-2*l-r;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return 3*((u-n)*(r+a)-(s-e)*(i+o)+i*(e-a)-r*(n-o)+u*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),r=[0,0],i=0;i<2;i++)N._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,n,r);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,r,i,a,o,s,u){function l(t,e){var n=t-e,r=t+e;n<o[i]&&(o[i]=n),r>s[i]&&(s[i]=r)}a/=2;var c=o[i]+a,h=s[i]-a;if(t<c||e<c||n<c||r<c||t>h||e>h||n>h||r>h)if(e<t!=e<r&&n<t!=n<r)l(t,0),l(r,0);else{var f=3*(e-n)-t+r,d=2*(t+n)-4*e,p=e-t,v=m.solveQuadratic(f,d,p,u);l(r,0);for(var g=0;g<v;g++){var y=u[g],_=1-y;1e-8<=y&&y<=.99999999&&l(_*_*_*t+3*_*_*y*e+3*_*y*y*n+y*y*y*r,a)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=F[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),c.each({isStraight:function(t,e,n,r){if(e.isZero()&&n.isZero())return!0;var i=r.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(n)){var a=new T(t,r);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(r.add(n))<1e-7){var o=i.dot(i),s=i.dot(e)/o,u=i.dot(n)/o;return s>=0&&s<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,n,r){var i=r.subtract(t).divide(3);return e.equals(i)&&n.negate().equals(i)}},(function(t,e){this[e]=function(e){var n=this._segment1,r=this._segment2;return t(n._point,n._handleOut,r._handleIn,r._point,e)},this.statics[e]=function(e,n){var r=e[0],i=e[1],a=e[6],o=e[7];return t(new y(r,i),new y(e[2]-r,e[3]-i),new y(e[4]-a,e[5]-o),new y(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new B(this,t):null},getTimeAt:function(t,e){return N.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=y.read(arguments);return t.isZero()?[]:N.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return N.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=y.read(arguments),e=this.getValues(),n=N.getNearestTime(e,t),r=N.getPoint(e,n);return new B(this,n,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,(function(t){this[t+"At"]=function(e,n){var r=this.getValues();return N[t](r,n?e:N.getTimeAt(r,e))},this[t+"AtTime"]=function(e){return N[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=9*(r-a)+3*(s-e),c=6*(e+a)-12*r,h=3*(r-e),f=9*(i-o)+3*(u-n),d=6*(n+o)-12*i,p=3*(i-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,r){if(null==e||e<0||e>1)return null;var i=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=m.isZero;f(o-i)&&f(s-a)&&(o=i,s=a),f(u-c)&&f(l-h)&&(u=c,l=h);var d,p,v=3*(o-i),g=3*(u-o)-v,_=c-i-v-g,b=3*(s-a),x=3*(l-s)-b,w=h-a-b-x;if(0===n)d=0===e?i:1===e?c:((_*e+g)*e+v)*e+i,p=0===e?a:1===e?h:((w*e+x)*e+b)*e+a;else{var S=1e-8,k=1-S;if(e<S?(d=v,p=b):e>k?(d=3*(c-u),p=3*(h-l)):(d=(3*_*e+2*g)*e+v,p=(3*w*e+2*x)*e+b),r){0===d&&0===p&&(e<S||e>k)&&(d=u-o,p=l-s);var T=Math.sqrt(d*d+p*p);T&&(d/=T,p/=T)}if(3===n){u=6*_*e+2*g,l=6*w*e+2*x;var E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*l-p*u)/E:0,p=0}}return 2===n?new y(p,-d):new y(d,p)}return{statics:{classify:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=r*(n-l)+i*(u-e)+e*l-n*u,h=3*(a*(i-n)+o*(e-r)+r*n-i*e),f=h-c,d=f-c+(e*(l-o)+n*(a-u)+u*o-l*a),p=Math.sqrt(d*d+f*f+h*h),v=0!==p?1/p:0,g=m.isZero,y="serpentine";function _(t,e,n){var r=e!==s,i=r&&e>0&&e<1,a=r&&n>0&&n<1;return!r||(i||a)&&("loop"!==t||i&&a)||(t="arch",i=a=!1),{type:t,roots:i||a?i&&a?e<n?[e,n]:[n,e]:[i?e:n]:null}}if(f*=v,h*=v,g(d*=v))return g(f)?_(g(h)?"line":"quadratic"):_(y,h/(3*f));var b=3*f*f-4*d*h;if(g(b))return _("cusp",f/(2*d));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*d;return _(b>0?y:"loop",(f+x)/w,(f-x)/w)},getLength:function(n,r,i,a){if(r===s&&(r=0),i===s&&(i=1),N.isStraight(n)){var o=n;i<1&&(o=N.subdivide(o,i)[0],r/=i),r>0&&(o=N.subdivide(o,r)[1]);var u=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(u*u+l*l)}return m.integrate(a||t(n),r,i,e(r,i))},getTimeAt:function(n,r,i){if(i===s&&(i=r<0?1:0),0===r)return i;var a=Math.abs,o=r>0,u=o?i:0,l=o?1:i,c=t(n),h=N.getLength(n,u,l,c),f=a(r)-h;if(a(f)<1e-12)return o?l:u;if(f>1e-12)return null;var d=r/h,p=0;return m.findRoot((function(t){return p+=m.integrate(c,i,t,e(i,t)),i=t,p-r}),c,i+d,u,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=3*r-e-3*a+t[6],u=3*e-6*r+3*a,l=-3*e+3*r,c=3*i-n-3*o+t[7],h=3*n-6*i+3*o,f=-3*n+3*i,d=[];return m.solveCubic(9*(s*s+c*c),9*(s*u+h*c),2*(u*u+h*h)+3*(l*s+f*c),l*u+h*f,d,1e-8,.99999999),d.sort()}}}},new function(){function t(t,e,n,r,i,a,o){var s=!o&&n.getPrevious()===i,u=!o&&n!==i&&n.getNext()===i,l=1e-8,c=1-l;if(null!==r&&r>=(s?l:0)&&r<=(u?c:1)&&null!==a&&a>=(u?l:0)&&a<=(s?c:1)){var h=new B(n,r,null,o),f=new B(i,a,null,o);h._intersection=f,f._intersection=h,e&&!e(h)||B.insert(t,h,!0)}}function e(r,i,a,o,s,u,l,c,h,f,d,p,v){if(++h>=4096||++c>=40)return h;var m,g,y=i[0],_=i[1],b=i[6],x=i[7],w=T.getSignedDistance,S=w(y,_,b,x,i[2],i[3]),k=w(y,_,b,x,i[4],i[5]),E=S*k>0?3/4:4/9,C=E*Math.min(0,S,k),O=E*Math.max(0,S,k),M=w(y,_,b,x,r[0],r[1]),A=w(y,_,b,x,r[2],r[3]),P=w(y,_,b,x,r[4],r[5]),L=w(y,_,b,x,r[6],r[7]),R=function(t,e,n,r){var i,a=[0,t],o=[1/3,e],s=[2/3,n],u=[1,r],l=e-(2*t+r)/3,c=n-(t+2*r)/3;if(l*c<0)i=[[a,o,u],[a,s,u]];else{var h=l/c;i=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(l||c)<0?i.reverse():i}(M,A,P,L),j=R[0],I=R[1];if(0===S&&0===k&&0===M&&0===A&&0===P&&0===L||null==(m=n(j,I,C,O))||null==(g=n(j.reverse(),I.reverse(),C,O)))return h;var D=f+(d-f)*m,B=f+(d-f)*g;if(Math.max(v-p,B-D)<1e-9){var z=(D+B)/2,F=(p+v)/2;t(s,u,l?o:a,l?F:z,l?a:o,l?z:F)}else{r=N.getPart(r,m,g);var V=v-p;if(g-m>.8)if(B-D>V){z=(D+B)/2;h=e(i,(U=N.subdivide(r,.5))[0],o,a,s,u,!l,c,h,p,v,D,z),h=e(i,U[1],o,a,s,u,!l,c,h,p,v,z,B)}else{var U;F=(p+v)/2;h=e((U=N.subdivide(i,.5))[0],r,o,a,s,u,!l,c,h,p,F,D,B),h=e(U[1],r,o,a,s,u,!l,c,h,F,v,D,B)}else h=0===V||V>=1e-9?e(i,r,o,a,s,u,!l,c,h,p,v,D,B):e(r,i,a,o,s,u,l,c,h,D,B,p,v)}return h}function n(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var r=t[0][0],i=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],u=t[a][1];if(e?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function i(t,e,n,r,i){var a=m.isZero;if(a(r)&&a(i)){var o=N.getTimeOf(t,new y(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-i,r),u=Math.sin(s),l=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-n;c.push(d*l-p*u,d*u+p*l)}return N.solveCubic(c,1,0,h,0,1),h}function a(e,n,r,a,o,s,u){for(var l=n[0],c=n[1],h=i(e,l,c,n[6]-l,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],v=N.getPoint(e,p),m=N.getTimeOf(n,v);null!==m&&t(o,s,u?a:r,u?m:p,u?r:a,u?p:m)}}function o(e,n,r,i,a,o){var s=T.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,r,N.getTimeOf(e,s),i,N.getTimeOf(n,s))}function s(n,r,i,s,u,c){var h=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+h>f(r[0],r[2],r[4],r[6])&&f(n[0],n[2],n[4],n[6])-h<d(r[0],r[2],r[4],r[6])&&d(n[1],n[3],n[5],n[7])+h>f(r[1],r[3],r[5],r[7])&&f(n[1],n[3],n[5],n[7])-h<d(r[1],r[3],r[5],r[7])){var p=l(n,r);if(p)for(var v=0;v<2;v++){var m=p[v];t(u,c,i,m[0],s,m[1],!0)}else{var g=N.isStraight(n),_=N.isStraight(r),b=g&&_,x=g&&!_,w=u.length;if((b?o:g||_?a:e)(x?r:n,x?n:r,x?s:i,x?i:s,u,c,x,0,0,0,1,0,1),!b||u.length===w)for(v=0;v<4;v++){var S=v>>1,k=1&v,T=6*S,E=6*k,C=new y(n[T],n[T+1]),O=new y(r[E],r[E+1]);C.isClose(O,h)&&t(u,c,i,S,s,k)}}}return u}function u(e,n,r,i){var a=N.classify(e);if("loop"===a.type){var o=a.roots;t(r,i,n,o[0],n,o[1])}return r}function l(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var r=Math.abs,i=T.getDistance,a=1e-7,o=N.isStraight(t),s=N.isStraight(e),u=o&&s,l=n(t)<n(e),c=l?e:t,h=l?t:e,f=c[0],d=c[1],p=c[6]-f,v=c[7]-d;if(i(f,d,p,v,h[0],h[1],!0)<a&&i(f,d,p,v,h[6],h[7],!0)<a)!u&&i(f,d,p,v,c[2],c[3],!0)<a&&i(f,d,p,v,c[4],c[5],!0)<a&&i(f,d,p,v,h[2],h[3],!0)<a&&i(f,d,p,v,h[4],h[5],!0)<a&&(o=s=u=!0);else if(u)return null;if(o^s)return null;for(var m=[t,e],g=[],_=0;_<4&&g.length<2;_++){var b=1&_,x=1^b,w=_>>1,S=N.getTimeOf(m[b],new y(m[x][w?6:0],m[x][w?7:1]));if(null!=S){var k=b?[w,S]:[S,w];(!g.length||r(k[0]-g[0][0])>1e-8&&r(k[1]-g[0][1])>1e-8)&&g.push(k)}if(_>2&&!g.length)break}if(2!==g.length)g=null;else if(!u){var E=N.getPart(t,g[0][0],g[1][0]),C=N.getPart(e,g[0][1],g[1][1]);(r(C[2]-E[2])>a||r(C[3]-E[3])>a||r(C[4]-E[4])>a||r(C[5]-E[5])>a)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,n,r,i,a){var o=!e;o&&(e=t);for(var l=t.length,c=e.length,h=new Array(l),f=o?h:new Array(c),d=[],v=0;v<l;v++)h[v]=t[v].getValues(r);if(!o)for(v=0;v<c;v++)f[v]=e[v].getValues(i);for(var m=p.findCurveBoundsCollisions(h,f,1e-7),g=0;g<l;g++){var y=t[g],_=h[g];o&&u(_,y,d,n);var b=m[g];if(b)for(var x=0;x<b.length;x++){if(a&&d.length)return d;var w=b[x];if(!o||w>g){var S=e[w];s(_,f[w],y,S,d,n)}}}return d},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=e.normalize(),h=c.x,f=c.y,d=3*u-9*o+9*i-3*n,p=3*l-9*s+9*a-3*r,v=6*o-12*i+6*n,g=6*s-12*a+6*r,y=3*i-3*n,_=3*a-3*r,b=2*d*f-2*p*h,x=[];if(Math.abs(b)<m.CURVETIME_EPSILON){if(0!=(b=d*g-p*v)){var w=-(d*_-p*y)/b;w>=0&&w<=1&&x.push(w)}}else{var S=(v*v-4*d*y)*f*f+(-2*v*g+4*p*y+4*d*_)*h*f+(g*g-4*p*_)*h*h,k=v*f-g*h;if(S>=0&&0!=b){var T=Math.sqrt(S),E=-(k+T)/b,C=(-k+T)/b;E>=0&&E<=1&&x.push(E),C>=0&&C<=1&&x.push(C)}}return x}}}}),B=c.extend({_class:"CurveLocation",initialize:function(t,e,n,r,i){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var r=e.getCurves(),i=0;i<n;i++)t+=r[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof B){var r=this.getCurve(),i=t.getCurve(),a=r._path;if(a===i._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),u=!e&&this._intersection,l=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!u&&!l||u&&l&&u.equals(l,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=v.instance;e&&t.push("point: "+e);var r=this.getIndex();null!=r&&t.push("index: "+r);var i=this.getTime();return null!=i&&t.push("time: "+n.number(i)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),r=1e-8,i=1-r,a=e>=r&&e<=i,o=n>=r&&n<=i;if(a&&o)return!this.isTouching();var s=this.getCurve(),u=s&&e<r?s.getPrevious():s,l=t.getCurve(),c=l&&n<r?l.getPrevious():l;if(e>i&&(s=s.getNext()),n>i&&(l=l.getNext()),!u||!s||!c||!l)return!1;var h=[];function f(t,e){var n=t.getValues(),r=N.classify(n).roots||N.getPeaks(n),i=r.length,a=N.getLength(n,e&&i?r[i-1]:0,!e&&i?r[0]:1);h.push(i?a:a/32)}function d(t,e,n){return e<n?t>e&&t<n:t>e||t<n}a||(f(u,!0),f(s,!1)),o||(f(c,!0),f(l,!1));var p=this.getPoint(),v=Math.min.apply(Math,h),m=a?s.getTangentAtTime(e):s.getPointAt(v).subtract(p),g=a?m.negate():u.getPointAt(-v).subtract(p),y=o?l.getTangentAtTime(n):l.getPointAt(v).subtract(p),_=o?y.negate():c.getPointAt(-v).subtract(p),b=g.getAngle(),x=m.getAngle(),w=_.getAngle(),S=y.getAngle();return!!(a?d(b,w,S)^d(x,w,S)&&d(b,S,w)^d(x,S,w):d(w,b,x)^d(S,b,x)&&d(w,x,b)^d(S,x,b))},hasOverlap:function(){return!!this._overlap}},c.each(N._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var r=t.length,i=0,a=r-1;function o(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=t[(a%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;i<=a;){var s,u=i+a>>>1,l=t[u];if(n&&(s=e.equals(l)?l:o(u,-1)||o(u,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?a=u-1:i=u+1}return t.splice(i,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),r=e.length-1;r>=0;r--)t(n,e[r]._intersection,!1);return n}}}}),z=C.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,r;if(c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"===typeof t&&(e=t),n){var i=n[0];r=i&&Array.isArray(i[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(r?V:F)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,r,i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new y,s=new y;function u(t,n){var r=+e[t];return a&&(r+=o[n]),r}function l(t){return new y(u(t,"x"),u(t+1,"y"))}this.clear();for(var c=0,h=i&&i.length;c<h;c++){var f=i[c],d=f[0],p=d.toLowerCase(),v=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=d===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o),p){case"m":case"l":for(var m="m"===p,g=0;g<v;g+=2)this[m?"moveTo":"lineTo"](o=l(g)),m&&(s=o,m=!1);r=o;break;case"h":case"v":var _="h"===p?"x":"y";o=o.clone();for(g=0;g<v;g++)o[_]=u(g,_),this.lineTo(o);r=o;break;case"c":for(g=0;g<v;g+=6)this.cubicCurveTo(l(g),r=l(g+2),o=l(g+4));break;case"s":for(g=0;g<v;g+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(r):o,r=l(g),o=l(g+2)),n=p;break;case"q":for(g=0;g<v;g+=4)this.quadraticCurveTo(r=l(g),o=l(g+2));break;case"t":for(g=0;g<v;g+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?o.multiply(2).subtract(r):o,o=l(g)),n=p;break;case"a":for(g=0;g<v;g+=7)this.arcTo(o=l(g+5),new b(+e[g],+e[g+1]),+e[g+2],+e[g+4],+e[g+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,r){var i=this===t||!t,a=this._matrix._orNullIfIdentity(),o=i?a:(n||t._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(t.getBounds(o),1e-12)?N.getIntersections(this.getCurves(),!i&&t.getCurves(),e,a,o,r):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=y.read(arguments),e=this.getCurves(),n=1/0,r=null,i=0,a=e.length;i<a;i++){var o=e[i].getNearestLocation(t);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var r=!this._children,i=r?"_segments":"_children",a=t[i],o=e[i],s=this[i];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=s.length,l=o.length;if(u<l)for(var c=r?I:F,h=u;h<l;h++)this.add(new c);else u>l&&this[r?"removeSegments":"removeChildren"](l,u);for(h=0;h<l;h++)s[h].interpolate(a[h],o[h],n);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],r=t._children?t._children.slice():[t],i=n.length,a=r.length,o=[],s=0;e=!0;for(var u=p.findItemBoundsCollisions(n,r,m.GEOMETRIC_EPSILON),l=i-1;l>=0&&e;l--){var c=n[l];e=!1;var h=u[l];if(h)for(var f=h.length-1;f>=0&&!e;f--)c.compare(r[h[f]])&&(o[h[f]]||(o[h[f]]=!0,s++),e=!0)}e=e&&s===a}return e}}),F=z.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,n=Array.isArray(t)?"object"===typeof t[0]?t:e:!t||t.size!==s||t.x===s&&t.point===s?null:e;n&&n.length>0?this.setSegments(n):(this._curves=s,this._segmentSelection=0,n||"string"!==typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=s,32&e)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof V?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var r=t[n-1];"boolean"===typeof r&&(this.setClosed(r),n--),this._add(I.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var r=0;r<n;r++)t[r]=new N(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new N(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,r,i,a,o,s,u,l,c=this._segments,h=c.length,f=new v(e),d=new Array(6),p=!0,m=[];function g(e,c){if(e._transformCoordinates(t,d),n=d[0],r=d[1],p)m.push("M"+f.pair(n,r)),p=!1;else if(o=d[2],s=d[3],o===n&&s===r&&u===i&&l===a){if(!c){var h=n-i,v=r-a;m.push(0===h?"v"+f.number(v):0===v?"h"+f.number(h):"l"+f.pair(h,v))}}else m.push("c"+f.pair(u-i,l-a)+" "+f.pair(o-i,s-a)+" "+f.pair(n-i,r-a));i=n,a=r,u=d[4],l=d[5]}if(!h)return"";for(var y=0;y<h;y++)g(c[y]);return this._closed&&h>0&&(g(c[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),r=0,i=e.length;r<i;r++)e[r]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,r=this._curves,i=t.length,a=null==e,o=(e=a?n.length:e,0);o<i;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)c.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var l=this._countCurves(),h=e>0&&e+i-1===l?e-1:e,f=h,d=Math.min(h+i,l);t._curves&&(r.splice.apply(r,[h,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)r.splice(o,0,new N(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,r=this._segments,i=this._curves,a=t;a<e;a++)(n=i[a])._path=this,n._segment1=r[a],n._segment2=r[a+1]||r[0],n._changed();(n=i[this._closed&&!t?r.length-1:t-1])&&(n._segment2=r[t]||r[0],n._changed()),(n=i[e])&&(n._segment1=r[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!==typeof t?this._add(I.readList(e)):this._add([I.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!==typeof e?this._add(I.readList(n,1),t):this._add([I.read(n,1)],t)[0]},addSegment:function(){return this._add([I.read(arguments)])[0]},insertSegment:function(t){return this._add([I.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(I.readList(t))},insertSegments:function(t,e){return this._add(I.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var r=this._segments,i=this._curves,a=r.length,o=r.splice(t,e-t),s=o.length;if(!s)return o;for(var u=0;u<s;u++){var l=o[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}u=t;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(u=(i=i.splice(f,s)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var r=0,i=e.length;r<i;r++){var a=r+1===i;t+=N.getArea(N.getValues(e[r],e[a?0:r+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,r=t?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)e[i]._selection=r},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,r=e&&e.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new F(C.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,e){var n,r=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var r=t._segments,i=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(i&&i._point.isClose(o._point,n))i.setHandleOut(o._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,r=n?1e-7:0,i=e.length-1;i>=0;i--){var a=e[i];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new U(this,t||.25,256,!0).parts,n=e.length,r=[],i=0;i<n;i++)r.push(new I(e[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new I(e[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new q(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},r=n.type||"asymmetric",i=this._segments,a=i.length,o=this._closed;function u(t,n){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==e)throw new Error(t._class+" "+r+" of "+i+" is not part of "+e);n&&t instanceof N&&r++}else r="number"===typeof t?t:n;return Math.min(r<0&&o?r%a:r<0?r+a:r,a-1)}var l=o&&n.from===s&&n.to===s,c=u(n.from,0),h=u(n.to,a-1);if(c>h)if(o)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,p=Math.min,v=h-c+1,m=v-1,g=l?p(v,4):1,y=g,_=g,b=[];if(o||(y=p(1,c),_=p(1,a-h-1)),(m+=y+_)<=1)return;for(var x=0,w=c-y;x<=m;x++,w++)b[x]=i[(w<0?w+a:w)%a]._point;var S=b[0]._x+2*b[1]._x,k=b[0]._y+2*b[1]._y,T=2,E=m-1,C=[S],O=[k],M=[T],A=[],P=[];for(x=1;x<m;x++){var L=x<E,R=L?4:d?2:7,j=L?4:d?3:8,I=L?2:d?0:1,D=(L||d?1:2)/T;T=M[x]=R-D,S=C[x]=j*b[x]._x+I*b[x+1]._x-D*S,k=O[x]=j*b[x]._y+I*b[x+1]._y-D*k}A[E]=C[E]/M[E],P[E]=O[E]/M[E];for(x=m-2;x>=0;x--)A[x]=(C[x]-A[x+1])/M[x],P[x]=(O[x]-P[x+1])/M[x];A[m]=(3*b[m]._x-A[E])/2,P[m]=(3*b[m]._y-P[E])/2;x=y;var B=m-_;for(w=c;x<=B;x++,w++){var z=i[w<0?w+a:w],F=z._point,V=A[x]-F._x,U=P[x]-F._y;(l||x<B)&&z.setHandleOut(V,U),(l||x>y)&&z.setHandleIn(-V,-U)}}else for(x=c;x<=h;x++)i[x<0?x+a:x].smooth(n,!l&&x===c,!l&&x===h)},toShape:function(t){if(!this._closed)return null;var e,n,r,i,a=this._segments;function o(t,e){var n=a[t],r=n.getNext(),i=a[e],o=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(o._point.subtract(i._point))}function u(t){var e=a[t],n=e.getNext(),r=e._handleOut,i=n._handleIn,o=.5522847498307936;if(r.isOrthogonal(i)){var s=e._point,u=n._point,l=new T(s,r,!0).intersect(new T(u,i,!0),!0);return l&&m.isZero(r.getLength()/l.subtract(s).getLength()-o)&&m.isZero(i.getLength()/l.subtract(u).getLength()-o)}return!1}function l(t,e){return a[t]._point.getDistance(a[e]._point)}if(!this.hasHandles()&&4===a.length&&o(0,2)&&o(1,3)&&function(t){var e=a[t],n=e.getPrevious(),r=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&r._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(r._point.subtract(e._point))}(1)?(e=A.Rectangle,n=new b(l(0,3),l(0,1)),i=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&u(0)&&u(2)&&u(4)&&u(6)&&o(1,5)&&o(3,7)?(e=A.Rectangle,r=(n=new b(l(1,6),l(0,3))).subtract(new b(l(0,7),l(1,2))).divide(2),i=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&u(0)&&u(1)&&u(2)&&u(3)&&(m.isZero(l(0,2)-l(1,3))?(e=A.Circle,r=l(0,2)/2):(e=A.Ellipse,r=new b(l(2,0)/2,l(3,1)/2)),i=a[1]._point),e){var c=this.getPosition(!0),h=new e({center:c,size:n,radius:r,insert:!1});return h.copyAttributes(this,!0),h._matrix.prepend(this._matrix),h.rotate(i.subtract(c).getAngle()+90),(t===s||t)&&h.insertAbove(this),h}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof V)return t.base.call(this,e);var n=this.getCurves(),r=e.getCurves(),i=n.length,a=r.length;if(!i||!a)return i==a;for(var o,s,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<a;f++){var d=r[f].getValues();if(l.push(d),m=N.getOverlaps(u,d)){o=!f&&m[0][0]>0?a-1:f,s=m[0][1];break}}var p,v=Math.abs;for(d=l[o];u&&d;){var m;if(m=N.getOverlaps(u,d))if(v(m[0][0]-h)<1e-8){1===(h=m[1][0])&&(u=++c<i?n[c].getValues():null,h=0);var g=m[0][1];if(v(g-s)<1e-8){if(p||(p=[o,g]),1===(s=m[1][1])&&(++o>=a&&(o=0),d=l[o]||r[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,r){var i,a,o,s,u,l,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,v=e._tolerancePadding,m=v,g=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),_=e.curves,b=g?h.getStrokeWidth()/2:y&&e.tolerance>0||_?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,r){if(!e.selected||n.isSelected()){var i=t._point;if(n!==i&&(n=n.add(i)),x(n,m))return new j(r,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function k(t){s.add(t)}function T(e){var n,u=p||e._index>0&&e._index<d-1;return"round"===(u?i:a)?x(e._point,m):(s=new F({internal:!0,closed:!0}),u?e.isSmooth()||F._addBevelJoin(e,i,b,o,null,r,k,!0):"square"===a&&F._addSquareCap(e,a,b,null,r,k,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&x(n.getPoint(),v))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),m=m.add(F._getStrokePadding(b,r))):i=a="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var E=0;E<d;E++)if(l=S(f[E]))return l}else if(l=S(f[0],!0)||S(f[d-1],!0))return l;if(null!==b){if(u=this.getNearestLocation(t)){var C=u.getTime();0===C||1===C&&d>1?T(u.getSegment())||(u=null):x(u.getPoint(),m)||(u=null)}if(!u&&"miter"===i&&d>1)for(E=0;E<d;E++){var O=f[E];if(t.getDistance(O._point)<=o*b&&T(O)){u=O.getLocation();break}}}return!u&&y&&this._contains(t)||u&&!g&&!_?new j("fill",this):u?new j(g?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},c.each(N._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=y.read(arguments),e=this.getCurves(),n=0,r=e.length;n<r;n++){var i=e[n].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"===typeof t){for(var e=this.getCurves(),n=0,r=0,i=e.length;r<i;r++){var a=n,o=e[r];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new B(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=y.read(arguments);if(t.isZero())return[];for(var e=[],n=0,r=this.getCurves(),i=0,a=r.length;i<a;i++){for(var o=r[i],s=o.getTimesWithTangent(t),u=0,l=s.length;u<l;u++){var c=n+o.getOffsetAtTime(s[u]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var r,i,a,o,s,u,l,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function v(e){if(n)e._transformCoordinates(n,d),r=d[0],i=d[1];else{var h=e._point;r=h._x,i=h._y}if(p)t.moveTo(r,i),p=!1;else{if(n)s=d[2],u=d[3];else{var f=e._handleIn;s=r+f._x,u=i+f._y}s===r&&u===i&&l===a&&c===o?t.lineTo(r,i):t.bezierCurveTo(l,c,s,u,r,i)}if(a=r,o=i,n)l=d[4],c=d[5];else{f=e._handleOut;l=a+f._x,c=o+f._y}}for(var m=0;m<f;m++)v(h[m]);e._closed&&f>0&&v(h[0])}return{_draw:function(e,n,r,i){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),u=s.hasFill(),l=s.hasStroke(),c=s.getDashArray(),h=!ft.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(u||l&&!h||o)&&(t(e,this,i),this._closed&&e.closePath()),!o&&(u||l)&&(this._setStyles(e,n,r),u&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(h){a||e.beginPath();for(var d,p=new U(this,.25,32,!1,i),v=p.length,m=-s.getDashOffset(),g=0;m>0;)m-=f(g--)+f(g--);for(;m<v;)d=m+f(g++),(m>0||d>0)&&p.drawPart(e,Math.max(m,0),Math.max(d,0)),m=d+f(g++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,r){if(!(r<=0))for(var i,a,o=r/2,s=r-2,u=o-1,l=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,l),i=l[0],a=l[1],2&d&&v(2),4&d&&v(4),t.fillRect(i-o,a-o,r,r),s>0&&!(1&d)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(i-u,a-u,s,s),t.fillStyle=p}}function v(e){var n=l[e],r=l[e+1];i==n&&a==r||(t.beginPath(),t.moveTo(i,a),t.lineTo(n,r),t.stroke(),t.beginPath(),t.arc(n,r,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ft.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new I(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new I(y.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=y.read(e),r=y.read(e),i=y.read(e),a=t(this);a.setHandleOut(n.subtract(a._point)),this._add([new I(i,r.subtract(i))])},quadraticCurveTo:function(){var e=arguments,n=y.read(e),r=y.read(e),i=t(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var e=arguments,n=y.read(e),r=y.read(e),i=c.pick(c.read(e),.5),a=1-i,o=t(this)._point,s=n.subtract(o.multiply(a*a)).subtract(r.multiply(i*i)).divide(2*i*a);if(s.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(s,r)},arcTo:function(){var e,n,r,i,a=arguments,o=Math.abs,s=Math.sqrt,u=t(this),l=u._point,h=y.read(a),f=c.peek(a);if("boolean"===typeof(_=c.pick(f,!0)))var d=(w=l.add(h).divide(2)).add(w.subtract(l).rotate(_?-90:90));else if(c.remain(a)<=2)d=h,h=y.read(a);else if(!l.equals(h)){var p=b.read(a),v=m.isZero;if(v(p.width)||v(p.height))return this.lineTo(h);var g=c.read(a),_=!!c.read(a),x=!!c.read(a),w=l.add(h).divide(2),S=(Y=l.subtract(w).rotate(-g)).x,E=Y.y,C=o(p.width),O=o(p.height),M=C*C,A=O*O,P=S*S,L=E*E,R=s(P/M+L/A);if(R>1&&(M=(C*=R)*C,A=(O*=R)*O),o(R=(M*A-M*L-A*P)/(M*L+A*P))<1e-12&&(R=0),R<0)throw new Error("Cannot create an arc with the given arguments");e=new y(C*E/O,-O*S/C).multiply((x===_?-1:1)*s(R)).rotate(g).add(w),n=(r=(i=(new k).translate(e).rotate(g).scale(C,O))._inverseTransform(l)).getDirectedAngle(i._inverseTransform(h)),!_&&n>0?n-=360:_&&n<0&&(n+=360)}if(d){var j=new T(l.add(d).divide(2),d.subtract(l).rotate(90),!0),D=new T(d.add(h).divide(2),h.subtract(d).rotate(90),!0),N=new T(l,h),B=N.getSide(d);if(!(e=j.intersect(D,!0))){if(!B)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(r=l.subtract(e)).getDirectedAngle(h.subtract(e));var z=N.getSide(e,!0);0===z?n=B*o(n):B===z&&(n+=n<0?360:-360)}if(n){for(var F=1e-7,V=o(n),U=V>=360?4:Math.ceil((V-F)/90),q=n/U,H=q*Math.PI/360,W=4/3*Math.sin(H)/(1+Math.cos(H)),G=[],X=0;X<=U;X++){var Y=h,Z=null;if(X<U&&(Z=r.rotate(90).multiply(W),i?(Y=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(Y)):Y=e.add(r)),X){var Q=r.rotate(-90).multiply(W);i&&(Q=i._transformPoint(r.add(Q)).subtract(Y)),G.push(new I(Y,Q,Z))}else u.setHandleOut(Z);r=r.rotate(q)}this._add(G)}},lineBy:function(){var e=y.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=y.read(e),r=y.read(e),i=c.read(e),a=t(this)._point;this.curveTo(a.add(n),a.add(r),i)},cubicCurveBy:function(){var e=arguments,n=y.read(e),r=y.read(e),i=y.read(e),a=t(this)._point;this.cubicCurveTo(a.add(n),a.add(r),a.add(i))},quadraticCurveBy:function(){var e=arguments,n=y.read(e),r=y.read(e),i=t(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var e=arguments,n=t(this)._point,r=n.add(y.read(e)),i=c.pick(c.peek(e),!0);"boolean"===typeof i?this.arcTo(r,i):this.arcTo(r,n.add(y.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return F[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,r,i,a){var o=t[0];if(!o)return new w;var s=new Array(6),u=o._transformCoordinates(r,new Array(6)),l=u.slice(0,2),c=l.slice(),h=new Array(2);function f(t){t._transformCoordinates(r,s);for(var e=0;e<2;e++)N._addBounds(u[e],u[e+4],s[e+2],s[e],e,a?a[e]:0,l,c,h);var n=u;u=s,s=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new w(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,r,i){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),u=o&&n._getStrokeMatrix(r,i),l=o&&F._getStrokePadding(s,u),c=F.getBounds(t,e,n,r,i,l);if(!o)return c;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),v=new w(new b(l));function m(t){c=c.include(t)}function g(t){c=c.unite(v.setCenter(t._point.transform(r)))}function y(t,e){"round"===e||t.isSmooth()?g(t):F._addBevelJoin(t,e,h,p,r,u,m)}function _(t,e){"round"===e?g(t):F._addSquareCap(t,e,h,r,u,m)}var x=t.length-(e?0:1);if(x>0){for(var S=1;S<x;S++)y(t[S],f);e?y(t[0],f):(_(t[0],d),_(t[t.length-1],d))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new y(t,0).transform(e),r=new y(0,t).transform(e),i=n.getAngleInRadians(),a=n.getLength(),o=r.getLength(),s=Math.sin(i),u=Math.cos(i),l=Math.tan(i),c=Math.atan2(o*l,a),h=Math.atan2(o,l*a);return[Math.abs(a*Math.cos(c)*u+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,r,i,a,o,s){var u=t.getCurve(),l=u.getPrevious(),c=u.getPoint1().transform(i),h=l.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),"miter"===e){var p=new T(c.add(h),new y(-h.y,h.x),!0).intersect(new T(c.add(f),new y(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=r*n&&o(p)}o(c.add(f))},_addSquareCap:function(t,e,n,r,i,a,o){var s=t._point.transform(r),u=t.getLocation(),l=u.getNormal().multiply(0===u.getTime()?n:-n).transform(i);"square"===e&&(o&&(a(s.subtract(l)),a(s.add(l))),s=s.add(l.rotate(-90))),a(s.add(l)),a(s.subtract(l))},getHandleBounds:function(t,e,n,r,i){var a,o,s=n.getStyle();if(i.stroke&&s.hasStroke()){var u=n._getStrokeMatrix(r,i),l=s.getStrokeWidth()/2,c=l;"miter"===s.getStrokeJoin()&&(c=l*s.getMiterLimit()),"square"===s.getStrokeCap()&&(c=Math.max(c,l*Math.SQRT2)),a=F._getStrokePadding(l,u),o=F._getStrokePadding(c,u)}for(var h=new Array(6),f=1/0,d=-f,p=f,v=d,m=0,g=t.length;m<g;m++){t[m]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var _=y?a:o,b=_?_[0]:0,x=_?_[1]:0,S=h[y],k=h[y+1],T=S-b,E=S+b,C=k-x,O=k+x;T<f&&(f=T),E>d&&(d=E),C<p&&(p=C),O>v&&(v=O)}}return new w(f,p,d-f,v-p)}}});F.inject({statics:new function(){var t=.5522847498307936,e=[new I([-1,0],[0,t],[0,-t]),new I([0,-1],[-t,0],[t,0]),new I([1,0],[0,-t],[0,t]),new I([0,1],[t,0],[-t,0])];function n(t,e,n){var r=c.getNamed(n),i=new F(r&&0==r.insert&&C.NO_INSERT);return i._add(t),i._closed=e,i.set(r,{insert:!0})}function r(t,r,i){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new I(s._point.multiply(r).add(t),s._handleIn.multiply(r),s._handleOut.multiply(r))}return n(a,!0,i)}return{Line:function(){var t=arguments;return n([new I(y.readNamed(t,"from")),new I(y.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=y.readNamed(t,"center"),n=c.readNamed(t,"radius");return r(e,new b(n),t)},Rectangle:function(){var e,r=arguments,i=w.readNamed(r,"rectangle"),a=b.readNamed(r,"radius",0,{readNull:!0}),o=i.getBottomLeft(!0),s=i.getTopLeft(!0),u=i.getTopRight(!0),l=i.getBottomRight(!0);if(!a||a.isZero())e=[new I(o),new I(s),new I(u),new I(l)];else{var c=(a=b.min(a,i.getSize(!0).divide(2))).width,h=a.height,f=c*t,d=h*t;e=[new I(o.add(c,0),null,[-f,0]),new I(o.subtract(0,h),[0,d]),new I(s.add(0,h),null,[0,-d]),new I(s.add(c,0),[-f,0],null),new I(u.subtract(c,0),null,[f,0]),new I(u.add(0,h),[0,-d],null),new I(l.subtract(0,h),null,[0,d]),new I(l.subtract(c,0),[f,0])]}return n(e,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=A._readEllipse(t);return r(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=y.readNamed(t,"from"),n=y.readNamed(t,"through"),r=y.readNamed(t,"to"),i=c.getNamed(t),a=new F(i&&0==i.insert&&C.NO_INSERT);return a.moveTo(e),a.arcTo(n,r),a.set(i)},RegularPolygon:function(){for(var t=arguments,e=y.readNamed(t,"center"),r=c.readNamed(t,"sides"),i=c.readNamed(t,"radius"),a=360/r,o=r%3===0,s=new y(0,o?-i:i),u=o?-1:.5,l=new Array(r),h=0;h<r;h++)l[h]=new I(e.add(s.rotate((h+u)*a)));return n(l,!0,t)},Star:function(){for(var t=arguments,e=y.readNamed(t,"center"),r=2*c.readNamed(t,"points"),i=c.readNamed(t,"radius1"),a=c.readNamed(t,"radius2"),o=360/r,s=new y(0,-1),u=new Array(r),l=0;l<r;l++)u[l]=new I(e.add(s.rotate(o*l).multiply(l%2?a:i)));return n(u,!0,t)}}}});var V=z.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"===typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var r=n,i=r[0];i&&"number"===typeof i[0]&&(r=[r]);for(var a=n.length-1;a>=0;a--){var o=r[a];r!==n||o instanceof F||(r=c.slice(r)),Array.isArray(o)?r[a]=new F({segments:o,insert:!1}):o instanceof V&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var n=this._children,r=n.length-1;r>=0;r--){var i;(i=n[r].reduce(e)).isEmpty()&&i.remove()}return n.length?t.base.call(this):((i=new F(C.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,r=t.length;n<r;n++)c.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,r=[],i=0,a=n.length;i<a;i++){var o=n[i],s=o._matrix;r.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return r.join("")},_hitTestChildren:function t(e,n,r){return t.base.call(this,e,n.class===F||"path"===n.type?n:c.set({},n,{fill:!1}),r)},_draw:function(t,e,n,r){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=i.length;a<o;a++)i[a].draw(t,e,r);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var r=this._children,i=0,a=r.length;i<a;i++){var o=r[i],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new F(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),r=y.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,r=this._children,i=0,a=r.length;i<a;i++)n=r[i][t](e)||n;return n}}),{}));z.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function i(t){return t._children||[t]}function a(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var r=i(n),a=0,o=r.length;a<o;a++){(t=r[a])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function o(t,e,n,r,i){var a=new V(C.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),i&&0==i.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function u(t){return t.hasOverlap()||t.isCrossing()}function l(t,e,n,s){if(s&&(0==s.trace||s.stroke)&&/^(subtract|intersect)$/.test(n))return h(t,e,n);var l=a(t,!0),f=e&&t!==e&&a(e,!0),d=r[n];d[n]=!0,f&&(d.subtract||d.exclude)^f.isClockwise()^l.isClockwise()&&f.reverse();var m,y=g(B.expand(l.getIntersections(f,u))),x=i(l),w=f&&i(f),S=[],k=[];function T(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];c.push(S,r._segments),c.push(k,r.getCurves()),r._overlapsOnly=!0}}function E(t){for(var e=[],n=0,r=t&&t.length;n<r;n++)e.push(k[t[n]]);return e}if(y.length){T(x),w&&T(w);for(var C=new Array(k.length),O=0,M=k.length;O<M;O++)C[O]=k[O].getValues();var A=p.findCurveBoundsCollisions(C,C,0,!0),P={};for(O=0;O<k.length;O++){var L=k[O],R=L._path._id;(P[R]=P[R]||{})[L.getIndex()]={hor:E(A[O].hor),ver:E(A[O].ver)}}for(O=0,M=y.length;O<M;O++)_(y[O]._segment,l,f,P,d);for(O=0,M=S.length;O<M;O++){var j=S[O],I=j._intersection;j._winding||_(j,l,f,P,d),I&&I._overlap||(j._path._overlapsOnly=!1)}m=b(S,d)}else m=v(w?x.concat(w):x.slice(),(function(t){return!!d[t]}));return o(m,!0,t,e,s)}function h(t,e,n){var r=a(t),i=a(e),s=r.getIntersections(i,u),l="subtract"===n,c="divide"===n,h={},f=[];function d(t){if(!h[t._id]&&(c||i.contains(t.getPointAt(t.getLength()/2))^l))return f.unshift(t),h[t._id]=!0}for(var p=s.length-1;p>=0;p--){var v=s[p].split();v&&(d(v)&&v.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return d(r),o(f,!1,t,e)}function f(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function d(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function v(t,e,r){var i=t&&t.length;if(i){var a=c.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),s=o[0],u=p.findItemBoundsCollisions(o,null,m.GEOMETRIC_EPSILON);null==r&&(r=s.isClockwise());for(var l=0;l<i;l++){var h=o[l],f=a[h._id],d=0,v=u[l];if(v)for(var g=null,y=v.length-1;y>=0;y--)if(v[y]<l){g=g||h.getInteriorPoint();var _=o[v[y]];if(_.contains(g)){var b=a[_._id];d=b.winding,f.winding+=d,f.container=b.exclude?b.container:_;break}}if(e(f.winding)===e(d))f.exclude=!0,t[f.index]=null;else{var x=f.container;h.setClockwise(x?!x.isClockwise():r)}}}return t}function g(t,e,n){var r,i,a,o=e&&[],s=1e-8,u=!1,l=n||[],c=n&&{};function h(t){return t._path._id+"."+t._segment1._index}for(var p=(n&&n.length)-1;p>=0;p--){(v=n[p])._path&&(c[h(v)]=!0)}for(p=t.length-1;p>=0;p--){var v,m,g=t[p],y=g._time,_=y,b=e&&!e(g);if((v=g._curve)&&(v!==i?(u=!v.hasHandles()||c&&c[h(v)],r=[],a=null,i=v):a>=s&&(y/=a)),b)r&&r.push(g);else{if(e&&o.unshift(g),a=_,y<s)m=v._segment1;else if(y>.99999999)m=v._segment2;else{var x=v.divideAtTime(y,!0);u&&l.push(v,x),m=x._segment1;for(var w=r.length-1;w>=0;w--){var S=r[w];S._time=(S._time-y)/(1-y)}}g._setSegment(m);var k=m._intersection,T=g._intersection;if(k){f(k,T);for(var E=k;E;)f(E._intersection,k),E=E._next}else m._intersection=T}}return n||d(l),o||t}function y(r,i,a,o,s){var u,l,c=Array.isArray(i)?i:i[a?"hor":"ver"],h=a?1:0,f=1^h,d=[r.x,r.y],p=d[h],v=d[f],m=1e-6,g=p-1e-9,_=p+1e-9,b=0,x=0,w=0,S=0,k=!1,T=!1,E=1,C=[];function O(n){var l=n[f+0],c=n[f+6];if(!(v<t(l,c)||v>e(l,c))){var d=n[h+0],b=n[h+2],x=n[h+4],T=n[h+6];if(l!==c){var O=v===l?0:v===c||g>e(d,b,x,T)||_<t(d,b,x,T)?1:N.solveCubic(n,f,v,C,0,1)>0?C[0]:1,M=0===O?d:1===O?T:N.getPoint(n,O)[a?"y":"x"],A=l>c?1:-1,P=u[f]>u[f+6]?1:-1,L=u[h+6];return v!==l?(M<g?w+=A:M>_?S+=A:k=!0,M>p-m&&M<p+m&&(E/=2)):(A!==P?d<g?w+=A:d>_&&(S+=A):d!=L&&(L<_&&M>_?(S+=A,k=!0):L>g&&M<g&&(w+=A,k=!0)),E/=4),u=n,!s&&M>g&&M<_&&0===N.getTangent(n,O)[a?"x":"y"]&&y(r,i,!a,o,!0)}(d<_&&T>g||T<_&&d>g)&&(k=!0)}}function M(n){var r=n[f+0],i=n[f+2],o=n[f+4],s=n[f+6];if(v<=e(r,i,o,s)&&v>=t(r,i,o,s))for(var u,l=n[h+0],c=n[h+2],d=n[h+4],p=n[h+6],m=g>e(l,c,d,p)||_<t(l,c,d,p)?[n]:N.getMonoCurves(n,a),y=0,b=m.length;y<b;y++)if(u=O(m[y]))return u}for(var A=0,P=c.length;A<P;A++){var L,R=c[A],j=R._path,I=R.getValues();if((!A||c[A-1]._path!==j)&&(u=null,j._closed||(l=N.getValues(j.getLastCurve().getSegment2(),R.getSegment1(),null,!o))[f]!==l[f+6]&&(u=l),!u)){u=I;for(var D=j.getLastCurve();D&&D!==R;){var B=D.getValues();if(B[f]!==B[f+6]){u=B;break}D=D.getPrevious()}}if(L=M(I))return L;if(A+1===P||c[A+1]._path!==j){if(l&&(L=M(l)))return L;!k||w||S||(w=S=j.isClockwise(o)^a?1:-1),b+=w,x+=S,w=S=0,k&&(T=!0,k=!1),l=null}}return b=n(b),x=n(x),{winding:e(b,x),windingL:b,windingR:x,quality:E,onPath:T}}function _(t,e,r,i,a){var o=[],s=t,u=0;do{if(_=t.getCurve()){var l=_.getLength();o.push({segment:t,curve:_,length:l}),u+=l}t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){l=u*c[f];for(var d=0,p=o.length;d<p;d++){var v=o[d],g=v.length;if(l<=g){var _,b=(_=v.curve)._path,x=b._parent,w=x instanceof V?x:b,S=m.clamp(_.getTimeAt(l),.001,.999),k=_.getPointAtTime(S),T=n(_.getTangentAtTime(S).y)<Math.SQRT1_2,E=null;if(a.subtract&&r){var C=(w===e?r:e)._getWinding(k,T,!0);if(w===e&&C.winding||w===r&&!C.winding){if(C.quality<1)continue;E={winding:0,quality:1}}}(E=E||y(k,i[b._id][_.getIndex()],T,!0)).quality>h.quality&&(h=E);break}l-=g}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function b(t,e){var n,r=[];function i(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,r=n.length;e<r;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,r=e.length;n<r;n++)e[n]._visited=!0}function s(t,e){var r=t._intersection,o=r,s=[];function u(r,o){for(;r&&r!==o;){var u=r._segment,l=u&&u._path;if(l){var c=u.getNext()||l.getFirstSegment(),h=c._intersection;u!==t&&(a(u)||a(c)||c&&i(u)&&(i(c)||h&&i(h._segment)))&&s.push(u),e&&n.push(u)}r=r._next}}if(e&&(n=[t]),r){for(u(r);r&&r._previous;)r=r._previous;u(r,o)}return s}t.sort((function(t,e){var n=t._intersection,r=e._intersection,i=!(!n||!n._overlap),a=!(!r||!r._overlap),o=t._path,s=e._path;return i^a?i?1:-1:!n^!r?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var u=0,l=t.length;u<l;u++){var c,h,f,d=t[u],p=i(d),v=null,m=!1,g=!0,y=[];if(p&&d._path._overlapsOnly){var _=d._path,b=d._intersection._segment._path;_.compare(b)&&(_.getArea()&&r.push(_.clone(!1)),o(_),o(b),p=!1)}for(;p;){var x=!v,w=s(d,x),S=w.shift(),k=!(m=!x&&(a(d)||a(S)))&&S;if(x&&(v=new F(C.NO_INSERT),c=null),m){(d.isFirst()||d.isLast())&&(g=d._path._closed),d._visited=!0;break}if(k&&c&&(y.push(c),c=null),c||(k&&w.push(d),c={start:v._segments.length,crossings:w,visited:h=[],handleIn:f}),k&&(d=S),!i(d)){v.removeSegments(c.start);for(var T=0,E=h.length;T<E;T++)h[T]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())&&d._path||(d=null,(c=y.pop())&&(h=c.visited,f=c.handleIn))}while(c&&!i(d));if(!d)break}var O=d.getNext();v.add(new I(d._point,f,O&&d._handleOut)),d._visited=!0,h.push(d),d=O||d._path.getFirstSegment(),f=O&&O._handleIn}m&&(g&&(v.getFirstSegment().setHandleIn(f),v.setClosed(g)),0!==v.getArea()&&r.push(v))}return r}return{_getWinding:function(t,e,n){return y(t,this.getCurves(),e,n)},unite:function(t,e){return l(this,t,"unite",e)},intersect:function(t,e){return l(this,t,"intersect",e)},subtract:function(t,e){return l(this,t,"subtract",e)},exclude:function(t,e){return l(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?h(this,t,"divide"):o([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var r=!1,i=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(r=!0)||t.isCrossing()&&(i=!0)})),o=r&&i&&[];if(a=B.expand(a),r)for(var s=g(a,(function(t){return t.hasOverlap()}),o),u=s.length-1;u>=0;u--){var l=s[u],h=l._path,f=l._segment,p=f.getPrevious(),v=f.getNext();n(p,h)&&n(v,h)&&(f.remove(),p._handleOut._set(0,0),v._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(v._handleIn.set(p._handleIn),p.remove()))}i&&(g(a,r&&function(t){var e=t.getCurve(),n=t.getSegment(),r=t._intersection,i=r._curve,a=r._segment;if(e&&i&&e._path&&i._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&d(o),e=b(c.each(e,(function(t){c.push(this,t._segments)}),[])));var m,y=e.length;return y>1&&t?(e!==t&&this.setChildren(e),m=this):1!==y||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),m=this),m||((m=new V(C.NO_INSERT)).addChildren(e),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(v(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==s&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,a=[],o=[],s=0,u=r.length;s<u;s++){var l=r[s].getValues(),c=l[1],h=l[3],f=l[5],d=l[7];if(i>=t(c,h,f,d)&&i<=e(c,h,f,d))for(var p=N.getMonoCurves(l),v=0,m=p.length;v<m;v++){var g=p[v],y=g[1],_=g[7];if(y!==_&&(i>=y&&i<=_||i>=_&&i<=y)){var b=i===y?g[0]:i===_?g[6]:1===N.solveCubic(g,1,i,o,0,1)?N.getPoint(g,o[0]).x:(g[0]+g[6])/2;a.push(b)}}}a.length>1&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var U=c.extend({_class:"PathFlattener",initialize:function(t,e,n,r,i){var a,o=[],s=[],u=0,l=1/(n||32),c=t._segments,h=c[0];function f(t,e){var n=N.getValues(t,e,i);o.push(n),d(n,t._index,0,1)}function d(t,n,i,a){if(!(a-i>l)||r&&N.isStraight(t)||N.isFlatEnough(t,e||.25)){var o=t[6]-t[0],c=t[7]-t[1],h=Math.sqrt(o*o+c*c);h>0&&(u+=h,s.push({offset:u,curve:t,index:n,time:a}))}else{var f=N.subdivide(t,.5),p=(i+a)/2;d(f[0],n,i,p),d(f[1],n,p,a)}}for(var p=1,v=c.length;p<v;p++)f(h,a=c[p]),h=a;t._closed&&f(a||h,c[0]),this.curves=o,this.parts=s,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,r=n.length,i=this.index;e=i,i&&!(n[--i].offset<t););for(;e<r;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-u)/(a.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(t,e,n){for(var r=this._get(e),i=this._get(n),a=r.index,o=i.index;a<=o;a++){var s=N.getPart(this.curves[a],a===r.index?r.time:0,a===i.index?i.time:1);a===r.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(N._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return N[t](this.curves[n.index],n.time)}}),{})),q=c.extend({initialize:function(t){for(var e,n=this.points=[],r=t._segments,i=t._closed,a=0,o=r.length;a<o;a++){var s=r[a].point;e&&e.equals(s)||n.push(e=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(t){var e=this.points,n=e.length,r=null;return n>0&&(r=[new I(e[0])],n>1&&(this.fitCubic(r,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,n,r,i,a){var o=this.points;if(r-n!==1){for(var s,u=this.chordLengthParameterize(n,r),l=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,r,u,i,a),d=this.findMaxError(n,r,f,u);if(d.error<e&&c)return void this.addCurve(t,f);if(s=d.index,d.error>=l)break;c=this.reparameterize(n,r,u,f),l=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,i,p),this.fitCubic(t,e,s,r,p.negate(),a)}else{var v=o[n],m=o[r],g=v.getDistance(m)/3;this.addCurve(t,[v,v.add(i.normalize(g)),m.add(a.normalize(g)),m])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new I(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,r,i){for(var a=1e-12,o=Math.abs,s=this.points,u=s[t],l=s[e],c=[[0,0],[0,0]],h=[0,0],f=0,d=e-t+1;f<d;f++){var p=n[f],v=1-p,m=3*p*v,g=v*v*v,y=m*v,_=m*p,b=p*p*p,x=r.normalize(y),w=i.normalize(_),S=s[t+f].subtract(u.multiply(g+y)).subtract(l.multiply(_+b));c[0][0]+=x.dot(x),c[0][1]+=x.dot(w),c[1][0]=c[0][1],c[1][1]+=w.dot(w),h[0]+=x.dot(S),h[1]+=w.dot(S)}var k,T,E=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(o(E)>a){var C=c[0][0]*h[1]-c[1][0]*h[0];k=(h[0]*c[1][1]-h[1]*c[0][1])/E,T=C/E}else{var O=c[0][0]+c[0][1],M=c[1][0]+c[1][1];k=T=o(O)>a?h[0]/O:o(M)>a?h[1]/M:0}var A,P,L=l.getDistance(u),R=a*L;if(k<R||T<R)k=T=L/3;else{var j=l.subtract(u);A=r.normalize(k),P=i.normalize(T),A.dot(j)-P.dot(j)>L*L&&(k=T=L/3,A=P=null)}return[u,u.add(A||r.normalize(k)),l.add(P||i.normalize(T)),l]},reparameterize:function(t,e,n,r){for(var i=t;i<=e;i++)n[i-t]=this.findRoot(r,this.points[i],n[i-t]);i=1;for(var a=n.length;i<a;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(t,e,n){for(var r=[],i=[],a=0;a<=2;a++)r[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)i[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),l=o.subtract(e),c=s.dot(s)+l.dot(u);return m.isMachineZero(c)?n:n-l.dot(s)/c},evaluate:function(t,e,n){for(var r=e.slice(),i=1;i<=t;i++)for(var a=0;a<=t-i;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(t,e){for(var n=[0],r=t+1;r<=e;r++)n[r-t]=n[r-t-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=e-t;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(t,e,n,r){for(var i=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,r[o-t]).subtract(this.points[o]),u=s.x*s.x+s.y*s.y;u>=a&&(a=u,i=o)}return{error:a,index:i}}}),H=C.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&y.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),W=H.extend({_class:"PointText",initialize:function(){H.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var r=this._lines,i=this._style,a=i.hasFill(),o=i.hasStroke(),s=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var l=0,c=r.length;l<c;l++){t.shadowColor=u;var h=r[l];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,r=this._lines,i=r.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==a&&(u-=s/("center"===a?2:1));var l=new w(u,i?-.75*o:0,s,i*o);return t?t._transformBounds(l,l):l}}),G=c.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]};function i(e){var n,i=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(i){var o=i[4]?4:3;n=new Array(o);for(var s=0;s<o;s++){var l=i[s+1];n[s]=parseInt(1==l.length?l+l:l,16)/255}}else if(i=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=i[1],n=i[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(s=0,Math.min(n.length,4));s<h;s++){var f=n[s];l=parseFloat(f);if(c)if(0===s){var d=f.match(/([a-z]*)$/)[1];l*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else s<3&&(l/=100);else s<3&&(l/=/%$/.test(f)?100:255);n[s]=l}}else{var p=r[e];if(!p)if(u){t||((t=ut.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var v=t.getImageData(0,0,1,1).data;p=r[e]=[v[0]/255,v[1]/255,v[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var r=Math.max(t,e,n),i=r-Math.min(t,e,n);return[0===i?0:60*(r==t?(e-n)/i+(e<n?6:0):r==e?(n-t)/i+2:(t-e)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(t,e,n){var r,i=(t=(t/60%6+6)%6)-(r=Math.floor(t)),o=[n,n*(1-e),n*(1-e*i),n*(1-e*(1-i))];return[o[(r=a[r])[0]],o[r[1]],o[r[2]]]},"rgb-hsl":function(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),a=r-i,o=0===a,s=(r+i)/2;return[o?0:60*(r==t?(e-n)/a+(e<n?6:0):r==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(r+i):a/(2-r-i),s]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var r=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=n<.5?n*(1+e):n+e-n*e,a=2*n-i,o=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(e,(function(t,r){n[r]=[],c.each(t,(function(t,i){var a=c.capitalize(t),o=/^(hue|saturation)$/.test(t),s=n[r][i]="gradient"===r?"gradient"===t?function(t){var e=this._components[0];return e!==(t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return y.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+a]=function(t){this._type===r||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=e[r],this._type=r),this._components[i]=s.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(r){var a,o,s,u,l=arguments,h=this.__read,f=0;Array.isArray(r)&&(r=(l=r)[0]);var d=null!=r&&typeof r;if("string"===d&&r in e&&(a=r,r=l[1],Array.isArray(r)?(o=r,s=l[2]):(h&&(f=1),l=c.slice(l,1),d=typeof r)),!o){if(u="number"===d?l:"object"===d&&null!=r.length?r:null){a||(a=u.length>=3?"rgb":"gray");var p=e[a].length;s=u[p],h&&(f+=u===arguments?p+(null!=s?1:0):1),u.length>p&&(u=c.slice(u,0,p))}else if("string"===d){var v=i(r);a=v[0],4===(o=v[1]).length&&(s=o[3],o.length--)}else if("object"===d)if(r.constructor===t){if(a=r._type,o=r._components.slice(),s=r._alpha,"gradient"===a)for(var m=1,g=o.length;m<g;m++){var y=o[m];y&&(o[m]=y.clone())}}else if(r.constructor===X)a="gradient",u=l;else{var _=e[a="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb"],b=n[a];this._components=o=[];for(m=0,g=_.length;m<g;m++){null==(x=r[_[m]])&&!m&&"gradient"===a&&"stops"in r&&(x={stops:r.stops,radial:r.radial}),null!=(x=b[m].call(this,x))&&(o[m]=x)}s=r.alpha}h&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(m=0,g=(b=n[this._type]).length;m<g;m++){var x;null!=(x=b[m].call(this,u&&u[m]))&&(o[m]=x)}}return this._components=o,this._properties=e[this._type],this._alpha=s,h&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new G(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?G.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,r=v.instance,i=0,a=t.length;i<a;i++){var o=this._components[i];null!=o&&e.push(t[i]+": "+(n?o:r.number(o)))}return null!=this._alpha&&e.push("alpha: "+r.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function r(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[r(e[0]),r(e[1]),r(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],a=i._stops,o=r[1],s=r[2],u=r[3],l=e&&e.inverted();if(l&&(o=l._transformPoint(o),s=l._transformPoint(s),u&&(u=l._transformPoint(u))),i._radial){var c=s.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>c&&(u=o.add(h.normalize(c-.1)))}var f=u||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var v=a[d],m=v._offset;n.addColorStop(null==m?d/(p-1):m,v._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,r=e.length;n<r;n++){var i=e[n];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new G(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=G.read(arguments);for(var n=this._type,r=this._components,i=e._convert(n),a=0,o=r.length;a<o;a++)i[a]=t(r[a],i[a]);return new G(n,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),X=c.extend({_class:"Gradient",initialize:function(t,e){this._id=g.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"===typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,r=e.length;n<r;n++)e[n]._owner=s;for(n=0,r=(e=this._stops=Y.readList(t,0,{clone:!0})).length;n<r;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,r=e.length;if(r===n.length){for(var i=0;i<r;i++)if(!e[i].equals(n[i]))return!1;return!0}}return!1}}),Y=c.extend({_class:"GradientStop",initialize:function(t,e){var n=t,r=e;"object"===typeof t&&e===s&&(Array.isArray(t)&&"number"!==typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,r=this._offset;return c.serialize(null==r?[n]:[n,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){G._setOwner(this._color,null),this._color=G._setOwner(G.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},e,{fillColor:new G}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:"Style",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||ft.project,this._defaults=!i||i instanceof O?e:i instanceof H?n:t,r&&this.set(r)}};return c.each(e,(function(t,e){var n=/Color$/.test(e),o="shadowOffset"===e,u=c.capitalize(e),l=r[e],h="set"+u,f="get"+u;a[h]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof V);if(a)for(var o=0,s=i.length;o<s;o++)i[o]._style[h](t);if(("selectedColor"===e||!a)&&e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&(G._setOwner(u,null),u._canvasStyle=null),t&&t.constructor===G&&(t=G._setOwner(t,r,a&&h))),this._values[e]=t,r&&r._changed(l||129))}},a[f]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof V);if(a&&!t)for(var u=0,l=i.length;u<l;u++){var d=i[u]._style[f]();if(u){if(!c.equals(p,d))return s}else p=d}else if(e in this._defaults){var p;if((p=this._values[e])===s)(p=this._defaults[e])&&p.clone&&(p=p.clone());else{var v=n?G:o?y:null;!v||p&&p.constructor===v||(this._values[e]=p=v.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=G._setOwner(p,r,a&&h)),p},i[f]=function(t){return this._style[f](t)},i[h]=function(t){this._style[h](t)}})),c.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,r="set"+e;a[n]=i[n]="#get"+t,a[r]=i[r]="#set"+t})),C.inject(i),a},{set:function(t){var e=t instanceof Z,n=e?t._values:t;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&e&&i.clone?i.clone():i}},equals:function(t){function e(t,e,n){var r=t._values,i=e._values,a=e._defaults;for(var o in r){var u=r[o],l=i[o];if((!n||!(o in i))&&!c.equals(u,l===s?a[o]:l))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),Q=new function(){function t(t,e,n,r){for(var i=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=i[o],u=s?s+a:e;if(u in t){if(!n)return t[u];t[u]=r;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,r=t.ownerDocument,i=r.body,a=r.documentElement;try{n=t.getBoundingClientRect()}catch(l){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||i.clientLeft||0),s=n.top-(a.clientTop||i.clientTop||0);if(!e){var u=r.defaultView;o+=u.pageXOffset||a.scrollLeft||i.scrollLeft,s+=u.pageYOffset||a.scrollTop||i.scrollTop}return new w(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,r=e.documentElement;return new w(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(t,e){return Q.getBounds(t,e).getPoint()},getSize:function(t){return Q.getBounds(t,!0).getSize()},isInvisible:function(t){return Q.getSize(t).equals(new b(0,0))},isInView:function(t){return!Q.isInvisible(t)&&Q.getViewportBounds(t).intersects(Q.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,r){if("object"===typeof n)for(var i in n)t(e,i,!0,n[i]);else t(e,n,!0,r)}}},J={add:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++){var s=i[a],u=t===l&&("touchstart"===s||"touchmove"===s)&&{passive:!1};t.addEventListener(s,r,u)}},remove:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++)t.removeEventListener(i[a],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new y(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return J.getPoint(t).subtract(Q.getOffset(e||J.getTarget(t)))}};J.requestAnimationFrame=new function(){var t,e=Q.getPrefixed(u,"requestAnimationFrame"),n=!1,r=[];function i(){var t=r;r=[];for(var a=0,o=t.length;a<o;a++)t[a]();(n=e&&r.length)&&e(i)}return function(a){r.push(a),e?n||(e(i),n=!0):t||(t=setInterval(i,1e3/60))}};var K=c.extend(h,{_class:"View",initialize:function t(e,n){function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function i(){var t=Q.getSize(n);return t.isNaN()||t.isZero()?new b(r("width"),r("height")):t}var a;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),J.add(n,this._viewEvents);var o="none";if(Q.setPrefixed(n.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var s=this;J.add(u,this._windowEvents={resize:function(){s.setViewSize(i())}})}if(a=i(),f.hasAttribute(n,"stats")&&"undefined"!==typeof Stats){this._stats=new Stats;var c=this._stats.domElement,h=c.style,d=Q.getOffset(n);h.position="absolute",h.left=d.x+"px",h.top=d.y+"px",l.body.appendChild(c)}}else a=new b(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new k)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ft.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;K._focused===this&&(K._focused=null),K._views.splice(K._views.indexOf(this),1),delete K._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),J.remove(this._element,this._viewEvents),J.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(C._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;J.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;Q.getPrefixed(l,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!Q.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ft=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new x(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Q.isInView(this._element)},isInserted:function(){return Q.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,i=l.createElement("div");i.style.fontSize=t,r.appendChild(i),e=parseFloat(Q.getStyles(i).fontSize),r.removeChild(i)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,r=(e?c:y).read(n),i=y.read(n,0,{readNull:!0});return this.transform((new k)[t](r,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new k;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=y.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new k).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new _(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(t){return this.viewToProject(J.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&"string"===typeof e&&(e=l.getElementById(e)),new(u?$:K)(t,e)}}},new function(){if(u){var t,e,n,r,i,a=!1,o=!1,s=u.navigator;s.pointerEnabled||s.msPointerEnabled?(n="pointerdown MSPointerDown",r="pointermove MSPointerMove",i="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",r="touchmove",i="touchend touchcancel","ontouchstart"in u&&s.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",r+=" mousemove",i+=" mouseup"));var c={},h={mouseout:function(t){var e=K._focused,n=J.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var r=J.getOffset(t,e._element),i=r.x,a=Math.abs,o=a(i),s=o-(1<<25);r.x=a(s)<o?s*(i<0?-1:1):i,C(e,t,e.viewToProject(r))}},scroll:E};c[n]=function(t){var e=K._focused=T(t);a||(a=!0,e._handleMouseEvent("mousedown",t))},h[r]=function(n){var r=K._focused;if(!o){var i=T(n);i?r!==i&&(r&&C(r,n),t||(t=r),r=K._focused=e=i):e&&e===r&&(t&&!t.isInserted()&&(t=null),r=K._focused=t,t=null,E())}r&&C(r,n)},h[n]=function(){o=!0},h[i]=function(t){var e=K._focused;e&&a&&e._handleMouseEvent("mouseup",t),o=a=!1},J.add(l,h),J.add(u,{load:E});var f,d,p,v,m,g,y,_,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,k={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var r=this._itemEvents,i=r.native[t],o="mousemove"===t,s=this._scope.tool,u=this;function l(t){return r.virtual[t]||u.responds(t)||s&&s.responds(t)}o&&a&&l("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=i&&c&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,k=!1,T={};if(T[t.substr(5)]=!0,i&&w!==v&&(v&&O(v,null,"mouseleave",e,n),w&&O(w,null,"mouseenter",e,n),v=w),S^c&&(O(this,null,c?"mouseenter":"mouseleave",e,n),c?this:null,k=!0),!c&&!T.drag||n.equals(d)||(M(this,w,o?t:"mousemove",e,n,d),k=!0),S=c,T.down&&c||T.up&&f){if(M(this,w,t,e,n,f),T.down){if(_=w===g&&Date.now()-y<300,p=g=w,!x&&w){for(var E=w;E&&!E.responds("mousedrag");)E=E._parent;E&&(m=w)}f=n}else T.up&&(x||w!==p||(y=Date.now(),M(this,w,_?"doubleclick":"click",e,n,f),_=!1),p=m=null);S=!1,k=!0}d=n,k&&s&&(b=s._handleMouseEvent(t,e,n,T)||b),!1!==e.cancelable&&(b&&!T.move||T.down&&l("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,r){var i,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ft=a,o.emit(t,i=i||new et(t,e,n,r)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,r=n.native,i=n.virtual;for(var a in k)r[a]=(r[a]||0)+(k[a][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:E,_resetState:function(){a=o=b=S=!1,t=e=f=d=p=v=m=g=y=_=null}}}}function T(t){var e=J.getTarget(t);return e.getAttribute&&K._viewsById[e.getAttribute("id")]}function E(){var t=K._focused;if(!t||!t.isVisible())for(var n=0,r=K._views.length;n<r;n++)if((t=K._views[n]).isVisible()){K._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent("mousemove",e,n)}function O(t,e,n,r,i,a,o){var s,u=!1;function l(t,n){if(t.responds(n)){if(s||(s=new rt(n,r,i,e||t,a?i.subtract(a):null)),t.emit(n,s)&&(b=!0,s.prevented&&(x=!0),s.stopped))return u=!0}else{var o=w[n];if(o)return l(t,o)}}for(;t&&t!==o&&!l(t,n);)t=t._parent;return u}function M(t,e,n,r,i,a){return t._project.removeOn(n),x=b=!1,m&&O(m,null,n,r,i,a)||e&&e!==m&&!e.isDescendant(m)&&O(e,null,"mousedrag"===n?"mousemove":n,r,i,a,m)||O(t,m||e||t,n,r,i,a)}}),$=K.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=ut.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var i=u.devicePixelRatio||1,a=Q.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=i/a}K.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var r=this._pixelRatio;if(t.base.call(this,e*r,n*r),1!==r){var i=this._element,a=this._context;if(!f.hasAttribute(i,"resize")){var o=i.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,r=ft.agent;if(r&&r.firefox)n=t.base.call(this,e);else{var i=this._context,a=i.font;i.font=e+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(t,e){var n=this._context,r=n.font,i=0;n.font=t;for(var a=0,o=e.length;a<o;a++)i=Math.max(i,n.measureText(e[a]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return nt.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,n,r){this.type=t,this.event=e,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),nt=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},r={tab:"\t",space:" ",enter:"\r"},i={},a={},o=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ft&&ft.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===s?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function f(e,n,r,s){var u,l=K._focused;if(i[n]=e,e?a[n]=r:delete a[n],n.length>1&&(u=c.camelize(n))in o){o[u]=e;var h=ft&&ft.agent;if("meta"===u&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],s);t=null}}else e&&t&&(t[n]=r);l&&l._handleKeyEvent(e?"keydown":"keyup",s,n,r)}return J.add(l,{keydown:function(t){var n=h(t),i=ft&&ft.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?f(!0,n,r[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=h(t),r=t.charCode,i=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==e&&(n=i.toLowerCase()),f(!0,n,i,t),e=null}},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),J.add(u,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:o,isDown:function(t){return!!i[t]}}},rt=tt.extend({_class:"MouseEvent",initialize:function(t,e,n,r,i){this.type=t,this.event=e,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),it=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),at=d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,r){ft=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var i=r.move||r.drag,a=this.responds(t),o=this.minDistance,s=this.maxDistance,u=!1,l=this;function c(t,e){var a=n,o=i?l._point:l._downPoint||a;if(i){if(l._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var s=a.subtract(o),u=s.getLength();if(u<(t||0))return!1;e&&(a=o.add(s.normalize(Math.min(u,e))))}l._moveCount++}return l._point=a,l._lastPoint=o||a,r.down&&(l._moveCount=-1,l._downPoint=a,l._downCount++),!0}function h(){a&&(u=l.emit(t,new it(l,t,e))||u)}if(r.down)c(),h();else if(r.up)c(null,s),h();else if(a)for(;c(o,s);)h();return u}}),ot=c.extend(h,{_class:"Tween",statics:{easings:new c({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,r,i,a,o){this.object=e;var s=typeof a,u="function"===s;this.type=u?s:"string"===s?a:"linear",this.easing=u?a:t.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var l=n||r;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(n),this._to=l&&this._getState(r),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,r=function(n){return"function"===typeof n?n(e,t):n},i=0,a=n&&n.length;i<a;i++){var o=n[i],s=r(this._from[o]),u=r(this._to[o]),l=s&&u&&s.__add&&u.__add?u.__subtract(s).__multiply(e).__add(s):(u-s)*e+s;this._setProperty(this._parsedKeys[o],l)}this.responds("update")&&this.emit("update",new c({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},r=0,i=e.length;r<i;r++){var a,o=e[r],s=this._parsedKeys[o],u=this._getProperty(s);if(t){var l=this._resolveValue(u,t[o]);this._setProperty(s,l),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,u)}else a=u&&u.clone?u.clone():u;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"===typeof e){var r=e.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],i)}}}return e},_calculate:function(t,e,n){return ft.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n],a=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[i]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,r=0,i=t.length-(e||0);r<i&&n;r++)n=n[t[r]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),st=function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,r='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(r);t.onError(r,n)},e.send(null)},ut=c.exports.CanvasProvider={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,r=!0;"object"===typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement("canvas"),r=!1);var i=n.getContext("2d");if(!i)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?r&&i.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),i.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},lt=new function(){var t,e,n,r,i,a,o,s,u,l,h,f=Math.min,d=Math.max,p=Math.abs;function v(t,e,n){return.2989*t+.587*e+.114*n}function m(t,e,n,r){var i=r-v(t,e,n),a=(r=v(u=t+i,l=e+i,h=n+i),f(u,l,h)),o=d(u,l,h);if(a<0){var s=r-a;u=r+(u-r)*r/s,l=r+(l-r)*r/s,h=r+(h-r)*r/s}if(o>255){var c=255-r,p=o-r;u=r+(u-r)*c/p,l=r+(l-r)*c/p,h=r+(h-r)*c/p}}function g(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,r){var i,a=[t,e,n],o=d(t,e,n),s=f(t,e,n);i=0===f(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[i]=(a[i]-a[s])*r/(a[o]-a[s]),a[o]=r):a[i]=a[o]=0,a[s]=0,u=a[0],l=a[1],h=a[2]}var _={multiply:function(){u=i*t/255,l=a*e/255,h=o*n/255},screen:function(){u=i+t-i*t/255,l=a+e-a*e/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*t/255:255-2*(255-i)*(255-t)/255,l=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var r=t*i/255;u=r+i*(255-(255-i)*(255-t)/255-r)/255,l=(r=e*a/255)+a*(255-(255-a)*(255-e)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},"hard-light":function(){u=t<128?2*t*i/255:255-2*(255-t)*(255-i)/255,l=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===i?0:255===t?255:f(255,255*i/(255-t)),l=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){u=255===i?255:0===t?0:d(0,255-255*(255-i)/t),l=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){u=i<t?i:t,l=a<e?a:e,h=o<n?o:n},lighten:function(){u=i>t?i:t,l=a>e?a:e,h=o>n?o:n},difference:function(){(u=i-t)<0&&(u=-u),(l=a-e)<0&&(l=-l),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+t*(255-i-i)/255,l=a+e*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,g(i,a,o)),m(u,l,h,v(i,a,o))},saturation:function(){y(i,a,o,g(t,e,n)),m(u,l,h,v(i,a,o))},luminosity:function(){m(i,a,o,v(t,e,n))},color:function(){m(t,e,n,v(i,a,o))},add:function(){u=f(i+t,255),l=f(a+e,255),h=f(o+n,255)},subtract:function(){u=d(i-t,0),l=d(a-e,0),h=d(o-n,0)},average:function(){u=(i+t)/2,l=(a+e)/2,h=(o+n)/2},negation:function(){u=255-p(255-t-i),l=255-p(255-e-a),h=255-p(255-n-o)}},b=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),x=ut.getContext(1,1);x&&(c.each(_,(function(t,e){var n="darken"===e,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[e]=r})),ut.release(x)),this.process=function(c,f,d,p,v){var m=f.canvas,g="normal"===c;if(g||b[c])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,g||(d.globalCompositeOperation=c),d.drawImage(m,v.x,v.y),d.restore();else{var y=_[c];if(!y)return;for(var x=d.getImageData(v.x,v.y,m.width,m.height),w=x.data,S=f.getImageData(0,0,m.width,m.height).data,k=0,T=w.length;k<T;k+=4){t=S[k],i=w[k],e=S[k+1],a=w[k+1],n=S[k+2],o=w[k+2],r=S[k+3],s=w[k+3],y();var E=r*p/255,C=1-E;w[k]=E*u+C*i,w[k+1]=E*l+C*a,w[k+2]=E*h+C*o,w[k+3]=r*p+C*s}d.putImageData(x,v.x,v.y)}}},ct=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function i(t,e,n){for(var i in e){var a=e[i],o=r[i];"number"===typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,i,a):t.setAttribute(i,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,r){return i(l.createElementNS(t,e),n,r)},get:function(t,e){var n=r[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i},set:i}},ht=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof z||t instanceof A||t instanceof H)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=c.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&c.each(r,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function e(e,n,r){var i,a=new c,o=e.getTranslation();n&&(e.isInvertible()?(i=(e=e._shiftless())._inverseTransform(o),o=null):i=new y,a[r?"cx":"x"]=i.x,a[r?"cy":"y"]=i.y);if(!e.isIdentity()){var s=e.decompose();if(s){var u=[],l=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&u.push("translate("+t.point(o)+")"),l&&u.push("rotate("+t.number(l)+")"),m.isZero(h.x-1)&&m.isZero(h.y-1)||u.push("scale("+t.point(h)+")"),f.x&&u.push("skewX("+t.number(f.x)+")"),f.y&&u.push("skewY("+t.number(f.y)+")"),a.transform=u.join(" ")}else a.transform="matrix("+e.getValues().join(",")+")"}return a}function n(n,r){for(var i=e(n._matrix),a=n._children,o=ct.create("g",i,t),s=0,u=a.length;s<u;s++){var c=a[s],h=f(c,r);if(h)if(c.isClipMask()){var d=ct.create("clipPath");d.appendChild(h),l(c,d,"clip"),ct.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(h)}return o}function r(n){var r=n._type,i=n._radius,a=e(n._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var o=n._size,s=o.width,u=o.height;a.x-=s/2,a.y-=u/2,a.width=s,a.height=u,i.isZero()&&(i=null)}return i&&("circle"===r?a.r=i:(a.rx=i.width,a.ry=i.height)),ct.create(r,a,t)}var i,a={Group:n,Layer:n,Raster:function(n,r){var i=e(n._matrix,!0),a=n.getSize(),o=n.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=0==r.embedImages&&o&&o.src||n.toDataURL(),ct.create("image",i,t)},Path:function(n,i){var a=i.matchShapes;if(a){var o=n.toShape(!1);if(o)return r(o)}var s,u=n._segments,l=u.length,c=e(n._matrix);if(a&&l>=2&&!n.hasHandles())if(l>2){s=n._closed?"polygon":"polyline";for(var h=[],f=0;f<l;f++)h.push(t.point(u[f]._point));c.points=h.join(" ")}else{s="line";var d=u[0]._point,p=u[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",c.d=n.getPathData(null,i.precision);return ct.create(s,c,t)},Shape:r,CompoundPath:function(n,r){var i=e(n._matrix),a=n.getPathData(null,r.precision);return a&&(i.d=a),ct.create("path",i,t)},SymbolItem:function(n,r){var i=e(n._matrix,!0),a=n._definition,o=u(a,"symbol"),s=a._item,c=s.getStrokeBounds();return o||((o=ct.create("symbol",{viewBox:t.rectangle(c)})).appendChild(f(s,r)),l(a,o,"symbol")),i.href="#"+o.id,i.x+=c.x,i.y+=c.y,i.width=c.width,i.height=c.height,i.overflow="visible",ct.create("use",i,t)},PointText:function(n){var r=ct.create("text",e(n._matrix,!0),t);return r.textContent=n._content,r}};function s(e,n,r){var i={},a=!r&&e.getParent(),o=[];return null!=e._name&&(i.id=e._name),c.each(ht,(function(n){var r=n.get,s=n.type,h=e[r]();if(n.exportFilter?n.exportFilter(e,h):!a||!c.equals(a[r](),h)){if("color"===s&&null!=h){var f=h.getAlpha();f<1&&(i[n.attribute+"-opacity"]=f)}"style"===s?o.push(n.attribute+": "+h):i[n.attribute]=null==h?"none":"color"===s?h.gradient?function(e){var n=u(e,"color");if(!n){var r,i=e.getGradient(),a=i._radial,o=e.getOrigin(),s=e.getDestination();if(a){r={cx:o.x,cy:o.y,r:o.getDistance(s)};var c=e.getHighlight();c&&(r.fx=c.x,r.fy=c.y)}else r={x1:o.x,y1:o.y,x2:s.x,y2:s.y};r.gradientUnits="userSpaceOnUse",n=ct.create((a?"radial":"linear")+"Gradient",r,t);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p=h[f],v=p._color,m=v.getAlpha(),g=p._offset;r={offset:null==g?f/(d-1):g},v&&(r["stop-color"]=v.toCSS(!0)),m<1&&(r["stop-opacity"]=m),n.appendChild(ct.create("stop",r,t))}l(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===s?h.join(","):"lookup"===s?n.toSVG[h]:h}})),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,e._visible||(i.visibility="hidden"),ct.set(n,i,t)}function u(t,e){return i||(i={ids:{},svgs:{}}),t&&i.svgs[e+"-"+(t._id||t.__id||(t.__id=g.get("svg")))]}function l(t,e,n){i||u();var r=i.ids[n]=(i.ids[n]||0)+1;e.id=n+"-"+r,i.svgs[n+"-"+(t._id||t.__id)]=e}function h(t,e){var n=t,r=null;if(i){for(var a in n="svg"===t.nodeName.toLowerCase()&&t,i.svgs)r||(n||(n=ct.create("svg")).appendChild(t),r=n.insertBefore(ct.create("defs"),n.firstChild)),r.appendChild(i.svgs[a]);i=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function f(t,e,n){var r=a[t._class],i=r&&r(t,e);if(i){var o=e.onExport;o&&(i=o(t,i,e)||i);var u=JSON.stringify(t._data);u&&"{}"!==u&&"null"!==u&&i.setAttribute("data-paper-data",u)}return i&&s(t,i,n)}function d(e){return e||(e={}),t=new v(e.precision),e}C.inject({exportSVG:function(t){return h(f(this,t=d(t),!0),t)}}),E.inject({exportSVG:function(n){n=d(n);var r=this._children,i=this.getView(),a=c.pick(n.bounds,"view"),o=n.matrix||"view"===a&&i._matrix,s=o&&k.read([o]),u="view"===a?new w([0,0],i.getViewSize()):"content"===a?C._getBounds(r,s,{stroke:!0}).rect:w.read([a],0,{readNull:!0}),l={version:"1.1",xmlns:ct.svg,"xmlns:xlink":ct.xlink};u&&(l.width=u.width,l.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(l.viewBox=t.rectangle(u)));var p=ct.create("svg",l,t),v=p;s&&!s.isIdentity()&&(v=p.appendChild(ct.create("g",e(s),t)));for(var m=0,g=r.length;m<g;m++)v.appendChild(f(r[m],n,!0));return h(p,n)}})},new function(){var t,e={};function n(e,n,r,i,a,o){var s=ct.get(e,n)||o,u=null==s?i?null:r?"":0:r?s:parseFloat(s);return/%\s*$/.test(s)?u/100*(a?1:t[/x|^width/.test(n)?"width":"height"]):u}function r(t,e,r,i,a,o,s){return e=n(t,e||"x",!1,i,a,o),r=n(t,r||"y",!1,i,a,s),!i||null!=e&&null!=r?new y(e,r):null}function i(t,e,r,i,a){return e=n(t,e||"width",!1,i,a),r=n(t,r||"height",!1,i,a),!i||null!=e&&null!=r?new b(e,r):null}function a(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?S(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,r){var i=t.childNodes,a="clippath"===e,o="defs"===e,s=new O,u=s._project,l=u._currentStyle,c=[];if(a||o||(s=x(s,t,r),u._currentStyle=s._style.clone()),r)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)T(h[f],n,!1);for(f=0,d=i.length;f<d;f++){var p,v=i[f];1!==v.nodeType||/^defs$/i.test(v.nodeName)||!(p=T(v,n,!1))||p instanceof R||c.push(p)}return s.addChildren(c),a&&(s=x(s.reduce(),t,r)),u._currentStyle=l,(a||o)&&(s.remove(),s=null),s}function f(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,a=n.length;i<a;i+=2)r.push(new y(parseFloat(n[i]),parseFloat(n[i+1])));var o=new F(r);return"polygon"===e&&o.closePath(),o}function d(t,i){var a,o=(n(t,"href",!0)||"").substring(1),s="radialgradient"===i;if(o)(a=e[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var u=t.childNodes,l=[],c=0,h=u.length;c<h;c++){var f=u[c];1===f.nodeType&&l.push(x(new Y,f))}a=new X(l,s)}var d,p,v,m="userSpaceOnUse"!==n(t,"gradientUnits",!0);return s?(p=(d=r(t,"cx","cy",!1,m,"50%","50%")).add(n(t,"r",!1,!1,m,"50%"),0),v=r(t,"fx","fy",!0,m)):(d=r(t,"x1","y1",!1,m,"0%","0%"),p=r(t,"x2","y2",!1,m,"100%","0%")),x(new G(a,d,p,v),t)._scaleToBounds=m,null}var p={"#document":function(t,e,n,r){for(var i=t.childNodes,a=0,o=i.length;a<o;a++){var s=i[a];if(1===s.nodeType)return T(s,n,r)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return z.create(t.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(t){var e=new P(n(t,"href",!0));return e.on("load",(function(){var e=i(t);this.setSize(e);var n=r(t).add(e.divide(2));this._matrix.append((new k).translate(n))})),e},symbol:function(t,e,n,r){return new R(h(t,e,n,r),!0)},defs:h,use:function(t){var i=(n(t,"href",!0)||"").substring(1),a=e[i],o=r(t);return a?a instanceof R?a.place(o):a.clone().translate(o):null},circle:function(t){return new A.Circle(r(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new A.Ellipse({center:r(t,"cx","cy"),radius:i(t,"rx","ry")})},rect:function(t){return new A.Rectangle(new w(r(t),i(t)),i(t,"rx","ry"))},line:function(t){return new F.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){var e=new W(r(t).add(r(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:h};function v(t,e,n,r){if(t.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),a=new k,o=0,s=i.length;o<s;o++){var u=i[o];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0],h=l[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new k(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function m(t,e,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=t[r]&&t[r]();i&&i.setAlpha(parseFloat(e))}var g=c.set(c.each(ht,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](a(n,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var i=e.getBounds();r.transform((new k).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,e){var n=S(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof O))return new O(n,t);t.insertChild(0,n)}},gradientTransform:v,transform:v,"fill-opacity":m,"stroke-opacity":m,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,r,o){var s,u=new w(a(e,"array")),l=i(r,null,null,!0);if(t instanceof O){var c=l?l.divide(u.getSize()):1,h=(new k).scale(c).translate(u.getPoint().negate());s=t}else t instanceof R&&(l&&u.setSize(l),s=t._item);if(s){if("visible"!==_(r,"overflow",o)){var f=new A.Rectangle(u);f.setClipMask(!0),s.addChild(f)}h&&s.transform(h)}}});function _(t,e,n){var r=t.attributes[e],i=r&&r.value;if(!i&&t.style){var a=c.camelize(e);(i=t.style[a])||n.node[a]===n.parent[a]||(i=n.node[a])}return i?"none"===i?null:i:s}function x(t,e,n){var r=e.parentNode,i={node:Q.getStyles(e)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&Q.getStyles(r)||{}};return c.each(g,(function(n,r){var a=_(e,r,i);t=a!==s&&n(t,a,r,e,i)||t})),t}function S(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),r=n&&n[1],i=r&&e[u?r.replace(u.location.href.split("#")[0]+"#",""):r];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function T(n,r,a){var o,s,u,h=n.nodeName.toLowerCase(),f="#document"!==h,d=l.body;a&&f&&(t=ft.getView().getSize(),t=i(n,null,null,!0)||t,o=ct.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=n.parentNode,u=n.nextSibling,o.appendChild(n),d.appendChild(o));var v=ft.settings,m=v.applyMatrix,g=v.insertItems;v.applyMatrix=!1,v.insertItems=!1;var y=p[h],_=y&&y(n,h,r,a)||null;if(v.insertItems=g,v.applyMatrix=m,_){!f||_ instanceof O||(_=x(_,n,a));var b=r.onImport,w=f&&n.getAttribute("data-paper-data");b&&(_=b(n,_,r)||_),r.expandShapes&&_ instanceof A&&(_.remove(),_=_.toPath()),w&&(_._data=JSON.parse(w))}return o&&(d.removeChild(o),s&&(u?s.insertBefore(n,u):s.appendChild(n))),a&&(e={},_&&c.pick(r.applyMatrix,m)&&_.matrix.apply(!0,!0)),_}function M(t,e,n){if(!t)return null;e="function"===typeof e?{onLoad:e}:e||{};var r=ft,i=null;function a(a){try{var l="object"===typeof a?a:(new o.DOMParser).parseFromString(a.trim(),"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+t);ft=r,i=T(l,e,!0),e&&!1===e.insert||n._insertItem(s,i);var c=e.onLoad;c&&c(i,a)}catch(h){u(h)}}function u(t,n){var r=e.onError;if(!r)throw new Error(t);r(t,n)}if("string"!==typeof t||/^[\s\S]*</.test(t)){if("undefined"!==typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}a(t)}else{var h=l.getElementById(t);h?a(h):st({url:t,async:!0,onLoad:a,onError:u})}return i}C.inject({importSVG:function(t,e){return M(t,e,this)}}),E.inject({importSVG:function(t,e){return this.activate(),M(t,e,this)}})},c.exports.PaperScript=function(){var t,e,h,d=this,p=d.acorn;if(!p)try{p=n(197)}catch(C){}p||(p=t=e={},h=function(t){"use strict";var e,n,r,i;t.version="0.5.0",t.parse=function(t,i){return n=String(t),r=n.length,o(i),Xt(),function(t){g=y=s,e.locations&&(_=new Gt),b=w=null,x=[],$t();var n=t||he(),r=!0;for(t||(n.body=[]);f!==P;){var i=Se();n.body.push(i),r&&pe(i)&&ue(!0),r=!1}return de(n,"Program")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);i=e.sourceFile||null}var s,u,l,c,h,f,d,p,v,m,g,y,_,b,x,w,S=t.getLineInfo=function(t,e){for(var n=1,r=0;;){qt.lastIndex=r;var i=qt.exec(t);if(!(i&&i.index<e))break;++n,r=i.index+i[0].length}return{line:n,column:e-r}};function k(t,e){var r=S(n,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=s,i}t.tokenize=function(t,i){n=String(t),r=n.length,o(i),Xt();var a={};function g(t){return y=l,$t(t),a.start=u,a.end=l,a.startLoc=c,a.endLoc=h,a.type=f,a.value=d,a}return g.jumpTo=function(t,r){var i;if(s=t,e.locations)for(v=1,m=qt.lastIndex=0;(i=qt.exec(n))&&i.index<t;)++v,m=i.index+i[0].length;p=r,Jt()},g};var T=[],E={type:"num"},O={type:"regexp"},M={type:"string"},A={type:"name"},P={type:"eof"},L={keyword:"break"},R={keyword:"case",beforeExpr:!0},j={keyword:"catch"},I={keyword:"continue"},D={keyword:"debugger"},N={keyword:"default"},B={keyword:"do",isLoop:!0},z={keyword:"else",beforeExpr:!0},F={keyword:"finally"},V={keyword:"for",isLoop:!0},U={keyword:"function"},q={keyword:"if"},H={keyword:"return",beforeExpr:!0},W={keyword:"switch"},G={keyword:"throw",beforeExpr:!0},X={keyword:"try"},Y={keyword:"var"},Z={keyword:"while",isLoop:!0},Q={keyword:"with"},J={keyword:"new",beforeExpr:!0},K={keyword:"this"},$={keyword:"null",atomValue:null},tt={keyword:"true",atomValue:!0},et={keyword:"false",atomValue:!1},nt={keyword:"in",binop:7,beforeExpr:!0},rt={break:L,case:R,catch:j,continue:I,debugger:D,default:N,do:B,else:z,finally:F,for:V,function:U,if:q,return:H,switch:W,throw:G,try:X,var:Y,while:Z,with:Q,null:$,true:tt,false:et,new:J,in:nt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:K,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},it={type:"[",beforeExpr:!0},at={type:"]"},ot={type:"{",beforeExpr:!0},st={type:"}"},ut={type:"(",beforeExpr:!0},lt={type:")"},ct={type:",",beforeExpr:!0},ht={type:";",beforeExpr:!0},ft={type:":",beforeExpr:!0},dt={type:"."},pt={type:"?",beforeExpr:!0},vt={binop:10,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},yt={postfix:!0,prefix:!0,isUpdate:!0},_t={prefix:!0,beforeExpr:!0},bt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},wt={binop:3,beforeExpr:!0},St={binop:4,beforeExpr:!0},kt={binop:5,beforeExpr:!0},Tt={binop:6,beforeExpr:!0},Et={binop:7,beforeExpr:!0},Ct={binop:8,beforeExpr:!0},Ot={binop:9,prefix:!0,beforeExpr:!0},Mt={binop:10,beforeExpr:!0};for(var At in t.tokTypes={bracketL:it,bracketR:at,braceL:ot,braceR:st,parenL:ut,parenR:lt,comma:ct,semi:ht,colon:ft,dot:dt,question:pt,slash:vt,eq:mt,name:A,eof:P,num:E,regexp:O,string:M},rt)t.tokTypes["_"+At]=rt[At];function Pt(t){t=t.split(" ");var e="",n=[];t:for(var r=0;r<t.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==t[r].length){n[i].push(t[r]);continue t}n.push([t[r]])}function a(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){for(n.sort((function(t,e){return e.length-t.length})),e+="switch(str.length){",r=0;r<n.length;++r){var o=n[r];e+="case "+o[0].length+":",a(o)}e+="}"}else a(t);return new Function("str",e)}var Lt,Rt=Pt("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),jt=Pt("class enum extends super const export import"),It=Pt("implements interface let package private protected public static yield"),Dt=Pt("eval arguments"),Nt=Pt("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Bt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zt="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Ft=new RegExp("["+zt+"]"),Vt=new RegExp("["+zt+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ut=/[\n\r\u2028\u2029]/,qt=/\r\n|[\n\r\u2028\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ft.test(String.fromCharCode(t)))},Wt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Vt.test(String.fromCharCode(t))))};function Gt(){this.line=v,this.column=s-m}function Xt(){v=1,s=m=0,p=!0,Jt()}function Yt(t,n){l=s,e.locations&&(h=new Gt),f=t,Jt(),d=n,p=t.beforeExpr}function Zt(){var t,r=e.onComment&&e.locations&&new Gt,i=s,a=n.indexOf("*/",s+=2);if(-1===a&&k(s-2,"Unterminated comment"),s=a+2,e.locations)for(qt.lastIndex=i;(t=qt.exec(n))&&t.index<s;)++v,m=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(i+2,a),i,s,r,e.locations&&new Gt)}function Qt(){for(var t=s,i=e.onComment&&e.locations&&new Gt,a=n.charCodeAt(s+=2);s<r&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);e.onComment&&e.onComment(!1,n.slice(t+2,s),t,s,i,e.locations&&new Gt)}function Jt(){for(;s<r;){var t=n.charCodeAt(s);if(32===t)++s;else if(13===t)++s,10===(i=n.charCodeAt(s))&&++s,e.locations&&(++v,m=s);else if(10===t||8232===t||8233===t)++s,e.locations&&(++v,m=s);else if(t>8&&t<14)++s;else if(47===t){var i;if(42===(i=n.charCodeAt(s+1)))Zt();else{if(47!==i)break;Qt()}}else if(160===t)++s;else{if(!(t>=5760&&Bt.test(String.fromCharCode(t))))break;++s}}}function Kt(t){switch(t){case 46:return function(){var t=n.charCodeAt(s+1);return t>=48&&t<=57?re(!0):(++s,Yt(dt))}();case 40:return++s,Yt(ut);case 41:return++s,Yt(lt);case 59:return++s,Yt(ht);case 44:return++s,Yt(ct);case 91:return++s,Yt(it);case 93:return++s,Yt(at);case 123:return++s,Yt(ot);case 125:return++s,Yt(st);case 58:return++s,Yt(ft);case 63:return++s,Yt(pt);case 48:var i=n.charCodeAt(s+1);if(120===i||88===i)return function(){s+=2;var t=ne(16);return null==t&&k(u+2,"Expected hexadecimal number"),Ht(n.charCodeAt(s))&&k(s,"Identifier directly after number"),Yt(E,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return re(!1);case 34:case 39:return function(t){s++;for(var i="";;){s>=r&&k(u,"Unterminated string constant");var a=n.charCodeAt(s);if(a===t)return++s,Yt(M,i);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&k(s-2,"Octal literal in strict mode"),i+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:i+="\n";break;case 114:i+="\r";break;case 120:i+=String.fromCharCode(ie(2));break;case 117:i+=String.fromCharCode(ie(4));break;case 85:i+=String.fromCharCode(ie(8));break;case 116:i+="\t";break;case 98:i+="\b";break;case 118:i+="\v";break;case 102:i+="\f";break;case 48:i+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:e.locations&&(m=s,++v);break;default:i+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||k(u,"Unterminated string constant"),i+=String.fromCharCode(a),++s}}(t);case 47:return function(){var t=n.charCodeAt(s+1);return p?(++s,ee()):61===t?te(gt,2):te(vt,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?te(gt,2):te(Mt,1);case 124:case 38:return function(t){var e=n.charCodeAt(s+1);return e===t?te(124===t?bt:xt,2):61===e?te(gt,2):te(124===t?wt:kt,1)}(t);case 94:return 61===n.charCodeAt(s+1)?te(gt,2):te(St,1);case 43:case 45:return function(t){var e=n.charCodeAt(s+1);return e===t?45==e&&62==n.charCodeAt(s+2)&&Ut.test(n.slice(y,s))?(s+=3,Qt(),Jt(),$t()):te(yt,2):61===e?te(gt,2):te(Ot,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(s+1),r=1;return e===t?(r=62===t&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+r)?te(gt,r+1):te(Ct,r)):33==e&&60==t&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Qt(),Jt(),$t()):(61===e&&(r=61===n.charCodeAt(s+2)?3:2),te(Et,r))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(s+1)?te(Tt,61===n.charCodeAt(s+2)?3:2):te(61===t?mt:_t,1)}(t);case 126:return te(_t,1)}return!1}function $t(t){if(t?s=u+1:u=s,e.locations&&(c=new Gt),t)return ee();if(s>=r)return Yt(P);var i=n.charCodeAt(s);if(Ht(i)||92===i)return oe();var a=Kt(i);if(!1===a){var o=String.fromCharCode(i);if("\\"===o||Ft.test(o))return oe();k(s,"Unexpected character '"+o+"'")}return a}function te(t,e){var r=n.slice(s,s+e);s+=e,Yt(t,r)}function ee(){for(var t,e,i=s;;){s>=r&&k(i,"Unterminated regular expression");var a=n.charAt(s);if(Ut.test(a)&&k(i,"Unterminated regular expression"),t)t=!1;else{if("["===a)e=!0;else if("]"===a&&e)e=!1;else if("/"===a&&!e)break;t="\\"===a}++s}var o=n.slice(i,s);++s;var u=ae();u&&!/^[gmsiy]*$/.test(u)&&k(i,"Invalid regexp flag");try{var l=new RegExp(o,u)}catch(C){C instanceof SyntaxError&&k(i,C.message),k(C)}return Yt(O,l)}function ne(t,e){for(var r=s,i=0,a=0,o=null==e?1/0:e;a<o;++a){var u,l=n.charCodeAt(s);if((u=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=t)break;++s,i=i*t+u}return s===r||null!=e&&s-r!==e?null:i}function re(t){var e=s,r=!1,i=48===n.charCodeAt(s);t||null!==ne(10)||k(e,"Invalid number"),46===n.charCodeAt(s)&&(++s,ne(10),r=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===ne(10)&&k(e,"Invalid number"),r=!0),Ht(n.charCodeAt(s))&&k(s,"Identifier directly after number");var o,u=n.slice(e,s);return r?o=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||w?k(e,"Invalid number"):o=parseInt(u,8):o=parseInt(u,10),Yt(E,o)}function ie(t){var e=ne(16,t);return null===e&&k(u,"Bad character escape sequence"),e}function ae(){Lt=!1;for(var t,e=!0,r=s;;){var i=n.charCodeAt(s);if(Wt(i))Lt&&(t+=n.charAt(s)),++s;else{if(92!==i)break;Lt||(t=n.slice(r,s)),Lt=!0,117!=n.charCodeAt(++s)&&k(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=ie(4),o=String.fromCharCode(a);o||k(s-1,"Invalid Unicode escape"),(e?Ht(a):Wt(a))||k(s-4,"Invalid Unicode escape"),t+=o}e=!1}return Lt?t:n.slice(r,s)}function oe(){var t=ae(),e=A;return!Lt&&Nt(t)&&(e=rt[t]),Yt(e,t)}function se(){g=u,y=l,_=h,$t()}function ue(t){if(w=t,s=u,e.locations)for(;s<m;)m=n.lastIndexOf("\n",m-2)+1,--v;Jt(),$t()}function le(){this.type=null,this.start=u,this.end=null}function ce(){this.start=c,this.end=null,null!==i&&(this.source=i)}function he(){var t=new le;return e.locations&&(t.loc=new ce),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[u,0]),t}function fe(t){var n=new le;return n.start=t.start,e.locations&&(n.loc=new ce,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function de(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=_),e.ranges&&(t.range[1]=y),t}function pe(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function ve(t){if(f===t)return se(),!0}function me(){return!e.strictSemicolons&&(f===P||f===st||Ut.test(n.slice(y,u)))}function ge(){ve(ht)||me()||_e()}function ye(t){f===t?se():_e()}function _e(){k(u,"Unexpected token")}function be(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&k(t.start,"Assigning to rvalue"),w&&"Identifier"===t.type&&Dt(t.name)&&k(t.start,"Assigning to "+t.name+" in strict mode")}var xe={kind:"loop"},we={kind:"switch"};function Se(){(f===vt||f===gt&&"/="==d)&&$t(!0);var t=f,r=he();switch(t){case L:case I:se();var i=t===L;ve(ht)||me()?r.label=null:f!==A?_e():(r.label=Be(),ge());for(var a=0;a<x.length;++a){var o=x[a];if(null==r.label||o.name===r.label.name){if(null!=o.kind&&(i||"loop"===o.kind))break;if(r.label&&i)break}}return a===x.length&&k(r.start,"Unsyntactic "+t.keyword),de(r,i?"BreakStatement":"ContinueStatement");case D:return se(),ge(),de(r,"DebuggerStatement");case B:return se(),x.push(xe),r.body=Se(),x.pop(),ye(Z),r.test=ke(),ge(),de(r,"DoWhileStatement");case V:if(se(),x.push(xe),ye(ut),f===ht)return Ee(r,null);if(f===Y){var s=he();return se(),Oe(s,!0),de(s,"VariableDeclaration"),1===s.declarations.length&&ve(nt)?Ce(r,s):Ee(r,s)}return s=Me(!1,!0),ve(nt)?(be(s),Ce(r,s)):Ee(r,s);case U:return se(),De(r,!0);case q:return se(),r.test=ke(),r.consequent=Se(),r.alternate=ve(z)?Se():null,de(r,"IfStatement");case H:return b||e.allowReturnOutsideFunction||k(u,"'return' outside of function"),se(),ve(ht)||me()?r.argument=null:(r.argument=Me(),ge()),de(r,"ReturnStatement");case W:se(),r.discriminant=ke(),r.cases=[],ye(ot),x.push(we);for(var l,c;f!=st;)if(f===R||f===N){var h=f===R;l&&de(l,"SwitchCase"),r.cases.push(l=he()),l.consequent=[],se(),h?l.test=Me():(c&&k(g,"Multiple default clauses"),c=!0,l.test=null),ye(ft)}else l||_e(),l.consequent.push(Se());return l&&de(l,"SwitchCase"),se(),x.pop(),de(r,"SwitchStatement");case G:return se(),Ut.test(n.slice(y,u))&&k(y,"Illegal newline after throw"),r.argument=Me(),ge(),de(r,"ThrowStatement");case X:if(se(),r.block=Te(),r.handler=null,f===j){var p=he();se(),ye(ut),p.param=Be(),w&&Dt(p.param.name)&&k(p.param.start,"Binding "+p.param.name+" in strict mode"),ye(lt),p.guard=null,p.body=Te(),r.handler=de(p,"CatchClause")}return r.guardedHandlers=T,r.finalizer=ve(F)?Te():null,r.handler||r.finalizer||k(r.start,"Missing catch or finally clause"),de(r,"TryStatement");case Y:return se(),Oe(r),ge(),de(r,"VariableDeclaration");case Z:return se(),r.test=ke(),x.push(xe),r.body=Se(),x.pop(),de(r,"WhileStatement");case Q:return w&&k(u,"'with' in strict mode"),se(),r.object=ke(),r.body=Se(),de(r,"WithStatement");case ot:return Te();case ht:return se(),de(r,"EmptyStatement");default:var v=d,m=Me();if(t===A&&"Identifier"===m.type&&ve(ft)){for(a=0;a<x.length;++a)x[a].name===v&&k(m.start,"Label '"+v+"' is already declared");var _=f.isLoop?"loop":f===W?"switch":null;return x.push({name:v,kind:_}),r.body=Se(),x.pop(),r.label=m,de(r,"LabeledStatement")}return r.expression=m,ge(),de(r,"ExpressionStatement")}}function ke(){ye(ut);var t=Me();return ye(lt),t}function Te(t){var e,n=he(),r=!0,i=!1;for(n.body=[],ye(ot);!ve(st);){var a=Se();n.body.push(a),r&&t&&pe(a)&&(e=i,ue(i=!0)),r=!1}return i&&!e&&ue(!1),de(n,"BlockStatement")}function Ee(t,e){return t.init=e,ye(ht),t.test=f===ht?null:Me(),ye(ht),t.update=f===lt?null:Me(),ye(lt),t.body=Se(),x.pop(),de(t,"ForStatement")}function Ce(t,e){return t.left=e,t.right=Me(),ye(lt),t.body=Se(),x.pop(),de(t,"ForInStatement")}function Oe(t,e){for(t.declarations=[],t.kind="var";;){var n=he();if(n.id=Be(),w&&Dt(n.id.name)&&k(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ve(mt)?Me(!0,e):null,t.declarations.push(de(n,"VariableDeclarator")),!ve(ct))break}return t}function Me(t,e){var n=Ae(e);if(!t&&f===ct){var r=fe(n);for(r.expressions=[n];ve(ct);)r.expressions.push(Ae(e));return de(r,"SequenceExpression")}return n}function Ae(t){var e=function(t){var e=function(t){return Pe(Le(),-1,t)}(t);if(ve(pt)){var n=fe(e);return n.test=e,n.consequent=Me(!0),ye(ft),n.alternate=Me(!0,t),de(n,"ConditionalExpression")}return e}(t);if(f.isAssign){var n=fe(e);return n.operator=d,n.left=e,se(),n.right=Ae(t),be(e),de(n,"AssignmentExpression")}return e}function Pe(t,e,n){var r=f.binop;if(null!=r&&(!n||f!==nt)&&r>e){var i=fe(t);i.left=t,i.operator=d;var a=f;return se(),i.right=Pe(Le(),r,n),Pe(de(i,a===bt||a===xt?"LogicalExpression":"BinaryExpression"),e,n)}return t}function Le(){if(f.prefix){var t=he(),e=f.isUpdate;return t.operator=d,t.prefix=!0,p=!0,se(),t.argument=Le(),e?be(t.argument):w&&"delete"===t.operator&&"Identifier"===t.argument.type&&k(t.start,"Deleting local variable in strict mode"),de(t,e?"UpdateExpression":"UnaryExpression")}for(var n=Re(je());f.postfix&&!me();)(t=fe(n)).operator=d,t.prefix=!1,t.argument=n,be(n),se(),n=de(t,"UpdateExpression");return n}function Re(t,e){var n;return ve(dt)?((n=fe(t)).object=t,n.property=Be(!0),n.computed=!1,Re(de(n,"MemberExpression"),e)):ve(it)?((n=fe(t)).object=t,n.property=Me(),n.computed=!0,ye(at),Re(de(n,"MemberExpression"),e)):!e&&ve(ut)?((n=fe(t)).callee=t,n.arguments=Ne(lt,!1),Re(de(n,"CallExpression"),e)):t}function je(){switch(f){case K:var t=he();return se(),de(t,"ThisExpression");case A:return Be();case E:case M:case O:return(t=he()).value=d,t.raw=n.slice(u,l),se(),de(t,"Literal");case $:case tt:case et:return(t=he()).value=f.atomValue,t.raw=f.keyword,se(),de(t,"Literal");case ut:var r=c,i=u;se();var a=Me();return a.start=i,a.end=l,e.locations&&(a.loc.start=r,a.loc.end=h),e.ranges&&(a.range=[i,l]),ye(lt),a;case it:return t=he(),se(),t.elements=Ne(at,!0,!0),de(t,"ArrayExpression");case ot:return function(){var t=he(),n=!0,r=!1;for(t.properties=[],se();!ve(st);){if(n)n=!1;else if(ye(ct),e.allowTrailingCommas&&ve(st))break;var i,a={key:Ie()},o=!1;if(ve(ft)?(a.value=Me(!0),i=a.kind="init"):e.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=r=!0,i=a.kind=a.key.name,a.key=Ie(),f!==ut&&_e(),a.value=De(he(),!1)):_e(),"Identifier"===a.key.type&&(w||r))for(var s=0;s<t.properties.length;++s){var u=t.properties[s];if(u.key.name===a.key.name){var l=i==u.kind||o&&"init"===u.kind||"init"===i&&("get"===u.kind||"set"===u.kind);l&&!w&&"init"===i&&"init"===u.kind&&(l=!1),l&&k(a.key.start,"Redefinition of property")}}t.properties.push(a)}return de(t,"ObjectExpression")}();case U:return t=he(),se(),De(t,!1);case J:return function(){var t=he();return se(),t.callee=Re(je(),!0),ve(ut)?t.arguments=Ne(lt,!1):t.arguments=T,de(t,"NewExpression")}();default:_e()}}function Ie(){return f===E||f===M?je():Be(!0)}function De(t,e){f===A?t.id=Be():e?_e():t.id=null,t.params=[];var n=!0;for(ye(ut);!ve(lt);)n?n=!1:ye(ct),t.params.push(Be());var r=b,i=x;if(b=!0,x=[],t.body=Te(!0),b=r,x=i,w||t.body.body.length&&pe(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((It(o.name)||Dt(o.name))&&k(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===t.params[s].name&&k(o.start,"Argument name clash in strict mode")}return de(t,e?"FunctionDeclaration":"FunctionExpression")}function Ne(t,n,r){for(var i=[],a=!0;!ve(t);){if(a)a=!1;else if(ye(ct),n&&e.allowTrailingCommas&&ve(t))break;r&&f===ct?i.push(null):i.push(Me(!0))}return i}function Be(t){var r=he();return t&&"everywhere"==e.forbidReserved&&(t=!1),f===A?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Rt:jt)(d)||w&&It(d))&&-1==n.slice(u,l).indexOf("\\")&&k(u,"The keyword '"+d+"' is reserved"),r.name=d):t&&f.keyword?r.name=f.keyword:_e(),p=!1,se(),de(r,"Identifier")}},"object"==typeof t&&"object"==typeof e?h(t):(r=[t],(a="function"===typeof(i=h)?i.apply(t,r):i)===s||(e.exports=a)),p.version||(p=null));function v(t,e){return(d.acorn||p).parse(t,e)}var m={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},g={"-":"__negate","+":"__self"},_=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function x(t,e,n){var r=m[e];if(t&&t[r]){var i=t[r](n);return"!="===e?!i:i}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function w(t,e){var n=g[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function S(t,e){if(!t)return"";var n=[];function r(t){for(var e=0,r=n.length;e<r;e++){var i=n[e];if(i[0]>=t)break;t+=i[1]}return t}function i(e){return t.substring(r(e.range[0]),r(e.range[1]))}function a(e,i){for(var a=r(e.range[0]),o=r(e.range[1]),s=0,u=n.length-1;u>=0;u--)if(a>n[u][0]){s=u+1;break}n.splice(s,0,[a,i.length-o+a]),t=t.substring(0,a)+i+t.substring(o)}function s(e,n){switch(e.type){case"UnaryExpression":if(e.operator in g&&"Literal"!==e.argument.type){var o=i(e.argument);a(e,'$__("'+e.operator+'", '+o+")")}break;case"BinaryExpression":if(e.operator in m&&"Literal"!==e.left.type){var s=i(e.left),u=i(e.right),l=function(e,n){return t.substring(r(e.range[1]),r(n.range[0]))}(e.left,e.right),c=e.operator;a(e,"__$__("+s+","+l.replace(new RegExp("\\"+c),'"'+c+'"')+", "+u+")")}break;case"UpdateExpression":case"AssignmentExpression":var h=n&&n.type;if(!("ForStatement"===h||"BinaryExpression"===h&&/^[=!<>]/.test(n.operator)||"MemberExpression"===h&&n.computed))if("UpdateExpression"===e.type){var f=(o=i(e.argument))+" = "+(d="__$__("+o+', "'+e.operator[0]+'", 1)');e.prefix?f="("+f+")":"AssignmentExpression"!==h&&"VariableDeclarator"!==h&&"BinaryExpression"!==h||(i(n.left||n.id)===o&&(f=d),f=o+"; "+f),a(e,f)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){s=i(e.left),u=i(e.right);var d=s+" = __$__("+s+', "'+e.operator[0]+'", '+u+")";a(e,/^\(.*\)$/.test(i(e))?"("+d+")":d)}}}var c,h=(e=e||{}).url||"",f=e.sourceMaps,d=e.paperFeatures||{},p=e.source||t,y=e.offset||0,_=ft.agent,b=_.versionNumber,x=!1,w=/\r\n|\n|\r/gm;if(f&&(_.chrome&&b>=30||_.webkit&&b>=537.76||_.firefox&&b>=23||_.node)){if(_.node)y-=2;else if(u&&h&&!u.location.href.indexOf(h)){var S=l.getElementsByTagName("html")[0].innerHTML;y=S.substr(0,S.indexOf(t)+1).match(w).length+1}var k=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((x=y>0&&!(_.chrome&&b>=36||_.safari&&b>=600||_.firefox&&b>=40||_.node))?0:y)+"A"];k.length=(t.match(w)||[]).length+1+(x?y:0),c={version:3,file:h,names:[],mappings:k.join(";AACA"),sourceRoot:"",sources:[h],sourcesContent:[p]}}return!1===d.operatorOverloading&&!1===d.moduleExports||function t(e,n,r){if(e){for(var o in e)if("range"!==o&&"loc"!==o){var u=e[o];if(Array.isArray(u))for(var l=0,c=u.length;l<c;l++)t(u[l],e,r);else u&&"object"===typeof u&&t(u,e,r)}!1!==r.operatorOverloading&&s(e,n),!1!==r.moduleExports&&function(t){switch(t.type){case"ExportDefaultDeclaration":a({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var e=t.declaration,n=t.specifiers;if(e){var r=e.declarations;r&&(r.forEach((function(t){a(t,"module.exports."+i(t))})),a({range:[t.start,e.start+e.kind.length]},""))}else if(n){var o=n.map((function(t){var e=i(t);return"module.exports."+e+" = "+e+"; "})).join("");o&&a(t,o)}}}(e)}}(v(t,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,d),c&&(x&&(t=new Array(y+1).join("\n")+t),/^(inline|both)$/.test(f)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(c))))),t+="\n//# sourceURL="+(h||"paperscript")),{url:h,source:p,code:t,map:c}}function k(t,e,n){ft=e;var r,i=e.getView(),a=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new at:null,o=a?a._events:[],s=["onFrame","onResize"].concat(o),u=[],h=[],f="object"===typeof t?t:S(t,n);function d(e,n){for(var r in e)!n&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(t)||(u.push(r),h.push(e[r]))}t=f.code,d({__$__:x,$__:w,paper:e,tool:a},!0),d(e),t="var module = { exports: {} }; "+t,(g=c.each(s,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(u.push(e),this.push("module.exports."+e+" = "+e+";"))}),[]).join("\n"))&&(t+="\n"+g),t+="\nreturn module.exports;";var p=ft.agent;if(l&&(p.chrome||p.firefox&&p.versionNumber<40)){var v=l.createElement("script"),m=l.head||l.getElementsByTagName("head")[0];p.firefox&&(t="\n"+t),v.appendChild(l.createTextNode("document.__paperscript__ = function("+u+") {"+t+"\n}")),m.appendChild(v),r=l.__paperscript__,delete l.__paperscript__,m.removeChild(v)}else r=Function(u,t);var g,_=(g=r&&r.apply(e,h))||{};return c.each(o,(function(t){var e=_[t];e&&(a[t]=e)})),i&&(_.onResize&&i.setOnResize(_.onResize),i.emit("resize",{size:i.size,delta:new y}),_.onFrame&&i.setOnFrame(_.onFrame),i.requestUpdate()),g}function T(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),n=l.getElementById(e),r=t.src||t.getAttribute("data-src"),i=f.hasAttribute(t,"async"),a="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var o=f.get(n.getAttribute(a))||(new f).setup(n);return n.setAttribute(a,o._id),r?st({url:r,async:i,mimeType:"text/plain",onLoad:function(t){k(t,o,r)}}):k(t.innerHTML,o,t.baseURI),t.setAttribute("data-paper-ignore","true"),o}}function E(){c.each(l&&l.getElementsByTagName("script"),T)}return y.inject(_),b.inject(_),G.inject(_),u&&("complete"===l.readyState?setTimeout(E):J.add(u,{load:E})),{compile:S,execute:k,load:function(t){return t?T(t):E()},parse:v,calculateBinary:x,calculateUnary:w}}.call(this);var ft=new(f.inject(c.exports,{Base:c,Numerical:m,Key:nt,DomEvent:J,DomElement:Q,document:l,window:u,Symbol:R,PlacedSymbol:L}));return ft.agent.node&&n(103)(ft),(a="function"===typeof(i=ft)?i.call(e,n,e,t):i)===s||(t.exports=a),ft}).call(this,"object"===typeof self?self:null)},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";t.exports=n(133)},function(t,e,n){t.exports=n(140)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(16);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return b}));var r=n(22),i=n(25),a=n(10),o=n.n(a),s=n(27),u=(n(21),n(23)),l=n(33),c=n(26),h=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Object(s.a)(e.props),e}return Object(i.a)(e,t),e.prototype.render=function(){return o.a.createElement(r.b,{history:this.history,children:this.props.children})},e}(o.a.Component);o.a.Component;var f=function(t,e){return"function"===typeof t?t(e):t},d=function(t,e){return"string"===typeof t?Object(s.c)(t,null,null,e):t},p=function(t){return t},v=o.a.forwardRef;"undefined"===typeof v&&(v=p);var m=v((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,a=Object(l.a)(t,["innerRef","navigate","onClick"]),s=a.target,c=Object(u.a)({},a,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return c.ref=p!==v&&e||n,o.a.createElement("a",c)}));var g=v((function(t,e){var n=t.component,i=void 0===n?m:n,a=t.replace,s=t.to,h=t.innerRef,g=Object(l.a)(t,["component","replace","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(t){t||Object(c.a)(!1);var n=t.history,r=d(f(s,t.location),t.location),l=r?n.createHref(r):"",m=Object(u.a)({},g,{href:l,navigate:function(){var e=f(s,t.location);(a?n.replace:n.push)(e)}});return p!==v?m.ref=e||h:m.innerRef=h,o.a.createElement(i,m)}))})),y=function(t){return t},_=o.a.forwardRef;"undefined"===typeof _&&(_=y);var b=_((function(t,e){var n=t["aria-current"],i=void 0===n?"page":n,a=t.activeClassName,s=void 0===a?"active":a,h=t.activeStyle,p=t.className,v=t.exact,m=t.isActive,b=t.location,x=t.sensitive,w=t.strict,S=t.style,k=t.to,T=t.innerRef,E=Object(l.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(t){t||Object(c.a)(!1);var n=b||t.location,a=d(f(k,n),n),l=a.pathname,C=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=C?Object(r.e)(n.pathname,{path:C,exact:v,sensitive:x,strict:w}):null,M=!!(m?m(O,n):O),A=M?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(p,s):p,P=M?Object(u.a)({},S,{},h):S,L=Object(u.a)({"aria-current":M&&i||null,className:A,style:P,to:a},E);return y!==_?L.ref=e||T:L.innerRef=T,o.a.createElement(g,L)}))}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(45);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"b",(function(){return vr})),n.d(e,"a",(function(){return vr}));var a,o,s,u,l,c,h,f,d,p={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},v={duration:.5,overwrite:!1,delay:0},m=1e8,g=1e-8,y=2*Math.PI,_=y/4,b=0,x=Math.sqrt,w=Math.cos,S=Math.sin,k=function(t){return"string"===typeof t},T=function(t){return"function"===typeof t},E=function(t){return"number"===typeof t},C=function(t){return"undefined"===typeof t},O=function(t){return"object"===typeof t},M=function(t){return!1!==t},A=function(){return"undefined"!==typeof window},P=function(t){return T(t)||k(t)},L="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},R=Array.isArray,j=/(?:-?\.?\d|\.)+/gi,I=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,D=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,N=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,B=/[+-]=-?[.\d]+/,z=/[#\-+.]*\b[a-z\d-=+%.]+/gi,F=/[\d.+\-=]+(?:e[-+]\d*)*/i,V={},U={},q=function(t){return(U=vt(t,V))&&tn},H=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},W=function(t,e){return!e&&console.warn(t)},G=function(t,e){return t&&(V[t]=e)&&U&&(U[t]=e)||V},X=function(){return 0},Y={},Z=[],Q={},J={},K={},$=30,tt=[],et="",nt=function(t){var e,n,r=t[0];if(O(r)||T(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=tt.length;n--&&!tt[n].targetTest(r););e=tt[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Te(t[n],e)))||t.splice(n,1);return t},rt=function(t){return t._gsap||nt(Ht(t))[0]._gsap},it=function(t,e,n){return(n=t[e])&&T(n)?t[e]():C(n)&&t.getAttribute&&t.getAttribute(e)||n},at=function(t,e){return(t=t.split(",")).forEach(e)||t},ot=function(t){return Math.round(1e5*t)/1e5||0},st=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},ut=function(t,e,n){var r,i=E(t[1]),a=(i?2:1)+(e<2?0:1),o=t[a];if(i&&(o.duration=t[1]),o.parent=n,e){for(r=o;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=M(n.vars.inherit)&&n.parent;o.immediateRender=M(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o},lt=function(){var t,e,n=Z.length,r=Z.slice(0);for(Q={},Z.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},ct=function(t,e,n,r){Z.length&&lt(),t.render(e,n,r),Z.length&&lt()},ht=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(z).length<2?e:k(t)?t.trim():t},ft=function(t){return t},dt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},pt=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},vt=function(t,e){for(var n in e)t[n]=e[n];return t},mt=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=O(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},gt=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},yt=function(t){var e=t.parent||o,n=t.keyframes?pt:dt;if(M(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},_t=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,a=e._next;i?i._next=a:t[n]===e&&(t[n]=a),a?a._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},bt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},xt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},wt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},St=function t(e){return!e||e._ts&&t(e.parent)},kt=function(t){return t._repeat?Tt(t._tTime,t=t.duration()+t._rDelay)*t:0},Tt=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Et=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ct=function(t){return t._end=ot(t._start+(t._tDur/Math.abs(t._ts||t._rts||g)||0))},Ot=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=ot(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ct(t),n._dirty||xt(n,t)),t},Mt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Et(t.rawTime(),e),(!e._dur||zt(0,e.totalDuration(),n)-e._tTime>g)&&e.render(n,!0)),xt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},At=function(t,e,n,r){return e.parent&&bt(e),e._start=ot(n+e._delay),e._end=ot(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,o=t[r];if(i)for(a=e[i];o&&o[i]>a;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||Mt(t,e),t},Pt=function(t,e){return(V.ScrollTrigger||H("scrollTrigger",e))&&V.ScrollTrigger.create(e,t)},Lt=function(t,e,n,r){return Le(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&h!==fe.frame?(Z.push(t),t._lazy=[e,r],1):void 0:1},Rt=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},jt=function(t,e,n,r){var i=t._repeat,a=ot(e)||0,o=t._tTime/t._tDur;return o&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=i?i<0?1e10:ot(a*(i+1)+t._rDelay*i):a,o&&!r?Ot(t,t._tTime=t._tDur*o):t.parent&&Ct(t),n||xt(t.parent,t),t},It=function(t){return t instanceof Ce?xt(t):jt(t,t._dur)},Dt={_start:0,endTime:X},Nt=function t(e,n){var r,i,a=e.labels,o=e._recent||Dt,s=e.duration()>=m?o.endTime(!1):e._dur;return k(n)&&(isNaN(n)||n in a)?"<"===(r=n.charAt(0))||">"===r?("<"===r?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in a||(a[n]=s),a[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?t(e,n.substr(0,r-1))+i:s+i):null==n?s:+n},Bt=function(t,e){return t||0===t?e(t):e},zt=function(t,e,n){return n<t?t:n>e?e:n},Ft=function(t){if("string"!==typeof t)return"";var e=F.exec(t);return e?t.substr(e.index+e[0].length):""},Vt=[].slice,Ut=function(t,e){return t&&O(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&O(t[0]))&&!t.nodeType&&t!==s},qt=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return k(t)&&!e||Ut(t,1)?(r=n).push.apply(r,Ht(t)):n.push(t)}))||n},Ht=function(t,e){return!k(t)||e||!u&&de()?R(t)?qt(t,e):Ut(t)?Vt.call(t,0):t?[t]:[]:Vt.call(l.querySelectorAll(t),0)},Wt=function(t){return t.sort((function(){return.5-Math.random()}))},Gt=function(t){if(T(t))return t;var e=O(t)?t:{each:t},n=be(e.ease),r=e.from||0,i=parseFloat(e.base)||0,a={},o=r>0&&r<1,s=isNaN(r)||o,u=e.axis,l=r,c=r;return k(r)?l=c={center:.5,edges:.5,end:1}[r]||0:!o&&s&&(l=r[0],c=r[1]),function(t,o,h){var f,d,p,v,g,y,_,b,w,S=(h||e).length,k=a[S];if(!k){if(!(w="auto"===e.grid?0:(e.grid||[1,m])[1])){for(_=-m;_<(_=h[w++].getBoundingClientRect().left)&&w<S;);w--}for(k=a[S]=[],f=s?Math.min(w,S)*l-.5:r%w,d=s?S*c/w-.5:r/w|0,_=0,b=m,y=0;y<S;y++)p=y%w-f,v=d-(y/w|0),k[y]=g=u?Math.abs("y"===u?v:p):x(p*p+v*v),g>_&&(_=g),g<b&&(b=g);"random"===r&&Wt(k),k.max=_-b,k.min=b,k.v=S=(parseFloat(e.amount)||parseFloat(e.each)*(w>S?S-1:u?"y"===u?S/w:w:Math.max(w,S/w))||0)*("edges"===r?-1:1),k.b=S<0?i-S:i,k.u=Ft(e.amount||e.each)||0,n=n&&S<0?ye(n):n}return S=(k[t]-k.min)/k.max||0,ot(k.b+(n?n(S):S)*k.v)+k.u}},Xt=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/t)*t*e;return(r-r%1)/e+(E(n)?0:Ft(n))}},Yt=function(t,e){var n,r,i=R(t);return!i&&O(t)&&(n=i=t.radius||m,t.values?(t=Ht(t.values),(r=!E(t[0]))&&(n*=n)):t=Xt(t.increment)),Bt(e,i?T(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,a,o=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=m,l=0,c=t.length;c--;)(i=r?(i=t[c].x-o)*i+(a=t[c].y-s)*a:Math.abs(t[c]-o))<u&&(u=i,l=c);return l=!n||u<=n?t[l]:e,r||l===e||E(e)?l:l+Ft(e)}:Xt(t))},Zt=function(t,e,n,r){return Bt(R(t)?!e:!0===n?!!(n=0):!r,(function(){return R(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},Qt=function(t,e,n){return Bt(n,(function(n){return t[~~e(n)]}))},Jt=function(t){for(var e,n,r,i,a=0,o="";~(e=t.indexOf("random(",a));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?z:j),o+=t.substr(a,e-a)+Zt(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),a=r+1;return o+t.substr(a,t.length-a)},Kt=function(t,e,n,r,i){var a=e-t,o=r-n;return Bt(i,(function(e){return n+((e-t)/a*o||0)}))},$t=function(t,e,n){var r,i,a,o=t.labels,s=m;for(r in o)(i=o[r]-e)<0===!!n&&i&&s>(i=Math.abs(i))&&(a=r,s=i);return a},te=function(t,e,n){var r,i,a=t.vars,o=a[e];if(o)return r=a[e+"Params"],i=a.callbackScope||t,n&&Z.length&&lt(),r?o.apply(i,r):o.call(i)},ee=function(t){return bt(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&te(t,"onInterrupt"),t},ne=function(t){var e=(t=!t.name&&t.default||t).name,n=T(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:X,render:We,add:Ae,kill:Xe,modifier:Ge,rawVars:0},a={targetTest:0,get:0,getSetter:Ve,aliases:{},register:0};if(de(),t!==r){if(J[e])return;dt(r,dt(gt(t,i),a)),vt(r.prototype,vt(i,gt(t,a))),J[r.prop=e]=r,t.targetTest&&(tt.push(r),Y[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}G(e,r),t.register&&t.register(tn,r,Qe)},re=255,ie={aqua:[0,re,re],lime:[0,re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,re],navy:[0,0,128],white:[re,re,re],olive:[128,128,0],yellow:[re,re,0],orange:[re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[re,0,0],pink:[re,192,203],cyan:[0,re,re],transparent:[re,re,re,0]},ae=function(t,e,n){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*re+.5|0},oe=function(t,e,n){var r,i,a,o,s,u,l,c,h,f,d=t?E(t)?[t>>16,t>>8&re,t&re]:0:ie.black;if(!d){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ie[t])d=ie[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),a=t.charAt(3),t="#"+r+r+i+i+a+a+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(d=parseInt(t.substr(1,6),16))>>16,d>>8&re,d&re,parseInt(t.substr(7),16)/255];d=[(t=parseInt(t.substr(1),16))>>16,t>>8&re,t&re]}else if("hsl"===t.substr(0,3))if(d=f=t.match(j),e){if(~t.indexOf("="))return d=t.match(I),n&&d.length<4&&(d[3]=1),d}else o=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=ae(o+1/3,r,i),d[1]=ae(o,r,i),d[2]=ae(o-1/3,r,i);else d=t.match(j)||ie.transparent;d=d.map(Number)}return e&&!f&&(r=d[0]/re,i=d[1]/re,a=d[2]/re,u=((l=Math.max(r,i,a))+(c=Math.min(r,i,a)))/2,l===c?o=s=0:(h=l-c,s=u>.5?h/(2-l-c):h/(l+c),o=l===r?(i-a)/h+(i<a?6:0):l===i?(a-r)/h+2:(r-i)/h+4,o*=60),d[0]=~~(o+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},se=function(t){var e=[],n=[],r=-1;return t.split(le).forEach((function(t){var i=t.match(D)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},ue=function(t,e,n){var r,i,a,o,s="",u=(t+s).match(le),l=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map((function(t){return(t=oe(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(a=se(t),(r=n.c).join(s)!==a.c.join(s)))for(o=(i=t.replace(le,"1").split(D)).length-1;c<o;c++)s+=i[c]+(~r.indexOf(c)?u.shift()||l+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!i)for(o=(i=t.split(le)).length-1;c<o;c++)s+=i[c]+u[c];return s+i[o]},le=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ie)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ce=/hsl[a]?\(/,he=function(t){var e,n=t.join(" ");if(le.lastIndex=0,le.test(n))return e=ce.test(n),t[1]=ue(t[1],e),t[0]=ue(t[0],e,se(t[1])),!0},fe=function(){var t,e,n,r,i,a,o=Date.now,h=500,f=33,p=o(),v=p,m=1e3/240,g=m,y=[],_=function n(s){var u,l,c,d,_=o()-v,b=!0===s;if(_>h&&(p+=_-f),((u=(c=(v+=_)-p)-g)>0||b)&&(d=++r.frame,i=c-1e3*r.time,r.time=c/=1e3,g+=u+(u>=m?4:m-u),l=1),b||(t=e(n)),l)for(a=0;a<y.length;a++)y[a](c,i,d,s)};return r={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){c&&(!u&&A()&&(s=u=window,l=s.document||{},V.gsap=tn,(s.gsapVersions||(s.gsapVersions=[])).push(tn.version),q(U||s.GreenSockGlobals||!s.gsap&&s||{}),n=s.requestAnimationFrame),t&&r.sleep(),e=n||function(t){return setTimeout(t,g-1e3*r.time+1|0)},d=1,_(2))},sleep:function(){(n?s.cancelAnimationFrame:clearTimeout)(t),d=0,e=X},lagSmoothing:function(t,e){h=t||1e8,f=Math.min(e,h,0)},fps:function(t){m=1e3/(t||240),g=1e3*r.time+m},add:function(t){y.indexOf(t)<0&&y.push(t),de()},remove:function(t){var e;~(e=y.indexOf(t))&&y.splice(e,1)&&a>=e&&a--},_listeners:y}}(),de=function(){return!d&&fe.wake()},pe={},ve=/^[\d.\-M][\d.\-,\s]/,me=/["']/g,ge=function(t){for(var e,n,r,i={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)n=a[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[o]=isNaN(r)?r.replace(me,"").trim():+r,o=n.substr(e+1).trim();return i},ye=function(t){return function(e){return 1-t(1-e)}},_e=function t(e,n){for(var r,i=e._first;i;)i instanceof Ce?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},be=function(t,e){return t&&(T(t)?t:pe[t]||function(t){var e=(t+"").split("("),n=pe[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[ge(e[1])]:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)}(t).split(",").map(ht)):pe._CE&&ve.test(t)?pe._CE("",t):n}(t))||e},xe=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,a={easeIn:e,easeOut:n,easeInOut:r};return at(t,(function(t){for(var e in pe[t]=V[t]=a,pe[i=t.toLowerCase()]=n,a)pe[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=pe[t+"."+e]=a[e]})),a},we=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Se=function t(e,n,r){var i=n>=1?n:1,a=(r||(e?.3:.45))/(n<1?n:1),o=a/y*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*S((t-o)*a)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:we(s);return a=y/a,u.config=function(n,r){return t(e,n,r)},u},ke=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:we(r);return i.config=function(n){return t(e,n)},i};at("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;xe(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),pe.Linear.easeNone=pe.none=pe.Linear.easeIn,xe("Elastic",Se("in"),Se("out"),Se()),function(t,e){var n=1/e,r=function(r){return r<n?t*r*r:r<.7272727272727273?t*Math.pow(r-1.5/e,2)+.75:r<.9090909090909092?t*(r-=2.25/e)*r+.9375:t*Math.pow(r-2.625/e,2)+.984375};xe("Bounce",(function(t){return 1-r(1-t)}),r)}(7.5625,2.75),xe("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),xe("Circ",(function(t){return-(x(1-t*t)-1)})),xe("Sine",(function(t){return 1===t?1:1-w(t*_)})),xe("Back",ke("in"),ke("out"),ke()),pe.SteppedEase=pe.steps=V.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*zt(0,.99999999,t)|0)+i)*n}}},v.ease=pe["quad.out"],at("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return et+=t+","+t+"Params,"}));var Te=function(t,e){this.id=b++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:it,this.set=e?e.getSetter:Ve},Ee=function(){function t(t,e){var n=t.parent||o;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,jt(this,+t.duration,1,1),this.data=t.data,d||fe.wake(),n&&At(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,jt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(de(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ot(this,t),!n._dp||n.parent||Mt(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&At(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===g||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),ct(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+kt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+kt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Tt(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Et(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,wt(this.totalTime(zt(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(de(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=g)&&Math.abs(this._zTime)!==g))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&At(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(M(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Et(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,It(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,It(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Nt(this,t),M(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,M(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-g))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=T(t)?t:ft,i=function(){var t=e.then;e.then=null,T(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){ee(this)},t}();dt(Ee.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ce=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e,n)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=M(e.sortChildren),i.parent&&Mt(i.parent,r(i)),e.scrollTrigger&&Pt(r(i),e.scrollTrigger),i}i(e,t);var n=e.prototype;return n.to=function(t,e,n){return new De(t,ut(arguments,0,this),Nt(this,E(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new De(t,ut(arguments,1,this),Nt(this,E(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,r){return new De(t,ut(arguments,2,this),Nt(this,E(e)?arguments[4]:r)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,yt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new De(t,e,Nt(this,n),1),this},n.call=function(t,e,n){return At(this,De.delayedCall(0,t,e),Nt(this,n))},n.staggerTo=function(t,e,n,r,i,a,o){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new De(t,n,Nt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,a,o){return n.runBackwards=1,yt(n).immediateRender=M(n.immediateRender),this.staggerTo(t,e,n,r,i,a,o)},n.staggerFromTo=function(t,e,n,r,i,a,o,s){return r.startAt=n,yt(r).immediateRender=M(r.immediateRender),this.staggerTo(t,e,r,i,a,o,s)},n.render=function(t,e,n){var r,i,a,s,u,l,c,h,f,d,p,v,m=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,b=this!==o&&t>y-g&&t>=0?y:t<g?0:t,x=this._zTime<0!==t<0&&(this._initted||!_);if(b!==this._tTime||n||x){if(m!==this._time&&_&&(b+=this._time-m,t+=this._time-m),r=b,f=this._start,l=!(h=this._ts),x&&(_||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,u=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*u+t,e,n);if(r=ot(b%u),b===y?(s=this._repeat,r=_):((s=~~(b/u))&&s===b/u&&(r=_,s--),r>_&&(r=_)),d=Tt(this._tTime,u),!m&&this._tTime&&d!==s&&(d=s),p&&1&s&&(r=_-r,v=1),s!==d&&!this._lock){var w=p&&1&d,S=w===(p&&1&s);if(s<d&&(w=!w),m=w?0:_,this._lock=1,this.render(m||(v?0:ot(s*u)),e,!_)._lock=0,!e&&this.parent&&te(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,y=this._tDur,S&&(this._lock=2,m=w?_:-1e-4,this.render(m,!0)),this._lock=0,!this._ts&&!l)return this;_e(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,ot(m),ot(r)))&&(b-=r-(r=c._start)),this._tTime=b,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&r&&!e&&te(this,"onStart"),r>=m&&t>=0)for(i=this._first;i;){if(a=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!l){c=0,a&&(b+=this._zTime=-1e-8);break}}i=a}else{i=this._last;for(var k=t<0?t:r;i;){if(a=i._prev,(i._act||k<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(k-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(k-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!l){c=0,a&&(b+=this._zTime=k?-1e-8:g);break}}i=a}}if(c&&!e&&(this.pause(),c.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=f,Ct(this),this.render(t,e,n);this._onUpdate&&!e&&te(this,"onUpdate",!0),(b===y&&y>=this.totalDuration()||!b&&m)&&(f!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(b===y&&this._ts>0||!b&&this._ts<0)&&bt(this,1),e||t<0&&!m||!b&&!m||(te(this,b===y?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(E(e)||(e=Nt(this,e)),!(t instanceof Ee)){if(R(t))return t.forEach((function(t){return n.add(t,e)})),this;if(k(t))return this.addLabel(t,e);if(!T(t))return this;t=De.delayedCall(0,t)}return this!==t?At(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-m);for(var i=[],a=this._first;a;)a._start>=r&&(a instanceof De?e&&i.push(a):(n&&i.push(a),t&&i.push.apply(i,a.getChildren(!0,e,n)))),a=a._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return k(t)?this.removeLabel(t):T(t)?this.killTweensOf(t):(_t(this,t),t===this._recent&&(this._recent=this._last),xt(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ot(fe.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Nt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=De.delayedCall(0,e||X,n);return r.data="isPause",this._hasPause=1,At(this,r,Nt(this,t))},n.removePause=function(t){var e=this._first;for(t=Nt(this,t);e;)e._start===t&&"isPause"===e.data&&bt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Oe!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=Ht(t),a=this._first,o=E(e);a;)a instanceof De?st(a._targets,i)&&(o?(!Oe||a._initted&&a._ts)&&a.globalTime(0)<=e&&a.globalTime(a.totalDuration())>e:!e||a.isActive())&&r.push(a):(n=a.getTweensOf(i,e)).length&&r.push.apply(r,n),a=a._next;return r},n.tweenTo=function(t,e){e=e||{};var n=this,r=Nt(n,t),i=e,a=i.startAt,o=i.onStart,s=i.onStartParams,u=i.immediateRender,l=De.to(n,dt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale())||g,onStart:function(){n.pause();var t=e.duration||Math.abs((r-n._time)/n.timeScale());l._dur!==t&&jt(l,t,0,1).render(l._time,!0,!0),o&&o.apply(l,s||[])}},e));return u?l.render(0):l},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,dt({startAt:{time:Nt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),$t(this,Nt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),$t(this,Nt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+g)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,a=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in a)a[r]>=n&&(a[r]+=t);return xt(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),xt(this)},n.totalDuration=function(t){var e,n,r,i=0,a=this,s=a._last,u=m;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(r=a.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>u&&a._sort&&s._ts&&!a._lock?(a._lock=1,At(a,s,n-s._delay,1)._lock=0):u=n,n<0&&s._ts&&(i-=n,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-Infinity),u=0),s._end>i&&s._ts&&(i=s._end),s=e;jt(a,a===o&&a._time>i?a._time:i,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(t){if(o._ts&&(ct(o,Et(t,o)),h=fe.frame),fe.frame>=$){$+=p.autoSleep||120;var e=o._first;if((!e||!e._ts)&&p.autoSleep&&fe._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||fe.sleep()}}},e}(Ee);dt(Ce.prototype,{_lock:0,_hasPause:0,_forcing:0});var Oe,Me=function(t,e,n,r,i,a,o){var s,u,l,c,h,f,d,p,v=new Qe(this._pt,t,e,0,1,He,null,i),m=0,g=0;for(v.b=n,v.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=Jt(r)),a&&(a(p=[n,r],t,e),n=p[0],r=p[1]),u=n.match(N)||[];s=N.exec(r);)c=s[0],h=r.substring(m,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[g++]&&(f=parseFloat(u[g-1])||0,v._pt={_next:v._pt,p:h||1===g?h:",",s:f,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-f,m:l&&l<4?Math.round:0},m=N.lastIndex);return v.c=m<r.length?r.substring(m,r.length):"",v.fp=o,(B.test(r)||d)&&(v.e=0),this._pt=v,v},Ae=function(t,e,n,r,i,a,o,s,u){T(r)&&(r=r(i||0,t,a));var l,c=t[e],h="get"!==n?n:T(c)?u?t[e.indexOf("set")||!T(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():c,f=T(c)?u?ze:Be:Ne;if(k(r)&&(~r.indexOf("random(")&&(r=Jt(r)),"="===r.charAt(1)&&(r=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(Ft(h)||0))),h!==r)return isNaN(h*r)?(!c&&!(e in t)&&H(e,r),Me.call(this,t,e,h,r,f,s||p.stringFilter,u)):(l=new Qe(this._pt,t,e,+h||0,r-(h||0),"boolean"===typeof c?qe:Ue,0,f),u&&(l.fp=u),o&&l.modifier(o,this,t),this._pt=l)},Pe=function(t,e,n,r,i,a){var o,s,u,l;if(J[t]&&!1!==(o=new J[t]).init(i,o.rawVars?e[t]:function(t,e,n,r,i){if(T(t)&&(t=Re(t,i,e,n,r)),!O(t)||t.style&&t.nodeType||R(t)||L(t))return k(t)?Re(t,i,e,n,r):t;var a,o={};for(a in t)o[a]=Re(t[a],i,e,n,r);return o}(e[t],r,i,a,n),n,r,a)&&(n._pt=s=new Qe(n._pt,i,t,0,1,o.render,o,0,o.priority),n!==f))for(u=n._ptLookup[n._targets.indexOf(i)],l=o._props.length;l--;)u[o._props[l]]=s;return o},Le=function t(e,n){var r,i,s,u,l,c,h,f,d,p,m,y,_,b=e.vars,x=b.ease,w=b.startAt,S=b.immediateRender,k=b.lazy,T=b.onUpdate,E=b.onUpdateParams,C=b.callbackScope,O=b.runBackwards,A=b.yoyoEase,P=b.keyframes,L=b.autoRevert,R=e._dur,j=e._startAt,I=e._targets,D=e.parent,N=D&&"nested"===D.data?D.parent._targets:I,B="auto"===e._overwrite&&!a,z=e.timeline;if(z&&(!P||!x)&&(x="none"),e._ease=be(x,v.ease),e._yEase=A?ye(be(!0===A?x:A,v.ease)):0,A&&e._yoyo&&!e._repeat&&(A=e._yEase,e._yEase=e._ease,e._ease=A),!z){if(y=(f=I[0]?rt(I[0]).harness:0)&&b[f.prop],r=gt(b,Y),j&&j.render(-1,!0).kill(),w)if(bt(e._startAt=De.set(I,dt({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:M(k),startAt:null,delay:0,onUpdate:T,onUpdateParams:E,callbackScope:C,stagger:0},w))),S){if(n>0)L||(e._startAt=0);else if(R&&!(n<0&&j))return void(n&&(e._zTime=n))}else!1===L&&(e._startAt=0);else if(O&&R)if(j)!L&&(e._startAt=0);else if(n&&(S=!1),s=dt({overwrite:!1,data:"isFromStart",lazy:S&&M(k),immediateRender:S,stagger:0,parent:D},r),y&&(s[f.prop]=y),bt(e._startAt=De.set(I,s)),S){if(!n)return}else t(e._startAt,g);for(e._pt=0,k=R&&M(k)||k&&!R,i=0;i<I.length;i++){if(h=(l=I[i])._gsap||nt(I)[i]._gsap,e._ptLookup[i]=p={},Q[h.id]&&Z.length&&lt(),m=N===I?i:N.indexOf(l),f&&!1!==(d=new f).init(l,y||r,e,m,N)&&(e._pt=u=new Qe(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){p[t]=u})),d.priority&&(c=1)),!f||y)for(s in r)J[s]&&(d=Pe(s,r,e,m,l,N))?d.priority&&(c=1):p[s]=u=Ae.call(e,l,s,"get",r[s],m,N,0,b.stringFilter);e._op&&e._op[i]&&e.kill(l,e._op[i]),B&&e._pt&&(Oe=e,o.killTweensOf(l,p,e.globalTime(0)),_=!e.parent,Oe=0),e._pt&&k&&(Q[h.id]=1)}c&&Ze(e),e._onInit&&e._onInit(e)}e._from=!z&&!!b.runBackwards,e._onUpdate=T,e._initted=(!e._op||e._pt)&&!_},Re=function(t,e,n,r,i){return T(t)?t.call(e,n,r,i):k(t)&&~t.indexOf("random(")?Jt(t):t},je=et+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ie=(je+",id,stagger,delay,duration,paused,scrollTrigger").split(","),De=function(t){function e(e,n,i,s){var u;"number"===typeof n&&(i.duration=n,n=i,i=null);var l,c,h,f,d,v,m,g,y=(u=t.call(this,s?n:yt(n),i)||this).vars,_=y.duration,b=y.delay,x=y.immediateRender,w=y.stagger,S=y.overwrite,k=y.keyframes,T=y.defaults,C=y.scrollTrigger,A=y.yoyoEase,j=u.parent,I=(R(e)||L(e)?E(e[0]):"length"in n)?[e]:Ht(e);if(u._targets=I.length?nt(I):W("GSAP target "+e+" not found. https://greensock.com",!p.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=S,k||w||P(_)||P(b)){if(n=u.vars,(l=u.timeline=new Ce({data:"nested",defaults:T||{}})).kill(),l.parent=l._dp=r(u),l._start=0,k)dt(l.vars.defaults,{ease:"none"}),k.forEach((function(t){return l.to(I,t,">")}));else{if(f=I.length,m=w?Gt(w):X,O(w))for(d in w)~je.indexOf(d)&&(g||(g={}),g[d]=w[d]);for(c=0;c<f;c++){for(d in h={},n)Ie.indexOf(d)<0&&(h[d]=n[d]);h.stagger=0,A&&(h.yoyoEase=A),g&&vt(h,g),v=I[c],h.duration=+Re(_,r(u),c,v,I),h.delay=(+Re(b,r(u),c,v,I)||0)-u._delay,!w&&1===f&&h.delay&&(u._delay=b=h.delay,u._start+=b,h.delay=0),l.to(v,h,m(c,v,I))}l.duration()?_=b=0:u.timeline=0}_||u.duration(_=l.duration())}else u.timeline=0;return!0!==S||a||(Oe=r(u),o.killTweensOf(I),Oe=0),j&&Mt(j,r(u)),(x||!_&&!k&&u._start===ot(j._time)&&M(x)&&St(r(u))&&"nested"!==j.data)&&(u._tTime=-1e-8,u.render(Math.max(0,-b))),C&&Pt(r(u),C),u}i(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,a,o,s,u,l,c,h,f=this._time,d=this._tDur,p=this._dur,v=t>d-g&&t>=0?d:t<g?0:t;if(p){if(v!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==t<0){if(r=v,c=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,n);if(r=ot(v%o),v===d?(a=this._repeat,r=p):((a=~~(v/o))&&a===v/o&&(r=p,a--),r>p&&(r=p)),(u=this._yoyo&&1&a)&&(h=this._yEase,r=p-r),s=Tt(this._tTime,o),r===f&&!n&&this._initted)return this;a!==s&&(c&&this._yEase&&_e(c,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(ot(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(Lt(this,t<0?t:r,n,e))return this._tTime=0,this;if(p!==this._dur)return this.render(t,e,n)}for(this._tTime=v,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(r/p),this._from&&(this.ratio=l=1-l),r&&!f&&!e&&te(this,"onStart"),i=this._pt;i;)i.r(l,i.d),i=i._next;c&&c.render(t<0?t:!r&&u?-1e-8:c._dur*l,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),te(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&te(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!p)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&bt(this,1),e||t<0&&!f||!v&&!f||(te(this,v===d?"onComplete":"onReverseComplete",!0),this._prom&&!(v<d&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,a,o,s=t.ratio,u=e<0||!e&&(!t._start&&Rt(t)||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data)?0:1,l=t._rDelay,c=0;if(l&&t._repeat&&(c=zt(0,t._tDur,e),a=Tt(c,l),o=Tt(t._tTime,l),t._yoyo&&1&a&&(u=1-u),a!==o&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==s||r||t._zTime===g||!e&&t._zTime){if(!t._initted&&Lt(t,e,r,n))return;for(o=t._zTime,t._zTime=e||(n?g:0),n||(n=e&&!o),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=c,i=t._pt;i;)i.r(u,i.d),i=i._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&te(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&te(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&bt(t,1),n||(te(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!t&&(!e||"all"===e))return this._lazy=this._pt=0,this.parent?ee(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Oe&&!0!==Oe.vars.overwrite)._first||ee(this),this.parent&&n!==this.timeline.totalDuration()&&jt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,a,o,s,u,l,c=this._targets,h=t?Ht(t):c,f=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(c,h))return"all"===e&&(this._pt=0),ee(this);for(r=this._op=this._op||[],"all"!==e&&(k(e)&&(s={},at(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,a,o=t[0]?rt(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(r in n=vt({},e),s)if(r in n)for(i=(a=s[r].split(",")).length;i--;)n[a[i]]=n[r];return n}(c,e)),l=c.length;l--;)if(~h.indexOf(c[l]))for(s in i=f[l],"all"===e?(r[l]=e,o=i,a={}):(a=r[l]=r[l]||{},o=e),o)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||_t(this,u,"_pt"),delete i[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&d&&ee(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,ut(arguments,1))},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,n,r){return new e(t,ut(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return o.killTweensOf(t,e,n)},e}(Ee);dt(De.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),at("staggerTo,staggerFrom,staggerFromTo",(function(t){De[t]=function(){var e=new Ce,n=Vt.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var Ne=function(t,e,n){return t[e]=n},Be=function(t,e,n){return t[e](n)},ze=function(t,e,n,r){return t[e](r.fp,n)},Fe=function(t,e,n){return t.setAttribute(e,n)},Ve=function(t,e){return T(t[e])?Be:C(t[e])&&t.setAttribute?Fe:Ne},Ue=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},qe=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},He=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},We=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Ge=function(t,e,n,r){for(var i,a=this._pt;a;)i=a._next,a.p===r&&a.modifier(t,e,n),a=i},Xe=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?_t(this,r,"_pt"):r.dep||(e=1),r=n;return!e},Ye=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},Ze=function(t){for(var e,n,r,i,a=t._pt;a;){for(e=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:i)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:i=a,a=e}t._pt=r},Qe=function(){function t(t,e,n,r,i,a,o,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=a||Ue,this.d=o||this,this.set=s||Ne,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Ye,this.m=t,this.mt=n,this.tween=e},t}();at(et+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Y[t]=1})),V.TweenMax=V.TweenLite=De,V.TimelineLite=V.TimelineMax=Ce,o=new Ce({sortChildren:!1,defaults:v,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),p.stringFilter=he;var Je={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return ne(t)}))},timeline:function(t){return new Ce(t)},getTweensOf:function(t,e){return o.getTweensOf(t,e)},getProperty:function(t,e,n,r){k(t)&&(t=Ht(t)[0]);var i=rt(t||{}).get,a=n?ft:ht;return"native"===n&&(n=""),t?e?a((J[e]&&J[e].get||i)(t,e,n,r)):function(e,n,r){return a((J[e]&&J[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=Ht(t)).length>1){var r=t.map((function(t){return tn.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var a=J[e],o=rt(t),s=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(e){var r=new a;f._pt=0,r.init(t,n?e+n:e,f,0,[t]),r.render(1,r),f._pt&&We(1,f)}:o.set(t,s);return a?u:function(e){return u(t,s,n?e+n:e,o,1)}},isTweening:function(t){return o.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=be(t.ease,v.ease)),mt(v,t||{})},config:function(t){return mt(p,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,a=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!J[t]&&!V[t]&&W(e+" effect requires "+t+" plugin.")})),K[e]=function(t,e,r){return n(Ht(t),dt(e||{},i),r)},a&&(Ce.prototype[e]=function(t,n,r){return this.add(K[e](t,O(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){pe[t]=be(e)},parseEase:function(t,e){return arguments.length?be(t,e):pe},getById:function(t){return o.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new Ce(t);for(i.smoothChildTiming=M(t.smoothChildTiming),o.remove(i),i._dp=0,i._time=i._tTime=o._time,n=o._first;n;)r=n._next,!e&&!n._dur&&n instanceof De&&n.vars.onComplete===n._targets[0]||At(i,n,n._start-n._delay),n=r;return At(o,i,0),i},utils:{wrap:function t(e,n,r){var i=n-e;return R(e)?Qt(e,t(0,e.length),n):Bt(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,a=2*i;return R(e)?Qt(e,t(0,e.length-1),n):Bt(r,(function(t){return e+((t=(a+(t-e)%a)%a||0)>i?a-t:t)}))},distribute:Gt,random:Zt,snap:Yt,normalize:function(t,e,n){return Kt(t,e,0,1,n)},getUnit:Ft,clamp:function(t,e,n){return Bt(n,(function(n){return zt(t,e,n)}))},splitColor:oe,toArray:Ht,mapRange:Kt,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Ft(n))}},interpolate:function t(e,n,r,i){var a=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!a){var o,s,u,l,c,h=k(e),f={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if(R(e)&&!R(n)){for(u=[],l=e.length,c=l-2,s=1;s<l;s++)u.push(t(e[s-1],e[s]));l--,a=function(t){t*=l;var e=Math.min(c,~~t);return u[e](t-e)},r=n}else i||(e=vt(R(e)?[]:{},e));if(!u){for(o in n)Ae.call(f,e,o,"get",n[o]);a=function(t){return We(t,f)||(h?e.p:e)}}}return Bt(r,a)},shuffle:Wt},install:q,effects:K,ticker:fe,updateRoot:Ce.updateRoot,plugins:J,globalTimeline:o,core:{PropTween:Qe,globals:G,Tween:De,Timeline:Ce,Animation:Ee,getCache:rt,_removeLinkedListItem:_t,suppressOverwrites:function(t){return a=t}}};at("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Je[t]=De[t]})),fe.add(Ce.updateRoot),f=Je.to({},{duration:0});var Ke=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},$e=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(k(n)&&(r={},at(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,a=t._targets;for(n in e)for(r=a.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Ke(i,n)),i&&i.modifier&&i.modifier(e[n],t,a[r],n))}(t,n)}}}},tn=Je.registerPlugin({name:"attr",init:function(t,e,n,r,i){var a,o;for(a in e)(o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],r,i,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},$e("roundProps",Xt),$e("modifiers"),$e("snap",Yt))||Je;De.version=Ce.version=tn.version="3.6.1",c=1,A()&&de();pe.Power0,pe.Power1,pe.Power2,pe.Power3,pe.Power4,pe.Linear,pe.Quad,pe.Cubic,pe.Quart,pe.Quint,pe.Strong,pe.Elastic,pe.Back,pe.SteppedEase,pe.Bounce,pe.Sine,pe.Expo,pe.Circ;var en,nn,rn,an,on,sn,un,ln={},cn=180/Math.PI,hn=Math.PI/180,fn=Math.atan2,dn=/([A-Z])/g,pn=/(?:left|right|width|margin|padding|x)/i,vn=/[\s,\(]\S/,mn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},yn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},_n=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},bn=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},xn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},wn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Sn=function(t,e,n){return t.style[e]=n},kn=function(t,e,n){return t.style.setProperty(e,n)},Tn=function(t,e,n){return t._gsap[e]=n},En=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Cn=function(t,e,n,r,i){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(i,a)},On=function(t,e,n,r,i){var a=t._gsap;a[e]=n,a.renderTransform(i,a)},Mn="transform",An=Mn+"Origin",Pn=function(t,e){var n=nn.createElementNS?nn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):nn.createElement(t);return n.style?n:nn.createElement(t)},Ln=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(dn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,jn(n)||n,1)||""},Rn="O,Moz,ms,Ms,Webkit".split(","),jn=function(t,e,n){var r=(e||on).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(Rn[i]+t in r););return i<0?null:(3===i?"ms":i>=0?Rn[i]:"")+t},In=function(){"undefined"!==typeof window&&window.document&&(en=window,nn=en.document,rn=nn.documentElement,on=Pn("div")||{style:{}},Pn("div"),Mn=jn(Mn),An=Mn+"Origin",on.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",un=!!jn("perspective"),an=1)},Dn=function t(e){var n,r=Pn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(rn.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(s){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),rn.removeChild(r),this.style.cssText=o,n},Nn=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Bn=function(t){var e;try{e=t.getBBox()}catch(n){e=Dn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Dn||(e=Dn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Nn(t,["x","cx","x1"])||0,y:+Nn(t,["y","cy","y1"])||0,width:0,height:0}},zn=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Bn(t))},Fn=function(t,e){if(e){var n=t.style;e in ln&&e!==An&&(e=Mn),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(dn,"-$1").toLowerCase())):n.removeAttribute(e)}},Vn=function(t,e,n,r,i,a){var o=new Qe(t._pt,e,n,0,1,a?wn:xn);return t._pt=o,o.b=r,o.e=i,t._props.push(n),o},Un={deg:1,rad:1,turn:1},qn=function t(e,n,r,i){var a,o,s,u,l=parseFloat(r)||0,c=(r+"").trim().substr((l+"").length)||"px",h=on.style,f=pn.test(n),d="svg"===e.tagName.toLowerCase(),p=(d?"client":"offset")+(f?"Width":"Height"),v=100,m="px"===i,g="%"===i;return i===c||!l||Un[i]||Un[c]?l:("px"!==c&&!m&&(l=t(e,n,r,"px")),u=e.getCTM&&zn(e),!g&&"%"!==c||!ln[n]&&!~n.indexOf("adius")?(h[f?"width":"height"]=v+(m?c:i),o=~n.indexOf("adius")||"em"===i&&e.appendChild&&!d?e:e.parentNode,u&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==nn&&o.appendChild||(o=nn.body),(s=o._gsap)&&g&&s.width&&f&&s.time===fe.time?ot(l/s.width*v):((g||"%"===c)&&(h.position=Ln(e,"position")),o===e&&(h.position="static"),o.appendChild(on),a=on[p],o.removeChild(on),h.position="absolute",f&&g&&((s=rt(o)).time=fe.time,s.width=o[p]),ot(m?a*l/v:a&&l?v/a*l:0))):(a=u?e.getBBox()[f?"width":"height"]:e[p],ot(g?l/a*v:l/100*a)))},Hn=function(t,e,n,r){var i;return an||In(),e in mn&&"transform"!==e&&~(e=mn[e]).indexOf(",")&&(e=e.split(",")[0]),ln[e]&&"transform"!==e?(i=nr(t,r),i="transformOrigin"!==e?i[e]:rr(Ln(t,An))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Zn[e]&&Zn[e](t,e,n)||Ln(t,e)||it(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?qn(t,e,i,n)+n:i},Wn=function(t,e,n,r){if(!n||"none"===n){var i=jn(e,t,1),a=i&&Ln(t,i,1);a&&a!==n?(e=i,n=a):"borderColor"===e&&(n=Ln(t,"borderTopColor"))}var o,s,u,l,c,h,f,d,v,m,g,y,_=new Qe(this._pt,t.style,e,0,1,He),b=0,x=0;if(_.b=n,_.e=r,n+="","auto"===(r+="")&&(t.style[e]=r,r=Ln(t,e)||r,t.style[e]=n),he(o=[n,r]),r=o[1],u=(n=o[0]).match(D)||[],(r.match(D)||[]).length){for(;s=D.exec(r);)f=s[0],v=r.substring(b,s.index),c?c=(c+1)%5:"rgba("!==v.substr(-5)&&"hsla("!==v.substr(-5)||(c=1),f!==(h=u[x++]||"")&&(l=parseFloat(h)||0,g=h.substr((l+"").length),(y="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),d=parseFloat(f),m=f.substr((d+"").length),b=D.lastIndex-m.length,m||(m=m||p.units[e]||g,b===r.length&&(r+=m,_.e+=m)),g!==m&&(l=qn(t,e,h,m)||0),_._pt={_next:_._pt,p:v||1===x?v:",",s:l,c:y?y*d:d-l,m:c&&c<4||"zIndex"===e?Math.round:0});_.c=b<r.length?r.substring(b,r.length):""}else _.r="display"===e&&"none"===r?wn:xn;return B.test(r)&&(_.e=0),this._pt=_,_},Gn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xn=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(t=n,n=r,r=t),e[0]=Gn[n]||n,e[1]=Gn[r]||r,e.join(" ")},Yn=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,a=e.t,o=a.style,s=e.u,u=a._gsap;if("all"===s||!0===s)o.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],ln[n]&&(r=1,n="transformOrigin"===n?An:Mn),Fn(a,n);r&&(Fn(a,Mn),u&&(u.svg&&a.removeAttribute("transform"),nr(a,1),u.uncache=1))}},Zn={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var a=t._pt=new Qe(t._pt,e,n,0,0,Yn);return a.u=r,a.pr=-10,a.tween=i,t._props.push(n),1}}},Qn=[1,0,0,1,0,0],Jn={},Kn=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},$n=function(t){var e=Ln(t,Mn);return Kn(e)?Qn:e.substr(7).match(I).map(ot)},tr=function(t,e){var n,r,i,a,o=t._gsap||rt(t),s=t.style,u=$n(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Qn:u:(u!==Qn||t.offsetParent||t===rn||o.svg||(i=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,r=t.nextSibling,rn.appendChild(t)),u=$n(t),i?s.display=i:Fn(t,"display"),a&&(r?n.insertBefore(t,r):n?n.appendChild(t):rn.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},er=function(t,e,n,r,i,a){var o,s,u,l=t._gsap,c=i||tr(t,!0),h=l.xOrigin||0,f=l.yOrigin||0,d=l.xOffset||0,p=l.yOffset||0,v=c[0],m=c[1],g=c[2],y=c[3],_=c[4],b=c[5],x=e.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?c!==Qn&&(s=v*y-m*g)&&(u=w*(-m/s)+S*(v/s)-(v*b-m*_)/s,w=w*(y/s)+S*(-g/s)+(g*b-y*_)/s,S=u):(w=(o=Bn(t)).x+(~x[0].indexOf("%")?w/100*o.width:w),S=o.y+(~(x[1]||x[0]).indexOf("%")?S/100*o.height:S)),r||!1!==r&&l.smooth?(_=w-h,b=S-f,l.xOffset=d+(_*v+b*g)-_,l.yOffset=p+(_*m+b*y)-b):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=S,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[An]="0px 0px",a&&(Vn(a,l,"xOrigin",h,w),Vn(a,l,"yOrigin",f,S),Vn(a,l,"xOffset",d,l.xOffset),Vn(a,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",w+" "+S)},nr=function(t,e){var n=t._gsap||new Te(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,a,o,s,u,l,c,h,f,d,v,m,g,y,_,b,x,w,S,k,T,E,C,O,M,A,P,L,R,j,I,D=t.style,N=n.scaleX<0,B="px",z="deg",F=Ln(t,An)||"0";return r=i=a=u=l=c=h=f=d=0,o=s=1,n.svg=!(!t.getCTM||!zn(t)),g=tr(t,n.svg),n.svg&&(C=!n.uncache&&!e&&t.getAttribute("data-svg-origin"),er(t,C||F,!!C||n.originIsAbsolute,!1!==n.smooth,g)),v=n.xOrigin||0,m=n.yOrigin||0,g!==Qn&&(x=g[0],w=g[1],S=g[2],k=g[3],r=T=g[4],i=E=g[5],6===g.length?(o=Math.sqrt(x*x+w*w),s=Math.sqrt(k*k+S*S),u=x||w?fn(w,x)*cn:0,(h=S||k?fn(S,k)*cn+u:0)&&(s*=Math.abs(Math.cos(h*hn))),n.svg&&(r-=v-(v*x+m*S),i-=m-(v*w+m*k))):(I=g[6],R=g[7],A=g[8],P=g[9],L=g[10],j=g[11],r=g[12],i=g[13],a=g[14],l=(y=fn(I,L))*cn,y&&(C=T*(_=Math.cos(-y))+A*(b=Math.sin(-y)),O=E*_+P*b,M=I*_+L*b,A=T*-b+A*_,P=E*-b+P*_,L=I*-b+L*_,j=R*-b+j*_,T=C,E=O,I=M),c=(y=fn(-S,L))*cn,y&&(_=Math.cos(-y),j=k*(b=Math.sin(-y))+j*_,x=C=x*_-A*b,w=O=w*_-P*b,S=M=S*_-L*b),u=(y=fn(w,x))*cn,y&&(C=x*(_=Math.cos(y))+w*(b=Math.sin(y)),O=T*_+E*b,w=w*_-x*b,E=E*_-T*b,x=C,T=O),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),o=ot(Math.sqrt(x*x+w*w+S*S)),s=ot(Math.sqrt(E*E+I*I)),y=fn(T,E),h=Math.abs(y)>2e-4?y*cn:0,d=j?1/(j<0?-j:j):0),n.svg&&(C=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Kn(Ln(t,Mn)),C&&t.setAttribute("transform",C))),Math.abs(h)>90&&Math.abs(h)<270&&(N?(o*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+B,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+B,n.z=a+B,n.scaleX=ot(o),n.scaleY=ot(s),n.rotation=ot(u)+z,n.rotationX=ot(l)+z,n.rotationY=ot(c)+z,n.skewX=h+z,n.skewY=f+z,n.transformPerspective=d+B,(n.zOrigin=parseFloat(F.split(" ")[2])||0)&&(D[An]=rr(F)),n.xOffset=n.yOffset=0,n.force3D=p.force3D,n.renderTransform=n.svg?cr:un?lr:ar,n.uncache=0,n},rr=function(t){return(t=t.split(" "))[0]+" "+t[1]},ir=function(t,e,n){var r=Ft(e);return ot(parseFloat(e)+parseFloat(qn(t,"x",n+"px",r)))+r},ar=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,lr(t,e)},or="0deg",sr="0px",ur=") ",lr=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,a=n.x,o=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,v=n.transformPerspective,m=n.force3D,g=n.target,y=n.zOrigin,_="",b="auto"===m&&t&&1!==t||!0===m;if(y&&(c!==or||l!==or)){var x,w=parseFloat(l)*hn,S=Math.sin(w),k=Math.cos(w);w=parseFloat(c)*hn,x=Math.cos(w),a=ir(g,a,S*x*-y),o=ir(g,o,-Math.sin(w)*-y),s=ir(g,s,k*x*-y+y)}v!==sr&&(_+="perspective("+v+ur),(r||i)&&(_+="translate("+r+"%, "+i+"%) "),(b||a!==sr||o!==sr||s!==sr)&&(_+=s!==sr||b?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+ur),u!==or&&(_+="rotate("+u+ur),l!==or&&(_+="rotateY("+l+ur),c!==or&&(_+="rotateX("+c+ur),h===or&&f===or||(_+="skew("+h+", "+f+ur),1===d&&1===p||(_+="scale("+d+", "+p+ur),g.style[Mn]=_||"translate(0, 0)"},cr=function(t,e){var n,r,i,a,o,s=e||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,f=s.rotation,d=s.skewX,p=s.skewY,v=s.scaleX,m=s.scaleY,g=s.target,y=s.xOrigin,_=s.yOrigin,b=s.xOffset,x=s.yOffset,w=s.forceCSS,S=parseFloat(c),k=parseFloat(h);f=parseFloat(f),d=parseFloat(d),(p=parseFloat(p))&&(d+=p=parseFloat(p),f+=p),f||d?(f*=hn,d*=hn,n=Math.cos(f)*v,r=Math.sin(f)*v,i=Math.sin(f-d)*-m,a=Math.cos(f-d)*m,d&&(p*=hn,o=Math.tan(d-p),i*=o=Math.sqrt(1+o*o),a*=o,p&&(o=Math.tan(p),n*=o=Math.sqrt(1+o*o),r*=o)),n=ot(n),r=ot(r),i=ot(i),a=ot(a)):(n=v,a=m,r=i=0),(S&&!~(c+"").indexOf("px")||k&&!~(h+"").indexOf("px"))&&(S=qn(g,"x",c,"px"),k=qn(g,"y",h,"px")),(y||_||b||x)&&(S=ot(S+y-(y*n+_*i)+b),k=ot(k+_-(y*r+_*a)+x)),(u||l)&&(o=g.getBBox(),S=ot(S+u/100*o.width),k=ot(k+l/100*o.height)),o="matrix("+n+","+r+","+i+","+a+","+S+","+k+")",g.setAttribute("transform",o),w&&(g.style[Mn]=o)},hr=function(t,e,n,r,i,a){var o,s,u=360,l=k(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?cn:1),h=a?c*a:c-r,f=r+h+"deg";return l&&("short"===(o=i.split("_")[1])&&(h%=u)!==h%180&&(h+=h<0?u:-360),"cw"===o&&h<0?h=(h+36e9)%u-~~(h/u)*u:"ccw"===o&&h>0&&(h=(h-36e9)%u-~~(h/u)*u)),t._pt=s=new Qe(t._pt,e,n,r,h,yn),s.e=f,s.u="deg",t._props.push(n),s},fr=function(t,e){for(var n in e)t[n]=e[n];return t},dr=function(t,e,n){var r,i,a,o,s,u,l,c=fr({},n._gsap),h=n.style;for(i in c.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),h[Mn]=e,r=nr(n,1),Fn(n,Mn),n.setAttribute("transform",a)):(a=getComputedStyle(n)[Mn],h[Mn]=e,r=nr(n,1),h[Mn]=a),ln)(a=c[i])!==(o=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Ft(a)!==(l=Ft(o))?qn(n,i,a,l):parseFloat(a),u=parseFloat(o),t._pt=new Qe(t._pt,r,i,s,u-s,gn),t._pt.u=l||0,t._props.push(i));fr(r,c)};at("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",a="Left",o=(e<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map((function(n){return e<2?t+n:"border"+n+t}));Zn[e>1?"border"+t:t]=function(t,e,n,r,i){var a,s;if(arguments.length<4)return a=o.map((function(e){return Hn(t,e,n)})),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(r+"").split(" "),s={},o.forEach((function(t,e){return s[t]=a[e]=a[e]||a[(e-1)/2|0]})),t.init(e,s,i)}}));var pr={name:"css",register:In,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var a,o,s,u,l,c,h,f,d,v,m,g,y,_,b,x=this._props,w=t.style,S=n.vars.startAt;for(h in an||In(),e)if("autoRound"!==h&&(o=e[h],!J[h]||!Pe(h,e,n,r,t,i)))if(l=typeof o,c=Zn[h],"function"===l&&(l=typeof(o=o.call(n,r,t,i))),"string"===l&&~o.indexOf("random(")&&(o=Jt(o)),c)c(this,t,h,o,n)&&(b=1);else if("--"===h.substr(0,2))a=(getComputedStyle(t).getPropertyValue(h)+"").trim(),o+="",le.lastIndex=0,le.test(a)||(f=Ft(a),d=Ft(o)),d?f!==d&&(a=qn(t,h,a,d)+d):f&&(o+=f),this.add(w,"setProperty",a,o,r,i,0,0,h);else if("undefined"!==l){if(S&&h in S?(a="function"===typeof S[h]?S[h].call(n,r,t,i):S[h],h in p.units&&!Ft(a)&&(a+=p.units[h]),"="===(a+"").charAt(1)&&(a=Hn(t,h))):a=Hn(t,h),u=parseFloat(a),(v="string"===l&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),h in mn&&("autoAlpha"===h&&(1===u&&"hidden"===Hn(t,"visibility")&&s&&(u=0),Vn(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=mn[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in ln)if(g||((y=t._gsap).renderTransform&&!e.parseTransform||nr(t,e.parseTransform),_=!1!==e.smoothOrigin&&y.smooth,(g=this._pt=new Qe(this._pt,w,Mn,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===h)this._pt=new Qe(this._pt,y,"scaleY",y.scaleY,v?v*s:s-y.scaleY),x.push("scaleY",h),h+="X";else{if("transformOrigin"===h){o=Xn(o),y.svg?er(t,o,0,_,0,this):((d=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&Vn(this,y,"zOrigin",y.zOrigin,d),Vn(this,w,h,rr(a),rr(o)));continue}if("svgOrigin"===h){er(t,o,1,_,0,this);continue}if(h in Jn){hr(this,y,h,u,o,v);continue}if("smoothOrigin"===h){Vn(this,y,"smooth",y.smooth,o);continue}if("force3D"===h){y[h]=o;continue}if("transform"===h){dr(this,o,t);continue}}else h in w||(h=jn(h)||h);if(m||(s||0===s)&&(u||0===u)&&!vn.test(o)&&h in w)s||(s=0),(f=(a+"").substr((u+"").length))!==(d=Ft(o)||(h in p.units?p.units[h]:f))&&(u=qn(t,h,a,d)),this._pt=new Qe(this._pt,m?y:w,h,u,v?v*s:s-u,m||"px"!==d&&"zIndex"!==h||!1===e.autoRound?gn:bn),this._pt.u=d||0,f!==d&&(this._pt.b=a,this._pt.r=_n);else if(h in w)Wn.call(this,t,h,a,o);else{if(!(h in t)){H(h,o);continue}this.add(t,h,t[h],o,r,i)}x.push(h)}b&&Ze(this)},get:Hn,aliases:mn,getSetter:function(t,e,n){var r=mn[e];return r&&r.indexOf(",")<0&&(e=r),e in ln&&e!==An&&(t._gsap.x||Hn(t,"x"))?n&&sn===n?"scale"===e?En:Tn:(sn=n||{})&&("scale"===e?Cn:On):t.style&&!C(t.style[e])?Sn:~e.indexOf("-")?kn:Ve(t,e)},core:{_removeProperty:Fn,_getMatrix:tr}};tn.utils.checkPrefix=jn,function(t,e,n,r){var i=at(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){ln[t]=1}));at(e,(function(t){p.units[t]="deg",Jn[t]=1})),mn[i[13]]=t+","+e,at("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");mn[e[1]]=i[e[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),at("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){p.units[t]="px"})),tn.registerPlugin(pr);var vr=tn.registerPlugin(pr)||tn;vr.core.Tween},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(45);function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(r.a)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},function(t,e,n){t.exports=function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=n[o]={exports:{}};e[o][0].call(u.exports,(function(t){var n=e[o][1][t];return i(n||t)}),u,u.exports,t,e,n,r)}return n[o].exports}for(var a=!1,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){e.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},{}],2:[function(t,e,n){e.exports={version:t("../package.json").version,AABB:t("./collision/AABB"),ArrayCollisionMatrix:t("./collision/ArrayCollisionMatrix"),Body:t("./objects/Body"),Box:t("./shapes/Box"),Broadphase:t("./collision/Broadphase"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),Narrowphase:t("./world/Narrowphase"),ConeTwistConstraint:t("./constraints/ConeTwistConstraint"),ContactMaterial:t("./material/ContactMaterial"),ConvexPolyhedron:t("./shapes/ConvexPolyhedron"),Cylinder:t("./shapes/Cylinder"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventTarget:t("./utils/EventTarget"),FrictionEquation:t("./equations/FrictionEquation"),GSSolver:t("./solver/GSSolver"),GridBroadphase:t("./collision/GridBroadphase"),Heightfield:t("./shapes/Heightfield"),HingeConstraint:t("./constraints/HingeConstraint"),LockConstraint:t("./constraints/LockConstraint"),Mat3:t("./math/Mat3"),Material:t("./material/Material"),NaiveBroadphase:t("./collision/NaiveBroadphase"),ObjectCollisionMatrix:t("./collision/ObjectCollisionMatrix"),Pool:t("./utils/Pool"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),PointToPointConstraint:t("./constraints/PointToPointConstraint"),Quaternion:t("./math/Quaternion"),Ray:t("./collision/Ray"),RaycastVehicle:t("./objects/RaycastVehicle"),RaycastResult:t("./collision/RaycastResult"),RigidVehicle:t("./objects/RigidVehicle"),RotationalEquation:t("./equations/RotationalEquation"),RotationalMotorEquation:t("./equations/RotationalMotorEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),SPHSystem:t("./objects/SPHSystem"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Sphere:t("./shapes/Sphere"),SplitSolver:t("./solver/SplitSolver"),Spring:t("./objects/Spring"),Trimesh:t("./shapes/Trimesh"),Vec3:t("./math/Vec3"),Vec3Pool:t("./utils/Vec3Pool"),World:t("./world/World")}},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(t,e,n){var r=t("../math/Vec3");function i(t){t=t||{},this.lowerBound=new r,t.lowerBound&&this.lowerBound.copy(t.lowerBound),this.upperBound=new r,t.upperBound&&this.upperBound.copy(t.upperBound)}t("../utils/Utils"),e.exports=i;var a=new r;i.prototype.setFromPoints=function(t,e,n,r){var i=this.lowerBound,o=this.upperBound,s=n;i.copy(t[0]),s&&s.vmult(i,i),o.copy(i);for(var u=1;u<t.length;u++){var l=t[u];s&&(s.vmult(l,a),l=a),l.x>o.x&&(o.x=l.x),l.x<i.x&&(i.x=l.x),l.y>o.y&&(o.y=l.y),l.y<i.y&&(i.y=l.y),l.z>o.z&&(o.z=l.z),l.z<i.z&&(i.z=l.z)}return e&&(e.vadd(i,i),e.vadd(o,o)),r&&(i.x-=r,i.y-=r,i.z-=r,o.x+=r,o.y+=r,o.z+=r),this},i.prototype.copy=function(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this},i.prototype.clone=function(){return(new i).copy(this)},i.prototype.extend=function(t){var e=t.lowerBound.x;this.lowerBound.x>e&&(this.lowerBound.x=e);var n=t.upperBound.x;this.upperBound.x<n&&(this.upperBound.x=n),e=t.lowerBound.y,this.lowerBound.y>e&&(this.lowerBound.y=e),n=t.upperBound.y,this.upperBound.y<n&&(this.upperBound.y=n),e=t.lowerBound.z,this.lowerBound.z>e&&(this.lowerBound.z=e),n=t.upperBound.z,this.upperBound.z<n&&(this.upperBound.z=n)},i.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return(r.x<=n.x&&n.x<=i.x||e.x<=i.x&&i.x<=n.x)&&(r.y<=n.y&&n.y<=i.y||e.y<=i.y&&i.y<=n.y)&&(r.z<=n.z&&n.z<=i.z||e.z<=i.z&&i.z<=n.z)},i.prototype.contains=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return e.x<=r.x&&n.x>=i.x&&e.y<=r.y&&n.y>=i.y&&e.z<=r.z&&n.z>=i.z},i.prototype.getCorners=function(t,e,n,r,i,a,o,s){var u=this.lowerBound,l=this.upperBound;t.copy(u),e.set(l.x,u.y,u.z),n.set(l.x,l.y,u.z),r.set(u.x,l.y,l.z),i.set(l.x,u.y,u.z),a.set(u.x,l.y,u.z),o.set(u.x,u.y,l.z),s.copy(l)};var o=[new r,new r,new r,new r,new r,new r,new r,new r];i.prototype.toLocalFrame=function(t,e){var n=o,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7];this.getCorners(r,i,a,s,u,l,c,h);for(var f=0;8!==f;f++){var d=n[f];t.pointToLocal(d,d)}return e.setFromPoints(n)},i.prototype.toWorldFrame=function(t,e){var n=o,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7];this.getCorners(r,i,a,s,u,l,c,h);for(var f=0;8!==f;f++){var d=n[f];t.pointToWorld(d,d)}return e.setFromPoints(n)}},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(t,e,n){function r(){this.matrix=[]}e.exports=r,r.prototype.get=function(t,e){if(t=t.index,(e=e.index)>t){var n=e;e=t,t=n}return this.matrix[(t*(t+1)>>1)+e-1]},r.prototype.set=function(t,e,n){if(t=t.index,(e=e.index)>t){var r=e;e=t,t=r}this.matrix[(t*(t+1)>>1)+e-1]=n?1:0},r.prototype.reset=function(){for(var t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0},r.prototype.setNumObjects=function(t){this.matrix.length=t*(t-1)>>1}},{}],5:[function(t,e,n){var r=t("../objects/Body"),i=t("../math/Vec3"),a=t("../math/Quaternion");function o(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}t("../shapes/Shape"),t("../shapes/Plane"),e.exports=o,o.prototype.collisionPairs=function(t,e,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var s=r.STATIC|r.KINEMATIC;o.prototype.needBroadphaseCollision=function(t,e){return 0!==(t.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&t.collisionFilterMask)&&(0===(t.type&s)&&t.sleepState!==r.SLEEPING||0===(e.type&s)&&e.sleepState!==r.SLEEPING)},o.prototype.intersectionTest=function(t,e,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,n,r):this.doBoundingSphereBroadphase(t,e,n,r)};var u=new i;new i,new a,new i,o.prototype.doBoundingSphereBroadphase=function(t,e,n,r){var i=u;e.position.vsub(t.position,i);var a=Math.pow(t.boundingRadius+e.boundingRadius,2);i.norm2()<a&&(n.push(t),r.push(e))},o.prototype.doBoundingBoxBroadphase=function(t,e,n,r){t.aabbNeedsUpdate&&t.computeAABB(),e.aabbNeedsUpdate&&e.computeAABB(),t.aabb.overlaps(e.aabb)&&(n.push(t),r.push(e))};var l={keys:[]},c=[],h=[];o.prototype.makePairsUnique=function(t,e){for(var n=l,r=c,i=h,a=t.length,o=0;o!==a;o++)r[o]=t[o],i[o]=e[o];for(t.length=0,e.length=0,o=0;o!==a;o++){var s=r[o].id,u=i[o].id;n[f=s<u?s+","+u:u+","+s]=o,n.keys.push(f)}for(o=0;o!==n.keys.length;o++){var f=n.keys.pop(),d=n[f];t.push(r[d]),e.push(i[d]),delete n[f]}},o.prototype.setWorld=function(t){};var f=new i;o.boundingSphereCheck=function(t,e){var n=f;return t.position.vsub(e.position,n),Math.pow(t.shape.boundingSphereRadius+e.shape.boundingSphereRadius,2)>n.norm2()},o.prototype.aabbQuery=function(t,e,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(t,e,n){e.exports=o;var r=t("./Broadphase"),i=t("../math/Vec3"),a=t("../shapes/Shape");function o(t,e,n,a,o){r.apply(this),this.nx=n||10,this.ny=a||10,this.nz=o||10,this.aabbMin=t||new i(100,100,100),this.aabbMax=e||new i(-100,-100,-100);var s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(var u=0;u<s;u++)this.bins[u]=[],this.binLengths[u]=0}o.prototype=new r,o.prototype.constructor=o;var s=new i;new i,o.prototype.collisionPairs=function(t,e,n){for(var r=t.numObjects(),i=t.bodies,o=this.aabbMax,u=this.aabbMin,l=this.nx,c=this.ny,h=this.nz,f=c*h,d=h,p=1,v=o.x,m=o.y,g=o.z,y=u.x,_=u.y,b=u.z,x=l/(v-y),w=c/(m-_),S=h/(g-b),k=(v-y)/l,T=(m-_)/c,E=(g-b)/h,C=.5*Math.sqrt(k*k+T*T+E*E),O=a.types,M=O.SPHERE,A=O.PLANE,P=(O.BOX,O.COMPOUND,O.CONVEXPOLYHEDRON,this.bins),L=this.binLengths,R=this.bins.length,j=0;j!==R;j++)L[j]=0;var I=Math.ceil;function D(t,e,n,r,i,a,o){var s=(t-y)*x|0,u=(e-_)*w|0,v=(n-b)*S|0,m=I((r-y)*x),g=I((i-_)*w),k=I((a-b)*S);s<0?s=0:s>=l&&(s=l-1),u<0?u=0:u>=c&&(u=c-1),v<0?v=0:v>=h&&(v=h-1),m<0?m=0:m>=l&&(m=l-1),g<0?g=0:g>=c&&(g=c-1),k<0?k=0:k>=h&&(k=h-1),u*=d,v*=p,m*=f,g*=d,k*=p;for(var T=s*=f;T<=m;T+=f)for(var E=u;E<=g;E+=d)for(var C=v;C<=k;C+=p){var O=T+E+C;P[O][L[O]++]=o}}for(u=Math.min,o=Math.max,j=0;j!==r;j++){var N=(nt=i[j]).shape;switch(N.type){case M:var B=nt.position.x,z=nt.position.y,F=nt.position.z,V=N.radius;D(B-V,z-V,F-V,B+V,z+V,F+V,nt);break;case A:N.worldNormalNeedsUpdate&&N.computeWorldNormal(nt.quaternion);var U=N.worldNormal,q=y+.5*k-nt.position.x,H=_+.5*T-nt.position.y,W=b+.5*E-nt.position.z,G=s;G.set(q,H,W);for(var X=0,Y=0;X!==l;X++,Y+=f,G.y=H,G.x+=k)for(var Z=0,Q=0;Z!==c;Z++,Q+=d,G.z=W,G.y+=T)for(var J=0,K=0;J!==h;J++,K+=p,G.z+=E)if(G.dot(U)<C){var $=Y+Q+K;P[$][L[$]++]=nt}break;default:nt.aabbNeedsUpdate&&nt.computeAABB(),D(nt.aabb.lowerBound.x,nt.aabb.lowerBound.y,nt.aabb.lowerBound.z,nt.aabb.upperBound.x,nt.aabb.upperBound.y,nt.aabb.upperBound.z,nt)}}for(j=0;j!==R;j++){var tt=L[j];if(tt>1){var et=P[j];for(X=0;X!==tt;X++){var nt=et[X];for(Z=0;Z!==X;Z++){var rt=et[Z];this.needBroadphaseCollision(nt,rt)&&this.intersectionTest(nt,rt,e,n)}}}}this.makePairsUnique(e,n)}},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(t,e,n){e.exports=a;var r=t("./Broadphase"),i=t("./AABB");function a(){r.apply(this)}a.prototype=new r,a.prototype.constructor=a,a.prototype.collisionPairs=function(t,e,n){var r,i,a,o,s=t.bodies,u=s.length;for(r=0;r!==u;r++)for(i=0;i!==r;i++)a=s[r],o=s[i],this.needBroadphaseCollision(a,o)&&this.intersectionTest(a,o,e,n)},new i,a.prototype.aabbQuery=function(t,e,n){n=n||[];for(var r=0;r<t.bodies.length;r++){var i=t.bodies[r];i.aabbNeedsUpdate&&i.computeAABB(),i.aabb.overlaps(e)&&n.push(i)}return n}},{"./AABB":3,"./Broadphase":5}],8:[function(t,e,n){function r(){this.matrix={}}e.exports=r,r.prototype.get=function(t,e){if(t=t.id,(e=e.id)>t){var n=e;e=t,t=n}return t+"-"+e in this.matrix},r.prototype.set=function(t,e,n){if(t=t.id,(e=e.id)>t){var r=e;e=t,t=r}n?this.matrix[t+"-"+e]=!0:delete this.matrix[t+"-"+e]},r.prototype.reset=function(){this.matrix={}},r.prototype.setNumObjects=function(t){}},{}],9:[function(t,e,n){e.exports=l;var r=t("../math/Vec3"),i=t("../math/Quaternion"),a=t("../math/Transform"),o=(t("../shapes/ConvexPolyhedron"),t("../shapes/Box"),t("../collision/RaycastResult")),s=t("../shapes/Shape"),u=t("../collision/AABB");function l(t,e){this.from=t?t.clone():new r,this.to=e?e.clone():new r,this._direction=new r,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=l.ANY,this.result=new o,this.hasHit=!1,this.callback=function(t){}}l.prototype.constructor=l,l.CLOSEST=1,l.ANY=2,l.ALL=4;var c=new u,h=[];l.prototype.intersectWorld=function(t,e){return this.mode=e.mode||l.ANY,this.result=e.result||new o,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask="undefined"!==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof e.collisionFilterGroup?e.collisionFilterGroup:-1,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(c),h.length=0,t.broadphase.aabbQuery(t,c,h),this.intersectBodies(h),this.hasHit};var f=new r,d=new r;function p(t,e,n,r){r.vsub(e,j),n.vsub(e,f),t.vsub(e,d);var i,a,o=j.dot(j),s=j.dot(f),u=j.dot(d),l=f.dot(f),c=f.dot(d);return(i=l*u-s*c)>=0&&(a=o*c-s*u)>=0&&i+a<o*l-s*s}l.pointInTriangle=p;var v=new r,m=new i;l.prototype.intersectBody=function(t,e){e&&(this.result=e,this._updateDirection());var n=this.checkCollisionResponse;if((!n||t.collisionResponse)&&0!==(this.collisionFilterGroup&t.collisionFilterMask)&&0!==(t.collisionFilterGroup&this.collisionFilterMask))for(var r=v,i=m,a=0,o=t.shapes.length;a<o;a++){var s=t.shapes[a];if((!n||s.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[a],i),t.quaternion.vmult(t.shapeOffsets[a],r),r.vadd(t.position,r),this.intersectShape(s,i,r,t),this.result._shouldStop))break}},l.prototype.intersectBodies=function(t,e){e&&(this.result=e,this._updateDirection());for(var n=0,r=t.length;!this.result._shouldStop&&n<r;n++)this.intersectBody(t[n])},l.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},l.prototype.intersectShape=function(t,e,n,r){if(!(D(this.from,this._direction,n)>t.boundingSphereRadius)){var i=this[t.type];i&&i.call(this,t,e,n,r)}},new r,new r;var g=new r,y=new r,_=new r,b=new r;new r,new o,l.prototype.intersectBox=function(t,e,n,r){return this.intersectConvex(t.convexPolyhedronRepresentation,e,n,r)},l.prototype[s.types.BOX]=l.prototype.intersectBox,l.prototype.intersectPlane=function(t,e,n,i){var a=this.from,o=this.to,s=this._direction,u=new r(0,0,1);e.vmult(u,u);var l=new r;a.vsub(n,l);var c=l.dot(u);if(o.vsub(n,l),!(c*l.dot(u)>0)&&!(a.distanceTo(o)<c)){var h=u.dot(s);if(!(Math.abs(h)<this.precision)){var f=new r,d=new r,p=new r;a.vsub(n,f);var v=-u.dot(f)/h;s.scale(v,d),a.vadd(d,p),this.reportIntersection(u,p,t,i,-1)}}},l.prototype[s.types.PLANE]=l.prototype.intersectPlane,l.prototype.getAABB=function(t){var e=this.to,n=this.from;t.lowerBound.x=Math.min(e.x,n.x),t.lowerBound.y=Math.min(e.y,n.y),t.lowerBound.z=Math.min(e.z,n.z),t.upperBound.x=Math.max(e.x,n.x),t.upperBound.y=Math.max(e.y,n.y),t.upperBound.z=Math.max(e.z,n.z)};var x={faceList:[0]};l.prototype.intersectHeightfield=function(t,e,n,i){t.data,t.elementSize;var o=new r,s=new l(this.from,this.to);a.pointToLocalFrame(n,e,s.from,s.from),a.pointToLocalFrame(n,e,s.to,s.to);var u=[],c=null,h=null,f=null,d=null,p=t.getIndexOfPosition(s.from.x,s.from.y,u,!1);if(p&&(c=u[0],h=u[1],f=u[0],d=u[1]),(p=t.getIndexOfPosition(s.to.x,s.to.y,u,!1))&&((null===c||u[0]<c)&&(c=u[0]),(null===f||u[0]>f)&&(f=u[0]),(null===h||u[1]<h)&&(h=u[1]),(null===d||u[1]>d)&&(d=u[1])),null!==c){var v=[];t.getRectMinMax(c,h,f,d,v),v[0],v[1];for(var m=c;m<=f;m++)for(var g=h;g<=d;g++){if(this.result._shouldStop)return;if(t.getConvexTrianglePillar(m,g,!1),a.pointToWorldFrame(n,e,t.pillarOffset,o),this.intersectConvex(t.pillarConvex,e,o,i,x),this.result._shouldStop)return;t.getConvexTrianglePillar(m,g,!0),a.pointToWorldFrame(n,e,t.pillarOffset,o),this.intersectConvex(t.pillarConvex,e,o,i,x)}}},l.prototype[s.types.HEIGHTFIELD]=l.prototype.intersectHeightfield;var w=new r,S=new r;l.prototype.intersectSphere=function(t,e,n,r){var i=this.from,a=this.to,o=t.radius,s=Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)+Math.pow(a.z-i.z,2),u=2*((a.x-i.x)*(i.x-n.x)+(a.y-i.y)*(i.y-n.y)+(a.z-i.z)*(i.z-n.z)),l=Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)+Math.pow(i.z-n.z,2)-Math.pow(o,2),c=Math.pow(u,2)-4*s*l,h=w,f=S;if(!(c<0))if(0===c)i.lerp(a,c,h),h.vsub(n,f),f.normalize(),this.reportIntersection(f,h,t,r,-1);else{var d=(-u-Math.sqrt(c))/(2*s),p=(-u+Math.sqrt(c))/(2*s);if(d>=0&&d<=1&&(i.lerp(a,d,h),h.vsub(n,f),f.normalize(),this.reportIntersection(f,h,t,r,-1)),this.result._shouldStop)return;p>=0&&p<=1&&(i.lerp(a,p,h),h.vsub(n,f),f.normalize(),this.reportIntersection(f,h,t,r,-1))}},l.prototype[s.types.SPHERE]=l.prototype.intersectSphere;var k=new r,T=(new r,new r,new r);l.prototype.intersectConvex=function(t,e,n,r,i){for(var a=k,o=T,s=i&&i.faceList||null,u=t.faces,l=t.vertices,c=t.faceNormals,h=this._direction,f=this.from,d=this.to,v=f.distanceTo(d),m=s?s.length:u.length,x=this.result,w=0;!x._shouldStop&&w<m;w++){var S=s?s[w]:w,E=u[S],C=c[S],O=e,M=n;o.copy(l[E[0]]),O.vmult(o,o),o.vadd(M,o),o.vsub(f,o),O.vmult(C,a);var A=h.dot(a);if(!(Math.abs(A)<this.precision)){var P=a.dot(o)/A;if(!(P<0)){h.mult(P,g),g.vadd(f,g),y.copy(l[E[0]]),O.vmult(y,y),M.vadd(y,y);for(var L=1;!x._shouldStop&&L<E.length-1;L++){_.copy(l[E[L]]),b.copy(l[E[L+1]]),O.vmult(_,_),O.vmult(b,b),M.vadd(_,_),M.vadd(b,b);var R=g.distanceTo(f);!p(g,y,_,b)&&!p(g,_,y,b)||R>v||this.reportIntersection(a,g,t,r,S)}}}}},l.prototype[s.types.CONVEXPOLYHEDRON]=l.prototype.intersectConvex;var E=new r,C=new r,O=new r,M=new r,A=new r,P=new r,L=(new u,[]),R=new a;l.prototype.intersectTrimesh=function(t,e,n,r,i){var o=E,s=L,u=R,l=T,c=C,h=O,f=M,d=P,v=A,m=(i&&i.faceList,t.indices),x=(t.vertices,t.faceNormals,this.from),w=this.to,S=this._direction;u.position.copy(n),u.quaternion.copy(e),a.vectorToLocalFrame(n,e,S,c),a.pointToLocalFrame(n,e,x,h),a.pointToLocalFrame(n,e,w,f);var k=h.distanceSquared(f);t.tree.rayQuery(this,u,s);for(var j=0,I=s.length;!this.result._shouldStop&&j!==I;j++){var D=s[j];t.getNormal(D,o),t.getVertex(m[3*D],y),y.vsub(h,l);var N=c.dot(o),B=o.dot(l)/N;if(!(B<0)){c.scale(B,g),g.vadd(h,g),t.getVertex(m[3*D+1],_),t.getVertex(m[3*D+2],b);var z=g.distanceSquared(h);!p(g,_,y,b)&&!p(g,y,_,b)||z>k||(a.vectorToWorldFrame(e,o,v),a.pointToWorldFrame(n,e,g,d),this.reportIntersection(v,d,t,r,D))}}s.length=0},l.prototype[s.types.TRIMESH]=l.prototype.intersectTrimesh,l.prototype.reportIntersection=function(t,e,n,r,i){var a=this.from,o=this.to,s=a.distanceTo(e),u=this.result;if(!(this.skipBackfaces&&t.dot(this._direction)>0))switch(u.hitFaceIndex="undefined"!==typeof i?i:-1,this.mode){case l.ALL:this.hasHit=!0,u.set(a,o,t,e,n,r,s),u.hasHit=!0,this.callback(u);break;case l.CLOSEST:(s<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(a,o,t,e,n,r,s));break;case l.ANY:this.hasHit=!0,u.hasHit=!0,u.set(a,o,t,e,n,r,s),u._shouldStop=!0}};var j=new r,I=new r;function D(t,e,n){n.vsub(t,j);var r=j.dot(e);return e.mult(r,I),I.vadd(t,I),n.distanceTo(I)}},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(t,e,n){var r=t("../math/Vec3");function i(){this.rayFromWorld=new r,this.rayToWorld=new r,this.hitNormalWorld=new r,this.hitPointWorld=new r,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}e.exports=i,i.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},i.prototype.abort=function(){this._shouldStop=!0},i.prototype.set=function(t,e,n,r,i,a,o){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=a,this.distance=o}},{"../math/Vec3":30}],11:[function(t,e,n){t("../shapes/Shape");var r=t("../collision/Broadphase");function i(t){r.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var n=e.indexOf(t.body);-1!==n&&e.splice(n,1)},t&&this.setWorld(t)}e.exports=i,i.prototype=new r,i.prototype.setWorld=function(t){this.axisList.length=0;for(var e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0},i.insertionSortX=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.x<=r.aabb.lowerBound.x);i--)t[i+1]=t[i];t[i+1]=r}return t},i.insertionSortY=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.y<=r.aabb.lowerBound.y);i--)t[i+1]=t[i];t[i+1]=r}return t},i.insertionSortZ=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.z<=r.aabb.lowerBound.z);i--)t[i+1]=t[i];t[i+1]=r}return t},i.prototype.collisionPairs=function(t,e,n){var r,a,o=this.axisList,s=o.length,u=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),r=0;r!==s;r++){var l=o[r];for(a=r+1;a<s;a++){var c=o[a];if(this.needBroadphaseCollision(l,c)){if(!i.checkBounds(l,c,u))break;this.intersectionTest(l,c,e,n)}}}},i.prototype.sortList=function(){for(var t=this.axisList,e=this.axisIndex,n=t.length,r=0;r!==n;r++){var a=t[r];a.aabbNeedsUpdate&&a.computeAABB()}0===e?i.insertionSortX(t):1===e?i.insertionSortY(t):2===e&&i.insertionSortZ(t)},i.checkBounds=function(t,e,n){var r,i;0===n?(r=t.position.x,i=e.position.x):1===n?(r=t.position.y,i=e.position.y):2===n&&(r=t.position.z,i=e.position.z);var a=t.boundingRadius,o=e.boundingRadius;return i-o<r+a},i.prototype.autoDetectAxis=function(){for(var t=0,e=0,n=0,r=0,i=0,a=0,o=this.axisList,s=o.length,u=1/s,l=0;l!==s;l++){var c=o[l],h=c.position.x;t+=h,e+=h*h;var f=c.position.y;n+=f,r+=f*f;var d=c.position.z;i+=d,a+=d*d}var p=e-t*t*u,v=r-n*n*u,m=a-i*i*u;this.axisIndex=p>v?p>m?0:2:v>m?1:2},i.prototype.aabbQuery=function(t,e,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var a=this.axisList,o=(e.lowerBound[i],e.upperBound[i],0);o<a.length;o++){var s=a[o];s.aabbNeedsUpdate&&s.computeAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(t,e,n){e.exports=s,t("./Constraint");var r=t("./PointToPointConstraint"),i=t("../equations/ConeEquation"),a=t("../equations/RotationalEquation"),o=(t("../equations/ContactEquation"),t("../math/Vec3"));function s(t,e,n){var s="undefined"!==typeof(n=n||{}).maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new o,l=n.pivotB?n.pivotB.clone():new o;this.axisA=n.axisA?n.axisA.clone():new o,this.axisB=n.axisB?n.axisB.clone():new o,r.call(this,t,u,e,l,s),this.collideConnected=!!n.collideConnected,this.angle="undefined"!==typeof n.angle?n.angle:0;var c=this.coneEquation=new i(t,e,n),h=this.twistEquation=new a(t,e,n);this.twistAngle="undefined"!==typeof n.twistAngle?n.twistAngle:0,c.maxForce=0,c.minForce=-s,h.maxForce=0,h.minForce=-s,this.equations.push(c,h)}s.prototype=new r,s.constructor=s,new o,new o,s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.coneEquation,i=this.twistEquation;r.prototype.update.call(this),t.vectorToWorldFrame(this.axisA,n.axisA),e.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(i.axisA,i.axisA),t.vectorToWorldFrame(i.axisA,i.axisA),this.axisB.tangents(i.axisB,i.axisB),e.vectorToWorldFrame(i.axisB,i.axisB),n.angle=this.angle,i.maxAngle=this.twistAngle}},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(t,e,n){e.exports=i;var r=t("../utils/Utils");function i(t,e,n){n=r.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=i.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}i.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},i.prototype.enable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!0},i.prototype.disable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!1},i.idCounter=0},{"../utils/Utils":53}],14:[function(t,e,n){e.exports=a;var r=t("./Constraint"),i=t("../equations/ContactEquation");function a(t,e,n,a){r.call(this,t,e),"undefined"===typeof n&&(n=t.position.distanceTo(e.position)),"undefined"===typeof a&&(a=1e6),this.distance=n;var o=this.distanceEquation=new i(t,e);this.equations.push(o),o.minForce=-a,o.maxForce=a}a.prototype=new r,a.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.distanceEquation,r=.5*this.distance,i=n.ni;e.position.vsub(t.position,i),i.normalize(),i.mult(r,n.ri),i.mult(-r,n.rj)}},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(t,e,n){e.exports=s,t("./Constraint");var r=t("./PointToPointConstraint"),i=t("../equations/RotationalEquation"),a=t("../equations/RotationalMotorEquation"),o=(t("../equations/ContactEquation"),t("../math/Vec3"));function s(t,e,n){var s="undefined"!==typeof(n=n||{}).maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new o,l=n.pivotB?n.pivotB.clone():new o;r.call(this,t,u,e,l,s),(this.axisA=n.axisA?n.axisA.clone():new o(1,0,0)).normalize(),(this.axisB=n.axisB?n.axisB.clone():new o(1,0,0)).normalize();var c=this.rotationalEquation1=new i(t,e,n),h=this.rotationalEquation2=new i(t,e,n),f=this.motorEquation=new a(t,e,s);f.enabled=!1,this.equations.push(c,h,f)}s.prototype=new r,s.constructor=s,s.prototype.enableMotor=function(){this.motorEquation.enabled=!0},s.prototype.disableMotor=function(){this.motorEquation.enabled=!1},s.prototype.setMotorSpeed=function(t){this.motorEquation.targetVelocity=t},s.prototype.setMotorMaxForce=function(t){this.motorEquation.maxForce=t,this.motorEquation.minForce=-t};var u=new o,l=new o;s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.motorEquation,i=this.rotationalEquation1,a=this.rotationalEquation2,o=u,s=l,c=this.axisA,h=this.axisB;r.prototype.update.call(this),t.quaternion.vmult(c,o),e.quaternion.vmult(h,s),o.tangents(i.axisA,a.axisA),i.axisB.copy(s),a.axisB.copy(s),this.motorEquation.enabled&&(t.quaternion.vmult(this.axisA,n.axisA),e.quaternion.vmult(this.axisB,n.axisB))}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(t,e,n){e.exports=o,t("./Constraint");var r=t("./PointToPointConstraint"),i=t("../equations/RotationalEquation"),a=(t("../equations/RotationalMotorEquation"),t("../equations/ContactEquation"),t("../math/Vec3"));function o(t,e,n){var o="undefined"!==typeof(n=n||{}).maxForce?n.maxForce:1e6,s=new a,u=new a,l=new a;t.position.vadd(e.position,l),l.scale(.5,l),e.pointToLocalFrame(l,u),t.pointToLocalFrame(l,s),r.call(this,t,s,e,u,o);var c=this.rotationalEquation1=new i(t,e,n),h=this.rotationalEquation2=new i(t,e,n),f=this.rotationalEquation3=new i(t,e,n);this.equations.push(c,h,f)}o.prototype=new r,o.constructor=o,new a,new a,o.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),i=this.rotationalEquation2,o=this.rotationalEquation3;r.prototype.update.call(this),t.vectorToWorldFrame(a.UNIT_X,n.axisA),e.vectorToWorldFrame(a.UNIT_Y,n.axisB),t.vectorToWorldFrame(a.UNIT_Y,i.axisA),e.vectorToWorldFrame(a.UNIT_Z,i.axisB),t.vectorToWorldFrame(a.UNIT_Z,o.axisA),e.vectorToWorldFrame(a.UNIT_X,o.axisB)}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(t,e,n){e.exports=o;var r=t("./Constraint"),i=t("../equations/ContactEquation"),a=t("../math/Vec3");function o(t,e,n,o,s){r.call(this,t,n),s="undefined"!==typeof s?s:1e6,this.pivotA=e?e.clone():new a,this.pivotB=o?o.clone():new a;var u=this.equationX=new i(t,n),l=this.equationY=new i(t,n),c=this.equationZ=new i(t,n);this.equations.push(u,l,c),u.minForce=l.minForce=c.minForce=-s,u.maxForce=l.maxForce=c.maxForce=s,u.ni.set(1,0,0),l.ni.set(0,1,0),c.ni.set(0,0,1)}o.prototype=new r,o.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.equationX,r=this.equationY,i=this.equationZ;t.quaternion.vmult(this.pivotA,n.ri),e.quaternion.vmult(this.pivotB,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj)}},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(t,e,n){e.exports=a;var r=t("../math/Vec3"),i=(t("../math/Mat3"),t("./Equation"));function a(t,e,n){var a="undefined"!==typeof(n=n||{}).maxForce?n.maxForce:1e6;i.call(this,t,e,-a,a),this.axisA=n.axisA?n.axisA.clone():new r(1,0,0),this.axisB=n.axisB?n.axisB.clone():new r(0,1,0),this.angle="undefined"!==typeof n.angle?n.angle:0}a.prototype=new i,a.prototype.constructor=a;var o=new r,s=new r;a.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.axisA,i=this.axisB,a=o,u=s,l=this.jacobianElementA,c=this.jacobianElementB;return r.cross(i,a),i.cross(r,u),l.rotational.copy(u),c.rotational.copy(a),-(Math.cos(this.angle)-r.dot(i))*e-this.computeGW()*n-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(t,e,n){e.exports=a;var r=t("./Equation"),i=t("../math/Vec3");function a(t,e,n){n="undefined"!==typeof n?n:1e6,r.call(this,t,e,0,n),this.restitution=0,this.ri=new i,this.rj=new i,this.ni=new i}t("../math/Mat3"),a.prototype=new r,a.prototype.constructor=a;var o=new i,s=new i,u=new i;a.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.bi,i=this.bj,a=this.ri,l=this.rj,c=o,h=s,f=r.velocity,d=r.angularVelocity,p=(r.force,r.torque,i.velocity),v=i.angularVelocity,m=(i.force,i.torque,u),g=this.jacobianElementA,y=this.jacobianElementB,_=this.ni;a.cross(_,c),l.cross(_,h),_.negate(g.spatial),c.negate(g.rotational),y.spatial.copy(_),y.rotational.copy(h),m.copy(i.position),m.vadd(l,m),m.vsub(r.position,m),m.vsub(a,m);var b=_.dot(m),x=this.restitution+1;return-b*e-(x*p.dot(_)-x*f.dot(_)+v.dot(h)-d.dot(c))*n-t*this.computeGiMf()};var l=new i,c=new i,h=new i,f=new i,d=new i;a.prototype.getImpactVelocityAlongNormal=function(){var t=l,e=c,n=h,r=f,i=d;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(r,e),t.vsub(e,i),this.ni.dot(i)}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(t,e,n){e.exports=a;var r=t("../math/JacobianElement"),i=t("../math/Vec3");function a(t,e,n,i){this.id=a.id++,this.minForce="undefined"===typeof n?-1e6:n,this.maxForce="undefined"===typeof i?1e6:i,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new r,this.jacobianElementB=new r,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}a.prototype.constructor=a,a.id=0,a.prototype.setSpookParams=function(t,e,n){var r=e,i=t,a=n;this.a=4/(a*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(a*a*i*(1+4*r))},a.prototype.computeB=function(t,e,n){var r=this.computeGW();return-this.computeGq()*t-r*e-this.computeGiMf()*n},a.prototype.computeGq=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,a=r.position;return t.spatial.dot(i)+e.spatial.dot(a)};var o=new i;a.prototype.computeGW=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,a=r.velocity,s=n.angularVelocity||o,u=r.angularVelocity||o;return t.multiplyVectors(i,s)+e.multiplyVectors(a,u)},a.prototype.computeGWlambda=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,a=r.vlambda,s=n.wlambda||o,u=r.wlambda||o;return t.multiplyVectors(i,s)+e.multiplyVectors(a,u)};var s=new i,u=new i,l=new i,c=new i;a.prototype.computeGiMf=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,a=n.torque,o=r.force,h=r.torque,f=n.invMassSolve,d=r.invMassSolve;return n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(a,l):l.set(0,0,0),r.invInertiaWorldSolve?r.invInertiaWorldSolve.vmult(h,c):c.set(0,0,0),i.mult(f,s),o.mult(d,u),t.multiplyVectors(s,l)+e.multiplyVectors(u,c)};var h=new i;a.prototype.computeGiMGt=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,a=r.invMassSolve,o=n.invInertiaWorldSolve,s=r.invInertiaWorldSolve,u=i+a;return o&&(o.vmult(t.rotational,h),u+=h.dot(t.rotational)),s&&(s.vmult(e.rotational,h),u+=h.dot(e.rotational)),u};var f=new i;new i,new i,new i,new i,new i,a.prototype.addToWlambda=function(t){var e=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,a=f;e.spatial.mult(r.invMassSolve*t,a),r.vlambda.vadd(a,r.vlambda),n.spatial.mult(i.invMassSolve*t,a),i.vlambda.vadd(a,i.vlambda),r.invInertiaWorldSolve&&(r.invInertiaWorldSolve.vmult(e.rotational,a),a.mult(t,a),r.wlambda.vadd(a,r.wlambda)),i.invInertiaWorldSolve&&(i.invInertiaWorldSolve.vmult(n.rotational,a),a.mult(t,a),i.wlambda.vadd(a,i.wlambda))},a.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(t,e,n){e.exports=a;var r=t("./Equation"),i=t("../math/Vec3");function a(t,e,n){r.call(this,t,e,-n,n),this.ri=new i,this.rj=new i,this.t=new i}t("../math/Mat3"),a.prototype=new r,a.prototype.constructor=a;var o=new i,s=new i;a.prototype.computeB=function(t){this.a;var e=this.b,n=(this.bi,this.bj,this.ri),r=this.rj,i=o,a=s,u=this.t;n.cross(u,i),r.cross(u,a);var l=this.jacobianElementA,c=this.jacobianElementB;return u.negate(l.spatial),i.negate(l.rotational),c.spatial.copy(u),c.rotational.copy(a),-this.computeGW()*e-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(t,e,n){e.exports=a;var r=t("../math/Vec3"),i=(t("../math/Mat3"),t("./Equation"));function a(t,e,n){var a="undefined"!==typeof(n=n||{}).maxForce?n.maxForce:1e6;i.call(this,t,e,-a,a),this.axisA=n.axisA?n.axisA.clone():new r(1,0,0),this.axisB=n.axisB?n.axisB.clone():new r(0,1,0),this.maxAngle=Math.PI/2}a.prototype=new i,a.prototype.constructor=a;var o=new r,s=new r;a.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.axisA,i=this.axisB,a=o,u=s,l=this.jacobianElementA,c=this.jacobianElementB;return r.cross(i,a),i.cross(r,u),l.rotational.copy(u),c.rotational.copy(a),-(Math.cos(this.maxAngle)-r.dot(i))*e-this.computeGW()*n-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(t,e,n){e.exports=a;var r=t("../math/Vec3"),i=(t("../math/Mat3"),t("./Equation"));function a(t,e,n){n="undefined"!==typeof n?n:1e6,i.call(this,t,e,-n,n),this.axisA=new r,this.axisB=new r,this.targetVelocity=0}a.prototype=new i,a.prototype.constructor=a,a.prototype.computeB=function(t){this.a;var e=this.b,n=(this.bi,this.bj,this.axisA),r=this.axisB,i=this.jacobianElementA,a=this.jacobianElementB;return i.rotational.copy(n),r.negate(a.rotational),-(this.computeGW()-this.targetVelocity)*e-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(t,e,n){var r=t("../utils/Utils");function i(t,e,n){n=r.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=i.idCounter++,this.materials=[t,e],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}e.exports=i,i.idCounter=0},{"../utils/Utils":53}],25:[function(t,e,n){function r(t){var e="";"string"===typeof(t=t||{})?(e=t,t={}):"object"===typeof t&&(e=""),this.name=e,this.id=r.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}e.exports=r,r.idCounter=0},{}],26:[function(t,e,n){e.exports=i;var r=t("./Vec3");function i(){this.spatial=new r,this.rotational=new r}i.prototype.multiplyElement=function(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)},i.prototype.multiplyVectors=function(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}},{"./Vec3":30}],27:[function(t,e,n){e.exports=i;var r=t("./Vec3");function i(t){this.elements=t||[0,0,0,0,0,0,0,0,0]}i.prototype.identity=function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1},i.prototype.setZero=function(){var t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0},i.prototype.setTrace=function(t){var e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z},i.prototype.getTrace=function(t){t=t||new r;var e=this.elements;t.x=e[0],t.y=e[4],t.z=e[8]},i.prototype.vmult=function(t,e){e=e||new r;var n=this.elements,i=t.x,a=t.y,o=t.z;return e.x=n[0]*i+n[1]*a+n[2]*o,e.y=n[3]*i+n[4]*a+n[5]*o,e.z=n[6]*i+n[7]*a+n[8]*o,e},i.prototype.smult=function(t){for(var e=0;e<this.elements.length;e++)this.elements[e]*=t},i.prototype.mmult=function(t,e){for(var n=e||new i,r=0;r<3;r++)for(var a=0;a<3;a++){for(var o=0,s=0;s<3;s++)o+=t.elements[r+3*s]*this.elements[s+3*a];n.elements[r+3*a]=o}return n},i.prototype.scale=function(t,e){e=e||new i;for(var n=this.elements,r=e.elements,a=0;3!==a;a++)r[3*a+0]=t.x*n[3*a+0],r[3*a+1]=t.y*n[3*a+1],r[3*a+2]=t.z*n[3*a+2];return e},i.prototype.solve=function(t,e){e=e||new r;for(var n,i=3,a=4,o=[],s=0;s<i*a;s++)o.push(0);for(s=0;s<3;s++)for(n=0;n<3;n++)o[s+a*n]=this.elements[s+3*n];o[3]=t.x,o[7]=t.y,o[11]=t.z;var u,l,c=3,h=c,f=4;do{if(0===o[(s=h-c)+a*s])for(n=s+1;n<h;n++)if(0!==o[s+a*n]){u=f;do{o[(l=f-u)+a*s]+=o[l+a*n]}while(--u);break}if(0!==o[s+a*s])for(n=s+1;n<h;n++){var d=o[s+a*n]/o[s+a*s];u=f;do{o[(l=f-u)+a*n]=l<=s?0:o[l+a*n]-o[l+a*s]*d}while(--u)}}while(--c);if(e.z=o[2*a+3]/o[2*a+2],e.y=(o[1*a+3]-o[1*a+2]*e.z)/o[1*a+1],e.x=(o[0*a+3]-o[0*a+2]*e.z-o[0*a+1]*e.y)/o[0*a+0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw"Could not solve equation! Got x=["+e.toString()+"], b=["+t.toString()+"], A=["+this.toString()+"]";return e},i.prototype.e=function(t,e,n){if(void 0===n)return this.elements[e+3*t];this.elements[e+3*t]=n},i.prototype.copy=function(t){for(var e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this},i.prototype.toString=function(){for(var t="",e=",",n=0;n<9;n++)t+=this.elements[n]+e;return t},i.prototype.reverse=function(t){t=t||new i;for(var e,n=3,r=6,a=[],o=0;o<n*r;o++)a.push(0);for(o=0;o<3;o++)for(e=0;e<3;e++)a[o+r*e]=this.elements[o+3*e];a[3]=1,a[9]=0,a[15]=0,a[4]=0,a[10]=1,a[16]=0,a[5]=0,a[11]=0,a[17]=1;var s,u,l=3,c=l,h=r;do{if(0===a[(o=c-l)+r*o])for(e=o+1;e<c;e++)if(0!==a[o+r*e]){s=h;do{a[(u=h-s)+r*o]+=a[u+r*e]}while(--s);break}if(0!==a[o+r*o])for(e=o+1;e<c;e++){var f=a[o+r*e]/a[o+r*o];s=h;do{a[(u=h-s)+r*e]=u<=o?0:a[u+r*e]-a[u+r*o]*f}while(--s)}}while(--l);o=2;do{e=o-1;do{f=a[o+r*e]/a[o+r*o],s=r;do{a[(u=r-s)+r*e]=a[u+r*e]-a[u+r*o]*f}while(--s)}while(e--)}while(--o);o=2;do{f=1/a[o+r*o],s=r;do{a[(u=r-s)+r*o]=a[u+r*o]*f}while(--s)}while(o--);o=2;do{e=2;do{if(u=a[n+e+r*o],isNaN(u)||u===1/0)throw"Could not reverse! A=["+this.toString()+"]";t.e(o,e,u)}while(e--)}while(o--);return t},i.prototype.setRotationFromQuaternion=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,o=n+n,s=r+r,u=e*a,l=e*o,c=e*s,h=n*o,f=n*s,d=r*s,p=i*a,v=i*o,m=i*s,g=this.elements;return g[0]=1-(h+d),g[1]=l-m,g[2]=c+v,g[3]=l+m,g[4]=1-(u+d),g[5]=f-p,g[6]=c-v,g[7]=f+p,g[8]=1-(u+h),this},i.prototype.transpose=function(t){for(var e=(t=t||new i).elements,n=this.elements,r=0;3!==r;r++)for(var a=0;3!==a;a++)e[3*r+a]=n[3*a+r];return t}},{"./Vec3":30}],28:[function(t,e,n){e.exports=i;var r=t("./Vec3");function i(t,e,n,r){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0,this.w=void 0!==r?r:1}i.prototype.set=function(t,e,n,r){this.x=t,this.y=e,this.z=n,this.w=r},i.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},i.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},i.prototype.setFromAxisAngle=function(t,e){var n=Math.sin(.5*e);this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(.5*e)},i.prototype.toAxisAngle=function(t){t=t||new r,this.normalize();var e=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,e]};var a=new r,o=new r;i.prototype.setFromVectors=function(t,e){if(t.isAntiparallelTo(e)){var n=a,r=o;t.tangents(n,r),this.setFromAxisAngle(n,Math.PI)}else{var i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Math.pow(t.norm(),2)*Math.pow(e.norm(),2))+t.dot(e),this.normalize()}};var s=new r,u=new r,l=new r;i.prototype.mult=function(t,e){e=e||new i;var n=this.w,r=s,a=u,o=l;return r.set(this.x,this.y,this.z),a.set(t.x,t.y,t.z),e.w=n*t.w-r.dot(a),r.cross(a,o),e.x=n*a.x+t.w*r.x+o.x,e.y=n*a.y+t.w*r.y+o.y,e.z=n*a.z+t.w*r.z+o.z,e},i.prototype.inverse=function(t){var e=this.x,n=this.y,r=this.z,a=this.w;t=t||new i,this.conjugate(t);var o=1/(e*e+n*n+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t},i.prototype.conjugate=function(t){return(t=t||new i).x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t},i.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t)},i.prototype.normalizeFast=function(){var t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t)},i.prototype.vmult=function(t,e){e=e||new r;var n=t.x,i=t.y,a=t.z,o=this.x,s=this.y,u=this.z,l=this.w,c=l*n+s*a-u*i,h=l*i+u*n-o*a,f=l*a+o*i-s*n,d=-o*n-s*i-u*a;return e.x=c*l+d*-o+h*-u-f*-s,e.y=h*l+d*-s+f*-o-c*-u,e.z=f*l+d*-u+c*-s-h*-o,e},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},i.prototype.toEuler=function(t,e){var n,r,i;e=e||"YZX";var a=this.x,o=this.y,s=this.z,u=this.w;switch(e){case"YZX":var l=a*o+s*u;if(l>.499&&(n=2*Math.atan2(a,u),r=Math.PI/2,i=0),l<-.499&&(n=-2*Math.atan2(a,u),r=-Math.PI/2,i=0),isNaN(n)){var c=a*a,h=o*o,f=s*s;n=Math.atan2(2*o*u-2*a*s,1-2*h-2*f),r=Math.asin(2*l),i=Math.atan2(2*a*u-2*o*s,1-2*c-2*f)}break;default:throw new Error("Euler order "+e+" not supported yet.")}t.y=n,t.z=r,t.x=i},i.prototype.setFromEuler=function(t,e,n,r){r=r||"XYZ";var i=Math.cos(t/2),a=Math.cos(e/2),o=Math.cos(n/2),s=Math.sin(t/2),u=Math.sin(e/2),l=Math.sin(n/2);return"XYZ"===r?(this.x=s*a*o+i*u*l,this.y=i*u*o-s*a*l,this.z=i*a*l+s*u*o,this.w=i*a*o-s*u*l):"YXZ"===r?(this.x=s*a*o+i*u*l,this.y=i*u*o-s*a*l,this.z=i*a*l-s*u*o,this.w=i*a*o+s*u*l):"ZXY"===r?(this.x=s*a*o-i*u*l,this.y=i*u*o+s*a*l,this.z=i*a*l+s*u*o,this.w=i*a*o-s*u*l):"ZYX"===r?(this.x=s*a*o-i*u*l,this.y=i*u*o+s*a*l,this.z=i*a*l-s*u*o,this.w=i*a*o+s*u*l):"YZX"===r?(this.x=s*a*o+i*u*l,this.y=i*u*o+s*a*l,this.z=i*a*l-s*u*o,this.w=i*a*o-s*u*l):"XZY"===r&&(this.x=s*a*o-i*u*l,this.y=i*u*o-s*a*l,this.z=i*a*l+s*u*o,this.w=i*a*o+s*u*l),this},i.prototype.clone=function(){return new i(this.x,this.y,this.z,this.w)}},{"./Vec3":30}],29:[function(t,e,n){var r=t("./Vec3"),i=t("./Quaternion");function a(t){t=t||{},this.position=new r,t.position&&this.position.copy(t.position),this.quaternion=new i,t.quaternion&&this.quaternion.copy(t.quaternion)}e.exports=a;var o=new i;a.pointToLocalFrame=function(t,e,n,i){return i=i||new r,n.vsub(t,i),e.conjugate(o),o.vmult(i,i),i},a.prototype.pointToLocal=function(t,e){return a.pointToLocalFrame(this.position,this.quaternion,t,e)},a.pointToWorldFrame=function(t,e,n,i){return i=i||new r,e.vmult(n,i),i.vadd(t,i),i},a.prototype.pointToWorld=function(t,e){return a.pointToWorldFrame(this.position,this.quaternion,t,e)},a.prototype.vectorToWorldFrame=function(t,e){return e=e||new r,this.quaternion.vmult(t,e),e},a.vectorToWorldFrame=function(t,e,n){return t.vmult(e,n),n},a.vectorToLocalFrame=function(t,e,n,i){return i=i||new r,e.w*=-1,e.vmult(n,i),e.w*=-1,i}},{"./Quaternion":28,"./Vec3":30}],30:[function(t,e,n){e.exports=i;var r=t("./Mat3");function i(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}i.ZERO=new i(0,0,0),i.UNIT_X=new i(1,0,0),i.UNIT_Y=new i(0,1,0),i.UNIT_Z=new i(0,0,1),i.prototype.cross=function(t,e){var n=t.x,r=t.y,a=t.z,o=this.x,s=this.y,u=this.z;return(e=e||new i).x=s*a-u*r,e.y=u*n-o*a,e.z=o*r-s*n,e},i.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},i.prototype.setZero=function(){this.x=this.y=this.z=0},i.prototype.vadd=function(t,e){if(!e)return new i(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z},i.prototype.vsub=function(t,e){if(!e)return new i(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z},i.prototype.crossmat=function(){return new r([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},i.prototype.normalize=function(){var t=this.x,e=this.y,n=this.z,r=Math.sqrt(t*t+e*e+n*n);if(r>0){var i=1/r;this.x*=i,this.y*=i,this.z*=i}else this.x=0,this.y=0,this.z=0;return r},i.prototype.unit=function(t){t=t||new i;var e=this.x,n=this.y,r=this.z,a=Math.sqrt(e*e+n*n+r*r);return a>0?(a=1/a,t.x=e*a,t.y=n*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t},i.prototype.norm=function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},i.prototype.length=i.prototype.norm,i.prototype.norm2=function(){return this.dot(this)},i.prototype.lengthSquared=i.prototype.norm2,i.prototype.distanceTo=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z;return Math.sqrt((i-e)*(i-e)+(a-n)*(a-n)+(o-r)*(o-r))},i.prototype.distanceSquared=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z;return(i-e)*(i-e)+(a-n)*(a-n)+(o-r)*(o-r)},i.prototype.mult=function(t,e){e=e||new i;var n=this.x,r=this.y,a=this.z;return e.x=t*n,e.y=t*r,e.z=t*a,e},i.prototype.scale=i.prototype.mult,i.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},i.prototype.negate=function(t){return(t=t||new i).x=-this.x,t.y=-this.y,t.z=-this.z,t};var a=new i,o=new i;i.prototype.tangents=function(t,e){var n=this.norm();if(n>0){var r=a,i=1/n;r.set(this.x*i,this.y*i,this.z*i);var s=o;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,t)):(s.set(0,1,0),r.cross(s,t)),r.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)},i.prototype.toString=function(){return this.x+","+this.y+","+this.z},i.prototype.toArray=function(){return[this.x,this.y,this.z]},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.prototype.lerp=function(t,e,n){var r=this.x,i=this.y,a=this.z;n.x=r+(t.x-r)*e,n.y=i+(t.y-i)*e,n.z=a+(t.z-a)*e},i.prototype.almostEquals=function(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)},i.prototype.almostZero=function(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)};var s=new i;i.prototype.isAntiparallelTo=function(t,e){return this.negate(s),s.almostEquals(t,e)},i.prototype.clone=function(){return new i(this.x,this.y,this.z)}},{"./Mat3":27}],31:[function(t,e,n){e.exports=l;var r=t("../utils/EventTarget"),i=(t("../shapes/Shape"),t("../math/Vec3")),a=t("../math/Mat3"),o=t("../math/Quaternion"),s=(t("../material/Material"),t("../collision/AABB")),u=t("../shapes/Box");function l(t){t=t||{},r.apply(this),this.id=l.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new i,this.collisionFilterGroup="number"===typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"===typeof t.collisionFilterMask?t.collisionFilterMask:1,this.collisionResponse=!0,this.position=new i,t.position&&this.position.copy(t.position),this.previousPosition=new i,this.initPosition=new i,this.velocity=new i,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new i,this.force=new i;var e="number"===typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"===typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?l.STATIC:l.DYNAMIC,typeof t.type===typeof l.STATIC&&(this.type=t.type),this.allowSleep="undefined"===typeof t.allowSleep||t.allowSleep,this.sleepState=0,this.sleepSpeedLimit="undefined"!==typeof t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit="undefined"!==typeof t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new i,this.quaternion=new o,t.quaternion&&this.quaternion.copy(t.quaternion),this.initQuaternion=new o,this.angularVelocity=new i,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new i,this.interpolatedPosition=new i,this.interpolatedQuaternion=new o,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new i,this.invInertia=new i,this.invInertiaWorld=new a,this.invMassSolve=0,this.invInertiaSolve=new i,this.invInertiaWorldSolve=new a,this.fixedRotation="undefined"!==typeof t.fixedRotation&&t.fixedRotation,this.angularDamping="undefined"!==typeof t.angularDamping?t.angularDamping:.01,this.aabb=new s,this.aabbNeedsUpdate=!0,this.wlambda=new i,t.shape&&this.addShape(t.shape),this.updateMassProperties()}l.prototype=new r,l.prototype.constructor=l,l.DYNAMIC=1,l.STATIC=2,l.KINEMATIC=4,l.AWAKE=0,l.SLEEPY=1,l.SLEEPING=2,l.idCounter=0,l.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=0,t===l.SLEEPING&&this.dispatchEvent({type:"wakeup"})},l.prototype.sleep=function(){this.sleepState=l.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},l.sleepyEvent={type:"sleepy"},l.sleepEvent={type:"sleep"},l.prototype.sleepTick=function(t){if(this.allowSleep){var e=this.sleepState,n=this.velocity.norm2()+this.angularVelocity.norm2(),r=Math.pow(this.sleepSpeedLimit,2);e===l.AWAKE&&n<r?(this.sleepState=l.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(l.sleepyEvent)):e===l.SLEEPY&&n>r?this.wakeUp():e===l.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(l.sleepEvent))}},l.prototype.updateSolveMassProperties=function(){this.sleepState===l.SLEEPING||this.type===l.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},l.prototype.pointToLocalFrame=function(t,e){return e=e||new i,t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e},l.prototype.vectorToLocalFrame=function(t,e){return e=e||new i,this.quaternion.conjugate().vmult(t,e),e},l.prototype.pointToWorldFrame=function(t,e){return e=e||new i,this.quaternion.vmult(t,e),e.vadd(this.position,e),e},l.prototype.vectorToWorldFrame=function(t,e){return e=e||new i,this.quaternion.vmult(t,e),e};var c=new i,h=new o;l.prototype.addShape=function(t,e,n){var r=new i,a=new o;return e&&r.copy(e),n&&a.copy(n),this.shapes.push(t),this.shapeOffsets.push(r),this.shapeOrientations.push(a),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},l.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=this.shapeOffsets,n=t.length,r=0,i=0;i!==n;i++){var a=t[i];a.updateBoundingSphereRadius();var o=e[i].norm(),s=a.boundingSphereRadius;o+s>r&&(r=o+s)}this.boundingRadius=r};var f=new s;l.prototype.computeAABB=function(){for(var t=this.shapes,e=this.shapeOffsets,n=this.shapeOrientations,r=t.length,i=c,a=h,o=this.quaternion,s=this.aabb,u=f,l=0;l!==r;l++){var d=t[l];n[l].mult(o,a),a.vmult(e[l],i),i.vadd(this.position,i),d.calculateWorldAABB(i,a,u.lowerBound,u.upperBound),0===l?s.copy(u):s.extend(u)}this.aabbNeedsUpdate=!1};var d=new a,p=new a;new a,l.prototype.updateInertiaWorld=function(t){var e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){var n=d,r=p;n.setRotationFromQuaternion(this.quaternion),n.transpose(r),n.scale(e,n),n.mmult(r,this.invInertiaWorld)}};var v=new i,m=new i;l.prototype.applyForce=function(t,e){if(this.type===l.DYNAMIC){var n=v;e.vsub(this.position,n);var r=m;n.cross(t,r),this.force.vadd(t,this.force),this.torque.vadd(r,this.torque)}};var g=new i,y=new i;l.prototype.applyLocalForce=function(t,e){if(this.type===l.DYNAMIC){var n=g,r=y;this.vectorToWorldFrame(t,n),this.pointToWorldFrame(e,r),this.applyForce(n,r)}};var _=new i,b=new i,x=new i;l.prototype.applyImpulse=function(t,e){if(this.type===l.DYNAMIC){var n=_;e.vsub(this.position,n);var r=b;r.copy(t),r.mult(this.invMass,r),this.velocity.vadd(r,this.velocity);var i=x;n.cross(t,i),this.invInertiaWorld.vmult(i,i),this.angularVelocity.vadd(i,this.angularVelocity)}};var w=new i,S=new i;l.prototype.applyLocalImpulse=function(t,e){if(this.type===l.DYNAMIC){var n=w,r=S;this.vectorToWorldFrame(t,n),this.pointToWorldFrame(e,r),this.applyImpulse(n,r)}};var k=new i;l.prototype.updateMassProperties=function(){var t=k;this.invMass=this.mass>0?1/this.mass:0;var e=this.inertia,n=this.fixedRotation;this.computeAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),u.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!n?1/e.x:0,e.y>0&&!n?1/e.y:0,e.z>0&&!n?1/e.z:0),this.updateInertiaWorld(!0)},l.prototype.getVelocityAtWorldPoint=function(t,e){var n=new i;return t.vsub(this.position,n),this.angularVelocity.cross(n,e),this.velocity.vadd(e,e),e}},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(t,e,n){t("./Body");var r=t("../math/Vec3"),i=t("../math/Quaternion"),a=(t("../collision/RaycastResult"),t("../collision/Ray")),o=t("../objects/WheelInfo");function s(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis="undefined"!==typeof t.indexRightAxis?t.indexRightAxis:1,this.indexForwardAxis="undefined"!==typeof t.indexForwardAxis?t.indexForwardAxis:0,this.indexUpAxis="undefined"!==typeof t.indexUpAxis?t.indexUpAxis:2}e.exports=s,new r,new r,new r;var u=new r,l=new r,c=new r;new a,s.prototype.addWheel=function(t){var e=new o(t=t||{}),n=this.wheelInfos.length;return this.wheelInfos.push(e),n},s.prototype.setSteeringValue=function(t,e){this.wheelInfos[e].steering=t},new r,s.prototype.applyEngineForce=function(t,e){this.wheelInfos[e].engineForce=t},s.prototype.setBrake=function(t,e){this.wheelInfos[e].brake=t},s.prototype.addToWorld=function(t){this.constraints,t.add(this.chassisBody);var e=this;this.preStepCallback=function(){e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t},s.prototype.getVehicleAxisWorld=function(t,e){e.set(0===t?1:0,1===t?1:0,2===t?1:0),this.chassisBody.vectorToWorldFrame(e,e)},s.prototype.updateVehicle=function(t){for(var e=this.wheelInfos,n=e.length,i=this.chassisBody,a=0;a<n;a++)this.updateWheelTransform(a);this.currentVehicleSpeedKmHour=3.6*i.velocity.norm();var o=new r;for(this.getVehicleAxisWorld(this.indexForwardAxis,o),o.dot(i.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1),a=0;a<n;a++)this.castRay(e[a]);this.updateSuspension(t);var s=new r,u=new r;for(a=0;a<n;a++){var l=(d=e[a]).suspensionForce;l>d.maxSuspensionForce&&(l=d.maxSuspensionForce),d.raycastResult.hitNormalWorld.scale(l*t,s),d.raycastResult.hitPointWorld.vsub(i.position,u),i.applyImpulse(s,d.raycastResult.hitPointWorld)}this.updateFriction(t);var c=new r,h=new r,f=new r;for(a=0;a<n;a++){var d=e[a];i.getVelocityAtWorldPoint(d.chassisConnectionPointWorld,f);var p=1;switch(this.indexUpAxis){case 1:p=-1}if(d.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,h);var v=h.dot(d.raycastResult.hitNormalWorld);d.raycastResult.hitNormalWorld.scale(v,c),h.vsub(c,h);var m=h.dot(f);d.deltaRotation=p*m*t/d.radius}!d.sliding&&d.isInContact||0===d.engineForce||!d.useCustomSlidingRotationalSpeed||(d.deltaRotation=(d.engineForce>0?1:-1)*d.customSlidingRotationalSpeed*t),Math.abs(d.brake)>Math.abs(d.engineForce)&&(d.deltaRotation=0),d.rotation+=d.deltaRotation,d.deltaRotation*=.99}},s.prototype.updateSuspension=function(t){for(var e=this.chassisBody.mass,n=this.wheelInfos,r=n.length,i=0;i<r;i++){var a=n[i];if(a.isInContact){var o,s=a.suspensionRestLength-a.suspensionLength;o=a.suspensionStiffness*s*a.clippedInvContactDotSuspension;var u=a.suspensionRelativeVelocity;o-=(u<0?a.dampingCompression:a.dampingRelaxation)*u,a.suspensionForce=o*e,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}},s.prototype.removeFromWorld=function(t){this.constraints,t.remove(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null};var h=new r,f=new r;s.prototype.castRay=function(t){var e=h,n=f;this.updateWheelTransformWorld(t);var i=this.chassisBody,a=-1,o=t.suspensionRestLength+t.radius;t.directionWorld.scale(o,e);var s=t.chassisConnectionPointWorld;s.vadd(e,n);var u=t.raycastResult;u.reset();var l=i.collisionResponse;i.collisionResponse=!1,this.world.rayTest(s,n,u),i.collisionResponse=l;var c=u.body;if(t.raycastResult.groundObject=0,c){a=u.distance,t.raycastResult.hitNormalWorld=u.hitNormalWorld,t.isInContact=!0;var d=u.distance;t.suspensionLength=d-t.radius;var p=t.suspensionRestLength-t.maxSuspensionTravel,v=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<p&&(t.suspensionLength=p),t.suspensionLength>v&&(t.suspensionLength=v,t.raycastResult.reset());var m=t.raycastResult.hitNormalWorld.dot(t.directionWorld),g=new r;i.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,g);var y=t.raycastResult.hitNormalWorld.dot(g);if(m>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=10;else{var _=-1/m;t.suspensionRelativeVelocity=y*_,t.clippedInvContactDotSuspension=_}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return a},s.prototype.updateWheelTransformWorld=function(t){t.isInContact=!1;var e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)},s.prototype.updateWheelTransform=function(t){var e=u,n=l,r=c,a=this.wheelInfos[t];this.updateWheelTransformWorld(a),a.directionLocal.scale(-1,e),n.copy(a.axleLocal),e.cross(n,r),r.normalize(),n.normalize();var o=a.steering,s=new i;s.setFromAxisAngle(e,o);var h=new i;h.setFromAxisAngle(n,a.rotation);var f=a.worldTransform.quaternion;this.chassisBody.quaternion.mult(s,f),f.mult(h,f),f.normalize();var d=a.worldTransform.position;d.copy(a.directionWorld),d.scale(a.suspensionLength,d),d.vadd(a.chassisConnectionPointWorld,d)};var d=[new r(1,0,0),new r(0,1,0),new r(0,0,1)];s.prototype.getWheelTransformWorld=function(t){return this.wheelInfos[t].worldTransform};var p=new r,v=[],m=[],g=1;s.prototype.updateFriction=function(t){for(var e=p,n=this.wheelInfos,i=n.length,a=this.chassisBody,o=m,s=v,u=0;u<i;u++)_=(P=n[u]).raycastResult.body,P.sideImpulse=0,P.forwardImpulse=0,o[u]||(o[u]=new r),s[u]||(s[u]=new r);for(u=0;u<i;u++)if(_=(P=n[u]).raycastResult.body){var l=s[u];this.getWheelTransformWorld(u).vectorToWorldFrame(d[this.indexRightAxis],l);var c=P.raycastResult.hitNormalWorld,h=l.dot(c);c.scale(h,e),l.vsub(e,l),l.normalize(),c.cross(l,o[u]),o[u].normalize(),P.sideImpulse=A(a,P.raycastResult.hitPointWorld,_,P.raycastResult.hitPointWorld,l),P.sideImpulse*=g}var f=1,y=.5;for(this.sliding=!1,u=0;u<i;u++){var _=(P=n[u]).raycastResult.body,b=0;if(P.slipInfo=1,_){var w=0,S=P.brake?P.brake:w;b=x(a,_,P.raycastResult.hitPointWorld,o[u],S);var k=S/(b+=P.engineForce*t);P.slipInfo*=k}if(P.forwardImpulse=0,P.skidInfo=1,_){P.skidInfo=1;var T=P.suspensionForce*t*P.frictionSlip,E=T*T;P.forwardImpulse=b;var C=P.forwardImpulse*y,O=P.sideImpulse*f,M=C*C+O*O;P.sliding=!1,M>E&&(this.sliding=!0,P.sliding=!0,k=T/Math.sqrt(M),P.skidInfo*=k)}}if(this.sliding)for(u=0;u<i;u++)0!==(P=n[u]).sideImpulse&&P.skidInfo<1&&(P.forwardImpulse*=P.skidInfo,P.sideImpulse*=P.skidInfo);for(u=0;u<i;u++){var P=n[u],L=new r;if(L.copy(P.raycastResult.hitPointWorld),0!==P.forwardImpulse){var R=new r;o[u].scale(P.forwardImpulse,R),a.applyImpulse(R,L)}if(0!==P.sideImpulse){_=P.raycastResult.body;var j=new r;j.copy(P.raycastResult.hitPointWorld);var I=new r;s[u].scale(P.sideImpulse,I),a.pointToLocalFrame(L,L),L["xyz"[this.indexUpAxis]]*=P.rollInfluence,a.pointToWorldFrame(L,L),a.applyImpulse(I,L),I.scale(-1,I),_.applyImpulse(I,j)}}};var y=new r,_=new r,b=new r;function x(t,e,n,r,i){var a=0,o=n,s=y,u=_,l=b;return t.getVelocityAtWorldPoint(o,s),e.getVelocityAtWorldPoint(o,u),s.vsub(u,l),i<(a=-r.dot(l)*(1/(E(t,n,r)+E(e,n,r))))&&(a=i),a<-i&&(a=-i),a}var w=new r,S=new r,k=new r,T=new r;function E(t,e,n){var r=w,i=S,a=k,o=T;return e.vsub(t.position,r),r.cross(n,i),t.invInertiaWorld.vmult(i,o),o.cross(r,a),t.invMass+n.dot(a)}var C=new r,O=new r,M=new r;function A(t,e,n,r,i,a){if(i.norm2()>1.1)return 0;var o=C,s=O,u=M;return t.getVelocityAtWorldPoint(e,o),n.getVelocityAtWorldPoint(r,s),o.vsub(s,u),-.2*i.dot(u)*(1/(t.invMass+n.invMass))}},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(t,e,n){var r=t("./Body"),i=t("../shapes/Sphere"),a=t("../shapes/Box"),o=t("../math/Vec3"),s=t("../constraints/HingeConstraint");function u(t){if(this.wheelBodies=[],this.coordinateSystem="undefined"===typeof t.coordinateSystem?new o(1,2,3):t.coordinateSystem.clone(),this.chassisBody=t.chassisBody,!this.chassisBody){var e=new a(new o(5,2,.5));this.chassisBody=new r(1,e)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}e.exports=u,u.prototype.addWheel=function(t){var e=(t=t||{}).body;e||(e=new r(1,new i(1.2))),this.wheelBodies.push(e),this.wheelForces.push(0),new o;var n="undefined"!==typeof t.position?t.position.clone():new o,a=new o;this.chassisBody.pointToWorldFrame(n,a),e.position.set(a.x,a.y,a.z);var u="undefined"!==typeof t.axis?t.axis.clone():new o(0,1,0);this.wheelAxes.push(u);var l=new s(this.chassisBody,e,{pivotA:n,axisA:u,pivotB:o.ZERO,axisB:u,collideConnected:!1});return this.constraints.push(l),this.wheelBodies.length-1},u.prototype.setSteeringValue=function(t,e){var n=this.wheelAxes[e],r=Math.cos(t),i=Math.sin(t),a=n.x,o=n.y;this.constraints[e].axisA.set(r*a-i*o,i*a+r*o,0)},u.prototype.setMotorSpeed=function(t,e){var n=this.constraints[e];n.enableMotor(),n.motorTargetVelocity=t},u.prototype.disableMotor=function(t){this.constraints[t].disableMotor()};var l=new o;u.prototype.setWheelForce=function(t,e){this.wheelForces[e]=t},u.prototype.applyWheelForce=function(t,e){var n=this.wheelAxes[e],r=this.wheelBodies[e],i=r.torque;n.scale(t,l),r.vectorToWorldFrame(l,l),i.vadd(l,i)},u.prototype.addToWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)t.add(n[r]);for(r=0;r<e.length;r++)t.addConstraint(e[r]);t.addEventListener("preStep",this._update.bind(this))},u.prototype._update=function(){for(var t=this.wheelForces,e=0;e<t.length;e++)this.applyWheelForce(t[e],e)},u.prototype.removeFromWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)t.remove(n[r]);for(r=0;r<e.length;r++)t.removeConstraint(e[r])};var c=new o;u.prototype.getWheelSpeed=function(t){var e=this.wheelAxes[t],n=this.wheelBodies[t].angularVelocity;return this.chassisBody.vectorToWorldFrame(e,c),n.dot(c)}},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(t,e,n){e.exports=i,t("../shapes/Shape");var r=t("../math/Vec3");function i(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}t("../math/Quaternion"),t("../shapes/Particle"),t("../objects/Body"),t("../material/Material"),i.prototype.add=function(t){this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])},i.prototype.remove=function(t){var e=this.particles.indexOf(t);-1!==e&&(this.particles.splice(e,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var a=new r;i.prototype.getNeighbors=function(t,e){for(var n=this.particles.length,r=t.id,i=this.smoothingRadius*this.smoothingRadius,o=a,s=0;s!==n;s++){var u=this.particles[s];u.position.vsub(t.position,o),r!==u.id&&o.norm2()<i&&e.push(u)}};var o=new r,s=new r,u=new r,l=new r,c=new r,h=new r;i.prototype.update=function(){for(var t=this.particles.length,e=o,n=this.speedOfSound,r=this.eps,i=0;i!==t;i++){var a=this.particles[i];(k=this.neighbors[i]).length=0,this.getNeighbors(a,k),k.push(this.particles[i]);for(var f=k.length,d=0,p=0;p!==f;p++){a.position.vsub(k[p].position,e);var v=e.norm(),m=this.w(v);d+=k[p].mass*m}this.densities[i]=d,this.pressures[i]=n*n*(this.densities[i]-this.density)}var g=s,y=u,_=l,b=c,x=h;for(i=0;i!==t;i++){var w,S,k,T=this.particles[i];for(g.set(0,0,0),y.set(0,0,0),f=(k=this.neighbors[i]).length,p=0;p!==f;p++){var E=k[p];T.position.vsub(E.position,b);var C=b.norm();w=-E.mass*(this.pressures[i]/(this.densities[i]*this.densities[i]+r)+this.pressures[p]/(this.densities[p]*this.densities[p]+r)),this.gradw(b,_),_.mult(w,_),g.vadd(_,g),E.velocity.vsub(T.velocity,x),x.mult(1/(1e-4+this.densities[i]*this.densities[p])*this.viscosity*E.mass,x),S=this.nablaw(C),x.mult(S,x),y.vadd(x,y)}y.mult(T.mass,y),g.mult(T.mass,g),T.force.vadd(y,T.force),T.force.vadd(g,T.force)}},i.prototype.w=function(t){var e=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(e,9))*Math.pow(e*e-t*t,3)},i.prototype.gradw=function(t,e){var n=t.norm(),r=this.smoothingRadius;t.mult(945/(32*Math.PI*Math.pow(r,9))*Math.pow(r*r-n*n,2),e)},i.prototype.nablaw=function(t){var e=this.smoothingRadius;return 945/(32*Math.PI*Math.pow(e,9))*(e*e-t*t)*(7*t*t-3*e*e)}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(t,e,n){var r=t("../math/Vec3");function i(t,e,n){n=n||{},this.restLength="number"===typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=t,this.bodyB=e,this.localAnchorA=new r,this.localAnchorB=new r,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}e.exports=i,i.prototype.setWorldAnchorA=function(t){this.bodyA.pointToLocalFrame(t,this.localAnchorA)},i.prototype.setWorldAnchorB=function(t){this.bodyB.pointToLocalFrame(t,this.localAnchorB)},i.prototype.getWorldAnchorA=function(t){this.bodyA.pointToWorldFrame(this.localAnchorA,t)},i.prototype.getWorldAnchorB=function(t){this.bodyB.pointToWorldFrame(this.localAnchorB,t)};var a=new r,o=new r,s=new r,u=new r,l=new r,c=new r,h=new r,f=new r,d=new r,p=new r,v=new r;i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,m=a,g=o,y=s,_=u,b=v,x=l,w=c,S=h,k=f,T=d,E=p;this.getWorldAnchorA(x),this.getWorldAnchorB(w),x.vsub(r.position,S),w.vsub(i.position,k),w.vsub(x,m);var C=m.norm();g.copy(m),g.normalize(),i.velocity.vsub(r.velocity,y),i.angularVelocity.cross(k,b),y.vadd(b,y),r.angularVelocity.cross(S,b),y.vsub(b,y),g.mult(-t*(C-n)-e*y.dot(g),_),r.force.vsub(_,r.force),i.force.vadd(_,i.force),S.cross(_,T),k.cross(_,E),r.torque.vsub(T,r.torque),i.torque.vadd(E,i.torque)}},{"../math/Vec3":30}],36:[function(t,e,n){var r=t("../math/Vec3"),i=t("../math/Transform"),a=t("../collision/RaycastResult"),o=t("../utils/Utils");function s(t){t=o.defaults(t,{chassisConnectionPointLocal:new r,chassisConnectionPointWorld:new r,directionLocal:new r,directionWorld:new r,axleLocal:new r,axleWorld:new r,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new a,this.worldTransform=new i,this.isInContact=!1}e.exports=s;var u=new r,l=new r;u=new r,s.prototype.updateWheel=function(t){var e=this.raycastResult;if(this.isInContact){var n=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,l),t.getVelocityAtWorldPoint(l,u);var r=e.hitNormalWorld.dot(u);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var i=-1/n;this.suspensionRelativeVelocity=r*i,this.clippedInvContactDotSuspension=i}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(t,e,n){e.exports=o;var r=t("./Shape"),i=t("../math/Vec3"),a=t("./ConvexPolyhedron");function o(t){r.call(this),this.type=r.types.BOX,this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}o.prototype=new r,o.prototype.constructor=o,o.prototype.updateConvexPolyhedronRepresentation=function(){var t=this.halfExtents.x,e=this.halfExtents.y,n=this.halfExtents.z,r=i,o=[new r(-t,-e,-n),new r(t,-e,-n),new r(t,e,-n),new r(-t,e,-n),new r(-t,-e,n),new r(t,-e,n),new r(t,e,n),new r(-t,e,n)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],u=(new r(0,0,1),new r(0,1,0),new r(1,0,0),new a(o,s));this.convexPolyhedronRepresentation=u,u.material=this.material},o.prototype.calculateLocalInertia=function(t,e){return e=e||new i,o.calculateInertia(this.halfExtents,t,e),e},o.calculateInertia=function(t,e,n){var r=t;n.x=1/12*e*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*e*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*e*(2*r.y*2*r.y+2*r.x*2*r.x)},o.prototype.getSideNormals=function(t,e){var n=t,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==e)for(var i=0;i!==n.length;i++)e.vmult(n[i],n[i]);return n},o.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var s=new i;new i,o.prototype.forEachWorldCorner=function(t,e,n){for(var r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]],a=0;a<i.length;a++)s.set(i[a][0],i[a][1],i[a][2]),e.vmult(s,s),t.vadd(s,s),n(s.x,s.y,s.z)};var u=[new i,new i,new i,new i,new i,new i,new i,new i];o.prototype.calculateWorldAABB=function(t,e,n,r){var i=this.halfExtents;u[0].set(i.x,i.y,i.z),u[1].set(-i.x,i.y,i.z),u[2].set(-i.x,-i.y,i.z),u[3].set(-i.x,-i.y,-i.z),u[4].set(i.x,-i.y,-i.z),u[5].set(i.x,i.y,-i.z),u[6].set(-i.x,i.y,-i.z),u[7].set(i.x,-i.y,i.z);var a=u[0];e.vmult(a,a),t.vadd(a,a),r.copy(a),n.copy(a);for(var o=1;o<8;o++){a=u[o],e.vmult(a,a),t.vadd(a,a);var s=a.x,l=a.y,c=a.z;s>r.x&&(r.x=s),l>r.y&&(r.y=l),c>r.z&&(r.z=c),s<n.x&&(n.x=s),l<n.y&&(n.y=l),c<n.z&&(n.z=c)}}},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(t,e,n){e.exports=o;var r=t("./Shape"),i=t("../math/Vec3"),a=(t("../math/Quaternion"),t("../math/Transform"));function o(t,e,n){r.call(this),this.type=r.types.CONVEXPOLYHEDRON,this.vertices=t||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=e||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}o.prototype=new r,o.prototype.constructor=o;var s=new i;o.prototype.computeEdges=function(){var t=this.faces,e=this.vertices,n=(e.length,this.uniqueEdges);n.length=0;for(var r=s,i=0;i!==t.length;i++)for(var a=t[i],o=a.length,u=0;u!==o;u++){var l=(u+1)%o;e[a[u]].vsub(e[a[l]],r),r.normalize();for(var c=!1,h=0;h!==n.length;h++)if(n[h].almostEquals(r)||n[h].almostEquals(r)){c=!0;break}c||n.push(r.clone())}},o.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var t=0;t<this.faces.length;t++){for(var e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error("Vertex "+this.faces[t][e]+" not found!");var n=this.faceNormals[t]||new i;this.getFaceNormal(t,n),n.negate(n),this.faceNormals[t]=n;var r=this.vertices[this.faces[t][0]];if(n.dot(r)<0)for(console.error(".faceNormals["+t+"] = Vec3("+n.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."),e=0;e<this.faces[t].length;e++)console.warn(".vertices["+this.faces[t][e]+"] = Vec3("+this.vertices[this.faces[t][e]].toString()+")")}};var u=new i,l=new i;o.computeNormal=function(t,e,n,r){e.vsub(t,l),n.vsub(e,u),u.cross(l,r),r.isZero()||r.normalize()},o.prototype.getFaceNormal=function(t,e){var n=this.faces[t],r=this.vertices[n[0]],i=this.vertices[n[1]],a=this.vertices[n[2]];return o.computeNormal(r,i,a,e)};var c=new i;o.prototype.clipAgainstHull=function(t,e,n,r,a,o,s,u,l){for(var h=c,f=-1,d=-Number.MAX_VALUE,p=0;p<n.faces.length;p++){h.copy(n.faceNormals[p]),a.vmult(h,h);var v=h.dot(o);v>d&&(d=v,f=p)}for(var m=[],g=n.faces[f],y=g.length,_=0;_<y;_++){var b=n.vertices[g[_]],x=new i;x.copy(b),a.vmult(x,x),r.vadd(x,x),m.push(x)}f>=0&&this.clipFaceAgainstHull(o,t,e,m,s,u,l)};var h=new i,f=new i,d=new i,p=new i,v=new i,m=new i;o.prototype.findSeparatingAxis=function(t,e,n,r,i,a,o,s){var u=h,l=f,c=d,g=p,y=v,_=m,b=Number.MAX_VALUE,x=this;if(x.uniqueAxes)for(S=0;S!==x.uniqueAxes.length;S++){if(n.vmult(x.uniqueAxes[S],u),!1===(E=x.testSepAxis(u,t,e,n,r,i)))return!1;E<b&&(b=E,a.copy(u))}else for(var w=o?o.length:x.faces.length,S=0;S<w;S++){var k=o?o[S]:S;if(u.copy(x.faceNormals[k]),n.vmult(u,u),!1===(E=x.testSepAxis(u,t,e,n,r,i)))return!1;E<b&&(b=E,a.copy(u))}if(t.uniqueAxes)for(S=0;S!==t.uniqueAxes.length;S++){if(i.vmult(t.uniqueAxes[S],l),!1===(E=x.testSepAxis(l,t,e,n,r,i)))return!1;E<b&&(b=E,a.copy(l))}else for(var T=s?s.length:t.faces.length,S=0;S<T;S++){var E;if(k=s?s[S]:S,l.copy(t.faceNormals[k]),i.vmult(l,l),!1===(E=x.testSepAxis(l,t,e,n,r,i)))return!1;E<b&&(b=E,a.copy(l))}for(var C=0;C!==x.uniqueEdges.length;C++){n.vmult(x.uniqueEdges[C],g);for(var O=0;O!==t.uniqueEdges.length;O++)if(i.vmult(t.uniqueEdges[O],y),g.cross(y,_),!_.almostZero()){_.normalize();var M=x.testSepAxis(_,t,e,n,r,i);if(!1===M)return!1;M<b&&(b=M,a.copy(_))}}return r.vsub(e,c),c.dot(a)>0&&a.negate(a),!0};var g=[],y=[];o.prototype.testSepAxis=function(t,e,n,r,i,a){var s=this;o.project(s,t,n,r,g),o.project(e,t,i,a,y);var u=g[0],l=g[1],c=y[0],h=y[1];if(u<h||c<l)return!1;var f=u-h,d=c-l;return f<d?f:d};var _=new i,b=new i;o.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(_,b);var n=b.x-_.x,r=b.y-_.y,i=b.z-_.z;e.x=1/12*t*(2*r*2*r+2*i*2*i),e.y=1/12*t*(2*n*2*n+2*i*2*i),e.z=1/12*t*(2*r*2*r+2*n*2*n)},o.prototype.getPlaneConstantOfFace=function(t){var e=this.faces[t],n=this.faceNormals[t],r=this.vertices[e[0]];return-n.dot(r)};var x=new i,w=new i,S=new i,k=new i,T=new i,E=new i,C=new i,O=new i;o.prototype.clipFaceAgainstHull=function(t,e,n,r,i,a,o){for(var s=x,u=w,l=S,c=k,h=T,f=E,d=C,p=O,v=this,m=r,g=[],y=-1,_=Number.MAX_VALUE,b=0;b<v.faces.length;b++){s.copy(v.faceNormals[b]),n.vmult(s,s);var M=s.dot(t);M<_&&(_=M,y=b)}if(!(y<0)){var A=v.faces[y];A.connectedFaces=[];for(var P=0;P<v.faces.length;P++)for(var L=0;L<v.faces[P].length;L++)-1!==A.indexOf(v.faces[P][L])&&P!==y&&-1===A.connectedFaces.indexOf(P)&&A.connectedFaces.push(P);m.length;for(var R=A.length,j=0;j<R;j++){var I=v.vertices[A[j]],D=v.vertices[A[(j+1)%R]];I.vsub(D,u),l.copy(u),n.vmult(l,l),e.vadd(l,l),c.copy(this.faceNormals[y]),n.vmult(c,c),e.vadd(c,c),l.cross(c,h),h.negate(h),f.copy(I),n.vmult(f,f),e.vadd(f,f),f.dot(h);var N=A.connectedFaces[j];d.copy(this.faceNormals[N]);var B=this.getPlaneConstantOfFace(N);p.copy(d),n.vmult(p,p);var z=B-p.dot(e);for(this.clipFaceAgainstPlane(m,g,p,z);m.length;)m.shift();for(;g.length;)m.push(g.shift())}for(d.copy(this.faceNormals[y]),B=this.getPlaneConstantOfFace(y),p.copy(d),n.vmult(p,p),z=B-p.dot(e),P=0;P<m.length;P++){var F=p.dot(m[P])+z;if(F<=i&&(console.log("clamped: depth="+F+" to minDist="+i),F=i),F<=a){var V=m[P];if(F<=0){var U={point:V,normal:p,depth:F};o.push(U)}}}}},o.prototype.clipFaceAgainstPlane=function(t,e,n,r){var a,o,s=t.length;if(s<2)return e;var u=t[t.length-1],l=t[0];a=n.dot(u)+r;for(var c=0;c<s;c++){if(l=t[c],o=n.dot(l)+r,a<0)if(o<0)(h=new i).copy(l),e.push(h);else{var h=new i;u.lerp(l,a/(a-o),h),e.push(h)}else o<0&&(h=new i,u.lerp(l,a/(a-o),h),e.push(h),e.push(l));u=l,a=o}return e},o.prototype.computeWorldVertices=function(t,e){for(var n=this.vertices.length;this.worldVertices.length<n;)this.worldVertices.push(new i);for(var r=this.vertices,a=this.worldVertices,o=0;o!==n;o++)e.vmult(r[o],a[o]),t.vadd(a[o],a[o]);this.worldVerticesNeedsUpdate=!1},new i,o.prototype.computeLocalAABB=function(t,e){var n=this.vertices.length,r=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<n;i++){var a=r[i];a.x<t.x?t.x=a.x:a.x>e.x&&(e.x=a.x),a.y<t.y?t.y=a.y:a.y>e.y&&(e.y=a.y),a.z<t.z?t.z=a.z:a.z>e.z&&(e.z=a.z)}},o.prototype.computeWorldFaceNormals=function(t){for(var e=this.faceNormals.length;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new i);for(var n=this.faceNormals,r=this.worldFaceNormals,a=0;a!==e;a++)t.vmult(n[a],r[a]);this.worldFaceNormalsNeedsUpdate=!1},o.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=0,r=e.length;n!==r;n++){var i=e[n].norm2();i>t&&(t=i)}this.boundingSphereRadius=Math.sqrt(t)};var M=new i;o.prototype.calculateWorldAABB=function(t,e,n,r){for(var i,a,o,s,u,l,c=this.vertices.length,h=this.vertices,f=0;f<c;f++){M.copy(h[f]),e.vmult(M,M),t.vadd(M,M);var d=M;d.x<i||void 0===i?i=d.x:(d.x>s||void 0===s)&&(s=d.x),d.y<a||void 0===a?a=d.y:(d.y>u||void 0===u)&&(u=d.y),d.z<o||void 0===o?o=d.z:(d.z>l||void 0===l)&&(l=d.z)}n.set(i,a,o),r.set(s,u,l)},o.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},o.prototype.getAveragePointLocal=function(t){t=t||new i;for(var e=this.vertices.length,n=this.vertices,r=0;r<e;r++)t.vadd(n[r],t);return t.mult(1/e,t),t},o.prototype.transformAllPoints=function(t,e){var n=this.vertices.length,r=this.vertices;if(e){for(var i=0;i<n;i++){var a=r[i];e.vmult(a,a)}for(i=0;i<this.faceNormals.length;i++)a=this.faceNormals[i],e.vmult(a,a)}if(t)for(i=0;i<n;i++)(a=r[i]).vadd(t,a)};var A=new i,P=new i,L=new i;o.prototype.pointIsInside=function(t){var e=this.vertices.length,n=this.vertices,r=this.faces,i=this.faceNormals,a=null,o=this.faces.length,s=A;this.getAveragePointLocal(s);for(var u=0;u<o;u++){this.faces[u].length,e=i[u];var l=n[r[u][0]],c=P;t.vsub(l,c);var h=e.dot(c),f=L;s.vsub(l,f);var d=e.dot(f);if(h<0&&d>0||h>0&&d<0)return!1}return a?1:-1},new i;var R=new i,j=new i;o.project=function(t,e,n,r,i){var o=t.vertices.length,s=R,u=0,l=0,c=j,h=t.vertices;c.setZero(),a.vectorToLocalFrame(n,r,e,s),a.pointToLocalFrame(n,r,c,c);var f=c.dot(s);l=u=h[0].dot(s);for(var d=1;d<o;d++){var p=h[d].dot(s);p>u&&(u=p),p<l&&(l=p)}if((l-=f)>(u-=f)){var v=l;l=u,u=v}i[0]=u,i[1]=l}},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(t,e,n){e.exports=o;var r=t("./Shape"),i=t("../math/Vec3"),a=(t("../math/Quaternion"),t("./ConvexPolyhedron"));function o(t,e,n,o){var s=o,u=[],l=[],c=[],h=[],f=[],d=Math.cos,p=Math.sin;u.push(new i(e*d(0),e*p(0),.5*-n)),h.push(0),u.push(new i(t*d(0),t*p(0),.5*n)),f.push(1);for(var v=0;v<s;v++){var m=2*Math.PI/s*(v+1),g=2*Math.PI/s*(v+.5);v<s-1?(u.push(new i(e*d(m),e*p(m),.5*-n)),h.push(2*v+2),u.push(new i(t*d(m),t*p(m),.5*n)),f.push(2*v+3),c.push([2*v+2,2*v+3,2*v+1,2*v])):c.push([0,1,2*v+1,2*v]),(s%2===1||v<s/2)&&l.push(new i(d(g),p(g),0))}c.push(f),l.push(new i(0,0,1));var y=[];for(v=0;v<h.length;v++)y.push(h[h.length-v-1]);c.push(y),this.type=r.types.CONVEXPOLYHEDRON,a.call(this,u,c,l)}o.prototype=new a},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(t,e,n){var r=t("./Shape"),i=t("./ConvexPolyhedron"),a=t("../math/Vec3"),o=t("../utils/Utils");function s(t,e){e=o.defaults(e,{maxValue:null,minValue:null,elementSize:1}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,null===e.minValue&&this.updateMinValue(),null===e.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,r.call(this),this.pillarConvex=new i,this.pillarOffset=new a,this.type=r.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}e.exports=s,s.prototype=new r,s.prototype.update=function(){this._cachedPillars={}},s.prototype.updateMinValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var r=0;r!==t[n].length;r++){var i=t[n][r];i<e&&(e=i)}this.minValue=e},s.prototype.updateMaxValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var r=0;r!==t[n].length;r++){var i=t[n][r];i>e&&(e=i)}this.maxValue=e},s.prototype.setHeightValueAtIndex=function(t,e,n){this.data[t][e]=n,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)},s.prototype.getRectMinMax=function(t,e,n,r,i){i=i||[];for(var a=this.data,o=this.minValue,s=t;s<=n;s++)for(var u=e;u<=r;u++){var l=a[s][u];l>o&&(o=l)}i[0]=this.minValue,i[1]=o},s.prototype.getIndexOfPosition=function(t,e,n,r){var i=this.elementSize,a=this.data,o=Math.floor(t/i),s=Math.floor(e/i);return n[0]=o,n[1]=s,r&&(o<0&&(o=0),s<0&&(s=0),o>=a.length-1&&(o=a.length-1),s>=a[0].length-1&&(s=a[0].length-1)),!(o<0||s<0||o>=a.length-1||s>=a[0].length-1)},s.prototype.getHeightAt=function(t,e,n){var r=[];this.getIndexOfPosition(t,e,r,n);var i=[];return this.getRectMinMax(r[0],r[1]+1,r[0],r[1]+1,i),(i[0]+i[1])/2},s.prototype.getCacheConvexTrianglePillarKey=function(t,e,n){return t+"_"+e+"_"+(n?1:0)},s.prototype.getCachedConvexTrianglePillar=function(t,e,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},s.prototype.setCachedConvexTrianglePillar=function(t,e,n,r,i){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]={convex:r,offset:i}},s.prototype.clearCachedConvexTrianglePillar=function(t,e,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},s.prototype.getConvexTrianglePillar=function(t,e,n){var r=this.pillarConvex,o=this.pillarOffset;if(this.cacheEnabled){if(s=this.getCachedConvexTrianglePillar(t,e,n))return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);r=new i,o=new a,this.pillarConvex=r,this.pillarOffset=o}var s=this.data,u=this.elementSize,l=r.faces;r.vertices.length=6;for(var c=0;c<6;c++)r.vertices[c]||(r.vertices[c]=new a);for(l.length=5,c=0;c<5;c++)l[c]||(l[c]=[]);var h=r.vertices,f=(Math.min(s[t][e],s[t+1][e],s[t][e+1],s[t+1][e+1])-this.minValue)/2+this.minValue;n?(o.set((t+.75)*u,(e+.75)*u,f),h[0].set(.25*u,.25*u,s[t+1][e+1]-f),h[1].set(-.75*u,.25*u,s[t][e+1]-f),h[2].set(.25*u,-.75*u,s[t+1][e]-f),h[3].set(.25*u,.25*u,-f-1),h[4].set(-.75*u,.25*u,-f-1),h[5].set(.25*u,-.75*u,-f-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(o.set((t+.25)*u,(e+.25)*u,f),h[0].set(-.25*u,-.25*u,s[t][e]-f),h[1].set(.75*u,-.25*u,s[t+1][e]-f),h[2].set(-.25*u,.75*u,s[t][e+1]-f),h[3].set(-.25*u,-.25*u,-f-1),h[4].set(.75*u,-.25*u,-f-1),h[5].set(-.25*u,.75*u,-f-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),r.computeNormals(),r.computeEdges(),r.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,n,r,o)},s.prototype.calculateLocalInertia=function(t,e){return(e=e||new a).set(0,0,0),e},s.prototype.volume=function(){return Number.MAX_VALUE},s.prototype.calculateWorldAABB=function(t,e,n,r){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),r.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},s.prototype.updateBoundingSphereRadius=function(){var t=this.data,e=this.elementSize;this.boundingSphereRadius=new a(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(t,e,n){e.exports=a;var r=t("./Shape"),i=t("../math/Vec3");function a(){r.call(this),this.type=r.types.PARTICLE}a.prototype=new r,a.prototype.constructor=a,a.prototype.calculateLocalInertia=function(t,e){return(e=e||new i).set(0,0,0),e},a.prototype.volume=function(){return 0},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},a.prototype.calculateWorldAABB=function(t,e,n,r){n.copy(t),r.copy(t)}},{"../math/Vec3":30,"./Shape":43}],42:[function(t,e,n){e.exports=a;var r=t("./Shape"),i=t("../math/Vec3");function a(){r.call(this),this.type=r.types.PLANE,this.worldNormal=new i,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}a.prototype=new r,a.prototype.constructor=a,a.prototype.computeWorldNormal=function(t){var e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1},a.prototype.calculateLocalInertia=function(t,e){return e=e||new i},a.prototype.volume=function(){return Number.MAX_VALUE};var o=new i;a.prototype.calculateWorldAABB=function(t,e,n,r){o.set(0,0,1),e.vmult(o,o);var i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===o.x&&(r.x=t.x),1===o.y&&(r.y=t.y),1===o.z&&(r.z=t.z),-1===o.x&&(n.x=t.x),-1===o.y&&(n.y=t.y),-1===o.z&&(n.z=t.z)},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},{"../math/Vec3":30,"./Shape":43}],43:[function(t,e,n){e.exports=r;var r=t("./Shape");function r(){this.id=r.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}t("../math/Vec3"),t("../math/Quaternion"),t("../material/Material"),r.prototype.constructor=r,r.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},r.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},r.prototype.calculateLocalInertia=function(t,e){throw"calculateLocalInertia() not implemented for shape type "+this.type},r.idCounter=0,r.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(t,e,n){e.exports=a;var r=t("./Shape"),i=t("../math/Vec3");function a(t){if(r.call(this),this.radius=void 0!==t?Number(t):1,this.type=r.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}a.prototype=new r,a.prototype.constructor=a,a.prototype.calculateLocalInertia=function(t,e){e=e||new i;var n=2*t*this.radius*this.radius/5;return e.x=n,e.y=n,e.z=n,e},a.prototype.volume=function(){return 4*Math.PI*this.radius/3},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},a.prototype.calculateWorldAABB=function(t,e,n,r){for(var i=this.radius,a=["x","y","z"],o=0;o<a.length;o++){var s=a[o];n[s]=t[s]-i,r[s]=t[s]+i}}},{"../math/Vec3":30,"./Shape":43}],45:[function(t,e,n){e.exports=u;var r=t("./Shape"),i=t("../math/Vec3"),a=(t("../math/Quaternion"),t("../math/Transform")),o=t("../collision/AABB"),s=t("../utils/Octree");function u(t,e){r.call(this),this.type=r.types.TRIMESH,this.vertices=new Float32Array(t),this.indices=new Int16Array(e),this.normals=new Float32Array(e.length),this.aabb=new o,this.edges=null,this.scale=new i(1,1,1),this.tree=new s,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}u.prototype=new r,u.prototype.constructor=u;var l=new i;u.prototype.updateTree=function(){var t=this.tree;t.reset(),t.aabb.copy(this.aabb);var e=this.scale;t.aabb.lowerBound.x*=1/e.x,t.aabb.lowerBound.y*=1/e.y,t.aabb.lowerBound.z*=1/e.z,t.aabb.upperBound.x*=1/e.x,t.aabb.upperBound.y*=1/e.y,t.aabb.upperBound.z*=1/e.z;for(var n=new o,r=new i,a=new i,s=new i,u=[r,a,s],l=0;l<this.indices.length/3;l++){var c=3*l;this._getUnscaledVertex(this.indices[c],r),this._getUnscaledVertex(this.indices[c+1],a),this._getUnscaledVertex(this.indices[c+2],s),n.setFromPoints(u),t.insert(n,l)}t.removeEmptyNodes()};var c=new o;u.prototype.getTrianglesInAABB=function(t,e){c.copy(t);var n=this.scale,r=n.x,i=n.y,a=n.z,o=c.lowerBound,s=c.upperBound;return o.x/=r,o.y/=i,o.z/=a,s.x/=r,s.y/=i,s.z/=a,this.tree.aabbQuery(c,e)},u.prototype.setScale=function(t){var e=this.scale.x===this.scale.y===this.scale.z,n=t.x===t.y===t.z;e&&n||this.updateNormals(),this.scale.copy(t),this.updateAABB(),this.updateBoundingSphereRadius()},u.prototype.updateNormals=function(){for(var t=l,e=this.normals,n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],a=this.indices[r+1],o=this.indices[r+2];this.getVertex(i,v),this.getVertex(a,m),this.getVertex(o,g),u.computeNormal(m,v,g,t),e[r]=t.x,e[r+1]=t.y,e[r+2]=t.z}},u.prototype.updateEdges=function(){for(var t={},e=function(e,n){t[i<a?i+"_"+a:a+"_"+i]=!0},n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],a=this.indices[r+1],o=this.indices[r+2];e(i,a),e(a,o),e(o,i)}var s=Object.keys(t);for(this.edges=new Int16Array(2*s.length),n=0;n<s.length;n++){var u=s[n].split("_");this.edges[2*n]=parseInt(u[0],10),this.edges[2*n+1]=parseInt(u[1],10)}},u.prototype.getEdgeVertex=function(t,e,n){var r=this.edges[2*t+(e?1:0)];this.getVertex(r,n)};var h=new i,f=new i;u.prototype.getEdgeVector=function(t,e){var n=h,r=f;this.getEdgeVertex(t,0,n),this.getEdgeVertex(t,1,r),r.vsub(n,e)};var d=new i,p=new i;u.computeNormal=function(t,e,n,r){e.vsub(t,p),n.vsub(e,d),d.cross(p,r),r.isZero()||r.normalize()};var v=new i,m=new i,g=new i;u.prototype.getVertex=function(t,e){var n=this.scale;return this._getUnscaledVertex(t,e),e.x*=n.x,e.y*=n.y,e.z*=n.z,e},u.prototype._getUnscaledVertex=function(t,e){var n=3*t,r=this.vertices;return e.set(r[n],r[n+1],r[n+2])},u.prototype.getWorldVertex=function(t,e,n,r){return this.getVertex(t,r),a.pointToWorldFrame(e,n,r,r),r},u.prototype.getTriangleVertices=function(t,e,n,r){var i=3*t;this.getVertex(this.indices[i],e),this.getVertex(this.indices[i+1],n),this.getVertex(this.indices[i+2],r)},u.prototype.getNormal=function(t,e){var n=3*t;return e.set(this.normals[n],this.normals[n+1],this.normals[n+2])};var y=new o;u.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(y);var n=y.upperBound.x-y.lowerBound.x,r=y.upperBound.y-y.lowerBound.y,i=y.upperBound.z-y.lowerBound.z;return e.set(1/12*t*(2*r*2*r+2*i*2*i),1/12*t*(2*n*2*n+2*i*2*i),1/12*t*(2*r*2*r+2*n*2*n))};var _=new i;u.prototype.computeLocalAABB=function(t){var e=t.lowerBound,n=t.upperBound,r=this.vertices.length,i=(this.vertices,_);this.getVertex(0,i),e.copy(i),n.copy(i);for(var a=0;a!==r;a++)this.getVertex(a,i),i.x<e.x?e.x=i.x:i.x>n.x&&(n.x=i.x),i.y<e.y?e.y=i.y:i.y>n.y&&(n.y=i.y),i.z<e.z?e.z=i.z:i.z>n.z&&(n.z=i.z)},u.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},u.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=new i,r=0,a=e.length/3;r!==a;r++){this.getVertex(r,n);var o=n.norm2();o>t&&(t=o)}this.boundingSphereRadius=Math.sqrt(t)},new i;var b=new a,x=new o;u.prototype.calculateWorldAABB=function(t,e,n,r){var i=b,a=x;i.position=t,i.quaternion=e,this.aabb.toWorldFrame(i,a),n.copy(a.lowerBound),r.copy(a.upperBound)},u.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},u.createTorus=function(t,e,n,r,i){t=t||1,e=e||.5,n=n||8,r=r||6,i=i||2*Math.PI;for(var a=[],o=[],s=0;s<=n;s++)for(var l=0;l<=r;l++){var c=l/r*i,h=s/n*Math.PI*2,f=(t+e*Math.cos(h))*Math.cos(c),d=(t+e*Math.cos(h))*Math.sin(c),p=e*Math.sin(h);a.push(f,d,p)}for(s=1;s<=n;s++)for(l=1;l<=r;l++){var v=(r+1)*s+l-1,m=(r+1)*(s-1)+l-1,g=(r+1)*(s-1)+l,y=(r+1)*s+l;o.push(v,m,y),o.push(m,g,y)}return new u(a,o)}},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(t,e,n){e.exports=i,t("../math/Vec3"),t("../math/Quaternion");var r=t("./Solver");function i(){r.call(this),this.iterations=10,this.tolerance=1e-7}i.prototype=new r;var a=[],o=[],s=[];i.prototype.solve=function(t,e){var n,r,i,u,l,c=0,h=this.iterations,f=this.tolerance*this.tolerance,d=this.equations,p=d.length,v=e.bodies,m=v.length,g=t;if(0!==p)for(var y=0;y!==m;y++)v[y].updateSolveMassProperties();var _=o,b=s,x=a;for(_.length=p,b.length=p,x.length=p,y=0;y!==p;y++){var w=d[y];x[y]=0,b[y]=w.computeB(g),_[y]=1/w.computeC()}if(0!==p){for(y=0;y!==m;y++){var S=(E=v[y]).vlambda,k=E.wlambda;S.set(0,0,0),k&&k.set(0,0,0)}for(c=0;c!==h;c++){u=0;for(var T=0;T!==p;T++)w=d[T],n=b[T],r=_[T],(l=x[T])+(i=r*(n-w.computeGWlambda()-w.eps*l))<w.minForce?i=w.minForce-l:l+i>w.maxForce&&(i=w.maxForce-l),x[T]+=i,u+=i>0?i:-i,w.addToWlambda(i);if(u*u<f)break}for(y=0;y!==m;y++){var E,C=(E=v[y]).velocity,O=E.angularVelocity;C.vadd(E.vlambda,C),O&&O.vadd(E.wlambda,O)}}return c}},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(t,e,n){function r(){this.equations=[]}e.exports=r,r.prototype.solve=function(t,e){return 0},r.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},r.prototype.removeEquation=function(t){var e=this.equations,n=e.indexOf(t);-1!==n&&e.splice(n,1)},r.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(t,e,n){e.exports=a,t("../math/Vec3"),t("../math/Quaternion");var r=t("./Solver"),i=t("../objects/Body");function a(t){for(r.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=t,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}a.prototype=new r;var o=[],s=[],u={bodies:[]},l=i.STATIC;function c(t){for(var e=t.length,n=0;n!==e;n++){var r=t[n];if(!r.visited&&!(r.body.type&l))return r}return!1}var h=[];function f(t,e,n,r){for(h.push(t),t.visited=!0,e(t,n,r);h.length;)for(var i,a=h.pop();i=c(a.children);)i.visited=!0,e(i,n,r),h.push(i)}function d(t,e,n){e.push(t.body);for(var r=t.eqs.length,i=0;i!==r;i++){var a=t.eqs[i];-1===n.indexOf(a)&&n.push(a)}}function p(t,e){return e.id-t.id}a.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},a.prototype.solve=function(t,e){for(var n=o,r=this.nodePool,i=e.bodies,a=this.equations,l=a.length,h=i.length,v=this.subsolver;r.length<h;)r.push(this.createNode());n.length=h;for(var m=0;m<h;m++)n[m]=r[m];for(m=0;m!==h;m++){var g=n[m];g.body=i[m],g.children.length=0,g.eqs.length=0,g.visited=!1}for(var y=0;y!==l;y++){var _=a[y],b=(m=i.indexOf(_.bi),i.indexOf(_.bj)),x=n[m],w=n[b];x.children.push(w),x.eqs.push(_),w.children.push(x),w.eqs.push(_)}var S,k=0,T=s;v.tolerance=this.tolerance,v.iterations=this.iterations;for(var E=u;S=c(n);){T.length=0,E.bodies.length=0,f(S,d,E.bodies,T);var C=T.length;for(T=T.sort(p),m=0;m!==C;m++)v.addEquation(T[m]);v.solve(t,E),v.removeAllEquations(),k++}return k}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(t,e,n){var r=function(){};e.exports=r,r.prototype={constructor:r,addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[t])return this;var r=n[t].indexOf(e);return-1!==r&&n[t].splice(r,1),this},dispatchEvent:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,r=e.length;n<r;n++)e[n].call(this,t)}return this}}},{}],50:[function(t,e,n){var r=t("../collision/AABB"),i=t("../math/Vec3");function a(t){t=t||{},this.root=t.root||null,this.aabb=t.aabb?t.aabb.clone():new r,this.data=[],this.children=[]}function o(t,e){(e=e||{}).root=null,e.aabb=t,a.call(this,e),this.maxDepth="undefined"!==typeof e.maxDepth?e.maxDepth:8}e.exports=o,o.prototype=new a,a.prototype.reset=function(t,e){this.children.length=this.data.length=0},a.prototype.insert=function(t,e,n){var r=this.data;if(n=n||0,!this.aabb.contains(t))return!1;var i=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var a=!1;i.length||(this.subdivide(),a=!0);for(var o=0;8!==o;o++)if(i[o].insert(t,e,n+1))return!0;a&&(i.length=0)}return r.push(e),!0};var s=new i;a.prototype.subdivide=function(){var t=this.aabb,e=t.lowerBound,n=t.upperBound,o=this.children;o.push(new a({aabb:new r({lowerBound:new i(0,0,0)})}),new a({aabb:new r({lowerBound:new i(1,0,0)})}),new a({aabb:new r({lowerBound:new i(1,1,0)})}),new a({aabb:new r({lowerBound:new i(1,1,1)})}),new a({aabb:new r({lowerBound:new i(0,1,1)})}),new a({aabb:new r({lowerBound:new i(0,0,1)})}),new a({aabb:new r({lowerBound:new i(1,0,1)})}),new a({aabb:new r({lowerBound:new i(0,1,0)})})),n.vsub(e,s),s.scale(.5,s);for(var u=this.root||this,l=0;8!==l;l++){var c=o[l];c.root=u;var h=c.aabb.lowerBound;h.x*=s.x,h.y*=s.y,h.z*=s.z,h.vadd(e,h),h.vadd(s,c.aabb.upperBound)}},a.prototype.aabbQuery=function(t,e){this.data,this.children;for(var n=[this];n.length;){var r=n.pop();r.aabb.overlaps(t)&&Array.prototype.push.apply(e,r.data),Array.prototype.push.apply(n,r.children)}return e};var u=new r;a.prototype.rayQuery=function(t,e,n){return t.getAABB(u),u.toLocalFrame(e,u),this.aabbQuery(u,n),n},a.prototype.removeEmptyNodes=function(){for(var t=[this];t.length;){for(var e=t.pop(),n=e.children.length-1;n>=0;n--)e.children[n].data.length||e.children.splice(n,1);Array.prototype.push.apply(t,e.children)}}},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(t,e,n){function r(){this.objects=[],this.type=Object}e.exports=r,r.prototype.release=function(){for(var t=arguments.length,e=0;e!==t;e++)this.objects.push(arguments[e])},r.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},r.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},{}],52:[function(t,e,n){function r(){this.data={keys:[]}}e.exports=r,r.prototype.get=function(t,e){if(t>e){var n=e;e=t,t=n}return this.data[t+"-"+e]},r.prototype.set=function(t,e,n){if(t>e){var r=e;e=t,t=r}var i=t+"-"+e;this.get(t,e)||this.data.keys.push(i),this.data[i]=n},r.prototype.reset=function(){for(var t=this.data,e=t.keys;e.length>0;)delete t[e.pop()]}},{}],53:[function(t,e,n){function r(){}e.exports=r,r.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t}},{}],54:[function(t,e,n){e.exports=a;var r=t("../math/Vec3"),i=t("./Pool");function a(){i.call(this),this.type=r}a.prototype=new i,a.prototype.constructObject=function(){return new r}},{"../math/Vec3":30,"./Pool":51}],55:[function(t,e,n){e.exports=f;var r=t("../collision/AABB"),i=t("../shapes/Shape"),a=t("../collision/Ray"),o=t("../math/Vec3"),s=t("../math/Transform"),u=(t("../shapes/ConvexPolyhedron"),t("../math/Quaternion")),l=(t("../solver/Solver"),t("../utils/Vec3Pool")),c=t("../equations/ContactEquation"),h=t("../equations/FrictionEquation");function f(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new l,this.world=t,this.currentContactMaterial=null,this.enableFrictionReduction=!1}f.prototype.createContactEquation=function(t,e,n,r,i,a){var o;this.contactPointPool.length?((o=this.contactPointPool.pop()).bi=t,o.bj=e):o=new c(t,e),o.enabled=t.collisionResponse&&e.collisionResponse&&n.collisionResponse&&r.collisionResponse;var s=this.currentContactMaterial;o.restitution=s.restitution,o.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);var u=n.material||t.material,l=r.material||e.material;return u&&l&&u.restitution>=0&&l.restitution>=0&&(o.restitution=u.restitution*l.restitution),o.si=i||n,o.sj=a||r,o},f.prototype.createFrictionEquationsFromContact=function(t,e){var n=t.bi,r=t.bj,i=t.si,a=t.sj,o=this.world,s=this.currentContactMaterial,u=s.friction,l=i.material||n.material,c=a.material||r.material;if(l&&c&&l.friction>=0&&c.friction>=0&&(u=l.friction*c.friction),u>0){var f=u*o.gravity.length(),d=n.invMass+r.invMass;d>0&&(d=1/d);var p=this.frictionEquationPool,v=p.length?p.pop():new h(n,r,f*d),m=p.length?p.pop():new h(n,r,f*d);return v.bi=m.bi=n,v.bj=m.bj=r,v.minForce=m.minForce=-f*d,v.maxForce=m.maxForce=f*d,v.ri.copy(t.ri),v.rj.copy(t.rj),m.ri.copy(t.ri),m.rj.copy(t.rj),t.ni.tangents(v.t,m.t),v.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,o.dt),m.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,o.dt),v.enabled=m.enabled=t.enabled,e.push(v,m),!0}return!1};var d=new o,p=new o,v=new o;f.prototype.createFrictionFromAverage=function(t){var e=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(e,this.frictionResult)&&1!==t){var n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];d.setZero(),p.setZero(),v.setZero();for(var i=e.bi,a=(e.bj,0);a!==t;a++)(e=this.result[this.result.length-1-a]).bodyA!==i?(d.vadd(e.ni,d),p.vadd(e.ri,p),v.vadd(e.rj,v)):(d.vsub(e.ni,d),p.vadd(e.rj,p),v.vadd(e.ri,v));var o=1/t;p.scale(o,n.ri),v.scale(o,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),d.normalize(),d.tangents(n.t,r.t)}};var m=new o,g=new o,y=new u,_=new u;f.prototype.getContacts=function(t,e,n,r,i,a,o){this.contactPointPool=i,this.frictionEquationPool=o,this.result=r,this.frictionResult=a;for(var s=y,u=_,l=m,c=g,h=0,f=t.length;h!==f;h++){var d=t[h],p=e[h],v=null;d.material&&p.material&&(v=n.getContactMaterial(d.material,p.material)||null);for(var b=0;b<d.shapes.length;b++){d.quaternion.mult(d.shapeOrientations[b],s),d.quaternion.vmult(d.shapeOffsets[b],l),l.vadd(d.position,l);for(var x=d.shapes[b],w=0;w<p.shapes.length;w++){p.quaternion.mult(p.shapeOrientations[w],u),p.quaternion.vmult(p.shapeOffsets[w],c),c.vadd(p.position,c);var S=p.shapes[w];if(!(l.distanceTo(c)>x.boundingSphereRadius+S.boundingSphereRadius)){var k=null;x.material&&S.material&&(k=n.getContactMaterial(x.material,S.material)||null),this.currentContactMaterial=k||v||n.defaultContactMaterial;var T=this[x.type|S.type];T&&(x.type<S.type?T.call(this,x,S,l,c,s,u,d,p,x,S):T.call(this,S,x,c,l,u,s,p,d,x,S))}}}}},f.prototype[i.types.BOX|i.types.BOX]=f.prototype.boxBox=function(t,e,n,r,i,a,o,s){t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,n,r,i,a,o,s,t,e)},f.prototype[i.types.BOX|i.types.CONVEXPOLYHEDRON]=f.prototype.boxConvex=function(t,e,n,r,i,a,o,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,n,r,i,a,o,s,t,e)},f.prototype[i.types.BOX|i.types.PARTICLE]=f.prototype.boxParticle=function(t,e,n,r,i,a,o,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,n,r,i,a,o,s,t,e)},f.prototype[i.types.SPHERE]=f.prototype.sphereSphere=function(t,e,n,r,i,a,o,s){var u=this.createContactEquation(o,s,t,e);r.vsub(n,u.ni),u.ni.normalize(),u.ri.copy(u.ni),u.rj.copy(u.ni),u.ri.mult(t.radius,u.ri),u.rj.mult(-e.radius,u.rj),u.ri.vadd(n,u.ri),u.ri.vsub(o.position,u.ri),u.rj.vadd(r,u.rj),u.rj.vsub(s.position,u.rj),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)};var b=new o,x=new o,w=new o;f.prototype[i.types.PLANE|i.types.TRIMESH]=f.prototype.planeTrimesh=function(t,e,n,r,i,a,u,l){var c=new o,h=b;h.set(0,0,1),i.vmult(h,h);for(var f=0;f<e.vertices.length/3;f++){e.getVertex(f,c);var d=new o;d.copy(c),s.pointToWorldFrame(r,a,d,c);var p=x;if(c.vsub(n,p),h.dot(p)<=0){var v=this.createContactEquation(u,l,t,e);v.ni.copy(h);var m=w;h.scale(p.dot(h),m),c.vsub(m,m),v.ri.copy(m),v.ri.vsub(u.position,v.ri),v.rj.copy(c),v.rj.vsub(l.position,v.rj),this.result.push(v),this.createFrictionEquationsFromContact(v,this.frictionResult)}}};var S=new o,k=new o,T=(new o,new o),E=new o,C=new o,O=new o,M=new o,A=new o,P=new o,L=new o,R=new o,j=new o,I=new o,D=new r,N=[];f.prototype[i.types.SPHERE|i.types.TRIMESH]=f.prototype.sphereTrimesh=function(t,e,n,r,i,o,u,l){var c=C,h=O,f=M,d=A,p=P,v=L,m=D,g=E,y=k,_=N;s.pointToLocalFrame(r,o,n,p);var b=t.radius;m.lowerBound.set(p.x-b,p.y-b,p.z-b),m.upperBound.set(p.x+b,p.y+b,p.z+b),e.getTrianglesInAABB(m,_);for(var x=T,w=t.radius*t.radius,B=0;B<_.length;B++)for(var z=0;z<3;z++)e.getVertex(e.indices[3*_[B]+z],x),x.vsub(p,y),y.norm2()<=w&&(g.copy(x),s.pointToWorldFrame(r,o,g,x),x.vsub(n,y),(U=this.createContactEquation(u,l,t,e)).ni.copy(y),U.ni.normalize(),U.ri.copy(U.ni),U.ri.scale(t.radius,U.ri),U.ri.vadd(n,U.ri),U.ri.vsub(u.position,U.ri),U.rj.copy(x),U.rj.vsub(l.position,U.rj),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult));for(B=0;B<_.length;B++)for(z=0;z<3;z++){e.getVertex(e.indices[3*_[B]+z],c),e.getVertex(e.indices[3*_[B]+(z+1)%3],h),h.vsub(c,f),p.vsub(h,v);var F=v.dot(f);p.vsub(c,v);var V=v.dot(f);if(V>0&&F<0&&(p.vsub(c,v),d.copy(f),d.normalize(),V=v.dot(d),d.scale(V,v),v.vadd(c,v),(Y=v.distanceTo(p))<t.radius)){var U=this.createContactEquation(u,l,t,e);v.vsub(p,U.ni),U.ni.normalize(),U.ni.scale(t.radius,U.ri),s.pointToWorldFrame(r,o,v,v),v.vsub(l.position,U.rj),s.vectorToWorldFrame(o,U.ni,U.ni),s.vectorToWorldFrame(o,U.ri,U.ri),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}}for(var q=R,H=j,W=I,G=S,X=(B=0,_.length);B!==X;B++){e.getTriangleVertices(_[B],q,H,W),e.getNormal(_[B],G),p.vsub(q,v);var Y=v.dot(G);G.scale(Y,v),p.vsub(v,v),Y=v.distanceTo(p),a.pointInTriangle(v,q,H,W)&&Y<t.radius&&(U=this.createContactEquation(u,l,t,e),v.vsub(p,U.ni),U.ni.normalize(),U.ni.scale(t.radius,U.ri),s.pointToWorldFrame(r,o,v,v),v.vsub(l.position,U.rj),s.vectorToWorldFrame(o,U.ni,U.ni),s.vectorToWorldFrame(o,U.ri,U.ri),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult))}_.length=0};var B=new o,z=new o;f.prototype[i.types.SPHERE|i.types.PLANE]=f.prototype.spherePlane=function(t,e,n,r,i,a,o,s){var u=this.createContactEquation(o,s,t,e);if(u.ni.set(0,0,1),a.vmult(u.ni,u.ni),u.ni.negate(u.ni),u.ni.normalize(),u.ni.mult(t.radius,u.ri),n.vsub(r,B),u.ni.mult(u.ni.dot(B),z),B.vsub(z,u.rj),-B.dot(u.ni)<=t.radius){var l=u.ri,c=u.rj;l.vadd(n,l),l.vsub(o.position,l),c.vadd(r,c),c.vsub(s.position,c),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}};var F=new o,V=new o,U=new o;function q(t,e,n){for(var r=null,i=t.length,a=0;a!==i;a++){var o=t[a],s=F;t[(a+1)%i].vsub(o,s);var u=V;s.cross(e,u);var l=U;n.vsub(o,l);var c=u.dot(l);if(!(null===r||c>0&&!0===r||c<=0&&!1===r))return!1;null===r&&(r=c>0)}return!0}var H=new o,W=new o,G=new o,X=new o,Y=[new o,new o,new o,new o,new o,new o],Z=new o,Q=new o,J=new o,K=new o;f.prototype[i.types.SPHERE|i.types.BOX]=f.prototype.sphereBox=function(t,e,n,r,i,a,o,s){var u=this.v3pool,l=Y;n.vsub(r,H),e.getSideNormals(l,a);for(var c=t.radius,h=!1,f=Q,d=J,p=K,v=null,m=0,g=0,y=0,_=null,b=0,x=l.length;b!==x&&!1===h;b++){var w=W;w.copy(l[b]);var S=w.norm();w.normalize();var k=H.dot(w);if(k<S+c&&k>0){var T=G,E=X;T.copy(l[(b+1)%3]),E.copy(l[(b+2)%3]);var C=T.norm(),O=E.norm();T.normalize(),E.normalize();var M=H.dot(T),A=H.dot(E);if(M<C&&M>-C&&A<O&&A>-O){var P=Math.abs(k-S-c);(null===_||P<_)&&(_=P,g=M,y=A,v=S,f.copy(w),d.copy(T),p.copy(E),m++)}}}if(m){h=!0;var L=this.createContactEquation(o,s,t,e);f.mult(-c,L.ri),L.ni.copy(f),L.ni.negate(L.ni),f.mult(v,f),d.mult(g,d),f.vadd(d,f),p.mult(y,p),f.vadd(p,L.rj),L.ri.vadd(n,L.ri),L.ri.vsub(o.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}for(var R=u.get(),j=Z,I=0;2!==I&&!h;I++)for(var D=0;2!==D&&!h;D++)for(var N=0;2!==N&&!h;N++)R.set(0,0,0),I?R.vadd(l[0],R):R.vsub(l[0],R),D?R.vadd(l[1],R):R.vsub(l[1],R),N?R.vadd(l[2],R):R.vsub(l[2],R),r.vadd(R,j),j.vsub(n,j),j.norm2()<c*c&&(h=!0,(L=this.createContactEquation(o,s,t,e)).ri.copy(j),L.ri.normalize(),L.ni.copy(L.ri),L.ri.mult(c,L.ri),L.rj.copy(R),L.ri.vadd(n,L.ri),L.ri.vsub(o.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult));u.release(R),R=null;var B=u.get(),z=u.get(),F=(L=u.get(),u.get()),V=(P=u.get(),l.length);for(I=0;I!==V&&!h;I++)for(D=0;D!==V&&!h;D++)if(I%3!==D%3){l[D].cross(l[I],B),B.normalize(),l[I].vadd(l[D],z),L.copy(n),L.vsub(z,L),L.vsub(r,L);var U=L.dot(B);for(B.mult(U,F),N=0;N===I%3||N===D%3;)N++;P.copy(n),P.vsub(F,P),P.vsub(z,P),P.vsub(r,P);var q=Math.abs(U),$=P.norm();if(q<l[N].norm()&&$<c){h=!0;var tt=this.createContactEquation(o,s,t,e);z.vadd(F,tt.rj),tt.rj.copy(tt.rj),P.negate(tt.ni),tt.ni.normalize(),tt.ri.copy(tt.rj),tt.ri.vadd(r,tt.ri),tt.ri.vsub(n,tt.ri),tt.ri.normalize(),tt.ri.mult(c,tt.ri),tt.ri.vadd(n,tt.ri),tt.ri.vsub(o.position,tt.ri),tt.rj.vadd(r,tt.rj),tt.rj.vsub(s.position,tt.rj),this.result.push(tt),this.createFrictionEquationsFromContact(tt,this.frictionResult)}}u.release(B,z,L,F,P)};var $=new o,tt=new o,et=new o,nt=new o,rt=new o,it=new o,at=new o,ot=new o,st=new o,ut=new o;f.prototype[i.types.SPHERE|i.types.CONVEXPOLYHEDRON]=f.prototype.sphereConvex=function(t,e,n,r,i,a,o,s){var u=this.v3pool;n.vsub(r,$);for(var l=e.faceNormals,c=e.faces,h=e.vertices,f=t.radius,d=0;d!==h.length;d++){var p=h[d],v=rt;a.vmult(p,v),r.vadd(v,v);var m=nt;if(v.vsub(n,m),m.norm2()<f*f)return g=!0,(P=this.createContactEquation(o,s,t,e)).ri.copy(m),P.ri.normalize(),P.ni.copy(P.ri),P.ri.mult(f,P.ri),v.vsub(r,P.rj),P.ri.vadd(n,P.ri),P.ri.vsub(o.position,P.ri),P.rj.vadd(r,P.rj),P.rj.vsub(s.position,P.rj),this.result.push(P),void this.createFrictionEquationsFromContact(P,this.frictionResult)}for(var g=!1,y=(d=0,c.length);d!==y&&!1===g;d++){var _=l[d],b=c[d],x=it;a.vmult(_,x);var w=at;a.vmult(h[b[0]],w),w.vadd(r,w);var S=ot;x.mult(-f,S),n.vadd(S,S);var k=st;S.vsub(w,k);var T=k.dot(x),E=ut;if(n.vsub(w,E),T<0&&E.dot(x)>0){for(var C=[],O=0,M=b.length;O!==M;O++){var A=u.get();a.vmult(h[b[O]],A),r.vadd(A,A),C.push(A)}if(q(C,x,n)){g=!0;var P=this.createContactEquation(o,s,t,e);x.mult(-f,P.ri),x.negate(P.ni);var L=u.get();x.mult(-T,L);var R=u.get();x.mult(-f,R),n.vsub(r,P.rj),P.rj.vadd(R,P.rj),P.rj.vadd(L,P.rj),P.rj.vadd(r,P.rj),P.rj.vsub(s.position,P.rj),P.ri.vadd(n,P.ri),P.ri.vsub(o.position,P.ri),u.release(L),u.release(R),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult),O=0;for(var j=C.length;O!==j;O++)u.release(C[O]);return}for(O=0;O!==b.length;O++){var I=u.get(),D=u.get();a.vmult(h[b[(O+1)%b.length]],I),a.vmult(h[b[(O+2)%b.length]],D),r.vadd(I,I),r.vadd(D,D);var N=tt;D.vsub(I,N);var B=et;N.unit(B);var z=u.get(),F=u.get();n.vsub(I,F);var V=F.dot(B);B.mult(V,z),z.vadd(I,z);var U=u.get();if(z.vsub(n,U),V>0&&V*V<N.norm2()&&U.norm2()<f*f){for(P=this.createContactEquation(o,s,t,e),z.vsub(r,P.rj),z.vsub(n,P.ni),P.ni.normalize(),P.ni.mult(f,P.ri),P.rj.vadd(r,P.rj),P.rj.vsub(s.position,P.rj),P.ri.vadd(n,P.ri),P.ri.vsub(o.position,P.ri),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult),O=0,j=C.length;O!==j;O++)u.release(C[O]);return u.release(I),u.release(D),u.release(z),u.release(U),void u.release(F)}u.release(I),u.release(D),u.release(z),u.release(U),u.release(F)}for(O=0,j=C.length;O!==j;O++)u.release(C[O])}}},new o,new o,f.prototype[i.types.PLANE|i.types.BOX]=f.prototype.planeBox=function(t,e,n,r,i,a,o,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.planeConvex(t,e.convexPolyhedronRepresentation,n,r,i,a,o,s)};var lt=new o,ct=new o,ht=new o,ft=new o;f.prototype[i.types.PLANE|i.types.CONVEXPOLYHEDRON]=f.prototype.planeConvex=function(t,e,n,r,i,a,o,s){var u=lt,l=ct;l.set(0,0,1),i.vmult(l,l);for(var c=0,h=ht,f=0;f!==e.vertices.length;f++)if(u.copy(e.vertices[f]),a.vmult(u,u),r.vadd(u,u),u.vsub(n,h),l.dot(h)<=0){var d=this.createContactEquation(o,s,t,e),p=ft;l.mult(l.dot(h),p),u.vsub(p,p),p.vsub(n,d.ri),d.ni.copy(l),u.vsub(r,d.rj),d.ri.vadd(n,d.ri),d.ri.vsub(o.position,d.ri),d.rj.vadd(r,d.rj),d.rj.vsub(s.position,d.rj),this.result.push(d),c++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(d,this.frictionResult)}this.enableFrictionReduction&&c&&this.createFrictionFromAverage(c)};var dt=new o,pt=new o;f.prototype[i.types.CONVEXPOLYHEDRON]=f.prototype.convexConvex=function(t,e,n,r,i,a,o,s,u,l,c,h){var f=dt;if(!(n.distanceTo(r)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,n,i,r,a,f,c,h)){var d=[],p=pt;t.clipAgainstHull(n,i,e,r,a,f,-100,100,d);for(var v=0,m=0;m!==d.length;m++){var g=this.createContactEquation(o,s,t,e,u,l),y=g.ri,_=g.rj;f.negate(g.ni),d[m].normal.negate(p),p.mult(d[m].depth,p),d[m].point.vadd(p,y),_.copy(d[m].point),y.vsub(n,y),_.vsub(r,_),y.vadd(n,y),y.vsub(o.position,y),_.vadd(r,_),_.vsub(s.position,_),this.result.push(g),v++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&v&&this.createFrictionFromAverage(v)}};var vt=new o,mt=new o,gt=new o;f.prototype[i.types.PLANE|i.types.PARTICLE]=f.prototype.planeParticle=function(t,e,n,r,i,a,o,s){var u=vt;u.set(0,0,1),o.quaternion.vmult(u,u);var l=mt;if(r.vsub(o.position,l),u.dot(l)<=0){var c=this.createContactEquation(s,o,e,t);c.ni.copy(u),c.ni.negate(c.ni),c.ri.set(0,0,0);var h=gt;u.mult(u.dot(r),h),r.vsub(h,h),c.rj.copy(h),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}};var yt=new o;f.prototype[i.types.PARTICLE|i.types.SPHERE]=f.prototype.sphereParticle=function(t,e,n,r,i,a,o,s){var u=yt;if(u.set(0,0,1),r.vsub(n,u),u.norm2()<=t.radius*t.radius){var l=this.createContactEquation(s,o,e,t);u.normalize(),l.rj.copy(u),l.rj.mult(t.radius,l.rj),l.ni.copy(u),l.ni.negate(l.ni),l.ri.set(0,0,0),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}};var _t=new u,bt=new o,xt=(new o,new o),wt=new o,St=new o;f.prototype[i.types.PARTICLE|i.types.CONVEXPOLYHEDRON]=f.prototype.convexParticle=function(t,e,n,r,i,a,o,s){var u=-1,l=xt,c=St,h=null,f=bt;if(f.copy(r),f.vsub(n,f),i.conjugate(_t),_t.vmult(f,f),t.pointIsInside(f)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,i),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(i);for(var d=0,p=t.faces.length;d!==p;d++){var v=[t.worldVertices[t.faces[d][0]]],m=t.worldFaceNormals[d];r.vsub(v[0],wt);var g=-m.dot(wt);(null===h||Math.abs(g)<Math.abs(h))&&(h=g,u=d,l.copy(m))}if(-1!==u){var y=this.createContactEquation(s,o,e,t);l.mult(h,c),c.vadd(r,c),c.vsub(n,c),y.rj.copy(c),l.negate(y.ni),y.ri.set(0,0,0);var _=y.ri,b=y.rj;_.vadd(r,_),_.vsub(s.position,_),b.vadd(n,b),b.vsub(o.position,b),this.result.push(y),this.createFrictionEquationsFromContact(y,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},f.prototype[i.types.BOX|i.types.HEIGHTFIELD]=f.prototype.boxHeightfield=function(t,e,n,r,i,a,o,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,n,r,i,a,o,s)};var kt=new o,Tt=new o,Et=[0];f.prototype[i.types.CONVEXPOLYHEDRON|i.types.HEIGHTFIELD]=f.prototype.convexHeightfield=function(t,e,n,r,i,a,o,u){var l=e.data,c=e.elementSize,h=t.boundingSphereRadius,f=Tt,d=Et,p=kt;s.pointToLocalFrame(r,a,n,p);var v=Math.floor((p.x-h)/c)-1,m=Math.ceil((p.x+h)/c)+1,g=Math.floor((p.y-h)/c)-1,y=Math.ceil((p.y+h)/c)+1;if(!(m<0||y<0||v>l.length||g>l[0].length)){v<0&&(v=0),m<0&&(m=0),g<0&&(g=0),y<0&&(y=0),v>=l.length&&(v=l.length-1),m>=l.length&&(m=l.length-1),y>=l[0].length&&(y=l[0].length-1),g>=l[0].length&&(g=l[0].length-1);var _=[];e.getRectMinMax(v,g,m,y,_);var b=_[0],x=_[1];if(!(p.z-h>x||p.z+h<b))for(var w=v;w<m;w++)for(var S=g;S<y;S++)e.getConvexTrianglePillar(w,S,!1),s.pointToWorldFrame(r,a,e.pillarOffset,f),n.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,n,f,i,a,o,u,null,null,d,null),e.getConvexTrianglePillar(w,S,!0),s.pointToWorldFrame(r,a,e.pillarOffset,f),n.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,n,f,i,a,o,u,null,null,d,null)}};var Ct=new o,Ot=new o;f.prototype[i.types.SPHERE|i.types.HEIGHTFIELD]=f.prototype.sphereHeightfield=function(t,e,n,r,i,a,o,u){var l=e.data,c=t.radius,h=e.elementSize,f=Ot,d=Ct;s.pointToLocalFrame(r,a,n,d);var p=Math.floor((d.x-c)/h)-1,v=Math.ceil((d.x+c)/h)+1,m=Math.floor((d.y-c)/h)-1,g=Math.ceil((d.y+c)/h)+1;if(!(v<0||g<0||p>l.length||g>l[0].length)){p<0&&(p=0),v<0&&(v=0),m<0&&(m=0),g<0&&(g=0),p>=l.length&&(p=l.length-1),v>=l.length&&(v=l.length-1),g>=l[0].length&&(g=l[0].length-1),m>=l[0].length&&(m=l[0].length-1);var y=[];e.getRectMinMax(p,m,v,g,y);var _=y[0],b=y[1];if(!(d.z-c>b||d.z+c<_))for(var x=this.result,w=p;w<v;w++)for(var S=m;S<g;S++){var k=x.length;if(e.getConvexTrianglePillar(w,S,!1),s.pointToWorldFrame(r,a,e.pillarOffset,f),n.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,n,f,i,a,o,u),e.getConvexTrianglePillar(w,S,!0),s.pointToWorldFrame(r,a,e.pillarOffset,f),n.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,n,f,i,a,o,u),x.length-k>2)return}}}},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(t,e,n){e.exports=y;var r=t("../shapes/Shape"),i=t("../math/Vec3"),a=t("../math/Quaternion"),o=t("../solver/GSSolver"),s=(t("../utils/Vec3Pool"),t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("./Narrowphase")),u=t("../utils/EventTarget"),l=t("../collision/ArrayCollisionMatrix"),c=t("../material/Material"),h=t("../material/ContactMaterial"),f=t("../objects/Body"),d=t("../utils/TupleDictionary"),p=t("../collision/RaycastResult"),v=t("../collision/AABB"),m=t("../collision/Ray"),g=t("../collision/NaiveBroadphase");function y(){u.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new i,this.broadphase=new g,this.bodies=[],this.solver=new o,this.constraints=[],this.narrowphase=new s(this),this.collisionMatrix=new l,this.collisionMatrixPrevious=new l,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new d,this.defaultMaterial=new c("default"),this.defaultContactMaterial=new h(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}y.prototype=new u,new v;var _=new m;if(y.prototype.getContactMaterial=function(t,e){return this.contactMaterialTable.get(t.id,e.id)},y.prototype.numObjects=function(){return this.bodies.length},y.prototype.collisionMatrixTick=function(){var t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset()},y.prototype.add=y.prototype.addBody=function(t){-1===this.bodies.indexOf(t)&&(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof f&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.dispatchEvent(this.addBodyEvent))},y.prototype.addConstraint=function(t){this.constraints.push(t)},y.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)},y.prototype.rayTest=function(t,e,n){n instanceof p?this.raycastClosest(t,e,{skipBackfaces:!0},n):this.raycastAll(t,e,{skipBackfaces:!0},n)},y.prototype.raycastAll=function(t,e,n,r){return n.mode=m.ALL,n.from=t,n.to=e,n.callback=r,_.intersectWorld(this,n)},y.prototype.raycastAny=function(t,e,n,r){return n.mode=m.ANY,n.from=t,n.to=e,n.result=r,_.intersectWorld(this,n)},y.prototype.raycastClosest=function(t,e,n,r){return n.mode=m.CLOSEST,n.from=t,n.to=e,n.result=r,_.intersectWorld(this,n)},y.prototype.remove=function(t){t.world=null;var e=this.bodies.length-1,n=this.bodies,r=n.indexOf(t);if(-1!==r){n.splice(r,1);for(var i=0;i!==n.length;i++)n[i].index=i;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,this.dispatchEvent(this.removeBodyEvent)}},y.prototype.removeBody=y.prototype.remove,y.prototype.addMaterial=function(t){this.materials.push(t)},y.prototype.addContactMaterial=function(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)},"undefined"===typeof performance&&(performance={}),!performance.now){var b=Date.now();performance.timing&&performance.timing.navigationStart&&(b=performance.timing.navigationStart),performance.now=function(){return Date.now()-b}}var x=new i;y.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{var r=Math.floor((this.time+e)/t)-Math.floor(this.time/t);r=Math.min(r,n);for(var i=performance.now(),a=0;a!==r&&(this.internalStep(t),!(performance.now()-i>1e3*t));a++);this.time+=e;for(var o=this.time%t/t,s=x,u=this.bodies,l=0;l!==u.length;l++){var c=u[l];c.type!==f.STATIC&&c.sleepState!==f.SLEEPING?(c.position.vsub(c.previousPosition,s),s.scale(o,s),c.position.vadd(s,c.interpolatedPosition)):(c.interpolatedPosition.copy(c.position),c.interpolatedQuaternion.copy(c.quaternion))}}};var w={type:"postStep"},S={type:"preStep"},k={type:"collide",body:null,contact:null},T=[],E=[],C=[],O=[],M=(new i,new i,new i,new i,new i,new i,new i,new i,new i,new a,new a),A=new a,P=new i;y.prototype.internalStep=function(t){this.dt=t;var e,n=this.contacts,i=C,a=O,o=this.numObjects(),s=this.bodies,u=this.solver,l=this.gravity,c=this.doProfiling,h=this.profile,d=f.DYNAMIC,p=this.constraints,v=E,m=(l.norm(),l.x),g=l.y,y=l.z,_=0;for(c&&(e=performance.now()),_=0;_!==o;_++)if((F=s[_]).type&d){var b=F.force,x=F.mass;b.x+=x*m,b.y+=x*g,b.z+=x*y}_=0;for(var L=this.subsystems.length;_!==L;_++)this.subsystems[_].update();c&&(e=performance.now()),i.length=0,a.length=0,this.broadphase.collisionPairs(this,i,a),c&&(h.broadphase=performance.now()-e);var R=p.length;for(_=0;_!==R;_++)if(!(U=p[_]).collideConnected)for(var j=i.length-1;j>=0;j-=1)(U.bodyA===i[j]&&U.bodyB===a[j]||U.bodyB===i[j]&&U.bodyA===a[j])&&(i.splice(j,1),a.splice(j,1));this.collisionMatrixTick(),c&&(e=performance.now());var I=T,D=n.length;for(_=0;_!==D;_++)I.push(n[_]);n.length=0;var N=this.frictionEquations.length;for(_=0;_!==N;_++)v.push(this.frictionEquations[_]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,a,this,n,I,this.frictionEquations,v),c&&(h.narrowphase=performance.now()-e),c&&(e=performance.now()),_=0;_<this.frictionEquations.length;_++)u.addEquation(this.frictionEquations[_]);for(var B=n.length,z=0;z!==B;z++){var F=(U=n[z]).bi,V=U.bj;U.si,U.sj,(F.material&&V.material&&this.getContactMaterial(F.material,V.material)||this.defaultContactMaterial).friction,F.material&&V.material&&(F.material.friction>=0&&V.material.friction>=0&&(F.material.friction,V.material.friction),F.material.restitution>=0&&V.material.restitution>=0&&(U.restitution=F.material.restitution*V.material.restitution)),u.addEquation(U),F.allowSleep&&F.type===f.DYNAMIC&&F.sleepState===f.SLEEPING&&V.sleepState===f.AWAKE&&V.type!==f.STATIC&&V.velocity.norm2()+V.angularVelocity.norm2()>=2*Math.pow(V.sleepSpeedLimit,2)&&(F._wakeUpAfterNarrowphase=!0),V.allowSleep&&V.type===f.DYNAMIC&&V.sleepState===f.SLEEPING&&F.sleepState===f.AWAKE&&F.type!==f.STATIC&&F.velocity.norm2()+F.angularVelocity.norm2()>=2*Math.pow(F.sleepSpeedLimit,2)&&(V._wakeUpAfterNarrowphase=!0),this.collisionMatrix.set(F,V,!0),this.collisionMatrixPrevious.get(F,V)||(k.body=V,k.contact=U,F.dispatchEvent(k),k.body=F,V.dispatchEvent(k))}for(c&&(h.makeContactConstraints=performance.now()-e,e=performance.now()),_=0;_!==o;_++)(F=s[_])._wakeUpAfterNarrowphase&&(F.wakeUp(),F._wakeUpAfterNarrowphase=!1);for(R=p.length,_=0;_!==R;_++){var U;(U=p[_]).update(),j=0;for(var q=U.equations.length;j!==q;j++){var H=U.equations[j];u.addEquation(H)}}u.solve(t,this),c&&(h.solve=performance.now()-e),u.removeAllEquations();var W=Math.pow;for(_=0;_!==o;_++)if((F=s[_]).type&d){var G=W(1-F.linearDamping,t),X=F.velocity;X.mult(G,X);var Y=F.angularVelocity;if(Y){var Z=W(1-F.angularDamping,t);Y.mult(Z,Y)}}for(this.dispatchEvent(S),_=0;_!==o;_++)(F=s[_]).preStep&&F.preStep.call(F);c&&(e=performance.now());var Q=M,J=A,K=this.stepnumber,$=f.DYNAMIC|f.KINEMATIC,tt=K%(this.quatNormalizeSkip+1)===0,et=this.quatNormalizeFast,nt=.5*t;for(r.types.PLANE,r.types.CONVEXPOLYHEDRON,_=0;_!==o;_++){var rt=s[_],it=rt.force,at=rt.torque;if(rt.type&$&&rt.sleepState!==f.SLEEPING){var ot=rt.velocity,st=rt.angularVelocity,ut=rt.position,lt=rt.quaternion,ct=rt.invMass,ht=rt.invInertiaWorld;ot.x+=it.x*ct*t,ot.y+=it.y*ct*t,ot.z+=it.z*ct*t,rt.angularVelocity&&(ht.vmult(at,P),P.mult(t,P),P.vadd(st,st)),ut.x+=ot.x*t,ut.y+=ot.y*t,ut.z+=ot.z*t,rt.angularVelocity&&(Q.set(st.x,st.y,st.z,0),Q.mult(lt,J),lt.x+=nt*J.x,lt.y+=nt*J.y,lt.z+=nt*J.z,lt.w+=nt*J.w,tt&&(et?lt.normalizeFast():lt.normalize())),rt.aabb&&(rt.aabbNeedsUpdate=!0),rt.updateInertiaWorld&&rt.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,c&&(h.integrate=performance.now()-e),this.time+=t,this.stepnumber+=1,this.dispatchEvent(w),_=0;_!==o;_++){var ft=(F=s[_]).postStep;ft&&ft.call(F)}if(this.allowSleep)for(_=0;_!==o;_++)s[_].sleepTick(this.time)},y.prototype.clearForces=function(){for(var t=this.bodies,e=t.length,n=0;n!==e;n++){var r=t[n];r.force,r.torque,r.force.set(0,0,0),r.torque.set(0,0,0)}}},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2)},function(t,e,n){(function(e,r){var i;i=function(t,n,i,a,o,s,u,l,c,h,f,d,p,v){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/namespace/cloudinary-core.js")}({"./src/namespace/cloudinary-core.js":function(t,n,i){"use strict";i.r(n),i.d(n,"ClientHintsMetaTag",(function(){return Lr})),i.d(n,"Cloudinary",(function(){return Kr})),i.d(n,"Condition",(function(){return ce})),i.d(n,"Configuration",(function(){return me})),i.d(n,"crc32",(function(){return u})),i.d(n,"Expression",(function(){return re})),i.d(n,"FetchLayer",(function(){return Be})),i.d(n,"HtmlTag",(function(){return wn})),i.d(n,"ImageTag",(function(){return Zn})),i.d(n,"Layer",(function(){return ye})),i.d(n,"PictureTag",(function(){return dr})),i.d(n,"SubtitlesLayer",(function(){return Pe})),i.d(n,"TextLayer",(function(){return Te})),i.d(n,"Transformation",(function(){return yn})),i.d(n,"utf8_encode",(function(){return s})),i.d(n,"Util",(function(){return o})),i.d(n,"VideoTag",(function(){return Tr}));var a={};i.r(a),i.d(a,"VERSION",(function(){return J})),i.d(a,"CF_SHARED_CDN",(function(){return K})),i.d(a,"OLD_AKAMAI_SHARED_CDN",(function(){return $})),i.d(a,"AKAMAI_SHARED_CDN",(function(){return tt})),i.d(a,"SHARED_CDN",(function(){return et})),i.d(a,"DEFAULT_TIMEOUT_MS",(function(){return nt})),i.d(a,"DEFAULT_POSTER_OPTIONS",(function(){return rt})),i.d(a,"DEFAULT_VIDEO_SOURCE_TYPES",(function(){return it})),i.d(a,"SEO_TYPES",(function(){return at})),i.d(a,"DEFAULT_IMAGE_PARAMS",(function(){return ot})),i.d(a,"DEFAULT_VIDEO_PARAMS",(function(){return st})),i.d(a,"DEFAULT_VIDEO_SOURCES",(function(){return ut})),i.d(a,"DEFAULT_EXTERNAL_LIBRARIES",(function(){return lt})),i.d(a,"PLACEHOLDER_IMAGE_MODES",(function(){return ct})),i.d(a,"ACCESSIBILITY_MODES",(function(){return ht})),i.d(a,"URL_KEYS",(function(){return ft}));var o={};i.r(o),i.d(o,"getSDKAnalyticsSignature",(function(){return m})),i.d(o,"getAnalyticsOptions",(function(){return y})),i.d(o,"assign",(function(){return b.a})),i.d(o,"cloneDeep",(function(){return w.a})),i.d(o,"compact",(function(){return k.a})),i.d(o,"difference",(function(){return E.a})),i.d(o,"functions",(function(){return O.a})),i.d(o,"identity",(function(){return A.a})),i.d(o,"includes",(function(){return L.a})),i.d(o,"isArray",(function(){return j.a})),i.d(o,"isPlainObject",(function(){return D.a})),i.d(o,"isString",(function(){return B.a})),i.d(o,"merge",(function(){return F.a})),i.d(o,"contains",(function(){return L.a})),i.d(o,"isIntersectionObserverSupported",(function(){return Y})),i.d(o,"isNativeLazyLoadSupported",(function(){return Z})),i.d(o,"detectIntersection",(function(){return Q})),i.d(o,"omit",(function(){return pt})),i.d(o,"allStrings",(function(){return mt})),i.d(o,"without",(function(){return gt})),i.d(o,"isNumberLike",(function(){return yt})),i.d(o,"smartEscape",(function(){return _t})),i.d(o,"defaults",(function(){return bt})),i.d(o,"objectProto",(function(){return xt})),i.d(o,"objToString",(function(){return wt})),i.d(o,"isObject",(function(){return St})),i.d(o,"funcTag",(function(){return kt})),i.d(o,"reWords",(function(){return Et})),i.d(o,"camelCase",(function(){return Ct})),i.d(o,"snakeCase",(function(){return Ot})),i.d(o,"convertKeys",(function(){return Mt})),i.d(o,"withCamelCaseKeys",(function(){return At})),i.d(o,"withSnakeCaseKeys",(function(){return Pt})),i.d(o,"base64Encode",(function(){return Lt})),i.d(o,"base64EncodeURL",(function(){return Rt})),i.d(o,"extractUrlParams",(function(){return jt})),i.d(o,"patchFetchFormat",(function(){return It})),i.d(o,"optionConsume",(function(){return Dt})),i.d(o,"isEmpty",(function(){return Nt})),i.d(o,"isElement",(function(){return U.a})),i.d(o,"isFunction",(function(){return H.a})),i.d(o,"trim",(function(){return G.a})),i.d(o,"getData",(function(){return Bt})),i.d(o,"setData",(function(){return zt})),i.d(o,"getAttribute",(function(){return Ft})),i.d(o,"setAttribute",(function(){return Vt})),i.d(o,"removeAttribute",(function(){return Ut})),i.d(o,"setAttributes",(function(){return qt})),i.d(o,"hasClass",(function(){return Ht})),i.d(o,"addClass",(function(){return Wt})),i.d(o,"getStyles",(function(){return Gt})),i.d(o,"cssExpand",(function(){return Xt})),i.d(o,"domStyle",(function(){return Yt})),i.d(o,"curCSS",(function(){return Zt})),i.d(o,"cssValue",(function(){return Qt})),i.d(o,"augmentWidthOrHeight",(function(){return Jt})),i.d(o,"getWidthOrHeight",(function(){return $t})),i.d(o,"width",(function(){return te}));var s=function(t){var e,n,r,i,a,o,s,u;if(null===t||"undefined"===typeof t)return"";for(u="",a=void 0,r=void 0,a=r=0,s=(o=t+"").length,i=0;i<s;)n=null,(e=o.charCodeAt(i))<128?r++:n=e>127&&e<2048?String.fromCharCode(e>>6|192,63&e|128):String.fromCharCode(e>>12|224,e>>6&63|128,63&e|128),null!==n&&(r>a&&(u+=o.slice(a,r)),u+=n,a=r=i+1),i++;return r>a&&(u+=o.slice(a,s)),u},u=function(t){var e,n,r,i;for(e=0,i=0,e^=-1,n=0,r=(t=s(t)).length;n<r;)i=255&(e^t.charCodeAt(n)),e=e>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8),n++;return(e^=-1)<0&&(e+=4294967296),e};function l(t,e,n){return e>>=0,n=String("undefined"!==typeof n?n:" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=function(t,e){for(var n="";e>0;)n+=t,e--;return n}(n,e/n.length)),n.slice(0,e)+String(t))}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h,f=0,d={};(h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",function(t){if(Array.isArray(t))return c(t)}(h)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(h)||function(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){var e=f.toString(2);e=l(e,6,"0"),d[e]=t,f++}));var p=d;function v(t){var e="",n=6*t.split(".").length,r=function(t){if(t.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return t.split(".").reverse().map((function(t){return l(t,2,"0")})).join(".")}(t),i=parseInt(r.split(".").join("")).toString(2);if((i=l(i,n,"0")).length%6!==0)throw"Version must be smaller than 43.21.26)";return i.match(/.{1,6}/g).forEach((function(t){e+=p[t]})),e}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var e=g(t.techVersion),n=v(t.sdkSemver),r=v(e),i=t.feature,a=t.sdkCode,o="A";return"".concat(o).concat(a).concat(n).concat(r).concat(i)}catch(s){return"E"}}function g(t){var e=t.split(".");return"".concat(e[0],".").concat(e[1])}function y(t){var e={sdkSemver:t.sdkSemver,techVersion:t.techVersion,sdkCode:t.sdkCode,feature:"0"};return t.urlAnalytics?(t.accessibility&&(e.feature="D"),"lazy"===t.loading&&(e.feature="C"),t.responsive&&(e.feature="A"),t.placeholder&&(e.feature="B"),e):{}}var _=i("lodash/assign"),b=i.n(_),x=i("lodash/cloneDeep"),w=i.n(x),S=i("lodash/compact"),k=i.n(S),T=i("lodash/difference"),E=i.n(T),C=i("lodash/functions"),O=i.n(C),M=i("lodash/identity"),A=i.n(M),P=i("lodash/includes"),L=i.n(P),R=i("lodash/isArray"),j=i.n(R),I=i("lodash/isPlainObject"),D=i.n(I),N=i("lodash/isString"),B=i.n(N),z=i("lodash/merge"),F=i.n(z),V=i("lodash/isElement"),U=i.n(V),q=i("lodash/isFunction"),H=i.n(q),W=i("lodash/trim"),G=i.n(W);function X(t){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(){return"object"===("undefined"===typeof window?"undefined":X(window))&&window.IntersectionObserver}function Z(){return"object"===("undefined"===typeof HTMLImageElement?"undefined":X(HTMLImageElement))&&HTMLImageElement.prototype.loading}function Q(t,e){try{if(Z()||!Y())return void e();var n=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(e(),n.unobserve(t.target))}))}),{threshold:[0,.01]});n.observe(t)}catch(r){e()}}var J="2.5.0",K="d3jpl91pxevbkh.cloudfront.net",$="cloudinary-a.akamaihd.net",tt="res.cloudinary.com",et=tt,nt=1e4,rt={format:"jpg",resource_type:"video"},it=["webm","mp4","ogv"],at={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},ot={resource_type:"image",transformation:[],type:"upload"},st={fallback_content:"",resource_type:"video",source_transformation:{},source_types:it,transformation:[],type:"upload"},ut=[{type:"mp4",codecs:"hev1",transformations:{video_codec:"h265"}},{type:"webm",codecs:"vp9",transformations:{video_codec:"vp9"}},{type:"mp4",transformations:{video_codec:"auto"}},{type:"webm",transformations:{video_codec:"auto"}}],lt={seeThru:"https://unpkg.com/seethru@4/dist/seeThru.min.js"},ct={blur:[{effect:"blur:2000",quality:1,fetch_format:"auto"}],pixelate:[{effect:"pixelate",quality:1,fetch_format:"auto"}],"predominant-color-pixel":[{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:1,height:1,gravity:"north_east"},{fetch_format:"auto",quality:"auto"}],"predominant-color":[{variables:[["$currWidth","w"],["$currHeight","h"]]},{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:10,height:10,gravity:"north_east"},{width:"$currWidth",height:"$currHeight",crop:"fill"},{fetch_format:"auto",quality:"auto"}],vectorize:[{effect:"vectorize:3:0.1",fetch_format:"svg"}]},ht={darkmode:"tint:75:black",brightmode:"tint:50:white",monochrome:"grayscale",colorblind:"assist_colorblind"},ft=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function dt(t){return(dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){t=t||{};var n=Object.keys(t).filter((function(t){return!L()(e,t)})),r={};return n.forEach((function(e){return r[e]=t[e]})),r}var vt,mt=function(t){return t.length&&t.every(B.a)},gt=function(t,e){return t.filter((function(t){return t!==e}))},yt=function(t){return null!=t&&!isNaN(parseFloat(t))},_t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/([^a-zA-Z0-9_.\-\/:]+)/g;return t.replace(e,(function(t){return t.split("").map((function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})).join("")}))},bt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){var n,r;for(n in e)r=e[n],void 0===t[n]&&(t[n]=r);return t}),t)},xt=Object.prototype,wt=xt.toString,St=function(t){var e;return e=dt(t),!!t&&("object"===e||"function"===e)},kt="[object Function]",Tt=function(t){return St(t)&&wt.call(t)===kt},Et=RegExp("[A-Z]+(?=[A-Z][a-z]+)|[A-Z]?[a-z]+|[A-Z]+|[0-9]+","g"),Ct=function(t){var e=t.match(Et);return(e=e.map((function(t){return t.charAt(0).toLocaleUpperCase()+t.slice(1).toLocaleLowerCase()})))[0]=e[0].toLocaleLowerCase(),e.join("")},Ot=function(t){var e=t.match(Et);return(e=e.map((function(t){return t.toLocaleLowerCase()}))).join("_")},Mt=function(t,e){var n,r;for(var i in n={},t)r=t[i],e&&(i=e(i)),Nt(i)||(n[i]=r);return n},At=function(t){return Mt(t,Ct)},Pt=function(t){return Mt(t,Ot)},Lt="undefined"!==typeof btoa&&Tt(btoa)?btoa:"undefined"!==typeof e&&Tt(e)?function(t){return t instanceof e||(t=new e.from(String(t),"binary")),t.toString("base64")}:function(t){throw new Error("No base64 encoding function found")},Rt=function(t){try{t=decodeURI(t)}finally{t=encodeURI(t)}return Lt(t)};function jt(t){return ft.reduce((function(e,n){return null!=t[n]&&(e[n]=t[n]),e}),{})}function It(t){null==t&&(t={}),"fetch"===t.type&&null==t.fetch_format&&(t.fetch_format=Dt(t,"format"))}function Dt(t,e,n){var r=t[e];return delete t[e],null!=r?r:n}function Nt(t){if(null==t)return!0;if("number"==typeof t.length)return 0===t.length;if("number"==typeof t.size)return 0===t.size;if("object"==dt(t)){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}return!0}var Bt=function(t,e){switch(!1){case!(null==t):return;case!H()(t.getAttribute):return t.getAttribute("data-".concat(e));case!H()(t.getAttr):return t.getAttr("data-".concat(e));case!H()(t.data):return t.data(e);case!(H()("undefined"!==typeof jQuery&&jQuery.fn&&jQuery.fn.data)&&U()(t)):return jQuery(t).data(e)}},zt=function(t,e,n){switch(!1){case!(null==t):return;case!H()(t.setAttribute):return t.setAttribute("data-".concat(e),n);case!H()(t.setAttr):return t.setAttr("data-".concat(e),n);case!H()(t.data):return t.data(e,n);case!(H()("undefined"!==typeof jQuery&&jQuery.fn&&jQuery.fn.data)&&U()(t)):return jQuery(t).data(e,n)}},Ft=function(t,e){switch(!1){case!(null==t):return;case!H()(t.getAttribute):return t.getAttribute(e);case!H()(t.attr):return t.attr(e);case!H()(t.getAttr):return t.getAttr(e)}},Vt=function(t,e,n){switch(!1){case!(null==t):return;case!H()(t.setAttribute):return t.setAttribute(e,n);case!H()(t.attr):return t.attr(e,n);case!H()(t.setAttr):return t.setAttr(e,n)}},Ut=function(t,e){switch(!1){case!(null==t):return;case!H()(t.removeAttribute):return t.removeAttribute(e);default:return Vt(t,void 0)}},qt=function(t,e){var n,r,i;for(n in r=[],e)null!=(i=e[n])?r.push(Vt(t,n,i)):r.push(Ut(t,n));return r},Ht=function(t,e){if(U()(t))return t.className.match(new RegExp("\\b".concat(e,"\\b")))},Wt=function(t,e){if(!t.className.match(new RegExp("\\b".concat(e,"\\b"))))return t.className=G()("".concat(t.className," ").concat(e))},Gt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null)},Xt=["Top","Right","Bottom","Left"];vt=function(t,e){var n,r;return n=9===t.nodeType?t.documentElement:t,t===(r=e&&e.parentNode)||!(!r||1!==r.nodeType||!n.contains(r))};var Yt=function(t,e){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style)return t.style[e]},Zt=function(t,e,n){var r,i,a,o,s,u;return o=/^margin/,u=void 0,i=void 0,r=void 0,a=void 0,s=t.style,(n=n||Gt(t))&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||vt(t.ownerDocument,t)||(a=Yt(t,e)),Kt.test(a)&&o.test(e)&&(u=s.width,i=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=u,s.minWidth=i,s.maxWidth=r)),void 0!==a?a+"":a},Qt=function(t,e,n,r){var i;return i=Zt(t,e,r),n?parseFloat(i):i},Jt=function(t,e,n,r,i){var a,o,s,u,l;if(n===(r?"border":"content"))return 0;for(l=0,a=0,o=(u="width"===e?["Right","Left"]:["Top","Bottom"]).length;a<o;a++)s=u[a],"margin"===n&&(l+=Qt(t,n+s,!0,i)),r?("content"===n&&(l-=Qt(t,"padding".concat(s),!0,i)),"margin"!==n&&(l-=Qt(t,"border".concat(s,"Width"),!0,i))):(l+=Qt(t,"padding".concat(s),!0,i),"padding"!==n&&(l+=Qt(t,"border".concat(s,"Width"),!0,i)));return l},Kt=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),$t=function(t,e,n){var r,i,a,o;if(o=!0,a="width"===e?t.offsetWidth:t.offsetHeight,i=Gt(t),r="border-box"===Qt(t,"boxSizing",!1,i),a<=0||null==a){if(((a=Zt(t,e,i))<0||null==a)&&(a=t.style[e]),Kt.test(a))return a;o=r&&a===t.style[e],a=parseFloat(a)||0}return a+Jt(t,e,n||(r?"border":"content"),o,i)},te=function(t){return $t(t,"width","content")};function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expressions=[],null!=e&&this.expressions.push(t.normalize(e))}var e,n,r;return e=t,r=[{key:"new",value:function(t){return new this(t)}},{key:"normalize",value:function(e){if(null==e)return e;e=String(e);var n=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g");e=e.replace(n,(function(e){return t.OPERATORS[e]}));var r="("+Object.keys(t.PREDEFINED_VARS).join("|")+")",i=new RegExp("".concat("(\\$_*[^_ ]+)","|").concat(r),"g");return(e=e.replace(i,(function(e){return t.PREDEFINED_VARS[e]||e}))).replace(/[ _]+/g,"_")}},{key:"variable",value:function(t,e){return new this(t).value(e)}},{key:"width",value:function(){return new this("width")}},{key:"height",value:function(){return new this("height")}},{key:"initialWidth",value:function(){return new this("initialWidth")}},{key:"initialHeight",value:function(){return new this("initialHeight")}},{key:"aspectRatio",value:function(){return new this("aspectRatio")}},{key:"initialAspectRatio",value:function(){return new this("initialAspectRatio")}},{key:"pageCount",value:function(){return new this("pageCount")}},{key:"faceCount",value:function(){return new this("faceCount")}},{key:"currentPage",value:function(){return new this("currentPage")}},{key:"tags",value:function(){return new this("tags")}},{key:"pageX",value:function(){return new this("pageX")}},{key:"pageY",value:function(){return new this("pageY")}}],(n=[{key:"serialize",value:function(){return t.normalize(this.expressions.join("_"))}},{key:"toString",value:function(){return this.serialize()}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(t){return this.parent=t,this}},{key:"predicate",value:function(e,n,r){return null!=t.OPERATORS[n]&&(n=t.OPERATORS[n]),this.expressions.push("".concat(e,"_").concat(n,"_").concat(r)),this}},{key:"and",value:function(){return this.expressions.push("and"),this}},{key:"or",value:function(){return this.expressions.push("or"),this}},{key:"then",value:function(){return this.getParent().if(this.toString())}},{key:"height",value:function(t,e){return this.predicate("h",t,e)}},{key:"width",value:function(t,e){return this.predicate("w",t,e)}},{key:"aspectRatio",value:function(t,e){return this.predicate("ar",t,e)}},{key:"pageCount",value:function(t,e){return this.predicate("pc",t,e)}},{key:"faceCount",value:function(t,e){return this.predicate("fc",t,e)}},{key:"value",value:function(t){return this.expressions.push(t),this}}])&&ee(e.prototype,n),r&&ee(e,r),t}();ne.OPERATORS={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},ne.PREDEFINED_VARS={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp","preview:duration":"preview:duration",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},ne.BOUNDRY="[ _]+";var re=ne;function ie(t){return(ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function se(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){return!e||"object"!==ie(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ce=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(a,t);var e,n,r,i=se(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"height",value:function(t,e){return this.predicate("h",t,e)}},{key:"width",value:function(t,e){return this.predicate("w",t,e)}},{key:"aspectRatio",value:function(t,e){return this.predicate("ar",t,e)}},{key:"pageCount",value:function(t,e){return this.predicate("pc",t,e)}},{key:"faceCount",value:function(t,e){return this.predicate("fc",t,e)}},{key:"duration",value:function(t,e){return this.predicate("du",t,e)}},{key:"initialDuration",value:function(t,e){return this.predicate("idu",t,e)}}])&&ae(e.prototype,n),r&&ae(e,r),a}(re);function he(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"===typeof t)return fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.configuration=null==e?{}:w()(e),bt(this.configuration,ve)}var e,n,i;return e=t,(n=[{key:"init",value:function(){return this.fromEnvironment(),this.fromDocument(),this}},{key:"set",value:function(t,e){return this.configuration[t]=e,this}},{key:"get",value:function(t){return this.configuration[t]}},{key:"merge",value:function(t){return b()(this.configuration,w()(t)),this}},{key:"fromDocument",value:function(){var t,e,n,r;if(r="undefined"!==typeof document&&null!==document?document.querySelectorAll('meta[name^="cloudinary_"]'):void 0)for(e=0,n=r.length;e<n;e++)t=r[e],this.configuration[t.getAttribute("name").replace("cloudinary_","")]=t.getAttribute("content");return this}},{key:"fromEnvironment",value:function(){var t,e,n,i=this;return"undefined"!==typeof r&&null!==r&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLOUDINARY_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLOUDINARY_URL,(n=/cloudinary:\/\/(?:(\w+)(?:\:([\w-]+))?@)?([\w\.-]+)(?:\/([^?]*))?(?:\?(.+))?/.exec(t))&&(null!=n[3]&&(this.configuration.cloud_name=n[3]),null!=n[1]&&(this.configuration.api_key=n[1]),null!=n[2]&&(this.configuration.api_secret=n[2]),null!=n[4]&&(this.configuration.private_cdn=null!=n[4]),null!=n[4]&&(this.configuration.secure_distribution=n[4]),null!=(e=n[5])&&e.split("&").forEach((function(t){var e=he(t.split("="),2),n=e[0],r=e[1];null==r&&(r=!0),i.configuration[n]=r})))),this}},{key:"config",value:function(t,e){switch(!1){case void 0===e:return this.set(t,e),this.configuration;case!B()(t):return this.get(t);case!D()(t):return this.merge(t),this.configuration;default:return this.configuration}}},{key:"toOptions",value:function(){return w()(this.configuration)}}])&&de(e.prototype,n),i&&de(e,i),t}(),ve={responsive_class:"cld-responsive",responsive_use_breakpoints:!0,round_dpr:!0,secure:"https:"===("undefined"!==typeof window&&null!==window&&window.location?window.location.protocol:void 0)};pe.CONFIG_PARAMS=["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"];var me=pe;function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ye=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={},null!=e&&["resourceType","type","publicId","format"].forEach((function(t){var r;return n.options[t]=null!=(r=e[t])?r:e[Ot(t)]}))}var e,n,r;return e=t,(n=[{key:"resourceType",value:function(t){return this.options.resourceType=t,this}},{key:"type",value:function(t){return this.options.type=t,this}},{key:"publicId",value:function(t){return this.options.publicId=t,this}},{key:"getPublicId",value:function(){var t;return null!=(t=this.options.publicId)?t.replace(/\//g,":"):void 0}},{key:"getFullPublicId",value:function(){return null!=this.options.format?this.getPublicId()+"."+this.options.format:this.getPublicId()}},{key:"format",value:function(t){return this.options.format=t,this}},{key:"toString",value:function(){var t;if(t=[],null==this.options.publicId)throw"Must supply publicId";return"image"!==this.options.resourceType&&t.push(this.options.resourceType),"upload"!==this.options.type&&t.push(this.options.type),t.push(this.getFullPublicId()),k()(t).join(":")}},{key:"clone",value:function(){return new this.constructor(this.options)}}])&&ge(e.prototype,n),r&&ge(e,r),t}();function _e(t){return(_e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e){return(xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function we(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var i=ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==_e(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Te=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xe(t,e)}(a,t);var e,n,r,i=we(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,t),null!=t&&["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text"].forEach((function(n){var r;return e.options[n]=null!=(r=t[n])?r:t[Ot(n)]})),e.options.resourceType="text",e}return e=a,(n=[{key:"resourceType",value:function(t){throw"Cannot modify resourceType for text layers"}},{key:"type",value:function(t){throw"Cannot modify type for text layers"}},{key:"format",value:function(t){throw"Cannot modify format for text layers"}},{key:"fontFamily",value:function(t){return this.options.fontFamily=t,this}},{key:"fontSize",value:function(t){return this.options.fontSize=t,this}},{key:"fontWeight",value:function(t){return this.options.fontWeight=t,this}},{key:"fontStyle",value:function(t){return this.options.fontStyle=t,this}},{key:"textDecoration",value:function(t){return this.options.textDecoration=t,this}},{key:"textAlign",value:function(t){return this.options.textAlign=t,this}},{key:"stroke",value:function(t){return this.options.stroke=t,this}},{key:"letterSpacing",value:function(t){return this.options.letterSpacing=t,this}},{key:"lineSpacing",value:function(t){return this.options.lineSpacing=t,this}},{key:"fontHinting",value:function(t){return this.options.fontHinting=t,this}},{key:"fontAntialiasing",value:function(t){return this.options.fontAntialiasing=t,this}},{key:"text",value:function(t){return this.options.text=t,this}},{key:"toString",value:function(){var t,e,n,r,i,a,o,s,u,l;if(s=this.textStyleIdentifier(),null!=this.options.publicId&&(r=this.getFullPublicId()),null!=this.options.text){if(e=!Nt(r),n=!Nt(s),e&&n||!e&&!n)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(i=/\$\([a-zA-Z]\w*\)/g,o=0,l=_t(this.options.text,/[,\/]/g),u="";a=i.exec(l);)u+=_t(l.slice(o,a.index)),u+=a[0],o=a.index+a[0].length;u+=_t(l.slice(o))}return t=[this.options.resourceType,s,r,u],k()(t).join(":")}},{key:"textStyleIdentifier",value:function(){var t;if(t=[],"normal"!==this.options.fontWeight&&t.push(this.options.fontWeight),"normal"!==this.options.fontStyle&&t.push(this.options.fontStyle),"none"!==this.options.textDecoration&&t.push(this.options.textDecoration),t.push(this.options.textAlign),"none"!==this.options.stroke&&t.push(this.options.stroke),Nt(this.options.letterSpacing)&&!yt(this.options.letterSpacing)||t.push("letter_spacing_"+this.options.letterSpacing),Nt(this.options.lineSpacing)&&!yt(this.options.lineSpacing)||t.push("line_spacing_"+this.options.lineSpacing),Nt(this.options.fontAntialiasing)||t.push("antialias_"+this.options.fontAntialiasing),Nt(this.options.fontHinting)||t.push("hinting_"+this.options.fontHinting),!Nt(k()(t))){if(Nt(this.options.fontFamily))throw"Must supply fontFamily. ".concat(t);if(Nt(this.options.fontSize)&&!yt(this.options.fontSize))throw"Must supply fontSize."}return t.unshift(this.options.fontFamily,this.options.fontSize),t=k()(t).join("_")}}])&&be(e.prototype,n),r&&be(e,r),a}(ye);function Ee(t){return(Ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(t,e){return!e||"object"!==Ee(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pe=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(n,t);var e=Oe(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t)).options.resourceType="subtitles",r}return n}(Te);function Le(t){return(Le="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ne(t);if(e){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De(this,n)}}function De(t,e){return!e||"object"!==Le(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(a,t);var e,n,r,i=Ie(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,t),B()(t)?e.options.url=t:(null!=t?t.url:void 0)&&(e.options.url=t.url),e}return e=a,(n=[{key:"url",value:function(t){return this.options.url=t,this}},{key:"toString",value:function(){return"fetch:".concat(Rt(this.options.url))}}])&&Re(e.prototype,n),r&&Re(e,r),a}(ye);function ze(t){return(ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e,n){return(Fe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=We(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ve(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);if(e){var i=We(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return He(this,n)}}function He(t,e){return!e||"object"!==ze(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),t}var Ze=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.a;Ge(this,t),this.name=e,this.shortName=n,this.process=r}return Ye(t,[{key:"set",value:function(t){return this.origValue=t,this}},{key:"serialize",value:function(){var t,e;return t=this.value(),e=j()(t)||D()(t)||B()(t)?!Nt(t):null!=t,null!=this.shortName&&e?"".concat(this.shortName,"_").concat(t):""}},{key:"value",value:function(){return this.process(this.origValue)}}],[{key:"norm_color",value:function(t){return null!=t?t.replace(/^#/,"rgb:"):void 0}},{key:"build_array",value:function(t){return null==t?[]:j()(t)?t:[t]}},{key:"process_video_params",value:function(t){var e;switch(t.constructor){case Object:return e="","codec"in t&&(e=t.codec,"profile"in t&&(e+=":"+t.profile,"level"in t&&(e+=":"+t.level))),e;case String:return t;default:return null}}}]),t}(),Qe=function(t){Ve(n,t);var e=qe(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Ge(this,n),(i=e.call(this,t,r,o)).sep=a,i}return Ye(n,[{key:"serialize",value:function(){if(null!=this.shortName){var t=this.value();if(Nt(t))return"";if(B()(t))return"".concat(this.shortName,"_").concat(t);var e=t.map((function(t){return H()(t.serialize)?t.serialize():t})).join(this.sep);return"".concat(this.shortName,"_").concat(e)}return""}},{key:"value",value:function(){var t=this;return j()(this.origValue)?this.origValue.map((function(e){return t.process(e)})):this.process(this.origValue)}},{key:"set",value:function(t){return null==t||j()(t)?Fe(We(n.prototype),"set",this).call(this,t):Fe(We(n.prototype),"set",this).call(this,[t])}}]),n}(Ze),Je=function(t){Ve(n,t);var e=qe(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Ge(this,n),(r=e.call(this,t,i,o)).sep=a,r}return Ye(n,[{key:"serialize",value:function(){var t=this,e="",n=this.value();if(Nt(n))return e;if(mt(n)){var r=n.join(this.sep);Nt(r)||(e="".concat(this.shortName,"_").concat(r))}else e=n.map((function(e){return B()(e)&&!Nt(e)?"".concat(t.shortName,"_").concat(e):H()(e.serialize)?e.serialize():D()(e)&&!Nt(e)?new yn(e).serialize():void 0})).filter((function(t){return t}));return e}},{key:"set",value:function(t){return this.origValue=t,j()(this.origValue)?Fe(We(n.prototype),"set",this).call(this,this.origValue):Fe(We(n.prototype),"set",this).call(this,[this.origValue])}}]),n}(Ze),Ke=function(t){Ve(n,t);var e=qe(n);function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.norm_range_value;return Ge(this,n),e.call(this,t,r,i)}return Ye(n,null,[{key:"norm_range_value",value:function(t){var e=String(t).match(new RegExp("^(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?$"));if(e){var n=null!=e[5]?"p":"";t=(e[1]||e[4])+n}return t}}]),n}(Ze),$e=function(t){Ve(n,t);var e=qe(n);function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.a;return Ge(this,n),e.call(this,t,r,i)}return Ye(n,[{key:"serialize",value:function(){return this.value()}}]),n}(Ze),tn=function(t){Ve(n,t);var e=qe(n);function n(){return Ge(this,n),e.apply(this,arguments)}return Ye(n,[{key:"value",value:function(){if(null==this.origValue)return"";var t;if(this.origValue instanceof ye)t=this.origValue;else if(D()(this.origValue)){var e=At(this.origValue);t="text"===e.resourceType||null!=e.text?new Te(e):"subtitles"===e.resourceType?new Pe(e):"fetch"===e.resourceType||null!=e.url?new Be(e):new ye(e)}else t=B()(this.origValue)?/^fetch:.+/.test(this.origValue)?new Be(this.origValue.substr(6)):this.origValue:"";return t.toString()}}],[{key:"textStyle",value:function(t){return new Te(t).textStyleIdentifier()}}]),n}(Ze);function en(t){return(en="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=on(t);if(e){var i=on(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return an(this,n)}}function an(t,e){return!e||"object"!==en(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"===typeof t)return un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e,n){return e&&cn(t.prototype,e),n&&cn(t,n),t}function fn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((function(e){Object.keys(e).forEach((function(n){null!=e[n]&&(t[n]=e[n])}))})),t}var dn=function(){function t(e){var n,r;ln(this,t),n=void 0,r={},this.toOptions=function(t){var e={};if(null==t&&(t=!0),Object.keys(r).forEach((function(t){return e[t]=r[t].origValue})),fn(e,this.otherOptions),t&&!Nt(this.chained)){var n=this.chained.map((function(t){return t.toOptions()}));n.push(e),fn(e={},this.otherOptions),e.transformation=n}return e},this.setParent=function(t){return n=t,null!=t&&this.fromOptions("function"===typeof t.toOptions?t.toOptions():void 0),this},this.getParent=function(){return n},this.param=function(t,e,n,i,a){return null==a&&(a=H()(i)?i:A.a),r[e]=new Ze(e,n,a).set(t),this},this.rawParam=function(t,e,n,i,a){return a=vn(arguments),r[e]=new $e(e,n,a).set(t),this},this.rangeParam=function(t,e,n,i,a){return a=vn(arguments),r[e]=new Ke(e,n,a).set(t),this},this.arrayParam=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:":",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return a=vn(arguments),r[e]=new Qe(e,n,i,a).set(t),this},this.transformationParam=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return a=vn(arguments),r[e]=new Je(e,n,i,a).set(t),this},this.layerParam=function(t,e,n){return r[e]=new tn(e,n).set(t),this},this.getValue=function(t){var e=r[t]&&r[t].value();return null!=e?e:this.otherOptions[t]},this.get=function(t){return r[t]},this.remove=function(t){var e;switch(!1){case null==r[t]:return e=r[t],delete r[t],e.origValue;case null==this.otherOptions[t]:return e=this.otherOptions[t],delete this.otherOptions[t],e;default:return null}},this.keys=function(){var t;return function(){var e;for(t in e=[],r)null!=t&&e.push(t.match(pn)?t:Ot(t));return e}().sort()},this.toPlainObject=function(){var t,e,n;for(e in t={},r)t[e]=r[e].value(),D()(t[e])&&(t[e]=w()(t[e]));return Nt(this.chained)||((n=this.chained.map((function(t){return t.toPlainObject()}))).push(t),t={transformation:n}),t},this.chain=function(){var t;return 0!==Object.getOwnPropertyNames(r).length&&(t=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(t)),this},this.resetTransformations=function(){return r={},this},this.otherOptions={},this.chained=[],this.fromOptions(e)}return hn(t,[{key:"fromOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e instanceof t)this.fromTransformation(e);else for(var n in(B()(e)||j()(e))&&(e={transformation:e}),(e=w()(e,(function(e){if(e instanceof t||e instanceof Layer)return new e.clone}))).if&&(this.set("if",e.if),delete e.if),e){var r=e[n];null!=r&&(n.match(pn)?"$attr"!==n&&this.set("variable",n,r):this.set(n,r))}return this}},{key:"fromTransformation",value:function(e){var n=this;return e instanceof t&&e.keys().forEach((function(t){return n.set(t,e.get(t).origValue)})),this}},{key:"set",value:function(t){var e;e=Ct(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L()(gn.methods,e)?this[e].apply(this,r):this.otherOptions[t]=r[0],this}},{key:"hasLayer",value:function(){return this.getValue("overlay")||this.getValue("underlay")}},{key:"serialize",value:function(){var t,e,n,r,i,a,o,s,u,l,c,h,f,d,p,v,m;for(l=this.chained.map((function(t){return t.serialize()})),r=this.keys(),d=null!=(i=this.get("transformation"))?i.serialize():void 0,t=null!=(a=this.get("if"))?a.serialize():void 0,v=function(t){var e,n,r,i,a;if(j()(t)){for(i=[],e=0,n=t.length;e<n;e++){var o=sn(t[e],2);r=o[0],a=o[1],i.push("".concat(r,"_").concat(re.normalize(a)))}return i}return t}(null!=(o=this.get("variables"))?o.value():void 0),r=E()(r,["transformation","if","variables"]),m=[],h=[],e=0,n=r.length;e<n;e++)(c=r[e]).match(pn)?m.push(c+"_"+re.normalize(null!=(s=this.get(c))?s.value():void 0)):h.push(null!=(u=this.get(c))?u.serialize():void 0);switch(!1){case!B()(d):h.push(d);break;case!j()(d):l=l.concat(d)}return h=function(){var t,e,n;for(n=[],t=0,e=h.length;t<e;t++)p=h[t],(j()(p)&&!Nt(p)||!j()(p)&&p)&&n.push(p);return n}(),h=m.sort().concat(v).concat(h.sort()),"if_end"===t?h.push(t):Nt(t)||h.unshift(t),Nt(f=k()(h).join(this.param_separator))||l.push(f),k()(l).join(this.trans_separator)}},{key:"toHtmlAttributes",value:function(){var t,e,n,r,i,a,o,s,u=this;return n={},Object.keys(this.otherOptions).forEach((function(e){a=u.otherOptions[e],s=Ot(e),L()(gn.PARAM_NAMES,s)||L()(ft,s)||(t=/^html_/.test(e)?e.slice(5):e,n[t]=a)})),this.keys().forEach((function(t){/^html_/.test(t)&&(n[Ct(t.slice(5))]=u.getValue(t))})),this.hasLayer()||this.getValue("angle")||L()(["fit","limit","lfill"],this.getValue("crop"))||(o=null!=(r=this.get("width"))?r.origValue:void 0,e=null!=(i=this.get("height"))?i.origValue:void 0,parseFloat(o)>=1&&null==n.width&&(n.width=o),parseFloat(e)>=1&&null==n.height&&(n.height=e)),n}},{key:"toHtml",value:function(){var t;return null!=(t=this.getParent())&&"function"===typeof t.toHtml?t.toHtml():void 0}},{key:"toString",value:function(){return this.serialize()}},{key:"clone",value:function(){return new this.constructor(this.toOptions(!0))}}],[{key:"listNames",value:function(){return gn.methods}},{key:"isValidParamName",value:function(t){return gn.methods.indexOf(Ct(t))>=0}}]),t}(),pn=/^\$[a-zA-Z0-9]+$/;function vn(t){var e;return e=null!=t?t[t.length-1]:void 0,H()(e)?e:void 0}function mn(t){var e=t.function_type,n=t.source;return"remote"===e?[e,btoa(n)].join(":"):"wasm"===e?[e,n].join(":"):void 0}dn.prototype.trans_separator="/",dn.prototype.param_separator=",";var gn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(n,t);var e=rn(n);function n(t){return ln(this,n),e.call(this,t)}return hn(n,[{key:"angle",value:function(t){return this.arrayParam(t,"angle","a",".",re.normalize)}},{key:"audioCodec",value:function(t){return this.param(t,"audio_codec","ac")}},{key:"audioFrequency",value:function(t){return this.param(t,"audio_frequency","af")}},{key:"aspectRatio",value:function(t){return this.param(t,"aspect_ratio","ar",re.normalize)}},{key:"background",value:function(t){return this.param(t,"background","b",Ze.norm_color)}},{key:"bitRate",value:function(t){return this.param(t,"bit_rate","br")}},{key:"border",value:function(t){return this.param(t,"border","bo",(function(t){return D()(t)?(t=b()({},{color:"black",width:2},t),"".concat(t.width,"px_solid_").concat(Ze.norm_color(t.color))):t}))}},{key:"color",value:function(t){return this.param(t,"color","co",Ze.norm_color)}},{key:"colorSpace",value:function(t){return this.param(t,"color_space","cs")}},{key:"crop",value:function(t){return this.param(t,"crop","c")}},{key:"customFunction",value:function(t){return this.param(t,"custom_function","fn",(function(){return mn(t)}))}},{key:"customPreFunction",value:function(t){if(!this.get("custom_function"))return this.rawParam(t,"custom_function","",(function(){return(t=mn(t))?"fn_pre:".concat(t):t}))}},{key:"defaultImage",value:function(t){return this.param(t,"default_image","d")}},{key:"delay",value:function(t){return this.param(t,"delay","dl")}},{key:"density",value:function(t){return this.param(t,"density","dn")}},{key:"duration",value:function(t){return this.rangeParam(t,"duration","du")}},{key:"dpr",value:function(t){return this.param(t,"dpr","dpr",(function(t){return(null!=(t=t.toString())?t.match(/^\d+$/):void 0)?t+".0":re.normalize(t)}))}},{key:"effect",value:function(t){return this.arrayParam(t,"effect","e",":",re.normalize)}},{key:"else",value:function(){return this.if("else")}},{key:"endIf",value:function(){return this.if("end")}},{key:"endOffset",value:function(t){return this.rangeParam(t,"end_offset","eo")}},{key:"fallbackContent",value:function(t){return this.param(t,"fallback_content")}},{key:"fetchFormat",value:function(t){return this.param(t,"fetch_format","f")}},{key:"format",value:function(t){return this.param(t,"format")}},{key:"flags",value:function(t){return this.arrayParam(t,"flags","fl",".")}},{key:"gravity",value:function(t){return this.param(t,"gravity","g")}},{key:"fps",value:function(t){return this.param(t,"fps","fps",(function(t){return B()(t)?t:j()(t)?t.join("-"):t}))}},{key:"height",value:function(t){var e=this;return this.param(t,"height","h",(function(){return e.getValue("crop")||e.getValue("overlay")||e.getValue("underlay")?re.normalize(t):null}))}},{key:"htmlHeight",value:function(t){return this.param(t,"html_height")}},{key:"htmlWidth",value:function(t){return this.param(t,"html_width")}},{key:"if",value:function(){var t,e,r,i,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(o){case"else":return this.chain(),this.param(o,"if","if");case"end":for(this.chain(),t=r=this.chained.length-1;r>=0&&"end"!==(e=this.chained[t].getValue("if"))&&(null==e||(i=n.new().if(e),this.chained[t].remove("if"),a=this.chained[t],this.chained[t]=n.new().transformation([i,a]),"else"===e));t=r+=-1);return this.param(o,"if","if");case"":return ce.new().setParent(this);default:return this.param(o,"if","if",(function(t){return ce.new(t).toString()}))}}},{key:"keyframeInterval",value:function(t){return this.param(t,"keyframe_interval","ki")}},{key:"ocr",value:function(t){return this.param(t,"ocr","ocr")}},{key:"offset",value:function(t){var e,n,r=sn(H()(null!=t?t.split:void 0)?t.split(".."):j()(t)?t:[null,null],2);if(n=r[0],e=r[1],null!=n&&this.startOffset(n),null!=e)return this.endOffset(e)}},{key:"opacity",value:function(t){return this.param(t,"opacity","o",re.normalize)}},{key:"overlay",value:function(t){return this.layerParam(t,"overlay","l")}},{key:"page",value:function(t){return this.param(t,"page","pg")}},{key:"poster",value:function(t){return this.param(t,"poster")}},{key:"prefix",value:function(t){return this.param(t,"prefix","p")}},{key:"quality",value:function(t){return this.param(t,"quality","q",re.normalize)}},{key:"radius",value:function(t){return this.arrayParam(t,"radius","r",":",re.normalize)}},{key:"rawTransformation",value:function(t){return this.rawParam(t,"raw_transformation")}},{key:"size",value:function(t){var e,n;if(H()(null!=t?t.split:void 0)){var r=sn(t.split("x"),2);return n=r[0],e=r[1],this.width(n),this.height(e)}}},{key:"sourceTypes",value:function(t){return this.param(t,"source_types")}},{key:"sourceTransformation",value:function(t){return this.param(t,"source_transformation")}},{key:"startOffset",value:function(t){return this.rangeParam(t,"start_offset","so")}},{key:"streamingProfile",value:function(t){return this.param(t,"streaming_profile","sp")}},{key:"transformation",value:function(t){return this.transformationParam(t,"transformation","t")}},{key:"underlay",value:function(t){return this.layerParam(t,"underlay","u")}},{key:"variable",value:function(t,e){return this.param(e,t,t)}},{key:"variables",value:function(t){return this.arrayParam(t,"variables")}},{key:"videoCodec",value:function(t){return this.param(t,"video_codec","vc",Ze.process_video_params)}},{key:"videoSampling",value:function(t){return this.param(t,"video_sampling","vs")}},{key:"width",value:function(t){var e=this;return this.param(t,"width","w",(function(){return e.getValue("crop")||e.getValue("overlay")||e.getValue("underlay")?re.normalize(t):null}))}},{key:"x",value:function(t){return this.param(t,"x","x",re.normalize)}},{key:"y",value:function(t){return this.param(t,"y","y",re.normalize)}},{key:"zoom",value:function(t){return this.param(t,"zoom","z",re.normalize)}}],[{key:"new",value:function(t){return new n(t)}}]),n}(dn);gn.methods=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],gn.PARAM_NAMES=gn.methods.map(Ot).concat(me.CONFIG_PARAMS);var yn=gn;function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bn(t,e){return e?!0===e?t:"".concat(t,'="').concat(e,'"'):void 0}function xn(t){return B()(t)?t.replace('"',"&#34;").replace("'","&#39;"):t}var wn=function(){function t(e,n,r){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.publicId=n,null==r&&(D()(n)?(r=n,this.publicId=void 0):r={}),(i=new yn(r)).setParent(this),this.transformation=function(){return i}}var e,n,r;return e=t,r=[{key:"new",value:function(t,e,n){return new this(t,e,n)}},{key:"isResponsive",value:function(t,e){var n;return n=Bt(t,"src-cache")||Bt(t,"src"),Ht(t,e)&&/\bw_auto\b/.exec(n)}}],(n=[{key:"htmlAttrs",value:function(t){var e,n;return function(){var r;for(e in r=[],t)(n=xn(t[e]))&&r.push(bn(e,n));return r}().sort().join(" ")}},{key:"getOptions",value:function(){return this.transformation().toOptions()}},{key:"getOption",value:function(t){return this.transformation().getValue(t)}},{key:"attributes",value:function(){var t=this.transformation().toHtmlAttributes();return Object.keys(t).forEach((function(e){D()(t[e])&&delete t[e]})),t.attributes&&(F()(t,t.attributes),delete t.attributes),t}},{key:"setAttr",value:function(t,e){return this.transformation().set("html_".concat(t),e),this}},{key:"getAttr",value:function(t){return this.attributes()["html_".concat(t)]||this.attributes()[t]}},{key:"removeAttr",value:function(t){var e;return null!=(e=this.transformation().remove("html_".concat(t)))?e:this.transformation().remove(t)}},{key:"content",value:function(){return""}},{key:"openTag",value:function(){var t="<"+this.name,e=this.htmlAttrs(this.attributes());return e&&e.length>0&&(t+=" "+e),t+">"}},{key:"closeTag",value:function(){return"</".concat(this.name,">")}},{key:"toHtml",value:function(){return this.openTag()+this.content()+this.closeTag()}},{key:"toDOM",value:function(){var t,e,n,r;if(!H()("undefined"!==typeof document&&null!==document?document.createElement:void 0))throw"Can't create DOM if document is not present!";for(e in t=document.createElement(this.name),n=this.attributes())r=n[e],t.setAttribute(e,r);return t}}])&&_n(e.prototype,n),r&&_n(e,r),t}();function Sn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kn(t){return!!t&&!!t.match(/^https?:\//)}function Tn(t,e){if(e.cloud_name&&"/"===e.cloud_name[0])return"/res"+e.cloud_name;var n="http://",r="",i="res",a=".cloudinary.com",o="/"+e.cloud_name;return e.protocol&&(n=e.protocol+"//"),e.private_cdn&&(r=e.cloud_name+"-",o=""),e.cdn_subdomain&&(i="res-"+function(t){return u(t)%5+1}(t)),e.secure?(n="https://",!1===e.secure_cdn_subdomain&&(i="res"),null!=e.secure_distribution&&e.secure_distribution!==$&&e.secure_distribution!==et&&(r="",i="",a=e.secure_distribution)):e.cname&&(n="http://",r="",i=e.cdn_subdomain?"a"+(u(t)%5+1)+".":"",a=e.cname),[n,r,i,a,o].join("")}function En(t){return encodeURIComponent(t).replace(/%3A/g,":").replace(/%2F/g,"/")}function Cn(t){var e=t.cloud_name,n=t.url_suffix;return e?n&&n.match(/[\.\/]/)?"url_suffix should not include . or /":void 0:"Unknown cloud_name"}function On(t,e){var n=e.type;return kn(t)||"fetch"!==n?t:function(t){var e=document.location.protocol+"//"+document.location.host;return"?"===t[0]?e+=document.location.pathname:"/"!==t[0]&&(e+=document.location.pathname.replace(/\/[^\/]*$/,"/")),e+t}(t)}function Mn(t,e){if(kn(t)&&("upload"===e.type||"asset"===e.type))return t;var n=function(t,e){var n=e.force_version||"undefined"===typeof e.force_version,r=t.indexOf("/")<0||t.match(/^v[0-9]+/)||kn(t)||e.version;return n&&!r&&(e.version=1),e.version?"v".concat(e.version):""}(t,e),r=function(t){var e=t||{},n=e.placeholder,r=e.accessibility,i=Sn(e,["placeholder","accessibility"]),a=new yn(i);return r&&ht[r]&&a.chain().effect(ht[r]),n&&("predominant-color"===n&&a.getValue("width")&&a.getValue("height")&&(n+="-pixel"),(ct[n]||ct.blur).forEach((function(t){return a.chain().transformation(t)}))),a.serialize()}(e),i=Tn(t,e),a=function(t){var e=t.signature,n=!e||0===e.indexOf("s--")&&"--"===e.substr(-2);return delete t.signature,n?e:"s--".concat(e,"--")}(e),o=function(t){var e,n=t.resource_type,r=void 0===n?"image":n,i=t.type,a=void 0===i?"upload":i,o=t.url_suffix,s=t.use_root_path,u=t.shorten,l=r;if(D()(l)&&(l=(e=l).resource_type,a=e.type,u=e.shorten),null==a&&(a="upload"),null!=o&&(l=at["".concat(l,"/").concat(a)],a=null,null==l))throw new Error("URL Suffix only supported for ".concat(Object.keys(at).join(", ")));if(s){if(("image"!==l||"upload"!==a)&&"images"!==l)throw new Error("Root path only supported for image/upload");l=null,a=null}return u&&"image"===l&&"upload"===a&&(l="iu",a=null),[l,a].join("/")}(e);return t=function(t,e){if(kn(t))t=En(t);else{try{t=decodeURIComponent(t)}catch(n){}t=En(t),e.url_suffix&&(t=t+"/"+e.url_suffix),e.format&&(e.trust_public_id||(t=t.replace(/\.(jpg|png|gif|webp)$/,"")),t=t+"."+e.format)}return t}(t,e),k()([i,o,a,r,n,t]).join("/").replace(/([^:])\/+/g,"$1/").replace(" ","%20")}function An(t,e){return t instanceof yn&&(t=t.toOptions()),"fetch"===(t=bt({},t,e,ot)).type&&(t.fetch_format=t.fetch_format||t.format),t}function Pn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return t;t=On(t,e=An(e,n));var r=Cn(e);if(r)throw r;var i=Mn(t,e);if(e.urlAnalytics){var a=y(e),o=m(a),s="?";i.indexOf("?")>=0&&(s="&"),i="".concat(i).concat(s,"_a=").concat(o)}return i}function Ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"===typeof t)return Rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t){var e=t.breakpoints||[];if(e.length)return e;var n=Ln([t.min_width,t.max_width,t.max_images].map(Number),3),r=n[0],i=n[1],a=n[2];if([r,i,a].some(isNaN))throw"Either (min_width, max_width, max_images) or breakpoints must be provided to the image srcset attribute";if(r>i)throw"min_width must be less than max_width";if(a<=0)throw"max_images must be a positive integer";1===a&&(r=i);for(var o=Math.ceil((i-r)/Math.max(a-1,1)),s=r;s<i;s+=o)e.push(s);return e.push(i),e}var In=Nt;function Dn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=jt(r);return n=n||r,i.raw_transformation=new yn([F.a({},n),{crop:"scale",width:e}]).toString(),Pn(t,i)}function Nn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jn(e)}function Bn(t,e,n,r){return It(r=w.a(r)),e.map((function(e){return"".concat(Dn(t,e,n,r)," ").concat(e,"w")})).join(", ")}function zn(t){return null==t?"":t.map((function(t){return"(max-width: ".concat(t,"px) ").concat(t,"px")})).join(", ")}function Fn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};if(In(n))return i;var a=!e.sizes&&!0===n.sizes,o=!e.srcset;if(o||a){var s=Nn(t,n,r);if(o){var u=n.transformation,l=Bn(t,s,u,r);In(l)||(i.srcset=l)}if(a){var c=zn(s);In(c)||(i.sizes=c)}}return i}function Vn(t){return(Vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hn(t,e,n){return(Hn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wn(t,e){return(Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yn(t);if(e){var i=Yn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xn(this,n)}}function Xn(t,e){return!e||"object"!==Vn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wn(t,e)}(a,t);var e,n,r,i=Gn(a);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Un(this,a),i.call(this,"img",t,e)}return e=a,(n=[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var t,e,n;t=Hn(Yn(a.prototype),"attributes",this).call(this)||{},e=this.getOptions();var r=this.getOption("srcset"),i=this.getOption("attributes")||{},o={};return B()(r)?o.srcset=r:o=Fn(this.publicId,i,r,e),Nt(o)||(delete e.width,delete e.height),F()(t,o),null==t[n=e.responsive&&!e.client_hints?"data-src":"src"]&&(t[n]=Pn(this.publicId,this.getOptions())),t}}])&&qn(e.prototype,n),r&&qn(e,r),a}(wn);function Qn(t){return(Qn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $n(t,e,n){return($n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function er(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rr(t);if(e){var i=rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nr(this,n)}}function nr(t,e){return!e||"object"!==Qn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(a,t);var e,n,r,i=er(a);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn(this,a),i.call(this,"source",t,e)}return e=a,(n=[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var t=this.getOption("srcset"),e=$n(rr(a.prototype),"attributes",this).call(this)||{},n=this.getOptions();return F()(e,Fn(this.publicId,e,t,n)),e.srcset||(e.srcset=Pn(this.publicId,n)),!e.media&&n.media&&(e.media=function(t){var e=[];return null!=t&&(null!=t.min_width&&e.push("(min-width: ".concat(t.min_width,"px)")),null!=t.max_width&&e.push("(max-width: ".concat(t.max_width,"px)"))),e.join(" and ")}(n.media)),e}}])&&Kn(e.prototype,n),r&&Kn(e,r),a}(wn);function ar(t){return(ar="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e,n){return(ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fr(t);if(e){var i=fr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hr(this,n)}}function hr(t,e){return!e||"object"!==ar(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fr(t){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(a,t);var e,n,r,i=cr(a);function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return or(this,a),(e=i.call(this,"picture",t,n)).widthList=r,e}return e=a,(n=[{key:"content",value:function(){var t=this;return this.widthList.map((function(e){var n=e.min_width,r=e.max_width,i=e.transformation,a=t.getOptions(),o=new yn(a);return o.chain().fromOptions("string"===typeof i?{raw_transformation:i}:i),(a=jt(a)).media={min_width:n,max_width:r},a.transformation=o,new ir(t.publicId,a).toHtml()})).join("")+new Zn(this.publicId,this.getOptions()).toHtml()}},{key:"attributes",value:function(){var t=ur(fr(a.prototype),"attributes",this).call(this);return delete t.width,delete t.height,t}},{key:"closeTag",value:function(){return"</"+this.name+">"}}])&&sr(e.prototype,n),r&&sr(e,r),a}(wn);function pr(t){return(pr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e,n){return(gr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yr(t,e){return(yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _r(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xr(t);if(e){var i=xr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return br(this,n)}}function br(t,e){return!e||"object"!==pr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wr=["source_types","source_transformation","fallback_content","poster","sources"],Sr=["webm","mp4","ogv"],kr={format:"jpg",resource_type:"video"},Tr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yr(t,e)}(a,t);var e,n,r,i=_r(a);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vr(this,a),e=bt({},e,st),i.call(this,"video",t.replace(/\.(mp4|ogv|webm)$/,""),e)}return e=a,(n=[{key:"setSourceTransformation",value:function(t){return this.transformation().sourceTransformation(t),this}},{key:"setSourceTypes",value:function(t){return this.transformation().sourceTypes(t),this}},{key:"setPoster",value:function(t){return this.transformation().poster(t),this}},{key:"setFallbackContent",value:function(t){return this.transformation().fallbackContent(t),this}},{key:"content",value:function(){var t=this,e=this.transformation().getValue("source_types"),n=this.transformation().getValue("source_transformation"),r=this.transformation().getValue("fallback_content"),i=this.getOption("sources"),a=[];return j()(i)&&!Nt(i)?a=i.map((function(e){var n=Pn(t.publicId,bt({},e.transformations||{},{resource_type:"video",format:e.type}),t.getOptions());return t.createSourceTag(n,e.type,e.codecs)})):(Nt(e)&&(e=Sr),j()(e)&&(a=e.map((function(e){var r=Pn(t.publicId,bt({},n[e]||{},{resource_type:"video",format:e}),t.getOptions());return t.createSourceTag(r,e)})))),a.join("")+r}},{key:"attributes",value:function(){var t=this.getOption("source_types"),e=this.getOption("poster");if(void 0===e&&(e={}),D()(e)){var n=null!=e.public_id?ot:kr;e=Pn(e.public_id||this.publicId,bt({},e,n,this.getOptions()))}var r=gr(xr(a.prototype),"attributes",this).call(this)||{};return r=pt(r,wr),!Nt(this.getOption("sources"))||Nt(t)||j()(t)||(r.src=Pn(this.publicId,this.getOptions(),{resource_type:"video",format:t})),null!=e&&(r.poster=e),r}},{key:"createSourceTag",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if(!Nt(e)){var i="ogv"===e?"ogg":e;if(r="video/"+i,!Nt(n)){var a=j()(n)?n.join(", "):n;r+="; codecs="+a}}return"<source "+this.htmlAttrs({src:t,type:r})+">"}}])&&mr(e.prototype,n),r&&mr(e,r),a}(wn);function Er(t){return(Er="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e){return(Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pr(t);if(e){var i=Pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ar(this,n)}}function Ar(t,e){return!e||"object"!==Er(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pr(t){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Or(t,e)}(a,t);var e,n,r,i=Mr(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,"meta",void 0,b()({"http-equiv":"Accept-CH",content:"DPR, Viewport-Width, Width"},t))}return e=a,(n=[{key:"closeTag",value:function(){return""}}])&&Cr(e.prototype,n),r&&Cr(e,r),a}(wn);function Rr(t){return function(t){if(Array.isArray(t))return jr(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return jr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ir,Dr,Nr,Br,zr,Fr,Vr=function(t,e,n,r){return new Promise((function(i,a){t.innerHTML=e.videoTag(n,r).toHtml(),t.querySelector(".cld-transparent-video").style.width="100%",i(t)}))},Ur=function(t,e){t.transformation?t.transformation.push({flags:[e]}):(t.flags||(t.flags=[]),"string"===typeof t.flags&&(t.flags=[t.flags]),t.flags.push(e))},qr=function(t){t.autoplay=!0,t.muted=!0,t.controls=!1,t.max_timeout_ms=t.max_timeout_ms||nt,t.class=t.class||"",t.class+=" cld-transparent-video",t.externalLibraries=t.externalLibraries||{},t.externalLibraries.seeThru||(t.externalLibraries.seeThru=lt.seeThru),Ur(t,"alpha")},Hr=function(t,e,n){return new Promise((function(r,i){if(n)r();else{var a=document.createElement("script");a.src=t;var o=setTimeout((function(){i({status:"error",message:"Timeout loading script ".concat(t)})}),e);a.onerror=function(){clearTimeout(o),i({status:"error",message:"Error loading ".concat(t)})},a.onload=function(){clearTimeout(o),r()},document.head.appendChild(a)}}))},Wr=function(t,e){return new Promise((function(n,r){var i=setTimeout((function(){r({status:"error",message:"Timeout loading Blob URL"})}),e),a=new XMLHttpRequest;a.responseType="blob",a.onload=function(t){clearTimeout(i),n({status:"success",payload:{blobURL:URL.createObjectURL(a.response)}})},a.onerror=function(){clearTimeout(i),r({status:"error",message:"Error loading Blob URL"})},a.open("GET",t,!0),a.send()}))},Gr=function(t){var e=t.autoplay,n=t.playsinline,r=t.loop,i=t.muted,a=t.poster,o=t.blobURL,s=t.videoURL,u=document.createElement("video");return u.style.visibility="hidden",u.position="absolute",u.x=0,u.y=0,u.src=o,u.setAttribute("data-video-url",s),e&&u.setAttribute("autoplay",e),n&&u.setAttribute("playsinline",n),r&&u.setAttribute("loop",r),i&&u.setAttribute("muted",i),i&&(u.muted=i),a&&u.setAttribute("poster",a),u.onload=function(){URL.revokeObjectURL(o)},u},Xr=function(t,e,n,r){var i=window,a=i.seeThru,o=i.setTimeout,s=i.clearTimeout;return new Promise((function(i,u){var l=o((function(){u({status:"error",message:"Timeout instantiating seeThru instance"})}),e);if(a)var c=a.create(t).ready((function(){s(l);var t=c.getCanvas();t.style.width="100%",t.className+=" "+n,r&&c.play(),i(c)}));else u({status:"error",message:"Error instantiating seeThru instance"})}))},Yr=function(t,e,n){var r=n.poster,i=n.autoplay,a=n.playsinline,o=n.loop,s=n.muted;return e+=".mp4",new Promise((function(u,l){Hr(n.externalLibraries.seeThru,n.max_timeout_ms,window.seeThru).then((function(){Wr(e,n.max_timeout_ms).then((function(c){var h=c.payload,f=Gr({blobURL:h.blobURL,videoURL:e,poster:r,autoplay:i,playsinline:a,loop:o,muted:s});t.appendChild(f),Xr(f,n.max_timeout_ms,n.class,n.autoplay).then((function(){u(t)})).catch((function(t){l(t)}))})).catch((function(t){var e=t.status,n=t.message;l({status:e,message:n})}))})).catch((function(t){var e=t.status,n=t.message;l({status:e,message:n})}))}))},Zr=function(){return new Promise((function(t,e){var n=document.createElement("video"),r=n.canPlayType&&n.canPlayType('video/webm; codecs="vp9"');t("maybe"===r||"probably"===r)}))};function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Nr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e*Math.ceil(t/e)},Dr=function(t,e){var n;for(n=t.length-2;n>=0&&t[n]>=e;)n--;return t[n+1]},Ir=function(t,e,n,r){var i,a,o,s;return!(s=null!=(i=null!=(a=null!=(o=r.responsive_use_breakpoints)?o:r.responsive_use_stoppoints)?a:this.config("responsive_use_breakpoints"))?i:this.config("responsive_use_stoppoints"))||"resize"===s&&!r.resizing?e:this.calc_breakpoint(t,e,n)},Br=function(t){var e,n;for(e=0;(t=null!=t?t.parentNode:void 0)instanceof Element&&!e;)n=window.getComputedStyle(t),/^inline/.test(n.display)||(e=te(t));return e},Fr=function(t,e){return t.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+this.device_pixel_ratio(e))},zr=function(t,e){var n;return t>(n=Bt(e,"width")||0)&&(n=t,zt(e,"width",t)),n};var Jr=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.devicePixelRatioCache={},this.responsiveConfig={},this.responsiveResizeInitialized=!1,n=new me(e),this.config=function(t,e){return n.config(t,e)},this.fromDocument=function(){return n.fromDocument(),this},this.fromEnvironment=function(){return n.fromEnvironment(),this},this.init=function(){return n.init(),this}}var e,n,r;return e=t,r=[{key:"new",value:function(t){return new this(t)}}],(n=[{key:"url",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pn(t,e,this.config())}},{key:"video_url",value:function(t,e){return e=b()({resource_type:"video"},e),this.url(t,e)}},{key:"video_thumbnail_url",value:function(t,e){return e=b()({},rt,e),this.url(t,e)}},{key:"transformation_string",value:function(t){return new yn(t).serialize()}},{key:"image",value:function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=this.imageTag(t,i),e=null!=(r=null!=i.client_hints?i.client_hints:this.config("client_hints"))&&r,null!=i.src||e||n.setAttr("src",""),n=n.toDOM(),e||(zt(n,"src-cache",this.url(t,i)),this.cloudinary_update(n,i)),n}},{key:"imageTag",value:function(t,e){var n;return(n=new Zn(t,this.config())).transformation().fromOptions(e),n}},{key:"pictureTag",value:function(t,e){var n;return(n=new dr(t,this.config())).transformation().fromOptions(e),n}},{key:"sourceTag",value:function(t,e){var n;return(n=new ir(t,this.config())).transformation().fromOptions(e),n}},{key:"video_thumbnail",value:function(t,e){return this.image(t,F()({},rt,e))}},{key:"facebook_profile_image",value:function(t,e){return this.image(t,b()({type:"facebook"},e))}},{key:"twitter_profile_image",value:function(t,e){return this.image(t,b()({type:"twitter"},e))}},{key:"twitter_name_profile_image",value:function(t,e){return this.image(t,b()({type:"twitter_name"},e))}},{key:"gravatar_image",value:function(t,e){return this.image(t,b()({type:"gravatar"},e))}},{key:"fetch_image",value:function(t,e){return this.image(t,b()({type:"fetch"},e))}},{key:"video",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.videoTag(t,e).toHtml()}},{key:"videoTag",value:function(t,e){return e=bt({},e,this.config()),new Tr(t,e)}},{key:"sprite_css",value:function(t,e){return e=b()({type:"sprite"},e),t.match(/.css$/)||(e.format="css"),this.url(t,e)}},{key:"responsive",value:function(t){var e,n,r,i,a,o=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.responsiveConfig=F()(this.responsiveConfig||{},t),i=null!=(e=this.responsiveConfig.responsive_class)?e:this.config("responsive_class"),s&&this.cloudinary_update("img.".concat(i,", img.cld-hidpi"),this.responsiveConfig),(null==(n=null!=(r=this.responsiveConfig.responsive_resize)?r:this.config("responsive_resize"))||n)&&!this.responsiveResizeInitialized){this.responsiveConfig.resizing=this.responsiveResizeInitialized=!0,a=null;var u=function(){var t,e,n,r,s,u;return t=null!=(e=null!=(n=o.responsiveConfig.responsive_debounce)?n:o.config("responsive_debounce"))?e:100,r=function(){a&&(clearTimeout(a),a=null)},s=function(){return o.cloudinary_update("img.".concat(i),o.responsiveConfig)},u=function(){return r(),s()},t?(r(),void(a=setTimeout(u,t))):s()};return window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}}},{key:"calc_breakpoint",value:function(t,e,n){var r=Bt(t,"breakpoints")||Bt(t,"stoppoints")||this.config("breakpoints")||this.config("stoppoints")||Nr;return H()(r)?r(e,n):(B()(r)&&(r=r.split(",").map((function(t){return parseInt(t)})).sort((function(t,e){return t-e}))),Dr(r,e))}},{key:"calc_stoppoint",value:function(t,e,n){return this.calc_breakpoint(t,e,n)}},{key:"device_pixel_ratio",value:function(t){t=null==t||t;var e=("undefined"!==typeof window&&null!==window?window.devicePixelRatio:void 0)||1;t&&(e=Math.ceil(e)),(e<=0||NaN===e)&&(e=1);var n=e.toString();return n.match(/^\d+$/)&&(n+=".0"),n}},{key:"processImageTags",value:function(t,e){if(Nt(t))return this;e=bt({},e||{},this.config());var n=t.filter((function(t){return/^img$/i.test(t.tagName)})).map((function(t){var n=b()({width:t.getAttribute("width"),height:t.getAttribute("height"),src:t.getAttribute("src")},e),r=n.source||n.src;delete n.source,delete n.src;var i=new yn(n).toHtmlAttributes();return zt(t,"src-cache",Pn(r,n)),t.setAttribute("width",i.width),t.setAttribute("height",i.height),t}));return this.cloudinary_update(n,e),this}},{key:"cloudinary_update",value:function(t,e){var n,r,i,a,o=this;if(null===t)return this;null==e&&(e={});var s,u=null!=e.responsive?e.responsive:this.config("responsive");t=function(t){return j()(t)?t:"NodeList"===t.constructor.name?Rr(t):B()(t)?Array.prototype.slice.call(document.querySelectorAll(t),0):[t]}(t),s=this.responsiveConfig&&null!=this.responsiveConfig.responsive_class?this.responsiveConfig.responsive_class:null!=e.responsive_class?e.responsive_class:this.config("responsive_class");var l=null!=e.round_dpr?e.round_dpr:this.config("round_dpr");return t.forEach((function(c){if(/img/i.test(c.tagName)){var h=!0;if(u&&Wt(c,s),!Nt(r=Bt(c,"src-cache")||Bt(c,"src"))){r=Fr.call(o,r,l),wn.isResponsive(c,s)&&(0!==(n=Br(c))?(/w_auto:breakpoints/.test(r)?(a=zr(n,c))?r=r.replace(/w_auto:breakpoints([_0-9]*)(:[0-9]+)?/,"w_auto:breakpoints$1:".concat(a)):h=!1:(i=/w_auto(:(\d+))?/.exec(r))&&(a=Ir.call(o,c,n,i[2],e),(a=zr(a,c))?r=r.replace(/w_auto[^,\/]*/g,"w_".concat(a)):h=!1),Ut(c,"width"),e.responsive_preserve_height||Ut(c,"height")):h=!1);var f="lazy"===e.loading&&!o.isNativeLazyLoadSupported()&&o.isLazyLoadSupported()&&!t[0].getAttribute("src");(h||f)&&o.setAttributeIfExists(t[0],"width","data-width"),h&&!f&&Vt(c,"src",r)}}})),this}},{key:"setAttributeIfExists",value:function(t,e,n){var r=t.getAttribute(n);null!=r&&Vt(t,e,r)}},{key:"isLazyLoadSupported",value:function(){return window&&"IntersectionObserver"in window}},{key:"isNativeLazyLoadSupported",value:function(){return"loading"in HTMLImageElement.prototype}},{key:"transformation",value:function(t){return yn.new(this.config()).fromOptions(t).setParent(this)}},{key:"injectTransparentVideoElement",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,a){t||a({status:"error",message:"Expecting htmlElContainer to be HTMLElement"}),qr(r);var o=n.video_url(e,r);Zr().then((function(s){var u;s?(u=Vr(t,n,e,r),i(t)):u=Yr(t,o,r),u.then((function(){i(t)})).catch((function(t){var e=t.status,n=t.message;a({status:e,message:n})}))})).catch((function(t){var e=t.status,n=t.message;a({status:e,message:n})}))}))}}])&&Qr(e.prototype,n),r&&Qr(e,r),t}();b()(Jr,a);var Kr=Jr;n.default={ClientHintsMetaTag:Lr,Cloudinary:Kr,Condition:ce,Configuration:me,crc32:u,Expression:re,FetchLayer:Be,HtmlTag:wn,ImageTag:Zn,Layer:ye,PictureTag:dr,SubtitlesLayer:Pe,TextLayer:Te,Transformation:yn,utf8_encode:s,Util:o,VideoTag:Tr}},"lodash/assign":function(e,n){e.exports=t},"lodash/cloneDeep":function(t,e){t.exports=n},"lodash/compact":function(t,e){t.exports=i},"lodash/difference":function(t,e){t.exports=a},"lodash/functions":function(t,e){t.exports=o},"lodash/identity":function(t,e){t.exports=s},"lodash/includes":function(t,e){t.exports=u},"lodash/isArray":function(t,e){t.exports=l},"lodash/isElement":function(t,e){t.exports=c},"lodash/isFunction":function(t,e){t.exports=h},"lodash/isPlainObject":function(t,e){t.exports=f},"lodash/isString":function(t,e){t.exports=d},"lodash/merge":function(t,e){t.exports=p},"lodash/trim":function(t,e){t.exports=v}})},t.exports=i(n(228),n(248),n(296),n(297),n(310),n(71),n(312),n(34),n(319),n(48),n(83),n(125),n(320),n(326))}).call(this,n(68).Buffer,n(227))},function(t,e,n){t.exports=n(143)()},function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return T})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return O}));var r=n(25),i=n(10),a=n.n(i),o=(n(21),n(27)),s=n(84),u=n(26),l=n(23),c=n(85),h=n.n(c),f=(n(146),n(33)),d=(n(132),function(t){var e=Object(s.a)();return e.displayName=t,e}("Router-History")),p=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router"),v=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(r.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(p.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(d.Provider,{children:this.props.children||null,value:this.props.history}))},e}(a.a.Component);a.a.Component;a.a.Component;var m={},g=0;function y(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,l=void 0!==u&&u;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=m[n]||(m[n]={});if(r[t])return r[t];var i=[],a={regexp:h()(t,i,e),keys:i};return g<1e4&&(r[t]=a,g++),a}(n,{end:a,strict:s,sensitive:l}),i=r.regexp,o=r.keys,u=i.exec(t);if(!u)return null;var c=u[0],f=u.slice(1),d=t===c;return a&&!d?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:d,params:o.reduce((function(t,e,n){return t[e.name]=f[n],t}),{})}}),null)}var _=function(t){function e(){return t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.render=function(){var t=this;return a.a.createElement(p.Consumer,null,(function(e){e||Object(u.a)(!1);var n=t.props.location||e.location,r=t.props.computedMatch?t.props.computedMatch:t.props.path?y(n.pathname,t.props):e.match,i=Object(l.a)({},e,{location:n,match:r}),o=t.props,s=o.children,c=o.component,h=o.render;return Array.isArray(s)&&0===s.length&&(s=null),a.a.createElement(p.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:c?a.a.createElement(c,i):h?h(i):null:"function"===typeof s?s(i):null)}))},e}(a.a.Component);function b(t){return"/"===t.charAt(0)?t:"/"+t}function x(t,e){if(!t)return e;var n=b(t);return 0!==e.pathname.indexOf(n)?e:Object(l.a)({},e,{pathname:e.pathname.substr(n.length)})}function w(t){return"string"===typeof t?t:Object(o.e)(t)}function S(t){return function(){Object(u.a)(!1)}}function k(){}a.a.Component;var T=function(t){function e(){return t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.render=function(){var t=this;return a.a.createElement(p.Consumer,null,(function(e){e||Object(u.a)(!1);var n,r,i=t.props.location||e.location;return a.a.Children.forEach(t.props.children,(function(t){if(null==r&&a.a.isValidElement(t)){n=t;var o=t.props.path||t.props.from;r=o?y(i.pathname,Object(l.a)({},t.props,{path:o})):e.match}})),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(a.a.Component);var E=a.a.useContext;function C(){return E(d)}function O(){var t=E(p).match;return t?t.params:{}}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return Oa})),n.d(e,"b",(function(){return wa}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}var c=0,h="undefined"!==typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-c));c=e+n,setTimeout((function(){return t(c)}),n)},f=1/60*1e3,d=!0,p=!1,v=!1,m={delta:0,timestamp:0},g=["read","update","preRender","render","postRender"],y=function(t){return p=t},_=g.reduce((function(t,e){return t[e]=function(t){var e=[],n=[],r=0,i=!1,a=0,o=new WeakSet,s=new WeakSet,u={cancel:function(t){var e=n.indexOf(t);o.add(t),-1!==e&&n.splice(e,1)},process:function(l){var c,h;if(i=!0,e=(c=[n,e])[0],(n=c[1]).length=0,r=e.length)for(a=0;a<r;a++)(h=e[a])(l),!0!==s.has(h)||o.has(h)||(u.schedule(h),t(!0));i=!1},schedule:function(t,a,u){void 0===a&&(a=!1),void 0===u&&(u=!1);var l=u&&i,c=l?e:n;o.delete(t),a&&s.add(t),-1===c.indexOf(t)&&(c.push(t),l&&(r=e.length))}};return u}(y),t}),{}),b=g.reduce((function(t,e){var n=_[e];return t[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),p||k(),n.schedule(t,e,r),t},t}),{}),x=g.reduce((function(t,e){return t[e]=_[e].cancel,t}),{}),w=function(t){return _[t].process(m)},S=function t(e){p=!1,m.delta=d?f:Math.max(Math.min(e-m.timestamp,40),1),d||(f=m.delta),m.timestamp=e,v=!0,g.forEach(w),v=!1,p&&(d=!1,h(t))},k=function(){p=!0,d=!0,v||h(S)},T=function(){return m},E=b;var C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function O(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var M=function(){return(M=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var A=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},P=function(t){return t%1?Number(t.toFixed(5)):t},L=/(-)?(\d[\d\.]*)/g,R=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,j=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,I={test:function(t){return"number"===typeof t},parse:parseFloat,transform:function(t){return t}},D=M(M({},I),{transform:A(0,1)}),N=M(M({},I),{default:1}),B=function(t){return{test:function(e){return"string"===typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},z=B("deg"),F=B("%"),V=B("px"),U=B("vh"),q=B("vw"),H=M(M({},F),{parse:function(t){return F.parse(t)/100},transform:function(t){return F.transform(100*t)}}),W=A(0,255),G=function(t){return void 0!==t.red},X=function(t){return void 0!==t.hue};var Y=function(t){return function(e){if("string"!==typeof e)return e;for(var n={},r=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}(e).replace(/(,|\/)/g," ").split(/ \s*/),i=0;i<4;i++)n[t[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},Z=M(M({},I),{transform:function(t){return Math.round(W(t))}});function Q(t,e){return t.startsWith(e)&&j.test(t)}var J={test:function(t){return"string"===typeof t?Q(t,"rgb"):G(t)},parse:Y(["red","green","blue","alpha"]),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha,a=void 0===i?1:i;return function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:Z.transform(e),green:Z.transform(n),blue:Z.transform(r),alpha:P(D.transform(a))})}},K={test:function(t){return"string"===typeof t?Q(t,"hsl"):X(t)},parse:Y(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha,a=void 0===i?1:i;return function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(e),saturation:F.transform(P(n)),lightness:F.transform(P(r)),alpha:P(D.transform(a))})}},$=M(M({},J),{test:function(t){return"string"===typeof t&&Q(t,"#")},parse:function(t){var e="",n="",r="";return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),tt={test:function(t){return"string"===typeof t&&j.test(t)||G(t)||X(t)},parse:function(t){return J.test(t)?J.parse(t):K.test(t)?K.parse(t):$.test(t)?$.parse(t):t},transform:function(t){return G(t)?J.transform(t):X(t)?K.transform(t):t}},et="${c}",nt="${n}",rt=function(t){return"number"===typeof t?0:t},it={test:function(t){if("string"!==typeof t||!isNaN(t))return!1;var e=0,n=t.match(L),r=t.match(R);return n&&(e+=n.length),r&&(e+=r.length),e>0},parse:function(t){var e=t,n=[],r=e.match(R);r&&(e=e.replace(R,et),n.push.apply(n,r.map(tt.parse)));var i=e.match(L);return i&&n.push.apply(n,i.map(I.parse)),n},createTransformer:function(t){var e=t,n=0,r=t.match(R),i=r?r.length:0;if(r)for(var a=0;a<i;a++)e=e.replace(r[a],et),n++;var o=e.match(L),s=o?o.length:0;if(o)for(a=0;a<s;a++)e=e.replace(o[a],nt),n++;return function(t){for(var r=e,a=0;a<n;a++)r=r.replace(a<i?et:nt,a<i?tt.transform(t[a]):P(t[a]));return r}},getAnimatableNone:function(t){var e=it.parse(t);return it.createTransformer(t)(e.map(rt))}},at=function(t,e,n){return Math.min(Math.max(n,t),e)},ot=.001;function st(t){var e,n,r=t.duration,i=void 0===r?800:r,a=t.bounce,o=void 0===a?.25:a,s=t.velocity,u=void 0===s?0:s,l=t.mass,c=void 0===l?1:l,h=1-o;h=at(.05,1,h),i=at(.01,10,i/1e3),h<1?(e=function(t){var e=t*h,n=e*i,r=e-u,a=ut(t,h),o=Math.exp(-n);return ot-r/a*o},n=function(t){var n=t*h*i,r=n*u+u,a=Math.pow(h,2)*Math.pow(t,2)*i,o=Math.exp(-n),s=ut(Math.pow(t,2),h);return(-e(t)+ot>0?-1:1)*((r-a)*o)/s}):(e=function(t){return Math.exp(-t*i)*((t-u)*i+1)-.001},n=function(t){return Math.exp(-t*i)*(i*i*(u-t))});var f=function(t,e,n){for(var r=n,i=1;i<12;i++)r-=t(r)/e(r);return r}(e,n,5/i);if(isNaN(f))return{stiffness:100,damping:10};var d=Math.pow(f,2)*c;return{stiffness:d,damping:2*h*Math.sqrt(c*d)}}function ut(t,e){return t*Math.sqrt(1-e*e)}var lt=["duration","bounce"],ct=["stiffness","damping","mass"];function ht(t,e){return e.some((function(e){return void 0!==t[e]}))}function ft(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,a=t.restSpeed,o=void 0===a?2:a,s=t.restDelta,u=O(t,["from","to","restSpeed","restDelta"]),l={done:!1,value:n},c=function(t){var e=C({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!ht(t,ct)&&ht(t,lt)){var n=st(t);(e=C(C(C({},e),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return e}(u),h=c.stiffness,f=c.damping,d=c.mass,p=c.velocity,v=c.isResolvedFromDuration,m=dt,g=dt;function y(){var t=p?-p/1e3:0,e=i-n,r=f/(2*Math.sqrt(h*d)),a=Math.sqrt(h/d)/1e3;if(null!==s&&void 0!==s||(s=Math.abs(i-n)<=1?.01:.4),r<1){var o=ut(a,r);m=function(n){var s=Math.exp(-r*a*n);return i-s*((t+r*a*e)/o*Math.sin(o*n)+e*Math.cos(o*n))},g=function(n){var i=Math.exp(-r*a*n);return r*a*i*(Math.sin(o*n)*(t+r*a*e)/o+e*Math.cos(o*n))-i*(Math.cos(o*n)*(t+r*a*e)-o*e*Math.sin(o*n))}}else if(1===r)m=function(n){return i-Math.exp(-a*n)*(e+(t+a*e)*n)};else{var u=a*Math.sqrt(r*r-1);m=function(n){var o=Math.exp(-r*a*n),s=Math.min(u*n,300);return i-o*((t+r*a*e)*Math.sinh(s)+u*e*Math.cosh(s))/u}}}return y(),{next:function(t){var e=m(t);if(v)l.done=t>=u.duration;else{var n=1e3*g(t),r=Math.abs(n)<=o,a=Math.abs(i-e)<=s;l.done=r&&a}return l.value=l.done?i:e,l},flipTarget:function(){var t;p=-p,n=(t=[i,n])[0],i=t[1],y()}}}ft.needsInterpolation=function(t,e){return"string"===typeof t||"string"===typeof e};var dt=function(t){return 0},pt=function(t,e,n){var r=e-t;return 0===r?1:(n-t)/r},vt=function(t,e,n){return-n*t+n*e+t},mt=function(t,e,n){var r=t*t,i=e*e;return Math.sqrt(Math.max(0,n*(i-r)+r))},gt=[$,J,K],yt=function(t){return gt.find((function(e){return e.test(t)}))},_t=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},bt=function(t,e){var n=yt(t),r=yt(e);_t(t),_t(e),n.transform,r.transform;var i=n.parse(t),a=r.parse(e),o=C({},i),s=n===K?vt:mt;return function(t){for(var e in o)"alpha"!==e&&(o[e]=s(i[e],a[e],t));return o.alpha=vt(i.alpha,a.alpha,t),n.transform(o)}},xt=function(t){return"number"===typeof t},wt=function(t,e){return function(n){return e(t(n))}},St=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(wt)};function kt(t,e){return xt(t)?function(n){return vt(t,e,n)}:tt.test(t)?bt(t,e):Ot(t,e)}var Tt=function(t,e){var n=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}(t),r=n.length,i=t.map((function(t,n){return kt(t,e[n])}));return function(t){for(var e=0;e<r;e++)n[e]=i[e](t);return n}},Et=function(t,e){var n=C(C({},t),e),r={};for(var i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=kt(t[i],e[i]));return function(t){for(var e in r)n[e]=r[e](t);return n}};function Ct(t){for(var e=it.parse(t),n=e.length,r=0,i=0,a=0,o=0;o<n;o++)r||"number"===typeof e[o]?r++:void 0!==e[o].hue?a++:i++;return{parsed:e,numNumbers:r,numRGB:i,numHSL:a}}var Ot=function(t,e){var n=it.createTransformer(e),r=Ct(t),i=Ct(e);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),St(Tt(r.parsed,i.parsed),n)},Mt=function(t,e){return function(n){return vt(t,e,n)}};function At(t,e,n){for(var r,i=[],a=n||("number"===typeof(r=t[0])?Mt:"string"===typeof r?tt.test(r)?bt:Ot:Array.isArray(r)?Tt:"object"===typeof r?Et:void 0),o=t.length-1,s=0;s<o;s++){var u=a(t[s],t[s+1]);if(e){var l=Array.isArray(e)?e[s]:e;u=St(l,u)}i.push(u)}return i}function Pt(t,e,n){var r=void 0===n?{}:n,i=r.clamp,a=void 0===i||i,o=r.ease,s=r.mixer,u=t.length;e.length,!o||!Array.isArray(o)||o.length,t[0]>t[u-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());var l=At(e,o,s),c=2===u?function(t,e){var n=t[0],r=t[1],i=e[0];return function(t){return i(pt(n,r,t))}}(t,l):function(t,e){var n=t.length,r=n-1;return function(i){var a=0,o=!1;if(i<=t[0]?o=!0:i>=t[r]&&(a=r-1,o=!0),!o){for(var s=1;s<n&&!(t[s]>i||s===r);s++);a=s-1}var u=pt(t[a],t[a+1],i);return e[a](u)}}(t,l);return a?function(e){return c(at(t[0],t[u-1],e))}:c}var Lt=function(t){return function(e){return 1-t(1-e)}},Rt=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},jt=function(t){return function(e){return e*e*((t+1)*e-t)}},It=function(t){var e=jt(t);return function(t){return(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))}},Dt=function(t){return t},Nt=function(t){return function(e){return Math.pow(e,t)}}(2),Bt=Lt(Nt),zt=Rt(Nt),Ft=function(t){return 1-Math.sin(Math.acos(t))},Vt=Lt(Ft),Ut=Rt(Vt),qt=jt(1.525),Ht=Lt(qt),Wt=Rt(qt),Gt=It(1.525),Xt=function(t){if(1===t||0===t)return t;var e=t*t;return t<.36363636363636365?7.5625*e:t<.7272727272727273?9.075*e-9.9*t+3.4:t<.9?12.066481994459833*e-19.63545706371191*t+8.898060941828255:10.8*t*t-20.52*t+10.72},Yt=Lt(Xt);function Zt(t,e){return t.map((function(){return e||zt})).splice(0,t.length-1)}function Qt(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,a=t.ease,o=t.offset,s=t.duration,u=void 0===s?300:s,l={done:!1,value:n},c=Array.isArray(i)?i:[n,i],h=function(t,e){return t.map((function(t){return t*e}))}(null!==o&&void 0!==o?o:function(t){var e=t.length;return t.map((function(t,n){return 0!==n?n/(e-1):0}))}(c),u);function f(){return Pt(h,c,{ease:Array.isArray(a)?a:Zt(c,a)})}var d=f();return{next:function(t){return l.value=d(t),l.done=t>=u,l},flipTarget:function(){c.reverse(),d=f()}}}var Jt={keyframes:Qt,spring:ft,decay:function(t){var e=t.velocity,n=void 0===e?0:e,r=t.from,i=void 0===r?0:r,a=t.power,o=void 0===a?.8:a,s=t.timeConstant,u=void 0===s?350:s,l=t.restDelta,c=void 0===l?.5:l,h=t.modifyTarget,f={done:!1,value:i},d=o*n,p=i+d,v=void 0===h?p:h(p);return v!==p&&(d=v-i),{next:function(t){var e=-d*Math.exp(-t/u);return f.done=!(e>c||e<-c),f.value=f.done?v:v+e,f},flipTarget:function(){}}}};function Kt(t,e,n){return void 0===n&&(n=0),t-e-n}var $t=function(t){var e=function(e){var n=e.delta;return t(n)};return{start:function(){return E.update(e,!0,!0)},stop:function(){return x.update(e)}}};function te(t){var e,n,r,i,a,o=t.from,s=t.autoplay,u=void 0===s||s,l=t.driver,c=void 0===l?$t:l,h=t.elapsed,f=void 0===h?0:h,d=t.repeat,p=void 0===d?0:d,v=t.repeatType,m=void 0===v?"loop":v,g=t.repeatDelay,y=void 0===g?0:g,_=t.onPlay,b=t.onStop,x=t.onComplete,w=t.onRepeat,S=t.onUpdate,k=O(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),T=k.to,E=0,M=k.duration,A=!1,P=!0,L=function(t){if(Array.isArray(t.to))return Qt;if(Jt[t.type])return Jt[t.type];var e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?Qt:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?ft:Qt}(k);(null===(n=(e=L).needsInterpolation)||void 0===n?void 0:n.call(e,o,T))&&(a=Pt([0,100],[o,T],{clamp:!1}),o=0,T=100);var R=L(C(C({},k),{from:o,to:T}));function j(){E++,"reverse"===m?f=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?Kt(e+-t,e,n):e-(t-e)+n}(f,M,y,P=E%2===0):(f=Kt(f,M,y),"mirror"===m&&R.flipTarget()),A=!1,w&&w()}function I(t){if(P||(t=-t),f+=t,!A){var e=R.next(Math.max(0,f));i=e.value,a&&(i=a(i)),A=P?e.done:f<=0}null===S||void 0===S||S(i),A&&(0===E&&(null!==M&&void 0!==M||(M=f)),E<p?function(t,e,n,r){return r?t>=e+n:t<=-n}(f,M,y,P)&&j():(r.stop(),x&&x()))}return u&&(null===_||void 0===_||_(),(r=c(I)).start()),{stop:function(){null===b||void 0===b||b(),r.stop()}}}function ee(t,e){return e?t*(1e3/e):0}var ne=function(t){return t},re=function(t){return void 0===t&&(t=ne),function(e,n,r){var i=n-r,a=-(0-e+1)*(0-t(Math.abs(i)));return i<=0?n+a:n-a}},ie=(Math.sqrt,function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}),ae=function(t){return ie(t)&&t.hasOwnProperty("z")},oe=function(t,e){return Math.abs(t-e)};function se(t,e){if(xt(t)&&xt(e))return oe(t,e);if(ie(t)&&ie(e)){var n=oe(t.x,e.x),r=oe(t.y,e.y),i=ae(t)&&ae(e)?oe(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var ue=function(t,e){return 1-3*e+3*t},le=function(t,e){return 3*e-6*t},ce=function(t){return 3*t},he=function(t,e,n){return((ue(e,n)*t+le(e,n))*t+ce(e))*t},fe=function(t,e,n){return 3*ue(e,n)*t*t+2*le(e,n)*t+ce(e)};var de=.1;function pe(t,e,n,r){if(t===e&&n===r)return Dt;for(var i=new Float32Array(11),a=0;a<11;++a)i[a]=he(a*de,t,n);function o(e){for(var r=0,a=1;10!==a&&i[a]<=e;++a)r+=de;--a;var o=r+(e-i[a])/(i[a+1]-i[a])*de,s=fe(o,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<8;++i){var a=fe(e,n,r);if(0===a)return e;e-=(he(e,n,r)-t)/a}return e}(e,o,t,n):0===s?o:function(t,e,n,r,i){var a,o,s=0;do{(a=he(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(a)>1e-7&&++s<10);return o}(e,r,r+de,t,n)}return function(t){return 0===t||1===t?t:he(o(t),e,r)}}var ve=n(10),me=n.n(ve),ge=function(t){return"object"===typeof t&&t.hasOwnProperty("current")},ye=function(){function t(){this.subscriptions=new Set}return t.prototype.add=function(t){var e=this;return this.subscriptions.add(t),function(){e.subscriptions.delete(t)}},t.prototype.notify=function(t,e,n){var r,i;if(this.subscriptions.size)try{for(var a=s(this.subscriptions),o=a.next();!o.done;o=a.next()){(0,o.value)(t,e,n)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.prototype.clear=function(){this.subscriptions.clear()},t}(),_e=function(){function t(t){var e,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new ye,this.renderSubscribers=new ye,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),n.prev=n.current,n.current=t,n.prev!==n.current&&n.updateSubscribers.notify(n.current),e&&n.renderSubscribers.notify(n.current);var r=T(),i=r.delta,a=r.timestamp;n.lastUpdated!==a&&(n.timeDelta=i,n.lastUpdated=a,E.postRender(n.scheduleVelocityCheck))},this.scheduleVelocityCheck=function(){return E.postRender(n.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current)},this.set(t,!1),this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?ee(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(n){e.stopAnimation=t(n)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function be(t){return new _e(t)}var xe=function(t){return 1e3*t},we={linear:Dt,easeIn:Nt,easeInOut:zt,easeOut:Bt,circIn:Ft,circInOut:Ut,circOut:Vt,backIn:qt,backInOut:Wt,backOut:Ht,anticipate:Gt,bounceIn:Yt,bounceInOut:function(t){return t<.5?.5*(1-Xt(1-2*t)):.5*Xt(2*t-1)+.5},bounceOut:Xt},Se=function(t){if(Array.isArray(t)){t.length;var e=u(t,4);return pe(e[0],e[1],e[2],e[3])}return"string"===typeof t?we[t]:t},ke=function(t,e){return"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!it.test(e)||e.startsWith("url(")))},Te=function(t){return Array.isArray(t)},Ee=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},Ce=function(t){return{type:"spring",stiffness:550,damping:0===t?100:30,restDelta:.01,restSpeed:10}},Oe=function(){return{type:"keyframes",ease:"linear",duration:.3}},Me=function(t){return{type:"keyframes",duration:.8,values:t}},Ae={x:Ee,y:Ee,z:Ee,rotate:Ee,rotateX:Ee,rotateY:Ee,rotateZ:Ee,scaleX:Ce,scaleY:Ce,scale:Ce,opacity:Oe,backgroundColor:Oe,color:Oe,default:Ce};function Pe(t){var e=t.yoyo,n=t.loop,r=t.flip,i=t.ease,s=t.times,u=o(t,["yoyo","loop","flip","ease","times"]),l=a({},u);return s&&(l.offset=s),u.duration&&(l.duration=xe(u.duration)),u.repeatDelay&&(l.repeatDelay=xe(u.repeatDelay)),i&&(l.ease=function(t){return Array.isArray(t)&&"number"!==typeof t[0]}(i)?i.map(Se):Se(i)),"tween"===u.type&&(l.type="keyframes"),e?l.repeatType="reverse":n?l.repeatType="loop":r&&(l.repeatType="mirror"),l.repeat=n||e||r||u.repeat,"spring"!==u.type&&(l.type="keyframes"),l}function Le(t,e,n){var r;return Array.isArray(e.to)&&(null!==(r=t.duration)&&void 0!==r||(t.duration=.8)),function(t){Array.isArray(t.to)&&null===t.to[0]&&(t.to=l(t.to),t.to[0]=t.from)}(e),function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var e=o(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(e).length}(t)||(t=a(a({},t),function(t,e){var n;return n=Te(e)?Me:Ae[t]||Ae.default,a({to:e},n(e))}(n,e.to))),a(a({},e),Pe(t))}function Re(t,e,n,r,i){var o,s=function(t,e){return t[e]||t.default||t}(r,t),u=null!==(o=s.from)&&void 0!==o?o:e.get(),l=ke(t,n);"none"===u&&l&&"string"===typeof n&&(u=it.getAnimatableNone(n));var c=ke(t,u);return c&&l&&!1!==s.type?function(){var r={from:u,to:n,velocity:e.getVelocity(),onComplete:i,onUpdate:function(t){return e.set(t)}};return"inertia"===s.type||"decay"===s.type?function(t){var e,n=t.from,r=void 0===n?0:n,i=t.velocity,a=void 0===i?0:i,o=t.min,s=t.max,u=t.power,l=void 0===u?.8:u,c=t.timeConstant,h=void 0===c?750:c,f=t.bounceStiffness,d=void 0===f?500:f,p=t.bounceDamping,v=void 0===p?10:p,m=t.restDelta,g=void 0===m?1:m,y=t.modifyTarget,_=t.driver,b=t.onUpdate,x=t.onComplete;function w(t){return void 0!==o&&t<o||void 0!==s&&t>s}function S(t){return void 0===o?s:void 0===s||Math.abs(o-t)<Math.abs(s-t)?o:s}function k(t){null===e||void 0===e||e.stop(),e=te(C(C({},t),{driver:_,onUpdate:function(e){var n;null===b||void 0===b||b(e),null===(n=t.onUpdate)||void 0===n||n.call(t,e)},onComplete:x}))}function E(t){k(C({type:"spring",stiffness:d,damping:v,restDelta:g},t))}if(w(r))E({from:r,velocity:a,to:S(r)});else{var O=l*a+r;"undefined"!==typeof y&&(O=y(O));var M,A,P=S(O),L=P===o?-1:1;k({type:"decay",from:r,velocity:a,timeConstant:h,power:l,restDelta:g,modifyTarget:y,onUpdate:w(O)?function(t){M=A,A=t,a=ee(t-M,T().delta),(1===L&&t>P||-1===L&&t<P)&&E({from:t,to:P,velocity:a})}:void 0})}return{stop:function(){return null===e||void 0===e?void 0:e.stop()}}}(a(a({},r),s)):te(a(a({},Le(s,r,t)),{onUpdate:function(t){var e;r.onUpdate(t),null===(e=s.onUpdate)||void 0===e||e.call(s,t)},onComplete:function(){var t;r.onComplete(),null===(t=s.onComplete)||void 0===t||t.call(s)}}))}:function(){var t;return e.set(n),i(),null===(t=null===s||void 0===s?void 0:s.onComplete)||void 0===t||t.call(s),{stop:function(){}}}}function je(t,e,n,r){return void 0===r&&(r={}),e.start((function(i){var a,o,s=Re(t,e,n,r,i),u=function(t,e){var n,r,i,a,o;return null!==(o=null!==(a=null!==(r=null===(n=t[e])||void 0===n?void 0:n.delay)&&void 0!==r?r:null===(i=t.default)||void 0===i?void 0:i.delay)&&void 0!==a?a:t.delay)&&void 0!==o?o:0}(r,t),l=function(){return o=s()};return u?a=setTimeout(l,xe(u)):l(),function(){clearTimeout(a),null===o||void 0===o||o.stop()}}))}var Ie=function(t){return Te(t)?t[t.length-1]||0:t},De=a(a({},I),{transform:Math.round}),Ne={color:tt,backgroundColor:tt,outlineColor:tt,fill:tt,stroke:tt,borderColor:tt,borderTopColor:tt,borderRightColor:tt,borderBottomColor:tt,borderLeftColor:tt,borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,size:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,rotate:z,rotateX:z,rotateY:z,rotateZ:z,scale:N,scaleX:N,scaleY:N,scaleZ:N,skew:z,skewX:z,skewY:z,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,transformPerspective:V,opacity:D,originX:H,originY:H,originZ:V,zIndex:De,fillOpacity:D,strokeOpacity:D,numOctaves:De},Be=[I,V,F,z,q,U,{test:function(t){return"auto"===t},parse:function(t){return t}}],ze=function(t){return function(e){return e.test(t)}},Fe=function(t){return Be.find(ze(t))},Ve=l(Be,[tt,it]),Ue=function(t){return Ve.find(ze(t))},qe=function(t){return Ne[t]},He=function(t,e){return e&&"number"===typeof t?e.transform(t):t};function We(t){return Array.isArray(t)}function Ge(t){return"string"===typeof t||We(t)}function Xe(t,e,n){var r={};return e?(r=function(t){return"function"===typeof t}(e)?e(null!==n&&void 0!==n?n:t.getVariantPayload(),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.get()})),e}(t),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.getVelocity()})),e}(t)):e,a({transition:t.getDefaultTransition()},r)):r}function Ye(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,be(n))}function Ze(t,e,n){var r=(void 0===n?{}:n).priority,i=t.makeTargetAnimatable(Xe(t,e),!1),s=i.transitionEnd,u=void 0===s?{}:s,l=(i.transition,o(i,["transitionEnd","transition"]));for(var c in l=a(a({},l),u)){var h=Ie(l[c]);Ye(t,c,h),r||(t.baseTarget[c]=h)}}function Qe(t,e){l(e).reverse().forEach((function(n){var r;Ze(t,t.getVariant(n)),null===(r=t.variantChildren)||void 0===r||r.forEach((function(t){Qe(t,e)}))}))}function Je(t,e){return Array.isArray(e)?Qe(t,e):"string"===typeof e?Qe(t,[e]):void Ze(t,e)}function Ke(t,e,n){var r,i,a,o=Object.keys(e).filter((function(e){return!t.hasValue(e)})),s=o.length;if(s)for(var u=0;u<s;u++){var l=o[u],c=e[l],h=null;if(Array.isArray(c)&&(h=c[0]),null===h){var f=null!==(r=n[l])&&void 0!==r?r:t.readNativeValue(l);h=void 0!==f?f:e[l]}"string"===typeof h&&/^\-?\d*\.?\d+$/.test(h)?h=parseFloat(h):!Ue(h)&&it.test(c)&&(h=it.getAnimatableNone(c)),t.addValue(l,be(h)),null!==(i=(a=n)[l])&&void 0!==i||(a[l]=h),t.baseTarget[l]=h}}function $e(t,e){if(e)return(e[t]||e.default||e).from}function tn(t,e,n){var r,i,a={};for(var o in t)a[o]=null!==(r=$e(o,e))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return a}function en(t,e,n){var r;return void 0===n&&(n={}),n.priority&&t.activeOverrides.add(n.priority),t.resetIsAnimating(n.priority),r=We(e)?function(t,e,n){var r=l(e).reverse().map((function(e){return nn(t,e,n)}));return Promise.all(r)}(t,e,n):Ge(e)?nn(t,e,n):rn(t,e,n),t.onAnimationStart(),r.then((function(){return t.onAnimationComplete()}))}function nn(t,e,n){var r,i=n&&n.priority||0,a=t.getVariant(e),o=Xe(t,a,n&&n.custom),s=o.transition||{},l=a?function(){return rn(t,o,n)}:function(){return Promise.resolve()},c=(null===(r=t.variantChildrenOrder)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var a=s.delayChildren;return function(t,e,n,r,i,a,o){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);void 0===a&&(a=0);var s=[],u=(t.variantChildrenOrder.size-1)*r,l=1===i?function(t){return t*r}:function(t){return u-t*r};return Array.from(t.variantChildrenOrder).forEach((function(t,r){var i=nn(t,e,{priority:a,delay:n+l(r),custom:o});s.push(i)})),Promise.all(s)}(t,e,(void 0===a?0:a)+r,s.staggerChildren,s.staggerDirection,i,null===n||void 0===n?void 0:n.custom)}:function(){return Promise.resolve()},h=s.when;if(h){var f=u("beforeChildren"===h?[l,c]:[c,l],2),d=f[0],p=f[1];return d().then(p)}return Promise.all([l(),c(null===n||void 0===n?void 0:n.delay)])}function rn(t,e,n){var r=void 0===n?{}:n,i=r.delay,s=void 0===i?0:i,u=r.priority,l=void 0===u?0:u,c=r.transitionOverride,h=r.custom,f=Xe(t,e,h);c&&(f.transition=c);var d=t.makeTargetAnimatable(f),p=d.transitionEnd,v=d.transition,m=o(d,["transitionEnd","transition"]);l&&(t.resolvedOverrides[l]=m);var g=[];for(var y in m){var _=t.getValue(y);if(_&&m&&void 0!==m[y]){var b=m[y];l||(t.baseTarget[y]=Ie(b)),t.isAnimating.has(y)||(t.isAnimating.add(y),g.push(je(y,_,b,a({delay:s},v))))}}var x=Promise.all(g);return p?x.then((function(){return Ze(t,p,{priority:l})})):x}function an(t,e,n){var r;t.overrides[n]=e,null===(r=t.variantChildren)||void 0===r||r.forEach((function(t){an(t,e,n)}))}function on(t,e){var n=t.overrides[e];if(n)return en(t,n,{priority:e})}function sn(t,e){var n;if(null===(n=t.variantChildrenOrder)||void 0===n||n.forEach((function(t){sn(t,e)})),t.overrides[e]){t.activeOverrides.delete(e);var r=un(t);if(t.resetIsAnimating(),r)t.overrides[r]&&on(t,r);var i=t.resolvedOverrides[e];if(i){var a={};for(var o in t.baseTarget)void 0!==i[o]&&(a[o]=t.baseTarget[o]);t.onAnimationStart(),rn(t,a).then((function(){t.onAnimationComplete()}))}}}function un(t){return t.activeOverrides.size?Math.max.apply(Math,l(Array.from(t.activeOverrides))):0}var ln=function(){function t(t,e){var n=this;this.children=new Set,this.baseTarget={},this.overrides=[],this.resolvedOverrides=[],this.activeOverrides=new Set,this.isAnimating=new Set,this.latest={},this.values=new Map,this.valueSubscriptions=new Map,this.config={},this.isMounted=!1,this.update=function(){return n.config.onUpdate(n.latest)},this.triggerRender=function(){return n.render()},this.ref=function(t){t?n.mount(t):n.unmount(),n.externalRef&&("function"===typeof n.externalRef?n.externalRef(t):ge(n.externalRef)&&(n.externalRef.current=t))},this.parent=t,this.rootParent=t?t.rootParent:this,this.treePath=t?l(t.treePath,[t]):[],this.depth=t?t.depth+1:0,this.externalRef=e}return t.prototype.getVariantPayload=function(){return this.config.custom},t.prototype.getVariant=function(t){var e;return null===(e=this.config.variants)||void 0===e?void 0:e[t]},t.prototype.addVariantChild=function(t){this.variantChildren||(this.variantChildren=new Set),this.variantChildren.add(t)},t.prototype.addVariantChildOrder=function(t){this.variantChildrenOrder||(this.variantChildrenOrder=new Set),this.variantChildrenOrder.add(t)},t.prototype.onAnimationStart=function(){var t,e;null===(e=(t=this.config).onAnimationStart)||void 0===e||e.call(t)},t.prototype.onAnimationComplete=function(){var t,e;this.isMounted&&(null===(e=(t=this.config).onAnimationComplete)||void 0===e||e.call(t))},t.prototype.getDefaultTransition=function(){return this.config.transition},t.prototype.resetIsAnimating=function(t){var e;void 0===t&&(t=0),this.isAnimating.clear(),t<un(this)&&this.checkOverrideIsAnimating(t),null===(e=this.variantChildren)||void 0===e||e.forEach((function(e){return e.resetIsAnimating(t)}))},t.prototype.checkOverrideIsAnimating=function(t){for(var e=this.overrides.length,n=t+1;n<e;n++){var r=this.resolvedOverrides[n];if(r)for(var i in r)this.isAnimating.add(i)}},t.prototype.subscribe=function(t){var e=this;return this.children.add(t),function(){return e.children.delete(t)}},t.prototype.hasValue=function(t){return this.values.has(t)},t.prototype.addValue=function(t,e){this.hasValue(t)&&this.removeValue(t),this.values.set(t,e),this.setSingleStaticValue(t,e.get()),this.subscribeToValue(t,e)},t.prototype.removeValue=function(t){var e;null===(e=this.valueSubscriptions.get(t))||void 0===e||e(),this.valueSubscriptions.delete(t),this.values.delete(t),delete this.latest[t]},t.prototype.getValue=function(t,e){var n=this.values.get(t);return void 0===n&&void 0!==e&&(n=new _e(e),this.addValue(t,n)),n},t.prototype.forEachValue=function(t){this.values.forEach(t)},t.prototype.getInstance=function(){return this.element},t.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=a({},t)},t.prototype.setSingleStaticValue=function(t,e){this.latest[t]=e},t.prototype.setStaticValues=function(t,e){if("string"===typeof t)this.setSingleStaticValue(t,e);else for(var n in t)this.setSingleStaticValue(n,t[n])},t.prototype.scheduleRender=function(){E.render(this.triggerRender,!1,!0)},t.prototype.scheduleUpdateLayoutDelta=function(){E.preRender(this.rootParent.updateLayoutDelta,!1,!0)},t.prototype.subscribeToValue=function(t,e){var n=this,r=e.onChange((function(e){n.setSingleStaticValue(t,e),n.element&&n.config.onUpdate&&E.update(n.update,!1,!0)})),i=e.onRenderRequest((function(){n.element&&n.scheduleRender()}));this.valueSubscriptions.set(t,(function(){r(),i()}))},t.prototype.mount=function(t){this.parent&&(this.removeFromParent=this.parent.subscribe(this)),this.element=this.current=t},t.prototype.unmount=function(){var t=this;this.forEachValue((function(e,n){return t.removeValue(n)})),x.update(this.update),x.render(this.render),this.removeFromParent&&this.removeFromParent()},t}();function cn(t){return t}function hn(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}function fn(t){return{x:a({},t.x),y:a({},t.y)}}var dn={translate:0,scale:1,origin:0,originPoint:0};function pn(){return{x:a({},dn),y:a({},dn)}}var vn=["","X","Y","Z"],mn=new Set,gn=["transformPerspective","x","y","z"];function yn(t,e){return gn.indexOf(t)-gn.indexOf(e)}["perspective","translate","scale","rotate","skew"].forEach((function(t){var e=new Set(["rotate","skew"]).has(t);vn.forEach((function(n){var r=t+n;gn.push(r),e&&mn.add(r)}))}));var _n=new Set(gn);function bn(t){return _n.has(t)}var xn=new Set(["originX","originY","originZ"]);function wn(t){return xn.has(t)}var Sn={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function kn(t,e){var n=t.x,r=t.y;return"translate3d("+n.translate/e.x+"px, "+r.translate/e.y+"px, 0) scale("+n.scale+", "+r.scale+")"}var Tn=kn(pn(),{x:1,y:1});function En(t){return t.startsWith("--")}function Cn(t){return"string"===typeof t&&t.startsWith("var(--")}var On=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Mn(t,e,n){void 0===n&&(n=1);var r=u(function(t){var e=On.exec(t);if(!e)return[,];var n=u(e,3);return[n[1],n[2]]}(t),2),i=r[0],a=r[1];if(i){var o=window.getComputedStyle(e).getPropertyValue(i);return o?o.trim():Cn(a)?Mn(a,e,n+1):a}}function An(t,e){return t/(e.max-e.min)*100}var Pn="_$css";var Ln={process:function(t,e){if("string"===typeof t){if(!V.test(t))return t;t=parseFloat(t)}return An(t,e.x)+"% "+An(t,e.y)+"%"}},Rn={borderRadius:a(a({},Ln),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ln,borderTopRightRadius:Ln,borderBottomLeftRadius:Ln,borderBottomRightRadius:Ln,boxShadow:{process:function(t,e,n,r){var i=t,a=t.includes("var("),o=[];a&&(t=t.replace(On,(function(t){return o.push(t),Pn})));var s=it.parse(t);if(s.length>5)return i;var u=it.createTransformer(t),l="number"!==typeof s[0]?1:0,c=n.x.scale*r.x,h=n.y.scale*r.y;s[0+l]/=c,s[1+l]/=h;var f=vt(c,h,.5);"number"===typeof s[2+l]&&(s[2+l]/=f),"number"===typeof s[3+l]&&(s[3+l]/=f);var d=u(s);if(a){var p=0;d=d.replace(Pn,(function(){var t=o[p];return p++,t}))}return d}}};function jn(t,e,n,r,i,a,o,s,u,l,c,h){var f=o.enableHardwareAcceleration,d=o.transformTemplate,p=o.allowTransformNone;a.length=0;var v=!1,m=!1,g=!0;for(var y in t){var _=t[y],b=qe(y),x=He(_,b);if(bn(y)){if(v=!0,r[y]=x,a.push(y),!g)continue;_!==(void 0!==b.default?b.default:0)&&(g=!1)}else if(wn(y))i[y]=x,m=!0;else if("transform"!==y||"function"!==typeof _){var w=En(y)?n:e;if(s&&Rn[y]){var S=Rn[y].process(_,h,u,c),k=Rn[y].applyTo;if(k)for(var T=k.length,E=0;E<T;E++)w[k[E]]=S;else w[y]=S}else w[y]=x}}s?(e.transform=kn(l,c),e.transform===Tn&&(e.transform=""),v&&(e.transform+=" "+function(t,e){var n="";e.sort(yn);for(var r=e.length,i=0;i<r;i++){var a=e[i];mn.has(a)&&(n+=a+"("+t[a]+") ")}return n}(r,a),e.transform=e.transform.trim()),d&&(e.transform=d(r,e.transform)),e.transformOrigin=function(t){var e=t.x,n=t.y;return 100*e.origin+"% "+100*n.origin+"% 0"}(l)):(v&&(e.transform=function(t,e,n,r,i,a){void 0===i&&(i=!0),void 0===a&&(a=!0);var o="";e.sort(yn);for(var s=!1,u=e.length,l=0;l<u;l++){var c=e[l];o+=(Sn[c]||c)+"("+t[c]+") ","z"===c&&(s=!0)}return!s&&i?o+="translateZ(0)":o=o.trim(),n?o=n(t,r?"":o):a&&r&&(o="none"),o}(r,a,d,g,f,p)),m&&(e.transformOrigin=function(t){var e=t.originX,n=void 0===e?"50%":e,r=t.originY,i=void 0===r?"50%":r,a=t.originZ;return n+" "+i+" "+(void 0===a?0:a)}(i)))}function In(t,e){t.min=e.min,t.max=e.max}function Dn(t,e,n){return n+e*(t-n)}function Nn(t,e,n,r,i){return void 0!==i&&(t=Dn(t,i,r)),Dn(t,n,r)+e}function Bn(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),t.min=Nn(t.min,e,n,r,i),t.max=Nn(t.max,e,n,r,i)}function zn(t,e){var n=e.x,r=e.y;Bn(t.x,n.translate,n.scale,n.originPoint),Bn(t.y,r.translate,r.scale,r.originPoint)}function Fn(t,e,n,r){var i=u(r,3),a=i[0],o=i[1],s=i[2];t.min=e.min,t.max=e.max;var l=void 0!==n[s]?n[s]:.5,c=vt(e.min,e.max,l);Bn(t,n[a],n[o],c,n.scale)}var Vn=["x","scaleX","originX"],Un=["y","scaleY","originY"];function qn(t,e,n,r,i){return t=Dn(t-=e,1/n,r),void 0!==i&&(t=Dn(t,1/i,r)),t}function Hn(t,e,n){var r=u(n,3),i=r[0],a=r[1],o=r[2];!function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5);var a=vt(t.min,t.max,r)-e;t.min=qn(t.min,e,n,a,i),t.max=qn(t.max,e,n,a,i)}(t,e[i],e[a],e[o],e.scale)}function Wn(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=.01),se(t,e)<n}function Gn(t){return t.max-t.min}function Xn(t,e){var n=.5,r=Gn(t),i=Gn(e);return i>r?n=pt(e.min,e.max-r,t.min):r>i&&(n=pt(t.min,t.max-i,e.min)),at(0,1,n)}function Yn(t,e,n,r){t.origin=void 0===r?Xn(e,n):r,t.originPoint=vt(e.min,e.max,t.origin),t.scale=Gn(n)/Gn(e),Wn(t.scale,1,1e-4)&&(t.scale=1),t.translate=vt(n.min,n.max,t.origin)-t.originPoint,Wn(t.translate)&&(t.translate=0)}function Zn(t,e,n,r){Yn(t.x,e.x,n.x,r),Yn(t.y,e.y,n.y,r)}function Qn(t){return[t("x"),t("y")]}function Jn(t,e){return hn(function(t,e){var n=t.top,r=t.left,i=t.bottom,a=t.right;void 0===e&&(e=cn);var o=e({x:r,y:n}),s=e({x:a,y:i});return{top:o.y,left:o.x,bottom:s.y,right:s.x}}(t.getBoundingClientRect(),e))}var Kn,$n=new Set(["width","height","top","left","right","bottom","x","y"]),tr=function(t){return $n.has(t)},er=function(t,e){t.set(e,!1),t.set(e)},nr=function(t){return t===I||t===V};!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(Kn||(Kn={}));var rr=function(t,e){return parseFloat(t.split(", ")[e])},ir=function(t,e){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return rr(a[1],e);var o=i.match(/^matrix\((.+)\)$/);return o?rr(o[1],t):0}},ar=new Set(["x","y","z"]),or=gn.filter((function(t){return!ar.has(t)}));var sr={width:function(t){var e=t.x;return e.max-e.min},height:function(t){var e=t.y;return e.max-e.min},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:ir(4,13),y:ir(5,14)},ur=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={}),e=a({},e),r=a({},r);var i=Object.keys(e).filter(tr),o=[],s=!1,l=[];if(i.forEach((function(i){var a=t.getValue(i);if(t.hasValue(i)){var u,c=n[i],h=e[i],f=Fe(c);if(Te(h))for(var d=h.length,p=null===h[0]?1:0;p<d;p++)u?Fe(h[p]):(u=Fe(h[p]))===f||nr(f)&&nr(u);else u=Fe(h);if(f!==u)if(nr(f)&&nr(u)){var v=a.get();"string"===typeof v&&a.set(parseFloat(v)),"string"===typeof h?e[i]=parseFloat(h):Array.isArray(h)&&u===V&&(e[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===u||void 0===u?void 0:u.transform)&&(0===c||0===h)?0===c?a.set(u.transform(c)):e[i]=f.transform(h):(s||(o=function(t){var e=[];return or.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.render(),e}(t),s=!0),l.push(i),r[i]=void 0!==r[i]?r[i]:e[i],er(a,h))}})),l.length){var c=function(t,e,n){var r=e.getBoundingBox(),i=e.getComputedStyle(),a=i.display,o={top:i.top,left:i.left,bottom:i.bottom,right:i.right,transform:i.transform};"none"===a&&e.setStaticValues("display",t.display||"block"),e.render();var s=e.getBoundingBox();return n.forEach((function(n){var a=e.getValue(n);er(a,sr[n](r,o)),t[n]=sr[n](s,i)})),t}(e,t,l);return o.length&&o.forEach((function(e){var n=u(e,2),r=n[0],i=n[1];t.getValue(r).set(i)})),t.render(),{target:c,transitionEnd:r}}return{target:e,transitionEnd:r}};function lr(t,e,n,r){return function(t){return Object.keys(t).some(tr)}(e)?ur(t,e,n,r):{target:e,transitionEnd:r}}var cr=function(t,e,n,r){var i=function(t,e,n){var r,i=o(e,[]),s=t.getInstance();if(!(s instanceof HTMLElement))return{target:i,transitionEnd:n};for(var u in n&&(n=a({},n)),t.forEachValue((function(t){var e=t.get();if(Cn(e)){var n=Mn(e,s);n&&t.set(n)}})),i){var l=i[u];if(Cn(l)){var c=Mn(l,s);c&&(i[u]=c,n&&(null!==(r=n[u])&&void 0!==r||(n[u]=l)))}}return{target:i,transitionEnd:n}}(t,e,r);return lr(t,e=i.target,n,r=i.transitionEnd)},hr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultConfig={enableHardwareAcceleration:!0,allowTransformNone:!0},e.style={},e.reactStyle={},e.vars={},e.transform={},e.transformOrigin={},e.transformKeys=[],e.config=e.defaultConfig,e.isLayoutProjectionEnabled=!1,e.layoutUpdateListeners=new ye,e.layoutMeasureListeners=new ye,e.viewportBoxUpdateListeners=new ye,e.hasViewportBoxUpdated=!1,e.targetBoxFinal={x:{min:0,max:1},y:{min:0,max:1}},e.treeScale={x:1,y:1},e.prevTreeScale={x:1,y:1},e.delta=pn(),e.deltaFinal=pn(),e.deltaTransform=Tn,e.stopLayoutAxisAnimation={x:function(){},y:function(){}},e.isTargetBoxLocked=!1,e.axisProgress={x:be(0),y:be(0)},e.updateLayoutDelta=function(){e.isLayoutProjectionEnabled&&e.box&&e.updateLayoutDeltas(),e.children.forEach(fr)},e}return i(e,t),e.prototype.removeValue=function(e){t.prototype.removeValue.call(this,e),delete this.vars[e],delete this.style[e]},e.prototype.clean=function(){this.style={},this.vars={},this.transform={}},e.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=a(a({},this.defaultConfig),t)},e.prototype.read=function(t){return this.getComputedStyle()[t]||0},e.prototype.addValue=function(e,n){t.prototype.addValue.call(this,e,n),e.startsWith("rotate")&&(this.layoutOrigin=.5)},e.prototype.readNativeValue=function(t){if(bn(t)){var e=qe(t);return e&&e.default||0}return this.read(t)},e.prototype.makeTargetAnimatable=function(t,e){void 0===e&&(e=!0);var n=t.transition,r=t.transitionEnd,i=o(t,["transition","transitionEnd"]),s=this.config.transformValues,u=tn(i,n||{},this);if(s&&(r&&(r=s(r)),i&&(i=s(i)),u&&(u=s(u))),e){Ke(this,i,u);var l=cr(this,i,u,r);r=l.transitionEnd,i=l.target}return a({transition:n,transitionEnd:r},i)},e.prototype.enableLayoutProjection=function(){this.isLayoutProjectionEnabled=!0},e.prototype.hide=function(){!1!==this.isVisible&&(this.isVisible=!1,this.scheduleRender())},e.prototype.show=function(){!0!==this.isVisible&&(this.isVisible=!0,this.scheduleRender())},e.prototype.onLayoutUpdate=function(t){return this.layoutUpdateListeners.add(t)},e.prototype.onLayoutMeasure=function(t){return this.layoutMeasureListeners.add(t)},e.prototype.onViewportBoxUpdate=function(t){return this.viewportBoxUpdateListeners.add(t)},e.prototype.layoutReady=function(t){this.layoutUpdateListeners.notify(this.box,this.prevViewportBox||this.box,t)},e.prototype.getBoundingBox=function(){var t=this.config.transformPagePoint;return Jn(this.element,t)},e.prototype.getBoundingBoxWithoutTransforms=function(){var t,e,n=this.getBoundingBox();return t=n,e=this.latest,Hn(t.x,e,Vn),Hn(t.y,e,Un),n},e.prototype.getComputedStyle=function(){return window.getComputedStyle(this.element)},e.prototype.snapshotBoundingBox=function(){this.prevViewportBox=this.getBoundingBoxWithoutTransforms(),this.rebaseTargetBox(!1,this.prevViewportBox)},e.prototype.rebaseTargetBox=function(t,e){var n=this;void 0===t&&(t=!1),void 0===e&&(e=this.box);var r=this.axisProgress,i=r.x,a=r.y,o=this.box&&!this.isTargetBoxLocked&&!i.isAnimating()&&!a.isAnimating();(t||o)&&Qn((function(t){var r=e[t],i=r.min,a=r.max;n.setAxisTarget(t,i,a)}))},e.prototype.measureLayout=function(){var t=this;this.box=this.getBoundingBox(),this.boxCorrected=fn(this.box),this.targetBox||(this.targetBox=fn(this.box)),this.layoutMeasureListeners.notify(this.box,this.prevViewportBox||this.box),E.update((function(){return t.rebaseTargetBox()}))},e.prototype.lockTargetBox=function(){this.isTargetBoxLocked=!0},e.prototype.unlockTargetBox=function(){this.stopLayoutAnimation(),this.isTargetBoxLocked=!1},e.prototype.resetTransform=function(){var t=this.config.transformTemplate;this.element.style.transform=t?t({},""):"none",this.scheduleRender()},e.prototype.setAxisTarget=function(t,e,n){var r=this.targetBox[t];r.min=e,r.max=n,this.hasViewportBoxUpdated=!0,this.rootParent.scheduleUpdateLayoutDelta()},e.prototype.startLayoutAxisAnimation=function(t,e){var n,r=this,i=this.axisProgress[t],a=this.targetBox[t],o=a.min,s=a.max-o;return i.clearListeners(),i.set(o),i.set(o),i.onChange((function(e){return r.setAxisTarget(t,e,e+s)})),null===(n=this.animateMotionValue)||void 0===n?void 0:n.call(this,t,i,0,e)},e.prototype.stopLayoutAnimation=function(){var t=this;Qn((function(e){return t.axisProgress[e].stop()}))},e.prototype.updateLayoutDeltas=function(){var t,e,n,r,i;t=this.boxCorrected,e=this.box,In(t.x,e.x),In(t.y,e.y),this.parent&&(this.prevTreeScale.x=this.treeScale.x,this.prevTreeScale.y=this.treeScale.y,n=this.treeScale,r=this.parent.treeScale,i=this.parent.delta,n.x=r.x*i.x.scale,n.y=r.y*i.y.scale),function(t,e){for(var n=e.length,r=0;r<n;r++)zn(t,e[r].delta)}(this.boxCorrected,this.treePath),Zn(this.delta,this.boxCorrected,this.targetBox,this.layoutOrigin),this.hasViewportBoxUpdated&&this.viewportBoxUpdateListeners.notify(this.targetBox,this.delta),this.hasViewportBoxUpdated=!1;var a=kn(this.delta,this.treeScale);a===this.deltaTransform&&this.prevTreeScale.x===this.treeScale.x&&this.prevTreeScale.y===this.treeScale.y||this.scheduleRender(),this.deltaTransform=a},e.prototype.updateTransformDeltas=function(){var t,e,n;this.isLayoutProjectionEnabled&&this.box&&(t=this.targetBoxFinal,e=this.targetBox,n=this.latest,Fn(t.x,e.x,n,Vn),Fn(t.y,e.y,n,Un),Zn(this.deltaFinal,this.boxCorrected,this.targetBoxFinal,this.layoutOrigin))},e.prototype.build=function(){this.updateTransformDeltas(),void 0!==this.isVisible&&(this.style.visibility=this.isVisible?"visible":"hidden"),jn(this.latest,this.style,this.vars,this.transform,this.transformOrigin,this.transformKeys,this.config,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},e.prototype.render=function(){for(var t in this.build(),Object.assign(this.element.style,this.style),this.vars)this.element.style.setProperty(t,this.vars[t])},e}(ln),fr=function(t){return t.updateLayoutDelta()};function dr(t){var e=Object(ve.useRef)(null);return null===e.current&&(e.current=t()),e.current}function pr(t,e,n){return"string"===typeof t?t:V.transform(e+n*t)}var vr=function(t,e){return V.transform(t*e)},mr={offset:"stroke-dashoffset",array:"stroke-dasharray"},gr={offset:"strokeDashoffset",array:"strokeDasharray"};var yr={x:0,y:0,width:0,height:0};function _r(t,e,n,r,i,a,s,u,l,c,h,f,d,p,v){var m=t.attrX,g=t.attrY,y=t.originX,_=t.originY,b=t.pathLength,x=t.pathSpacing,w=void 0===x?1:x,S=t.pathOffset,k=void 0===S?0:S;return jn(o(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),r,n,i,a,s,u,h,f,d,p,v),r.transform&&(e.transform=r.transform,delete r.transform),(void 0!==y||void 0!==_||e.transform)&&(e.transformOrigin=function(t,e,n){return pr(e,t.x,t.width)+" "+pr(n,t.y,t.height)}(l||yr,void 0!==y?y:.5,void 0!==_?_:.5)),void 0!==m&&(r.x=m),void 0!==g&&(r.y=g),void 0!==c&&void 0!==b&&function(t,e,n,r,i,a){void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=!0);var o=a?mr:gr;t[o.offset]=vr(-i,e);var s=vr(n,e),u=vr(r,e);t[o.array]=s+" "+u}(r,c,b,w,k,!1),r}var br=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox"]),xr=/([a-z])([A-Z])/g,wr=function(t){return t.replace(xr,"$1-$2").toLowerCase()},Sr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attrs={},e.defaultConfig={enableHardwareAcceleration:!1},e.config=e.defaultConfig,e}return i(e,t),e.prototype.mount=function(e){t.prototype.mount.call(this,e),this.measure()},e.prototype.measure=function(){try{this.dimensions="function"===typeof this.element.getBBox?this.element.getBBox():this.element.getBoundingClientRect()}catch(t){this.dimensions={x:0,y:0,width:0,height:0}}"path"===this.element.tagName&&(this.totalPathLength=this.element.getTotalLength())},e.prototype.clean=function(){t.prototype.clean.call(this),this.attrs={}},e.prototype.read=function(t){return t=br.has(t)?t:wr(t),this.element.getAttribute(t)},e.prototype.build=function(){this.updateTransformDeltas(),_r(this.latest,this.style,this.vars,this.attrs,this.transform,this.transformOrigin,this.transformKeys,this.config,this.dimensions,this.totalPathLength,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},e.prototype.render=function(){for(var e in t.prototype.render.call(this),this.attrs)this.element.setAttribute(br.has(e)?e:wr(e),this.attrs[e])},e}(hr);var kr=new Set(["animate","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"]);function Tr(t){return"string"===typeof t&&kr.has(t)}var Er=Object(ve.createContext)(null),Cr=Object(ve.createContext)({variantContext:{}});function Or(){return Object(ve.useContext)(Cr).variantContext}function Mr(){return Object(ve.useContext)(Cr).visualElement}var Ar=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","onLayoutAnimationComplete","onViewportBoxUpdate","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileHover","whileTap","onHoverEnd","onHoverStart"]);function Pr(t){return Ar.has(t)}var Lr=function(t){return!Pr(t)};try{var Rr=n(337).default;Lr=function(t){return t.startsWith("on")?!Pr(t):Rr(t)}}catch(Da){}var jr=function(t){return t instanceof _e};function Ir(t,e){var n=e.layout,r=e.layoutId;return bn(t)||wn(t)||(n||void 0!==r)&&!!Rn[t]}function Dr(t,e,n,r,i){for(var a in void 0===r&&(r=!1),r&&(t.reactStyle={}),n){var o=n[a],s=!1;if(jr(o))zr.has(a)||(t.addValue(a,o),s=!0);else if(Ir(a,i)){if(t.hasValue(a)){if(o!==e[a]){if(jr(e[a]))t.addValue(a,be(o));else t.getValue(a).set(o)}}else t.addValue(a,be(o));s=!0}else r&&(t.reactStyle[a]=o);s&&(e[a]=o)}}var Nr,Br,zr=new Set([]),Fr=function(){return{}},Vr=Object(ve.createContext)({transformPagePoint:function(t){return t},features:[],isStatic:!1});function Ur(t){var e=t.animate,n=t.variants,r=t.inherit;return void 0===r?!!n&&!e:r}!function(t){t[t.Entering=0]="Entering",t[t.Present=1]="Present",t[t.Exiting=2]="Exiting"}(Nr||(Nr={})),function(t){t[t.Hide=0]="Hide",t[t.Show=1]="Show"}(Br||(Br={}));var qr={measureLayout:function(t){return t.measureLayout()},layoutReady:function(t){return t.layoutReady()}},Hr=function(t,e){return t.depth-e.depth};function Wr(){var t=new Set;return{add:function(e){return t.add(e)},flush:function(e){var n=void 0===e?qr:e,r=n.measureLayout,i=n.layoutReady,a=Array.from(t).sort(Hr);a.forEach((function(t){return t.resetTransform()})),a.forEach(r),a.forEach(i),a.forEach((function(t){t.isPresent&&(t.presence=Nr.Present)})),t.clear()}}}function Gr(t){return!!t.forceUpdate}var Xr=Object(ve.createContext)(Wr()),Yr=Object(ve.createContext)(Wr()),Zr="undefined"!==typeof window?ve.useLayoutEffect:ve.useEffect;function Qr(){var t=Object(ve.useContext)(Er);if(null===t)return[!0,null];var e=t.isPresent,n=t.onExitComplete,r=t.register,i=ti();Object(ve.useEffect)((function(){return r(i)}),[]);return!e&&n?[!1,function(){return null===n||void 0===n?void 0:n(i)}]:[!0]}function Jr(t){return null===t||t.isPresent}var Kr=0,$r=function(){return Kr++},ti=function(){return dr($r)};function ei(t,e){void 0===e&&(e=!1);var n=Object(ve.useRef)(!0);(!e||e&&n.current)&&t(),n.current=!1}function ni(t){return"string"===typeof t||Array.isArray(t)}function ri(t){return"object"===typeof t&&"function"===typeof t.start}function ii(t,e){var n=e.defaultFeatures,r=e.useVisualElement,i=e.render;return Object(ve.forwardRef)((function(e,o){var s=Object(ve.useContext)(Vr).isStatic,u=r(t,e,s,o);!function(t,e){var n=dr(Fr);for(var r in n){var i=Ir(r,e),a=void 0!==e[r],o=e.style&&void 0!==e.style[r],s=a&&jr(e[r]),u=o&&jr(e.style[r]);(i&&!a&&!o||!i&&!s&&!u)&&(t.removeValue(r),delete n[r])}Dr(t,n,e,!1,e),e.style&&Dr(t,n,e.style,!0,e),e.transformValues&&(t.reactStyle=e.transformValues(t.reactStyle))}(u,e);var c=function(t,e,n){var r,i,a=e.variants,o=e.initial,s=e.animate,u=e.whileTap,l=e.whileHover,c=Or(),h=c.parent,f=c.initial,d=c.animate,p=Object(ve.useContext)(Er),v=ni(s)||ni(u)||ni(l)||ri(s),m=a||v;!1!==(o=null!==(r=null===p||void 0===p?void 0:p.initial)&&void 0!==r?r:o)||ri(s)||(o=s);var g=Object(ve.useMemo)((function(){return{parent:m?t:h,initial:ni(o)?o:f,animate:ni(s)?s:d}}),[n?o:null]);return ei((function(){var e=o||f;e&&Je(t,e)}),!n),m&&!v&&(null===h||void 0===h||h.addVariantChild(t)),Jr(p)&&(null===(i=t.variantChildrenOrder)||void 0===i||i.clear()),Object(ve.useEffect)((function(){m&&(null===h||void 0===h||h.addVariantChildOrder(t))})),Object(ve.useEffect)((function(){return t.isMounted=!0,function(){var e;t.isMounted=!1,null===(e=null===h||void 0===h?void 0:h.variantChildren)||void 0===e||e.delete(t)}}),[]),ei((function(){t.forEachValue((function(e,n){t.baseTarget[n]=e.get()}))}),!0),g}(u,e,s),h=function(t,e,n,r){var i=Object(ve.useContext)(Vr);if(e||"undefined"===typeof window)return null;for(var o=l(t,i.features),s=o.length,u=[],c=0;c<s;c++){var h=o[c],f=h.shouldRender,d=h.key,p=h.getComponent;if(f(r)){var v=p(r);v&&u.push(Object(ve.createElement)(v,a({key:d},r,{visualElement:n,inherit:Ur(r)})))}}return u}(n,s,u,e),f=Object(ve.useMemo)((function(){return{visualElement:u,variantContext:c}}),[u,c]),d=i(t,e,u);return function(t){var e=Object(ve.useContext)(Xr),n=Object(ve.useContext)(Yr);Zr((function(){return function(){Gr(e)&&e.remove(t),Gr(n)&&n.remove(t)}}),[])}(u),Object(ve.createElement)(ve.Fragment,null,Object(ve.createElement)(Cr.Provider,{value:f},d),h)}))}function ai(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var oi=ai("dragHorizontal"),si=ai("dragVertical");function ui(t){var e=!1;if("y"===t)e=si();else if("x"===t)e=oi();else{var n=oi(),r=si();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}function li(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function ci(t){return"undefined"!==typeof PointerEvent&&t instanceof PointerEvent?!("mouse"!==t.pointerType):t instanceof MouseEvent}function hi(t){return!!t.touches}var fi={pageX:0,pageY:0};function di(t,e){void 0===e&&(e="page");var n=t.touches[0]||t.changedTouches[0]||fi;return{x:n[e+"X"],y:n[e+"Y"]}}function pi(t,e){return void 0===e&&(e="page"),{x:t[e+"X"],y:t[e+"Y"]}}function vi(t,e){return void 0===e&&(e="page"),{point:hi(t)?di(t,e):pi(t,e)}}function mi(t){return vi(t,"client")}var gi=function(t,e){void 0===e&&(e=!1);var n,r=function(e){return t(e,vi(e))};return e?(n=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&n(t)}):r},yi="undefined"!==typeof window,_i={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},bi={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function xi(t){return yi&&null===window.onpointerdown?t:yi&&null===window.ontouchstart?bi[t]:yi&&null===window.onmousedown?_i[t]:t}function wi(t,e,n,r){return li(t,xi(e),gi(n,"pointerdown"===e),r)}function Si(t,e,n,r){return function(t,e,n,r){Object(ve.useEffect)((function(){var i=t.current;if(n&&i)return li(i,e,n,r)}),[t,e,n,r])}(t,xi(e),n&&gi(n,"pointerdown"===e),r)}var ki=function(){function t(t,e,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var t=Ci(r.lastMoveEventInfo,r.history),e=null!==r.startEvent,n=se(t.offset,{x:0,y:0})>=3;if(e||n){var i=t.point,o=T().timestamp;r.history.push(a(a({},i),{timestamp:o}));var s=r.handlers,u=s.onStart,l=s.onMove;e||(u&&u(r.lastMoveEvent,t),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){r.lastMoveEvent=t,r.lastMoveEventInfo=Ti(e,r.transformPagePoint),ci(t)&&0===t.buttons?r.handlePointerUp(t,e):E.update(r.updatePoint,!0)},this.handlePointerUp=function(t,e){r.end();var n=r.handlers.onEnd;if(n){var i=Ci(Ti(e,r.transformPagePoint),r.history);n&&n(t,i)}},!(hi(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=i;var o=Ti(vi(t),this.transformPagePoint),s=o.point,u=T().timestamp;this.history=[a(a({},s),{timestamp:u})];var l=e.onSessionStart;l&&l(t,Ci(o,this.history)),this.removeListeners=St(wi(window,"pointermove",this.handlePointerMove),wi(window,"pointerup",this.handlePointerUp),wi(window,"pointercancel",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),x.update(this.updatePoint)},t}();function Ti(t,e){return e?{point:e(t.point)}:t}function Ei(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ci(t,e){var n=t.point;return{point:n,delta:Ei(n,Mi(e)),offset:Ei(n,Oi(e)),velocity:Ai(e,.1)}}function Oi(t){return t[0]}function Mi(t){return t[t.length-1]}function Ai(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=Mi(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xe(e)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Pi(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?vt(r,t,n):Math.max(t,r):void 0!==i&&t>i&&(t=n?vt(i,t,n):Math.min(t,i)),t}function Li(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Ri(t,e){var n,r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&(r=(n=u([i,r],2))[0],i=n[1]),{min:t.min+r,max:t.min+i}}var ji,Ii=new WeakMap,Di=function(){function t(t){var e=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),Ii.set(e,this)}return t.prototype.start=function(t,e){var n=this,r=void 0===e?{}:e,i=r.snapToCursor,a=void 0!==i&&i,o=r.cursorProgress;a&&this.snapToCursor(t);var s=this.props.transformPagePoint;this.panSession=new ki(t,{onSessionStart:function(){n.stopMotion()},onStart:function(t,e){var r,i,a=n.props,s=a.drag,u=a.dragPropagation;if(!s||u||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=ui(s),n.openGlobalLock)){n.prepareBoundingBox(),n.visualElement.lockTargetBox(),n.resolveDragConstraints();var l=mi(t).point;Qn((function(t){var e=n.visualElement.targetBox[t],r=e.min,i=e.max;n.cursorProgress[t]=o?o[t]:pt(r,i,l[t]);var a=n.getAxisMotionValue(t);a&&(n.originPoint[t]=a.get())})),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,t,e)}},onMove:function(t,e){var r,i,a,o,s=n.props,u=s.dragPropagation,l=s.dragDirectionLock;if(u||n.openGlobalLock){var c=e.offset;if(l&&null===n.currentDirection)return n.currentDirection=function(t,e){void 0===e&&(e=10);var n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(c),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",t,c),n.updateAxis("y",t,c),null===(o=(a=n.props).onDrag)||void 0===o||o.call(a,t,e),ji=t}},onEnd:function(t,e){return n.stop(t,e)}},{transformPagePoint:s})},t.prototype.prepareBoundingBox=function(){var t=this.visualElement.getInstance(),e=t.style.transform;this.visualElement.resetTransform(),this.visualElement.measureLayout(),t.style.transform=e,this.visualElement.rebaseTargetBox(!0,this.visualElement.getBoundingBoxWithoutTransforms())},t.prototype.resolveDragConstraints=function(){var t=this,e=this.props.dragConstraints;this.constraints=!!e&&(ge(e)?this.resolveRefConstraints(this.visualElement.box,e):function(t,e){var n=e.top,r=e.left,i=e.bottom,a=e.right;return{x:Li(t.x,r,a),y:Li(t.y,n,i)}}(this.visualElement.box,e)),this.constraints&&!this.hasMutatedConstraints&&Qn((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(t.visualElement.box[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(t,e){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,a=e.current;this.constraintsBox=Jn(a,i);var o=function(t,e){return{x:Ri(t.x,e.x),y:Ri(t.y,e.y)}}(t,this.constraintsBox);if(r){var s=r(function(t){var e=t.x,n=t.y;return{top:n.min,bottom:n.max,left:e.min,right:e.max}}(o));this.hasMutatedConstraints=!!s,s&&(o=hn(s))}return o},t.prototype.cancelDrag=function(){this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null)},t.prototype.stop=function(t,e){var n;this.visualElement.unlockTargetBox(),null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var r=this.isDragging;if(this.cancelDrag(),r){var i=this.props,a=i.dragMomentum,o=i.dragElastic,s=i.onDragEnd;if(a||o){var u=e.velocity;this.animateDragEnd(u)}null===s||void 0===s||s(t,e)}},t.prototype.snapToCursor=function(t){var e=this;this.prepareBoundingBox(),Qn((function(n){var r=e.getAxisMotionValue(n);if(r){var i=mi(t).point,a=e.visualElement.box,o=a[n].max-a[n].min,s=a[n].min+o/2,u=i[n]-s;e.originPoint[n]=i[n],r.set(u)}else e.cursorProgress[n]=.5,e.updateVisualElementAxis(n,t)}))},t.prototype.updateAxis=function(t,e,n){if(Ni(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,n):this.updateVisualElementAxis(t,e)},t.prototype.updateAxisMotionValue=function(t,e){var n=this.getAxisMotionValue(t);if(e&&n){var r=this.props.dragElastic,i=this.originPoint[t]+e[t],a=this.constraints?Pi(i,this.constraints[t],r):i;n.set(a)}},t.prototype.updateVisualElementAxis=function(t,e){var n,r=this.props.dragElastic,i=this.visualElement.box[t],a=i.max-i.min,o=this.cursorProgress[t],s=function(t,e,n,r,i){var a=t-e*n;return r?Pi(a,r,i):a}(mi(e).point[t],a,o,null===(n=this.constraints)||void 0===n?void 0:n[t],r);this.visualElement.setAxisTarget(t,s,s+a)},t.prototype.updateProps=function(t){var e=t.drag,n=void 0!==e&&e,r=t.dragDirectionLock,i=void 0!==r&&r,s=t.dragPropagation,u=void 0!==s&&s,l=t.dragConstraints,c=void 0!==l&&l,h=t.dragElastic,f=void 0===h?.35:h,d=t.dragMomentum,p=void 0===d||d,v=o(t,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=a({drag:n,dragDirectionLock:i,dragPropagation:u,dragConstraints:c,dragElastic:f,dragMomentum:p},v)},t.prototype.getAxisMotionValue=function(t){var e=this.props,n=e.layout,r=e.layoutId,i="_drag"+t.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(t,0)},t.prototype.animateDragEnd=function(t){var e=this,n=this.props,r=n.drag,i=n.dragMomentum,o=n.dragElastic,s=n.dragTransition,u=Qn((function(n){if(Ni(n,r,e.currentDirection)){var u=e.constraints?e.constraints[n]:{},l=o?200:1e6,c=o?40:1e7,h=a(a({type:"inertia",velocity:i?t[n]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10},s),u);return e.getAxisMotionValue(n)?e.startAxisValueAnimation(n,h):e.visualElement.startLayoutAxisAnimation(n,h)}}));return Promise.all(u).then((function(){var t,n;null===(n=(t=e.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;Qn((function(e){var n=t.getAxisMotionValue(e);n?n.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,e){var n=this.getAxisMotionValue(t);if(n){var r=n.get();return n.set(r),n.set(r),je(t,n,0,e)}},t.prototype.scalePoint=function(){var t=this,e=this.props,n=e.drag,r=e.dragConstraints;if(ge(r)&&this.constraintsBox){this.stopMotion();var i={x:0,y:0};Qn((function(e){i[e]=Xn(t.visualElement.targetBox[e],t.constraintsBox[e])})),this.prepareBoundingBox(),this.resolveDragConstraints(),Qn((function(e){if(Ni(e,n,null)){var r=function(t,e,n){var r=t.max-t.min,i=vt(e.min,e.max-r,n);return{min:i,max:i+r}}(t.visualElement.targetBox[e],t.constraintsBox[e],i[e]),a=r.min,o=r.max;t.visualElement.setAxisTarget(e,a,o)}}))}},t.prototype.mount=function(t){var e=this,n=wi(t.getInstance(),"pointerdown",(function(t){var n=e.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),r=li(window,"resize",(function(){e.scalePoint()})),i=t.onLayoutUpdate((function(){e.isDragging&&e.resolveDragConstraints()})),a=t.prevSnapshot;return(null===a||void 0===a?void 0:a.isDragging)&&this.start(ji,{cursorProgress:a.cursorProgress}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),e.cancelDrag()}},t}();function Ni(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}var Bi=function(t){return function(e){return t(e),null}},zi=Bi((function(t){var e=t.visualElement;return function(t,e){var n=t.dragControls,r=Object(ve.useContext)(Vr).transformPagePoint,i=dr((function(){return new Di({visualElement:e})}));i.updateProps(a(a({},t),{transformPagePoint:r})),Object(ve.useEffect)((function(){return n&&n.subscribe(i)}),[i]),Object(ve.useEffect)((function(){return i.mount(e)}),[])}(o(t,["visualElement"]),e)})),Fi={key:"drag",shouldRender:function(t){return!!t.drag||!!t.dragControls},getComponent:function(){return zi}};function Vi(t){return Object(ve.useEffect)((function(){return function(){return t()}}),[])}var Ui=function t(e,n){return!!n&&(e===n||t(e,n.parentElement))},qi=["whileHover","whileTap","whileDrag"],Hi=function(t){return qi.indexOf(t)+1},Wi=Hi("whileTap");var Gi=Hi("whileHover"),Xi=function(t){return function(e,n){ci(e)&&t(e,n)}};function Yi(t,e){!function(t,e){var n=t.onPan,r=t.onPanStart,i=t.onPanEnd,a=t.onPanSessionStart,o=n||r||i||a,s=Object(ve.useRef)(null),u=Object(ve.useContext)(Vr).transformPagePoint,l={onSessionStart:a,onStart:r,onMove:n,onEnd:function(t,e){s.current=null,i&&i(t,e)}};Object(ve.useEffect)((function(){null!==s.current&&s.current.updateHandlers(l)})),Si(e,"pointerdown",o&&function(t){s.current=new ki(t,l,{transformPagePoint:u})}),Vi((function(){return s.current&&s.current.end()}))}(t,e),function(t,e){var n=t.onTap,r=t.onTapStart,i=t.onTapCancel,a=t.whileTap,o=n||r||i||a,s=Object(ve.useRef)(!1),u=Object(ve.useRef)(null);function l(){var t;null===(t=u.current)||void 0===t||t.call(u),u.current=null}a&&an(e,a,Wi);var c=Object(ve.useRef)(null);c.current=function(t,r){var o=e.getInstance();if(l(),s.current&&o){s.current=!1,a&&sn(e,Wi);var u=ui(!0);u&&(u(),Ui(o,t.target)?null===n||void 0===n||n(t,r):null===i||void 0===i||i(t,r))}},Si(e,"pointerdown",o?function(t,n){l(),u.current=St(wi(window,"pointerup",(function(t,e){var n;return null===(n=c.current)||void 0===n?void 0:n.call(c,t,e)})),wi(window,"pointercancel",(function(t,e){var n;return null===(n=c.current)||void 0===n?void 0:n.call(c,t,e)}))),e.getInstance()&&!s.current&&(s.current=!0,null===r||void 0===r||r(t,n),a&&on(e,Wi))}:void 0),Vi(l)}(t,e),function(t,e){var n=t.whileHover,r=t.onHoverStart,i=t.onHoverEnd;n&&an(e,n,Gi),Si(e,"pointerenter",Xi((function(t,i){null===r||void 0===r||r(t,i),n&&on(e,Gi)}))),Si(e,"pointerleave",Xi((function(t,r){null===i||void 0===i||i(t,r),n&&sn(e,Gi)})))}(t,e)}var Zi=["onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileTap","whileHover","onHoverStart","onHoverEnd"],Qi=Bi((function(t){var e=t.visualElement;Yi(o(t,["visualElement"]),e)})),Ji={key:"gestures",shouldRender:function(t){return Zi.some((function(e){return t.hasOwnProperty(e)}))},getComponent:function(){return Qi}},Ki=function(){function t(){this.hasMounted=!1,this.pendingAnimations=[],this.subscribers=new Set}return t.prototype.subscribe=function(t){var e=this;return this.subscribers.add(t),function(){return e.subscribers.delete(t)}},t.prototype.start=function(t,e){var n=this;if(this.hasMounted){var r=[];return this.subscribers.forEach((function(n){var i=en(n,t,{transitionOverride:e});r.push(i)})),Promise.all(r)}return new Promise((function(r){n.pendingAnimations.push({animation:[t,e],resolve:r})}))},t.prototype.set=function(t){return this.hasMounted,this.subscribers.forEach((function(e){Je(e,t)}))},t.prototype.stop=function(){this.subscribers.forEach((function(t){!function(t){t.forEachValue((function(t){return t.stop()}))}(t)}))},t.prototype.mount=function(){var t=this;this.hasMounted=!0,this.pendingAnimations.forEach((function(e){var n=e.animation,r=e.resolve;t.start.apply(t,l(n)).then(r)}))},t.prototype.unmount=function(){this.hasMounted=!1,this.stop()},t}(),$i=Bi((function(t){var e=t.animate,n=t.exit,r=t.visualElement,i=u(Qr(),2),a=i[0],o=i[1],s=Object(ve.useContext)(Er),l=Object(ve.useRef)(!1),c=void 0!==(null===s||void 0===s?void 0:s.custom)?s.custom:t.custom;Object(ve.useEffect)((function(){a?!l.current||!e||"boolean"===typeof e||e instanceof Ki||en(r,e):(!l.current&&n&&en(r,n,{custom:c}).then(o),l.current=!0),a&&(l.current=!1)}),[e,c,n,a,o,t])})),ta={key:"exit",shouldRender:function(t){return!!t.exit&&!Ur(t)},getComponent:function(){return $i}};function ea(t,e){void 0===e&&(e=!1);t.transition;var n=t.transitionEnd,r=o(t,["transition","transitionEnd"]);return e?a(a({},r),n):r}var na=function(t){var e,n=t instanceof _e?t.get():t;return Array.from(new Set((e=n)?Array.isArray(e)?e:[e]:[]))};var ra={shouldRender:function(t){return void 0!==t.animate&&!Ge(t.animate)&&!ri(t.animate)},Component:Bi((function(t){var e=t.animate;return function(t,e,n){var r=Object(ve.useRef)(!0),i=Object(ve.useRef)(null);i.current||(i.current=ea(e,!0)),Object(ve.useEffect)((function(){var o,s,u={},l=ea(e),c=ea(e,!0);for(var h in l){var f=r.current&&(!t.hasValue(h)||t.getValue(h).get()!==c[h]),d=null!==c[h],p=(o=i.current[h],void 0!==(s=c[h])&&(Array.isArray(o)&&Array.isArray(s)?!function(t,e){if(null===e)return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(s,o):o!==s));d&&(p||f)&&(u[h]=l[h])}r.current=!1,i.current=a(a({},i.current),c),Object.keys(u).length&&en(t,a(a({},u),{transition:e.transition||n,transitionEnd:e.transitionEnd}))}),[e])}(t.visualElement,e,t.transition)}))},ia={shouldRender:function(t){return t.variants&&!ri(t.animate)||Ge(t.animate)},Component:Bi((function(t){var e=t.animate,n=t.inherit,r=void 0===n||n;return function(t,e,n,r){var i,a=na(n),o=Or(),s=null===(i=o.parent)||void 0===i?void 0:i.isMounted,u=Object(ve.useRef)(!1);Object(ve.useEffect)((function(){var n,i,l=!1;r?(l=!!s,a=na(o.animate)):l=u.current||(n=na(e),i=a,n.join(",")!==i.join(",")),l&&en(t,a),u.current=!0}),[a.join(",")])}(t.visualElement,t.initial,e,r)}))},aa={shouldRender:function(t){return ri(t.animate)},Component:Bi((function(t){var e=t.animate;return function(t,e){var n=Object(ve.useMemo)((function(){return e.subscribe(t)}),[e]);Vi((function(){return null===n||void 0===n?void 0:n()}))}(t.visualElement,e)}))},oa={key:"animation",shouldRender:function(){return!0},getComponent:function(t){return ra.shouldRender(t)?ra.Component:ia.shouldRender(t)?ia.Component:aa.shouldRender(t)?aa.Component:void 0}};var sa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTarget={x:{min:0,max:0},y:{min:0,max:0}},e.stopAxisAnimation={x:void 0,y:void 0},e.animate=function(t,n,r){void 0===r&&(r={});var i=r.originBox,a=r.targetBox,s=r.visibilityAction,u=r.shouldStackAnimate,l=o(r,["originBox","targetBox","visibilityAction","shouldStackAnimate"]),c=e.props,h=c.visualElement,f=c.layout;if(!1===u)return e.safeToRemove();var d=la(n=i||n,t=a||t),p=Qn((function(r){if("position"===f){var i=t[r].max-t[r].min;n[r].max=n[r].min+i}if(!h.isTargetBoxLocked)return void 0===s?d?e.animateAxis(r,t[r],n[r],l):h.setAxisTarget(r,t[r].min,t[r].max):void(s===Br.Hide?h.hide():h.show())}));return h.render(),Promise.all(p).then((function(){var t,n;null===(n=(t=e.props).onLayoutAnimationComplete)||void 0===n||n.call(t),h.isPresent?h.presence=Nr.Present:e.safeToRemove()}))},e}return i(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.visualElement;e.animateMotionValue=je,e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate),e.updateConfig(a(a({},e.config),{safeToRemove:function(){return t.safeToRemove()}}))},e.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),Qn((function(e){var n,r;return null===(r=(n=t.stopAxisAnimation)[e])||void 0===r?void 0:r.call(n)}))},e.prototype.animateAxis=function(t,e,n,r){var i,a,o=void 0===r?{}:r,s=o.transition,u=o.crossfadeOpacity;null===(a=(i=this.stopAxisAnimation)[t])||void 0===a||a.call(i);var l,c=this.props.visualElement,h=this.frameTarget[t],f=c.axisProgress[t];f.clearListeners(),f.set(0),f.set(0),u&&(l=this.createCrossfadeAnimation(u),c.show());var d=function(){var r=f.get()/1e3;!function(t,e,n,r){t.min=vt(e.min,n.min,r),t.max=vt(e.max,n.max,r)}(h,n,e,r),c.setAxisTarget(t,h.min,h.max),null===l||void 0===l||l(r)};d(),c.updateLayoutDelta();var p=f.onChange(d),v=je("x"===t?"layoutX":"layoutY",f,1e3,s||this.props.transition||ha).then(p);return this.stopAxisAnimation[t]=function(){f.stop(),p()},v},e.prototype.createCrossfadeAnimation=function(t){var e=this.props.visualElement.getValue("opacity",0);return function(n){e.set(da(vt(0,1,n))),t.set(pa(vt(1,0,n)))}},e.prototype.safeToRemove=function(){var t,e;null===(e=(t=this.props).safeToRemove)||void 0===e||e.call(t)},e.prototype.render=function(){return null},e}(ve.Component);function ua(t){var e=u(Qr(),2)[1];return Object(ve.createElement)(sa,a({},t,{safeToRemove:e}))}function la(t,e){return ca(t.x,e.x)||ca(t.y,e.y)}function ca(t,e){return t.min!==e.min||t.max!==e.max}var ha={duration:.45,ease:[.4,0,.1,1]};function fa(t,e,n){return function(r){return r<t?0:r>e?1:n(pt(t,e,r))}}var da=fa(0,.5,Vt),pa=fa(.5,.95,Dt),va={key:"animate-layout",shouldRender:function(t){return!!t.layout||!!t.layoutId},getComponent:function(){return ua}},ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.syncLayout,n=t.framerSyncLayout,r=t.visualElement;Gr(e)&&e.register(r),Gr(n)&&n.register(r)},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;return Gr(e)?e.syncUpdate():(n.snapshotBoundingBox(),e.add(n)),null},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;Gr(e)||e.flush(),n.rebaseTargetBox()},e.prototype.render=function(){return null},e}(me.a.Component);function ga(t){var e=Object(ve.useContext)(Xr),n=Object(ve.useContext)(Yr);return me.a.createElement(ma,a({},t,{syncLayout:e,framerSyncLayout:n}))}var ya={key:"measure-layout",shouldRender:function(t){return!!t.drag||!!t.layout||!!t.layoutId},getComponent:function(){return ga}},_a=[ya,oa,Fi,Ji,ta,va],ba={useVisualElement:function(t,e,n,r){var i=Mr(),o=dr((function(){return new(Tr(t)?Sr:hr)(i,r)}));o.updateConfig(a(a(a({},o.config),{enableHardwareAcceleration:!n}),e)),o.layoutId=e.layoutId;var s=Object(ve.useContext)(Er),u=null===s||s.isPresent;o.isPresent=void 0!==e.isPresent?e.isPresent:u;var l=null===s||void 0===s?void 0:s.id;return o.isPresenceRoot=!i||i.presenceId!==l,Object(ve.useEffect)((function(){if(e.onViewportBoxUpdate)return o.onViewportBoxUpdate(e.onViewportBoxUpdate)}),[e.onViewportBoxUpdate]),o},render:function(t,e,n){var r="string"===typeof t?function(t){var e={};for(var n in t)Lr(n)&&(e[n]=t[n]);return e}(e):e;n.clean(),n.build();var i=Tr(t)?function(t){return a(a({},t.attrs),{style:a({},t.reactStyle)})}(n):function(t,e){var n=e.drag,r={style:a(a(a({},t.reactStyle),t.style),t.vars)};return n&&(r.draggable=!1,r.style.userSelect="none",r.style.touchAction=!0===n?"none":"pan-"+("x"===n?"y":"x")),r}(n,e);return Object(ve.createElement)(t,a(a(a({},r),{ref:n.ref}),i))}};function xa(t){var e=a(a({},ba),{defaultFeatures:t});var n=new Map;return new Proxy({custom:function(t){return ii(t,e)}},{get:function(t,r){return"custom"===r?t.custom:(n.has(r)||n.set(r,ii(r,e)),n.get(r))}})}var wa=xa(_a);var Sa=0;function ka(){var t=Sa;return Sa++,t}var Ta=function(t){var e=t.children,n=t.initial,r=t.isPresent,i=t.onExitComplete,a=t.custom,o=t.presenceAffectsLayout,s=dr(Ea),u=dr(ka),l=Object(ve.useMemo)((function(){return{id:u,initial:n,isPresent:r,custom:a,onExitComplete:function(t){s.set(t,!0);var e=!0;s.forEach((function(t){t||(e=!1)})),e&&(null===i||void 0===i||i())},register:function(t){return s.set(t,!1),function(){return s.delete(t)}}}}),o?void 0:[r]);return Object(ve.useMemo)((function(){s.forEach((function(t,e){return s.set(e,!1)}))}),[r]),Object(ve.createElement)(Er.Provider,{value:l},e)};function Ea(){return new Map}function Ca(t){return t.key||""}var Oa=function(t){var e=t.children,n=t.custom,r=t.initial,i=void 0===r||r,a=t.onExitComplete,o=t.exitBeforeEnter,s=t.presenceAffectsLayout,c=void 0===s||s,h=function(){var t=Object(ve.useRef)(!1),e=u(Object(ve.useState)(0),2),n=e[0],r=e[1];return Vi((function(){return t.current=!0})),Object(ve.useCallback)((function(){!t.current&&r(n+1)}),[n])}(),f=Object(ve.useContext)(Xr);Gr(f)&&(h=f.forceUpdate);var d=Object(ve.useRef)(!0),p=function(t){var e=[];return ve.Children.forEach(t,(function(t){Object(ve.isValidElement)(t)&&e.push(t)})),e}(e),v=Object(ve.useRef)(p),m=Object(ve.useRef)(new Map).current,g=Object(ve.useRef)(new Set).current;if(function(t,e){t.forEach((function(t){var n=Ca(t);e.set(n,t)}))}(p,m),d.current)return d.current=!1,Object(ve.createElement)(ve.Fragment,null,p.map((function(t){return Object(ve.createElement)(Ta,{key:Ca(t),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:c},t)})));for(var y=l(p),_=v.current.map(Ca),b=p.map(Ca),x=_.length,w=0;w<x;w++){var S=_[w];-1===b.indexOf(S)?g.add(S):g.delete(S)}return o&&g.size&&(y=[]),g.forEach((function(t){if(-1===b.indexOf(t)){var e=m.get(t);if(e){var r=_.indexOf(t);y.splice(r,0,Object(ve.createElement)(Ta,{key:Ca(e),isPresent:!1,onExitComplete:function(){m.delete(t),g.delete(t);var e=v.current.findIndex((function(e){return e.key===t}));v.current.splice(e,1),g.size||(v.current=p,h(),a&&a())},custom:n,presenceAffectsLayout:c},e))}}})),y=y.map((function(t){var e=t.key;return g.has(e)?t:Object(ve.createElement)(Ta,{key:Ca(t),isPresent:!0,presenceAffectsLayout:c},t)})),v.current=y,Object(ve.createElement)(ve.Fragment,null,g.size?y:y.map((function(t){return Object(ve.cloneElement)(t)})))};function Ma(t,e){return e&&t!==e.lead?{visibilityAction:Br.Hide}:e&&t.presence!==Nr.Entering&&t===e.lead&&e.lead!==e.prevLead?{visibilityAction:Br.Show}:(t.presence===Nr.Entering?n=null===e||void 0===e?void 0:e.getFollowOrigin():t.presence===Nr.Exiting&&(r=null===e||void 0===e?void 0:e.getFollowTarget()),{originBox:n,targetBox:r});var n,r}function Aa(t,e){var n,r,i,a={},o=e&&e.lead,s=null===o||void 0===o?void 0:o.presence;return e&&t===o?t.presence===Nr.Entering?a.originBox=e.getFollowOrigin():t.presence===Nr.Exiting&&(a.targetBox=e.getFollowTarget()):e&&t===e.follow&&(a.transition=e.getLeadTransition(),s===Nr.Entering?a.targetBox=e.getLeadTarget():s===Nr.Exiting&&(a.originBox=e.getLeadOrigin())),(null===(n=null===e||void 0===e?void 0:e.follow)||void 0===n?void 0:n.isPresenceRoot)||(null===o||void 0===o?void 0:o.isPresenceRoot)?(e&&t!==o?e&&t===e.follow?o&&s!==Nr.Entering&&s===Nr.Exiting&&(a.crossfadeOpacity=null===(i=null===e||void 0===e?void 0:e.lead)||void 0===i?void 0:i.getValue("opacity",1)):a.visibilityAction=Br.Hide:t.presence===Nr.Entering&&(a.crossfadeOpacity=null===(r=null===e||void 0===e?void 0:e.follow)||void 0===r?void 0:r.getValue("opacity",0)),a):a}var Pa=function(){function t(){this.order=[],this.hasChildren=!1}return t.prototype.add=function(t){var e;if(this.order.push(t),this.snapshot){t.prevSnapshot=this.snapshot,t.prevViewportBox=this.snapshot.boundingBox;var n=this.snapshot.latestMotionValues;for(var r in n)t.hasValue(r)?null===(e=t.getValue(r))||void 0===e||e.set(n[r]):t.addValue(r,be(n[r]))}this.hasChildren=!0},t.prototype.remove=function(t){var e=this.order.findIndex((function(e){return t===e}));-1!==e&&this.order.splice(e,1)},t.prototype.updateLeadAndFollow=function(){this.prevLead=this.lead,this.prevFollow=this.follow;var t=u(function(t,e){for(var n=u(e,2),r=n[0],i=n[1],a=void 0,o=0,s=void 0,l=t.length,c=!1,h=l-1;h>=0;h--){var f=t[h];if(h===l-1&&(c=f.isPresent),c)a=f;else{var d=t[h-1];d&&d.isPresent&&(a=f)}if(a){o=h;break}}if(a||(a=t[0]),s=t[o-1],a)for(h=o-1;h>=0;h--)if((f=t[h]).isPresent){s=f;break}return a!==r&&!c&&s===i&&t.find((function(t){return t===r}))&&(a=r),[a,s]}(this.order,[this.lead,this.follow]),2),e=t[0],n=t[1];this.lead=e,this.follow=n},t.prototype.updateSnapshot=function(){if(this.lead){var t={boundingBox:this.lead.prevViewportBox,latestMotionValues:{}};this.lead.forEachValue((function(e,n){var r=e.get();bn(r)||(t.latestMotionValues[n]=r)}));var e=Ii.get(this.lead);e&&e.isDragging&&(t.isDragging=!0,t.cursorProgress=e.cursorProgress),this.snapshot=t}},t.prototype.isLeadPresent=function(){var t;return this.lead&&(null===(t=this.lead)||void 0===t?void 0:t.presence)!==Nr.Exiting},t.prototype.getFollowOrigin=function(){var t;return this.follow?this.follow.prevViewportBox:null===(t=this.snapshot)||void 0===t?void 0:t.boundingBox},t.prototype.getFollowTarget=function(){var t;return null===(t=this.follow)||void 0===t?void 0:t.box},t.prototype.getLeadOrigin=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.prevViewportBox},t.prototype.getLeadTarget=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.box},t.prototype.getLeadTransition=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.config.transition},t}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new Set,e.stacks=new Map,e.hasMounted=!1,e.updateScheduled=!1,e.renderScheduled=!1,e.syncContext=a(a({},Wr()),{syncUpdate:function(t){return e.scheduleUpdate(t)},forceUpdate:function(){e.syncContext=a({},e.syncContext),e.scheduleUpdate(!0)},register:function(t){return e.addChild(t)},remove:function(t){return e.removeChild(t)}}),e}i(e,t),e.prototype.componentDidMount=function(){this.hasMounted=!0,this.updateStacks()},e.prototype.componentDidUpdate=function(){this.startLayoutAnimation()},e.prototype.shouldComponentUpdate=function(){return this.renderScheduled=!0,!0},e.prototype.startLayoutAnimation=function(){var t=this;this.renderScheduled=this.updateScheduled=!1;var e=this.props.type;this.children.forEach((function(t){t.isPresent?t.presence!==Nr.Entering&&(t.presence=t.presence===Nr.Exiting?Nr.Entering:Nr.Present):t.presence=Nr.Exiting})),this.updateStacks();var n="crossfade"===e?Aa:Ma,r={measureLayout:function(t){return t.measureLayout()},layoutReady:function(e){var r=e.layoutId;e.layoutReady(n(e,t.getStack(r)))}};this.children.forEach((function(e){return t.syncContext.add(e)})),this.syncContext.flush(r),this.stacks.forEach((function(t){return t.snapshot=void 0}))},e.prototype.updateStacks=function(){this.stacks.forEach((function(t){return t.updateLeadAndFollow()}))},e.prototype.scheduleUpdate=function(t){void 0===t&&(t=!1),!t&&this.updateScheduled||(this.updateScheduled=!0,this.children.forEach((function(t){return t.snapshotBoundingBox()})),this.stacks.forEach((function(t){return t.updateSnapshot()})),!t&&this.renderScheduled||(this.renderScheduled=!0,this.forceUpdate()))},e.prototype.addChild=function(t){this.children.add(t),this.addToStack(t),t.presence=this.hasMounted?Nr.Entering:Nr.Present},e.prototype.removeChild=function(t){this.scheduleUpdate(),this.children.delete(t),this.removeFromStack(t)},e.prototype.addToStack=function(t){var e=this.getStack(t.layoutId);null===e||void 0===e||e.add(t)},e.prototype.removeFromStack=function(t){var e=this.getStack(t.layoutId);null===e||void 0===e||e.remove(t)},e.prototype.getStack=function(t){if(void 0!==t)return!this.stacks.has(t)&&this.stacks.set(t,new Pa),this.stacks.get(t)},e.prototype.render=function(){return Object(ve.createElement)(Xr.Provider,{value:this.syncContext},this.props.children)}}(ve.Component);function La(){return{scrollX:be(0),scrollY:be(0),scrollXProgress:be(0),scrollYProgress:be(0)}}La();var Ra=be(null);if("undefined"!==typeof window)if(window.matchMedia){var ja=window.matchMedia("(prefers-reduced-motion)"),Ia=function(){return Ra.set(ja.matches)};ja.addListener(Ia),Ia()}else Ra.set(!1);!function(){function t(){this.componentControls=new Set}t.prototype.subscribe=function(t){var e=this;return this.componentControls.add(t),function(){return e.componentControls.delete(t)}},t.prototype.start=function(t,e){this.componentControls.forEach((function(n){n.start(t.nativeEvent||t,e)}))},t.prototype.updateConstraints=function(){this.componentControls.forEach((function(t){t.prepareBoundingBox(),t.resolveDragConstraints()}))}}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialState={},e}i(e,t),e.prototype.updateLayoutDelta=function(){},e.prototype.build=function(){},e.prototype.clean=function(){},e.prototype.makeTargetAnimatable=function(t){var e=t.transition,n=t.transitionEnd,r=o(t,["transition","transitionEnd"]);return Ke(this,r,tn(r,e||{},this)),a({transition:e,transitionEnd:n},r)},e.prototype.getBoundingBox=function(){return{x:{min:0,max:0},y:{min:0,max:0}}},e.prototype.readNativeValue=function(t){return this.initialState[t]||0},e.prototype.render=function(){this.build()}}(ln)},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r="Invariant failed";e.a=function(t,e){if(!t)throw new Error(r)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return M})),n.d(e,"d",(function(){return P})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return m})),n.d(e,"e",(function(){return p}));var r=n(23);function i(t){return"/"===t.charAt(0)}function a(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var o=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],o=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),l=s||u;if(t&&i(t)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var c=o[o.length-1];n="."===c||".."===c||""===c}else n=!1;for(var h=0,f=o.length;f>=0;f--){var d=o[f];"."===d?a(o,f):".."===d?(a(o,f),h++):h&&(a(o,f),h--)}if(!l)for(;h--;h)o.unshift("..");!l||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var u=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every((function(e,r){return t(e,n[r])}));if("object"===typeof e||"object"===typeof n){var r=s(e),i=s(n);return r!==e||i!==n?t(r,i):Object.keys(Object.assign({},e,n)).every((function(r){return t(e[r],n[r])}))}return!1},l=n(26);function c(t){return"/"===t.charAt(0)?t:"/"+t}function h(t){return"/"===t.charAt(0)?t.substr(1):t}function f(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function d(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function p(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(t,e,n,i){var a;"string"===typeof t?(a=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var a=e.indexOf("?");return-1!==a&&(n=e.substr(a),e=e.substr(0,a)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(a=Object(r.a)({},t)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function m(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}function g(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var a="function"===typeof t?t(e,n):t;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(t,e){e(window.confirm(t))}var b="popstate",x="hashchange";function w(){try{return window.history.state||{}}catch(t){return{}}}function S(t){void 0===t&&(t={}),y||Object(l.a)(!1);var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=t,o=a.forceRefresh,s=void 0!==o&&o,u=a.getUserConfirmation,h=void 0===u?_:u,m=a.keyLength,S=void 0===m?6:m,k=t.basename?d(c(t.basename)):"";function T(t){var e=t||{},n=e.key,r=e.state,i=window.location,a=i.pathname+i.search+i.hash;return k&&(a=f(a,k)),v(a,r,n)}function E(){return Math.random().toString(36).substr(2,S)}var C=g();function O(t){Object(r.a)(F,t),F.length=e.length,C.notifyListeners(F.location,F.action)}function M(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||L(T(t.state))}function A(){L(T(w()))}var P=!1;function L(t){if(P)P=!1,O();else{C.confirmTransitionTo(t,"POP",h,(function(e){e?O({action:"POP",location:t}):function(t){var e=F.location,n=j.indexOf(e.key);-1===n&&(n=0);var r=j.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,D(i))}(t)}))}}var R=T(w()),j=[R.key];function I(t){return k+p(t)}function D(t){e.go(t)}var N=0;function B(t){1===(N+=t)&&1===t?(window.addEventListener(b,M),i&&window.addEventListener(x,A)):0===N&&(window.removeEventListener(b,M),i&&window.removeEventListener(x,A))}var z=!1;var F={length:e.length,action:"POP",location:R,createHref:I,push:function(t,r){var i="PUSH",a=v(t,r,E(),F.location);C.confirmTransitionTo(a,i,h,(function(t){if(t){var r=I(a),o=a.key,u=a.state;if(n)if(e.pushState({key:o,state:u},null,r),s)window.location.href=r;else{var l=j.indexOf(F.location.key),c=j.slice(0,l+1);c.push(a.key),j=c,O({action:i,location:a})}else window.location.href=r}}))},replace:function(t,r){var i="REPLACE",a=v(t,r,E(),F.location);C.confirmTransitionTo(a,i,h,(function(t){if(t){var r=I(a),o=a.key,u=a.state;if(n)if(e.replaceState({key:o,state:u},null,r),s)window.location.replace(r);else{var l=j.indexOf(F.location.key);-1!==l&&(j[l]=a.key),O({action:i,location:a})}else window.location.replace(r)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=C.setPrompt(t);return z||(B(1),z=!0),function(){return z&&(z=!1,B(-1)),e()}},listen:function(t){var e=C.appendListener(t);return B(1),function(){B(-1),e()}}};return F}var k="hashchange",T={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+h(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:h,decodePath:c},slash:{encodePath:c,decodePath:c}};function E(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function C(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function O(t){window.location.replace(E(window.location.href)+"#"+t)}function M(t){void 0===t&&(t={}),y||Object(l.a)(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),i=n.getUserConfirmation,a=void 0===i?_:i,o=n.hashType,s=void 0===o?"slash":o,u=t.basename?d(c(t.basename)):"",h=T[s],m=h.encodePath,b=h.decodePath;function x(){var t=b(C());return u&&(t=f(t,u)),v(t)}var w=g();function S(t){Object(r.a)(F,t),F.length=e.length,w.notifyListeners(F.location,F.action)}var M=!1,A=null;function P(){var t,e,n=C(),r=m(n);if(n!==r)O(r);else{var i=x(),o=F.location;if(!M&&(e=i,(t=o).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(A===p(i))return;A=null,function(t){if(M)M=!1,S();else{var e="POP";w.confirmTransitionTo(t,e,a,(function(n){n?S({action:e,location:t}):function(t){var e=F.location,n=I.lastIndexOf(p(e));-1===n&&(n=0);var r=I.lastIndexOf(p(t));-1===r&&(r=0);var i=n-r;i&&(M=!0,D(i))}(t)}))}}(i)}}var L=C(),R=m(L);L!==R&&O(R);var j=x(),I=[p(j)];function D(t){e.go(t)}var N=0;function B(t){1===(N+=t)&&1===t?window.addEventListener(k,P):0===N&&window.removeEventListener(k,P)}var z=!1;var F={length:e.length,action:"POP",location:j,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=E(window.location.href)),n+"#"+m(u+p(t))},push:function(t,e){var n="PUSH",r=v(t,void 0,void 0,F.location);w.confirmTransitionTo(r,n,a,(function(t){if(t){var e=p(r),i=m(u+e);if(C()!==i){A=e,function(t){window.location.hash=t}(i);var a=I.lastIndexOf(p(F.location)),o=I.slice(0,a+1);o.push(e),I=o,S({action:n,location:r})}else S()}}))},replace:function(t,e){var n="REPLACE",r=v(t,void 0,void 0,F.location);w.confirmTransitionTo(r,n,a,(function(t){if(t){var e=p(r),i=m(u+e);C()!==i&&(A=e,O(i));var a=I.indexOf(p(F.location));-1!==a&&(I[a]=e),S({action:n,location:r})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=w.setPrompt(t);return z||(B(1),z=!0),function(){return z&&(z=!1,B(-1)),e()}},listen:function(t){var e=w.appendListener(t);return B(1),function(){B(-1),e()}}};return F}function A(t,e,n){return Math.min(Math.max(t,e),n)}function P(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,a=void 0===i?["/"]:i,o=e.initialIndex,s=void 0===o?0:o,u=e.keyLength,l=void 0===u?6:u,c=g();function h(t){Object(r.a)(b,t),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function f(){return Math.random().toString(36).substr(2,l)}var d=A(s,0,a.length-1),m=a.map((function(t){return v(t,void 0,"string"===typeof t?f():t.key||f())})),y=p;function _(t){var e=A(b.index+t,0,b.entries.length-1),r=b.entries[e];c.confirmTransitionTo(r,"POP",n,(function(t){t?h({action:"POP",location:r,index:e}):h()}))}var b={length:m.length,action:"POP",location:m[d],index:d,entries:m,createHref:y,push:function(t,e){var r="PUSH",i=v(t,e,f(),b.location);c.confirmTransitionTo(i,r,n,(function(t){if(t){var e=b.index+1,n=b.entries.slice(0);n.length>e?n.splice(e,n.length-e,i):n.push(i),h({action:r,location:i,index:e,entries:n})}}))},replace:function(t,e){var r="REPLACE",i=v(t,e,f(),b.location);c.confirmTransitionTo(i,r,n,(function(t){t&&(b.entries[b.index]=i,h({action:r,location:i}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(t){var e=b.index+t;return e>=0&&e<b.entries.length},block:function(t){return void 0===t&&(t=!1),c.setPrompt(t)},listen:function(t){return c.appendListener(t)}};return b}},function(t,e,n){var r=n(105),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){!function(t,e,n,r){"use strict";function i(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var a=i(e),o=i(n),s=i(r),u=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},l=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},c=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},f=function(t,e,n){var r=n.startTime,i=n.target,a=n.timeConstant;return i+(e-i)*Math.exp((r-t)/a)},d=function(t){return"exponentialRampToValue"===t.type},p=function(t){return"linearRampToValue"===t.type},v=function(t){return d(t)||p(t)},m=function(t){return"setValue"===t.type},g=function(t){return"setValueCurve"===t.type},y=function t(e,n,r,i){var a=e[n];return void 0===a?i:v(a)||m(a)?a.value:g(a)?a.values[a.values.length-1]:f(r,t(e,n-1,a.startTime,i),a)},_=function(t,e,n,r,i){return void 0===n?[r.insertTime,i]:v(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,i)]},b=function(t){return"cancelAndHold"===t.type},x=function(t){return"cancelScheduledValues"===t.type},w=function(t){return b(t)||x(t)?t.cancelTime:d(t)||p(t)?t.endTime:t.startTime},S=function(t,e,n,r){var i=r.endTime,a=r.value;return n===a?a:0<n&&0<a||n<0&&a<0?n*Math.pow(a/n,(t-e)/(i-e)):0},k=function(t,e,n,r){return n+(t-e)/(r.endTime-e)*(r.value-n)},T=function(t,e){var n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},E=function(t,e){var n=e.duration,r=e.startTime,i=e.values,a=(t-r)/n*(i.length-1);return T(i,a)},C=function(t){return"setTarget"===t.type},O=function(){function t(e){o.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return s.default(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=w(t);if(b(t)||x(t)){var n=this._automationEvents.findIndex((function(n){return x(t)&&g(n)?n.startTime+n.duration>=e:w(n)>=e})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&v(r)){if(C(i))throw new Error("The internal list is malformed.");var a=g(i)?i.startTime+i.duration:w(i),o=g(i)?i.values[i.values.length-1]:i.value,s=d(r)?S(e,a,o,r):k(e,a,o,r),f=d(r)?u(s,e,this._currenTime):l(s,e,this._currenTime);this._automationEvents.push(f)}void 0!==i&&C(i)&&this._automationEvents.push(c(this.getValue(e),e)),void 0!==i&&g(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var m=this._automationEvents.findIndex((function(t){return w(t)>e})),y=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==y&&g(y)&&w(y)+y.duration>e)return!1;var _=d(t)?u(t.value,t.endTime,this._currenTime):p(t)?l(t.value,e,this._currenTime):t;if(-1===m)this._automationEvents.push(_);else{if(g(t)&&e+t.duration>w(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,_)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return w(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),r=n[0];C(r)&&n.unshift(c(y(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return w(e)>t})),n=this._automationEvents[e],r=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[r];if(void 0!==i&&C(i)&&(void 0===n||!v(n)||n.insertTime>t))return f(t,y(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(void 0!==i&&m(i)&&(void 0===n||!v(n)))return i.value;if(void 0!==i&&g(i)&&(void 0===n||!v(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?E(t,i):i.values[i.values.length-1];if(void 0!==i&&v(i)&&(void 0===n||!v(n)))return i.value;if(void 0!==n&&d(n)){var o=_(this._automationEvents,r,i,n,this._defaultValue),s=a.default(o,2),u=s[0],l=s[1];return S(t,u,l,n)}if(void 0!==n&&p(n)){var c=_(this._automationEvents,r,i,n,this._defaultValue),h=a.default(c,2),b=h[0],x=h[1];return k(t,b,x,n)}return this._defaultValue}}]),t}(),M=function(t){return{cancelTime:t,type:"cancelAndHold"}},A=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},P=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},L=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},R=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}};t.AutomationEventList=O,t.createCancelAndHoldAutomationEvent=M,t.createCancelScheduledValuesAutomationEvent=A,t.createExponentialRampToValueAutomationEvent=P,t.createLinearRampToValueAutomationEvent=L,t.createSetTargetAutomationEvent=R,t.createSetValueAutomationEvent=c,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(208),n(214),n(215))},function(t,e,n){"use strict";n.d(e,"a",(function(){return ds})),n.d(e,"b",(function(){return ps})),n.d(e,"c",(function(){return fs})),n.d(e,"d",(function(){return ws})),n.d(e,"f",(function(){return Wa})),n.d(e,"e",(function(){return Os}));var r="14.7.77",i=n(30),a=n(15),o=n(0),s=new WeakSet,u=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,g={construct:function(){return g}},y=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_=function(t,e){for(var n=[],r=t.replace(/^[\s]+/,""),i=r.match(y);null!==i;){var a=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());n.push(o),i=(r=r.slice(i[0].length).replace(/^[\s]+/,"")).match(y)}return[n.join(";"),r]},b=function(t){if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},x=function(t){if(!function(t){try{new new Proxy(t,g)}catch(e){return!1}return!0}(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!==typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},w=function(t,e){var n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},S=function(t,e){var n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");var r=Object(a.a)(n,1)[0];return t.delete(r),r},k=function(t,e,n,r){var i=w(t,e),a=S(i,(function(t){return t[0]===n&&t[1]===r}));return 0===i.size&&t.delete(e),a},T=function(t){return w(d,t)},E=function(t){if(s.has(t))throw new Error("The AudioNode is already stored.");s.add(t),T(t).forEach((function(t){return t(!0)}))},C=function(t){return"port"in t},O=function(t){if(!s.has(t))throw new Error("The AudioNode is not stored.");s.delete(t),T(t).forEach((function(t){return t(!1)}))},M=function(t,e){!C(t)&&e.every((function(t){return 0===t.size}))&&O(t)},A=n(12),P=n(2),L=n(3),R=n(4),j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},I=n(11),D=n.n(I),N=n(13),B=function(t,e){return t.context===e},z=function(t){try{t.copyToChannel(new Float32Array(1),0,-1)}catch(e){return!1}return!0},F=function(){return new DOMException("","IndexSizeError")},V=function(t){var e;t.getChannelData=(e=t.getChannelData,function(n){try{return e.call(t,n)}catch(r){if(12===r.code)throw F();throw r}})},U={numberOfChannels:1},q=n(9),H=-34028234663852886e22,W=-H,G=function(t){return s.has(t)},X={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Y=n(51);var Z=n(45);function Q(t){return function(t){if(Array.isArray(t))return Object(Y.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(Z.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=n(18),K=function(t){return w(u,t)},$=function(t){return w(c,t)},tt=function t(e,n){K(e).activeInputs.forEach((function(r){return r.forEach((function(r){var i=Object(a.a)(r,1)[0];n.includes(e)||t(i,[].concat(Q(n),[e]))}))}));var r,i=function(t){return"playbackRate"in t}(e)?[e.playbackRate]:C(e)?Array.from(e.parameters.values()):function(t){return"frequency"in t&&"gain"in t}(e)?[e.Q,e.detune,e.frequency,e.gain]:function(t){return"offset"in t}(e)?[e.offset]:function(t){return!("frequency"in t)&&"gain"in t}(e)?[e.gain]:function(t){return"detune"in t&&"frequency"in t}(e)?[e.detune,e.frequency]:function(t){return"pan"in t}(e)?[e.pan]:[],o=Object(J.a)(i);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=$(s);void 0!==u&&u.activeInputs.forEach((function(e){var r=Object(a.a)(e,1)[0];return t(r,n)}))}}catch(l){o.e(l)}finally{o.f()}G(e)&&O(e)},et=function(t){tt(t.destination,[])},nt=function(t){return void 0===t||"number"===typeof t||"string"===typeof t&&("balanced"===t||"interactive"===t||"playback"===t)},rt=function(t){return"context"in t},it=function(t){return rt(t[0])},at=function(t,e,n,r){var i,a=Object(J.a)(t);try{for(a.s();!(i=a.n()).done;){if(n(i.value)){if(r)return!1;throw Error("The set contains at least one similar element.")}}}catch(o){a.e(o)}finally{a.f()}return t.add(e),!0},ot=function(t,e,n,r){var i=Object(a.a)(n,2),o=i[0],s=i[1];at(t,[e,o,s],(function(t){return t[0]===e&&t[1]===o}),r)},st=function(t,e,n){var r=Object(a.a)(e,3),i=r[0],o=r[1],s=r[2],u=t.get(i);void 0===u?t.set(i,new Set([[o,s]])):at(u,[o,s],(function(t){return t[0]===o}),n)},ut=function(t){return"inputs"in t},lt=function(t,e,n,r){if(ut(e)){var i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},ct=function(t,e,n){var r,i=Object(J.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a[0]===e&&a[1]===n)return t.delete(a),a}}catch(o){i.e(o)}finally{i.f()}return null},ht=function(t,e){if(!T(t).delete(e))throw new Error("Missing the expected event listener.")},ft=function(t,e,n){var r=w(t,e),i=S(r,(function(t){return t[0]===n}));return 0===r.size&&t.delete(e),i},dt=function(t,e,n,r){ut(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},pt=function(t){return w(l,t)},vt=function(t){return w(h,t)},mt=function(t){return p.has(t)},gt=function(t){return!s.has(t)},yt=function(t){return new Promise((function(e){var n=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),a=i.getChannelData(0);a[0]=1,a[1]=1;var o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(n).connect(t.destination),o.connect(r),o.disconnect(r),n.onaudioprocess=function(r){var i=r.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(function(t){return 1===t}))?e(!0):e(!1),o.stop(),n.onaudioprocess=null,o.disconnect(n),n.disconnect(t.destination)},o.start()}))},_t=function(t,e){var n,r=new Map,i=Object(J.a)(t);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Object(J.a)(o);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=r.get(u);r.set(u,void 0===l?1:l+1)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}r.forEach((function(t,n){return e(n,t)}))},bt=function(t){return"context"in t},xt=function(t,e,n,r){var i=$(e),a=i.activeInputs,o=i.passiveInputs,s=K(t).outputs,u=T(t),l=function(i){var s=pt(t),u=vt(e);if(i){var l=ft(o,t,n);ot(a,t,l,!1),r||mt(t)||s.connect(u,n)}else{var c=function(t,e,n){return S(t,(function(t){return t[0]===e&&t[1]===n}))}(a,t,n);st(o,c,!1),r||mt(t)||s.disconnect(u,n)}};return!!at(s,[e,n],(function(t){return t[0]===e&&t[1]===n}),!0)&&(u.add(l),G(t)?ot(a,t,[n,l],!0):st(o,[t,n,l],!0),!0)},wt=function(t,e,n,r,i){var o=function(t,e,n,r){var i=K(e),a=i.activeInputs,o=i.passiveInputs,s=ct(a[r],t,n);return null===s?[k(o,t,n,r)[2],!1]:[s[2],!0]}(t,n,r,i),s=Object(a.a)(o,2),u=s[0],l=s[1];if(null!==u&&(ht(t,u),!l||e||mt(t)||dt(pt(t),pt(n),r,i)),G(n)){var c=K(n).activeInputs;M(n,c)}},St=function(t,e,n,r){var i=function(t,e,n){var r=$(e),i=r.activeInputs,a=r.passiveInputs,o=ct(i,t,n);return null===o?[ft(a,t,n)[1],!1]:[o[2],!0]}(t,n,r),o=Object(a.a)(i,2),s=o[0],u=o[1];null!==s&&(ht(t,s),!u||e||mt(t)||pt(t).disconnect(vt(n),r))},kt=function(){function t(e){Object(o.a)(this,t),this._map=new Map(e)}return Object(P.a)(t,[{key:"size",get:function(){return this._map.size}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((function(r,i){return t.call(n,r,i,e)}))}},{key:"get",value:function(t){return this._map.get(t)}},{key:"has",value:function(t){return this._map.has(t)}},{key:"keys",value:function(){return this._map.keys()}},{key:"values",value:function(){return this._map.values()}}]),t}(),Tt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Et=n(16);function Ct(t,e,n,r,i){if("function"===typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{var a=t.getChannelData(r);if(0===e[n].byteLength)e[n]=a.slice(i,i+128);else{var o=new Float32Array(a.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}var Ot=function(t,e,n,r,i){"function"===typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,i):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],i)},Mt=function(t,e){for(var n=[],r=0;r<t;r+=1){for(var i=[],a="number"===typeof e?e:e[r],o=0;o<a;o+=1)i.push(new Float32Array(128));n.push(i)}return n},At=function(t,e){var n=w(m,t),r=pt(e);return w(n,r)},Pt=function(){var t=Object(N.a)(D.a.mark((function t(e,n,r,i,a,o,s){var u,l,c,h,f,d,p,v,m,g,y;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=null===n?128*Math.ceil(e.context.length/128):n.length,l=i.channelCount*i.numberOfInputs,c=a.reduce((function(t,e){return t+e}),0),h=0===c?null:r.createBuffer(c,u,r.sampleRate),void 0!==o){t.next=6;break}throw new Error("Missing the processor constructor.");case 6:return f=K(e),t.next=9,At(r,e);case 9:d=t.sent,p=Mt(i.numberOfInputs,i.channelCount),v=Mt(i.numberOfOutputs,a),m=Array.from(e.parameters.keys()).reduce((function(t,e){return Object(A.a)(Object(A.a)({},t),{},Object(Et.a)({},e,new Float32Array(128)))}),{}),g=function(t){if(i.numberOfInputs>0&&null!==n)for(var u=0;u<i.numberOfInputs;u+=1)for(var c=0;c<i.channelCount;c+=1)Ct(n,p[u],c,c,t);void 0!==o.parameterDescriptors&&null!==n&&o.parameterDescriptors.forEach((function(e,r){var i=e.name;Ct(n,m,i,l+r,t)}));for(var g=0;g<i.numberOfInputs;g+=1)for(var y=0;y<a[g];y+=1)0===v[g][y].byteLength&&(v[g][y]=new Float32Array(128));try{var _=p.map((function(t,e){return 0===f.activeInputs[e].size?[]:t})),b=s(t/r.sampleRate,r.sampleRate,(function(){return d.process(_,v,m)}));if(null!==h)for(var x=0,w=0;x<i.numberOfOutputs;x+=1){for(var S=0;S<a[x];S+=1)Ot(h,v[x],S,w+S,t);w+=a[x]}if(!b)return"break"}catch(k){return e.dispatchEvent(new ErrorEvent("processorerror",{colno:k.colno,filename:k.filename,lineno:k.lineno,message:k.message})),"break"}},y=0;case 15:if(!(y<u)){t.next=22;break}if("break"!==g(y)){t.next=19;break}return t.abrupt("break",22);case 19:y+=128,t.next=15;break;case 22:return t.abrupt("return",h);case 23:case"end":return t.stop()}}),t)})));return function(e,n,r,i,a,o,s){return t.apply(this,arguments)}}(),Lt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Rt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},jt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},It={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Dt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Nt=function(t){var e=new MessageChannel,n=e.port1,r=e.port2;return new Promise((function(e){r.onmessage=function(){n.close(),r.close(),e()},n.postMessage(t,[t])}))},Bt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},zt=function(t,e,n){var r=e[n];if(void 0===r)throw t();return r},Ft={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Vt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ut=function(){return new DOMException("","InvalidStateError")},qt=function(){return new DOMException("","InvalidAccessError")},Ht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Wt=function(t,e,n,r,i,a,o,s,u,l,c){for(var h=l.length,f=s,d=0;d<h;d+=1){for(var p=n[0]*l[d],v=1;v<i;v+=1){var m=f-v&u-1;p+=n[v]*a[m],p-=t[v]*o[m]}for(var g=i;g<r;g+=1)p+=n[g]*a[f-g&u-1];for(var y=i;y<e;y+=1)p-=t[y]*o[f-y&u-1];a[f]=l[d],o[f]=p,f=f+1&u-1,c[d]=p}return f},Gt=function(t,e,n,r){var i=n instanceof Float64Array?n:new Float64Array(n),a=r instanceof Float64Array?r:new Float64Array(r),o=i.length,s=a.length,u=Math.min(o,s);if(1!==i[0]){for(var l=0;l<o;l+=1)a[l]/=i[0];for(var c=1;c<s;c+=1)i[c]/=i[0]}for(var h=new Float32Array(32),f=new Float32Array(32),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels,v=0;v<p;v+=1){var m=t.getChannelData(v),g=d.getChannelData(v);h.fill(0),f.fill(0),Wt(i,o,a,s,u,h,f,0,32,m,g)}return d},Xt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Yt=function(t){var e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var n=t.decodeAudioData(e.buffer,(function(){}));return void 0!==n&&(n.catch((function(){})),!0)}catch(r){}return!1},Zt={numberOfChannels:1},Qt=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},Jt=function(t,e){Qt(t,e,"channelCount"),Qt(t,e,"channelCountMode"),Qt(t,e,"channelInterpretation")},Kt=function(t){return"function"===typeof t.getFloatTimeDomainData},$t=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},te=function(t){var e;t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if("number"===typeof i&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})},ee=function(t){var e;t.stop=(e=t.stop,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},ne=function(t,e){return null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))))},re=function(t){return new Promise((function(e,n){var r=new MessageChannel,i=r.port1,a=r.port2;i.onmessage=function(t){var n=t.data;i.close(),a.close(),e(n)},i.onmessageerror=function(t){var e=t.data;i.close(),a.close(),n(e)},a.postMessage(t)}))},ie=function(){var t=Object(N.a)(D.a.mark((function t(e,n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(n);case 2:return r=t.sent,t.abrupt("return",new e(r));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ae=function(t,e){var n=t.createBiquadFilter();return Jt(n,e),$t(n,e,"Q"),$t(n,e,"detune"),$t(n,e,"frequency"),$t(n,e,"gain"),Qt(n,e,"type"),n},oe=function(t,e){var n=t.createChannelSplitter(e.numberOfOutputs);return Jt(n,e),function(t){var e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:function(){return e},set:function(t){if(t!==e)throw Ut()}}),Object.defineProperty(t,"channelCountMode",{get:function(){return"explicit"},set:function(t){if("explicit"!==t)throw Ut()}}),Object.defineProperty(t,"channelInterpretation",{get:function(){return"discrete"},set:function(t){if("discrete"!==t)throw Ut()}})}(n),n},se=n(33);function ue(t,e){if(null==t)return{};var n,r,i=Object(se.a)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var le=function(t,e){return t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t},ce=function(t,e){var n=t.createDelay(e.maxDelayTime);return Jt(n,e),$t(n,e,"delayTime"),n},he=function(t,e){var n=t.createGain();return Jt(n,e),$t(n,e,"gain"),n};function fe(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function de(t,e){for(var n,r,i=[0,0],a=t.length-1;a>=0;a-=1)r=e,(i=[(n=i)[0]*r[0]-n[1]*r[1],n[0]*r[1]+n[1]*r[0]])[0]+=t[a];return i}var pe,ve,me,ge,ye,_e,be,xe,we,Se,ke,Te,Ee,Ce,Oe,Me,Ae,Pe,Le,Re,je,Ie,De,Ne,Be,ze,Fe,Ve,Ue,qe,He,We,Ge,Xe,Ye,Ze,Qe,Je,Ke,$e,tn,en,nn,rn,an,on,sn,un,ln,cn,hn,fn,dn,pn,vn,mn,gn,yn,_n,bn,xn,wn,Sn=function(t,e,n,r){return t.createScriptProcessor(e,n,r)},kn=function(){return new DOMException("","NotSupportedError")},Tn={numberOfChannels:1},En={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Cn={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},On={disableNormalization:!1},Mn={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},An=function(){return new DOMException("","UnknownError")},Pn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ln=function(t){if(null===t)return!1;var e=t.length;return e%2!==0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Rn=function(t,e,n,r){for(var i=Object.getPrototypeOf(t);!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);var a=Object.getOwnPropertyDescriptor(i,e),o=a.get,s=a.set;Object.defineProperty(t,e,{get:n(o),set:r(s)})},jn=function(t){var e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},In=function(t){var e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch(r){return!1}},Dn=function(t){var e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Nn=function(t,e){var n=e.createGain();t.connect(n);var r,i=(r=t.disconnect,function(){r.call(t,n),t.removeEventListener("ended",i)});t.addEventListener("ended",i),le(t,n),t.stop=function(e){var r=!1;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r)try{e.call(t,i)}catch(a){n.gain.setValueAtTime(0,i)}else e.call(t,i),r=!0}}(t.stop)},Bn=function(t,e){return function(n){var r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"===typeof e?e.call(t,n):e.handleEvent.call(t,n)}},zn=(pe=at,function(t,e,n,r){var i=Object(a.a)(n,3),o=i[0],s=i[1],u=i[2];pe(t[s],[e,o,u],(function(t){return t[0]===e&&t[1]===o}),r)}),Fn=function(t){return function(e,n,r,i){var o=Object(a.a)(r,3),s=o[0],u=o[1],l=o[2],c=e.get(s);void 0===c?e.set(s,new Set([[u,n,l]])):t(c,[u,n,l],(function(t){return t[0]===u&&t[1]===n}),i)}}(at),Vn=(ve=S,function(t,e,n,r){return ve(t[r],(function(t){return t[0]===e&&t[1]===n}))}),Un=new WeakMap,qn=function(t){return function(e){var n;return null!==(n=t.get(e))&&void 0!==n?n:0}}(Un),Hn=(me=new Map,ge=new WeakMap,function(t,e){var n=ge.get(t);if(void 0!==n)return n;var r=me.get(t);if(void 0!==r)return r;try{var i=e();return i instanceof Promise?(me.set(t,i),i.catch((function(){return!1})).then((function(e){return me.delete(t),ge.set(t,e),e}))):(ge.set(t,i),i)}catch(a){return ge.set(t,!1),!1}}),Wn="undefined"===typeof window?null:window,Gn=(ye=Hn,_e=F,function(t,e){var n=t.createAnalyser();if(Jt(n,e),!(e.maxDecibels>e.minDecibels))throw _e();return Qt(n,e,"fftSize"),Qt(n,e,"maxDecibels"),Qt(n,e,"minDecibels"),Qt(n,e,"smoothingTimeConstant"),ye(Kt,(function(){return Kt(n)}))||function(t){t.getFloatTimeDomainData=function(e){var n=new Uint8Array(e.length);t.getByteTimeDomainData(n);for(var r=Math.max(n.length,t.fftSize),i=0;i<r;i+=1)e[i]=.0078125*(n[i]-128);return e}}(n),n}),Xn=(be=K,function(t){var e=be(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer}),Yn=function(t,e,n){return function(){var r=Object(N.a)(D.a.mark((function r(i,o,s,u){var l,c;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=t(i),c=[].concat(Q(u),[i]),r.next=4,Promise.all(l.activeInputs.map((function(t,r){return Array.from(t).filter((function(t){var e=Object(a.a)(t,1)[0];return!c.includes(e)})).map(function(){var t=Object(N.a)(D.a.mark((function t(u){var l,h,f,d,p,v;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=Object(a.a)(u,2),h=l[0],f=l[1],d=e(h),t.next=4,d.render(h,o,c);case 4:p=t.sent,v=i.context.destination,n(h)||i===v&&n(i)||p.connect(s,f,r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).reduce((function(t,e){return[].concat(Q(t),Q(e))}),[]));case 4:case"end":return r.stop()}}),r)})));return function(t,e,n,i){return r.apply(this,arguments)}}()}(K,Xn,mt),Zn=(xe=Gn,we=pt,Se=Yn,function(){var t=new WeakMap,e=function(){var e=Object(N.a)(D.a.mark((function e(n,r,i){var a,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=we(n),B(a,r)||(o={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant},a=xe(r,o)),t.set(r,a),e.next=6,Se(n,r,a,i);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{render:function(n,r,i){var a=t.get(r);return void 0!==a?Promise.resolve(a):e(n,r,i)}}}),Qn=(ke=f,function(t){var e=ke.get(t);if(void 0===e)throw Ut();return e}),Jn=function(t){return null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null}(Wn),Kn=(Te=Jn,function(t){return null!==Te&&t instanceof Te}),$n=new WeakMap,tr=(Ee=Bn,function(){function t(e){Object(o.a)(this,t),this._nativeEventTarget=e,this._listeners=new WeakMap}return Object(P.a)(t,[{key:"addEventListener",value:function(t,e,n){if(null!==e){var r=this._listeners.get(e);void 0===r&&(r=Ee(this,e),"function"===typeof e&&this._listeners.set(e,r)),this._nativeEventTarget.addEventListener(t,r,n)}}},{key:"dispatchEvent",value:function(t){return this._nativeEventTarget.dispatchEvent(t)}},{key:"removeEventListener",value:function(t,e,n){var r=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===r?null:r,n)}}]),t}()),er=function(t){return null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null}(Wn),nr=(Ce=er,function(t){return null!==Ce&&t instanceof Ce}),rr=function(t){return function(e){return null!==t&&"function"===typeof t.AudioNode&&e instanceof t.AudioNode}}(Wn),ir=function(t){return function(e){return null!==t&&"function"===typeof t.AudioParam&&e instanceof t.AudioParam}}(Wn),ar=function(t,e,n,r,i,s,u,c,h,f,p,v,m,g,y){return function(f){Object(L.a)(b,f);var _=Object(R.a)(b);function b(e,r,i,s){var u;Object(o.a)(this,b),(u=_.call(this,i))._context=e,u._nativeAudioNode=i;var c=p(e);return v(c)&&!0!==n(yt,(function(){return yt(c)}))&&function(t){var e,n,r=new Map;t.connect=(e=t.connect.bind(t),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=bt(t)?e(t,n,i):e(t,n),o=r.get(t);return void 0===o?r.set(t,[{input:i,output:n}]):o.every((function(t){return t.input!==i||t.output!==n}))&&o.push({input:i,output:n}),a}),t.disconnect=(n=t.disconnect,function(e,i,o){if(n.apply(t),void 0===e)r.clear();else if("number"===typeof e){var s,u=Object(J.a)(r);try{for(u.s();!(s=u.n()).done;){var l=Object(a.a)(s.value,2),c=l[0],h=l[1].filter((function(t){return t.output!==e}));0===h.length?r.delete(c):r.set(c,h)}}catch(g){u.e(g)}finally{u.f()}}else if(r.has(e))if(void 0===i)r.delete(e);else{var f=r.get(e);if(void 0!==f){var d=f.filter((function(t){return t.output!==i&&(t.input!==o||void 0===o)}));0===d.length?r.delete(e):r.set(e,d)}}var p,v=Object(J.a)(r);try{var m=function(){var e=Object(a.a)(p.value,2),n=e[0];e[1].forEach((function(e){bt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))};for(v.s();!(p=v.n()).done;)m()}catch(g){v.e(g)}finally{v.f()}})}(i),l.set(Object(q.a)(u),i),d.set(Object(q.a)(u),new Set),"closed"!==e.state&&r&&E(Object(q.a)(u)),t(Object(q.a)(u),s,i),u}return Object(P.a)(b,[{key:"channelCount",get:function(){return this._nativeAudioNode.channelCount},set:function(t){this._nativeAudioNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioNode.channelCountMode},set:function(t){this._nativeAudioNode.channelCountMode=t}},{key:"channelInterpretation",get:function(){return this._nativeAudioNode.channelInterpretation},set:function(t){this._nativeAudioNode.channelInterpretation=t}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._nativeAudioNode.numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._nativeAudioNode.numberOfOutputs}},{key:"connect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();var o=p(this._context),l=y(o);if(m(t)||g(t))throw s();if(rt(t)){var c=pt(t);try{var f,d=lt(this._nativeAudioNode,c,n,a),v=gt(this);if(l||v)(f=this._nativeAudioNode).disconnect.apply(f,Q(d));"closed"!==this.context.state&&!v&&gt(t)&&E(t)}catch(k){if(12===k.code)throw s();throw k}var _=e(this,t,n,a,l);if(_){var b=h([this],t);_t(b,r(l))}return t}var x=vt(t);if("playbackRate"===x.name&&1024===x.maxValue)throw u();try{this._nativeAudioNode.connect(x,n),(l||gt(this))&&this._nativeAudioNode.disconnect(x,n)}catch(k){if(12===k.code)throw s();throw k}var w=xt(this,t,n,l);if(w){var S=h([this],t);_t(S,r(l))}}},{key:"disconnect",value:function(t,e,n){var r,a=p(this._context),o=y(a);if(void 0===t)r=function(t,e){var n,r=K(t),i=[],a=Object(J.a)(r.outputs);try{for(a.s();!(n=a.n()).done;){var o=n.value;it(o)?wt.apply(void 0,[t,e].concat(Q(o))):St.apply(void 0,[t,e].concat(Q(o))),i.push(o[0])}}catch(s){a.e(s)}finally{a.f()}return r.outputs.clear(),i}(this,o);else if("number"===typeof t){if(t<0||t>=this.numberOfOutputs)throw i();r=function(t,e,n){var r,i=K(t),a=[],o=Object(J.a)(i.outputs);try{for(o.s();!(r=o.n()).done;){var s=r.value;s[1]===n&&(it(s)?wt.apply(void 0,[t,e].concat(Q(s))):St.apply(void 0,[t,e].concat(Q(s))),a.push(s[0]),i.outputs.delete(s))}}catch(u){o.e(u)}finally{o.f()}return a}(this,o,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(rt(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(0===(r=function(t,e,n,r,i){var a=K(t);return Array.from(a.outputs).filter((function(t){return t[0]===n&&(void 0===r||t[1]===r)&&(void 0===i||t[2]===i)})).map((function(n){return it(n)?wt.apply(void 0,[t,e].concat(Q(n))):St.apply(void 0,[t,e].concat(Q(n))),a.outputs.delete(n),n[0]}))}(this,o,t,e,n)).length)throw s()}var u,l=Object(J.a)(r);try{for(l.s();!(u=l.n()).done;){var f=u.value,d=h([this],f);_t(d,c)}}catch(v){l.e(v)}finally{l.f()}}}]),b}(f)}((Oe=u,function(t,e,n){for(var r=[],i=0;i<n.numberOfInputs;i+=1)r.push(new Set);Oe.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),function(t,e,n,r,i,a,o,s,u,l,c,h,f){var d=new WeakMap;return function(p,v,m,g,y){var _=a(v),b=_.activeInputs,x=_.passiveInputs,w=a(p).outputs,S=s(p),T=function(a){var s=u(v),l=u(p);if(a){var _=k(x,p,m,g);t(b,p,_,!1),y||h(p)||n(l,s,m,g),f(v)&&E(v)}else{var w=r(b,p,m,g);e(x,g,w,!1),y||h(p)||i(l,s,m,g);var S=o(v);if(0===S)c(v)&&M(v,b);else{var T=d.get(v);void 0!==T&&clearTimeout(T),d.set(v,setTimeout((function(){c(v)&&M(v,b)}),1e3*S))}}};return!!l(w,[v,m,g],(function(t){return t[0]===v&&t[1]===m&&t[2]===g}),!0)&&(S.add(T),c(p)?t(b,p,[m,g,T],!0):e(x,g,[p,m,T],!0),!0)}}(zn,Fn,lt,Vn,dt,K,qn,T,pt,at,G,mt,gt),Hn,function(t,e,n,r,i,a){return function(o){return function(s,u){var l=t.get(s);if(void 0===l){if(!o&&a(s)){var c,h=r(s),f=n(s).outputs,d=Object(J.a)(f);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(it(p)){var v=r(p[0]);e(h,v,p[1],p[2])}else{var m=i(p[0]);h.disconnect(m,p[1])}}}catch(g){d.e(g)}finally{d.f()}}t.set(s,u)}else t.set(s,l+u)}}}(p,dt,K,pt,vt,G),F,qt,kn,function(t,e,n,r,i,a,o,s){return function(u,l){var c=e.get(u);if(void 0===c)throw new Error("Missing the expected cycle count.");var h=a(u.context),f=s(h);if(c===l){if(e.delete(u),!f&&o(u)){var d,p=r(u),v=n(u).outputs,m=Object(J.a)(v);try{for(m.s();!(d=m.n()).done;){var g=d.value;if(it(g)){var y=r(g[0]);t(p,y,g[1],g[2])}else{var _=i(g[0]);p.connect(_,g[1])}}}catch(b){m.e(b)}finally{m.f()}}}else e.set(u,c-l)}}(lt,p,K,pt,vt,Qn,G,Kn),function(t,e,n){return function r(i,a){var o=rt(a)?a:n(t,a);if(function(t){return"delayTime"in t}(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];var s=e(o).outputs;return Array.from(s).map((function(t){return r([].concat(Q(i),[o]),t[0])})).reduce((function(t,e){return t.concat(e)}),[])}}($n,K,w),tr,Qn,nr,rr,ir,Kn),or=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,n){var l;Object(o.a)(this,u);var c=i(t),h=Object(A.a)(Object(A.a)({},j),n),f=r(c,h),d=a(c)?e():null;return(l=s.call(this,t,!1,f,d))._nativeAnalyserNode=f,l}return Object(P.a)(u,[{key:"fftSize",get:function(){return this._nativeAnalyserNode.fftSize},set:function(t){this._nativeAnalyserNode.fftSize=t}},{key:"frequencyBinCount",get:function(){return this._nativeAnalyserNode.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._nativeAnalyserNode.maxDecibels},set:function(t){var e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}},{key:"minDecibels",get:function(){return this._nativeAnalyserNode.minDecibels},set:function(t){var e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}},{key:"smoothingTimeConstant",get:function(){return this._nativeAnalyserNode.smoothingTimeConstant},set:function(t){this._nativeAnalyserNode.smoothingTimeConstant=t}},{key:"getByteFrequencyData",value:function(t){this._nativeAnalyserNode.getByteFrequencyData(t)}},{key:"getByteTimeDomainData",value:function(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}},{key:"getFloatFrequencyData",value:function(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}},{key:"getFloatTimeDomainData",value:function(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}}]),u}(t)}(ar,Zn,F,Gn,Qn,Kn),sr=new WeakSet,ur=function(t){return null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null}(Wn),lr=(Me=new Uint32Array(1),function(t){return Me[0]=t,Me[0]}),cr=function(t,e){return function(n){n.copyFromChannel=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();for(var u=n.length,l=n.getChannelData(s),c=r.length,h=o<0?-o:0;h+o<u&&h<c;h+=1)r[h]=l[h+o]},n.copyToChannel=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();for(var u=n.length,l=n.getChannelData(s),c=r.length,h=o<0?-o:0;h+o<u&&h<c;h+=1)l[h+o]=r[h]}}}(lr,F),hr=function(t){return function(e){e.copyFromChannel=function(n){return function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(o<e.length)return n.call(e,r,s,o)}}(e.copyFromChannel),e.copyToChannel=function(n){return function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(o<e.length)return n.call(e,r,s,o)}}(e.copyToChannel)}}(lr),fr=function(t,e,n,r,i,a,s,u){var l=null;return function(){function c(h){if(Object(o.a)(this,c),null===i)throw new Error("Missing the native OfflineAudioContext constructor.");var f=Object(A.a)(Object(A.a)({},U),h),d=f.length,p=f.numberOfChannels,v=f.sampleRate;null===l&&(l=new i(1,1,44100));var m=null!==r&&e(a,a)?new r({length:d,numberOfChannels:p,sampleRate:v}):l.createBuffer(p,d,v);if(0===m.numberOfChannels)throw n();return"function"!==typeof m.copyFromChannel?(s(m),V(m)):e(z,(function(){return z(m)}))||u(m),t.add(m),m}return Object(P.a)(c,null,[{key:Symbol.hasInstance,value:function(e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}]),c}()}(sr,Hn,kn,ur,Jn,(Ae=ur,function(){if(null===Ae)return!1;try{new Ae({length:1,sampleRate:44100})}catch(t){return!1}return!0}),cr,hr),dr=(Pe=he,function(t,e){var n=Pe(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination),e.addEventListener("ended",(function t(){e.removeEventListener("ended",t),e.disconnect(n),n.disconnect()}))}),pr=(Le=Xn,Re=$,je=mt,function(){var t=Object(N.a)(D.a.mark((function t(e,n,r,i){var o;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Re(e),t.next=3,Promise.all(Array.from(o.activeInputs).map(function(){var t=Object(N.a)(D.a.mark((function t(e){var o,s,u,l,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(a.a)(e,2),s=o[0],u=o[1],l=Le(s),t.next=4,l.render(s,n,i);case 4:c=t.sent,je(s)||c.connect(r,u);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()),vr=function(t){return function(e,n,r,i){return t(n,e,r,i)}}(pr),mr=function(t,e,n,r,i,a,o,s,u,l,c){return function(h,f){var d=h.createBufferSource();return Jt(d,f),$t(d,f,"playbackRate"),Qt(d,f,"buffer"),Qt(d,f,"loop"),Qt(d,f,"loopEnd"),Qt(d,f,"loopStart"),e(n,(function(){return n(h)}))||function(t){t.start=function(e){var n=!1;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if(n)throw Ut();e.call(t,r,i,a),n=!0}}(t.start)}(d),e(r,(function(){return r(h)}))||u(d),e(i,(function(){return i(h)}))||l(d,h),e(a,(function(){return a(h)}))||te(d),e(o,(function(){return o(h)}))||c(d,h),e(s,(function(){return s(h)}))||ee(d),t(h,d),d}}(dr,Hn,(function(t){var e=t.createBufferSource();e.start();try{e.start()}catch(n){return!0}return!1}),(function(t){var e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch(r){return!1}return!0}),(function(t){var e=t.createBufferSource();e.start();try{e.stop()}catch(n){return!1}return!0}),jn,In,Dn,(function(t){var e;t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,a=t.buffer,o=null===a?r:Math.min(a.duration,r);null!==a&&o>a.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})}),(Ie=Rn,function(t,e){var n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),Ie(t,"buffer",(function(e){return function(){var r=e.call(t);return r===n?null:r}}),(function(e){return function(r){return e.call(t,null===r?n:r)}}))}),Nn),gr=function(t,e){return function(n,r,i,a){return t(r).replay(i),e(r,n,i,a)}}(function(t){return function(e){var n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}}($),pr),yr=function(t,e,n,r,i){return function(){var a=new WeakMap,o=null,s=null,u=function(){var u=Object(N.a)(D.a.mark((function u(l,c,h){var f,d,p,v;return D.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(f=n(l),(d=B(f,c))||(p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,loop:f.loop,loopEnd:f.loopEnd,loopStart:f.loopStart,playbackRate:f.playbackRate.value},f=e(c,p),null!==o&&(v=f).start.apply(v,Q(o)),null!==s&&f.stop(s)),a.set(c,f),d){u.next=9;break}return u.next=7,r(c,l.playbackRate,f.playbackRate,h);case 7:u.next=11;break;case 9:return u.next=11,t(c,l.playbackRate,f.playbackRate,h);case 11:return u.next=13,i(l,c,f,h);case 13:return u.abrupt("return",f);case 14:case"end":return u.stop()}}),u)})));return function(t,e,n){return u.apply(this,arguments)}}();return{set start(t){o=t},set stop(t){s=t},render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):u(t,e,n)}}}}(vr,mr,pt,gr,Yn),_r=function(t,e,n,r,a,o,s,u,l,c,h,f,d){return function(p,v,m){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,_=new i.AutomationEventList(m.defaultValue),b=v?r(_):null,x={get defaultValue(){return m.defaultValue},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===y?m.minValue:y},get value(){return m.value},set value(t){m.value=t,x.setValueAtTime(t,p.context.currentTime)},cancelAndHoldAtTime:function(t){if("function"===typeof m.cancelAndHoldAtTime)null===b&&_.flush(p.context.currentTime),_.add(a(t)),m.cancelAndHoldAtTime(t);else{var e=Array.from(_).pop();null===b&&_.flush(p.context.currentTime),_.add(a(t));var n=Array.from(_).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return x},cancelScheduledValues:function(t){return null===b&&_.flush(p.context.currentTime),_.add(o(t)),m.cancelScheduledValues(t),x},exponentialRampToValueAtTime:function(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===b&&_.flush(p.context.currentTime),_.add(s(t,e)),m.exponentialRampToValueAtTime(t,e),x},linearRampToValueAtTime:function(t,e){return null===b&&_.flush(p.context.currentTime),_.add(u(t,e)),m.linearRampToValueAtTime(t,e),x},setTargetAtTime:function(t,e,n){return null===b&&_.flush(p.context.currentTime),_.add(l(t,e,n)),m.setTargetAtTime(t,e,n),x},setValueAtTime:function(t,e){return null===b&&_.flush(p.context.currentTime),_.add(c(t,e)),m.setValueAtTime(t,e),x},setValueCurveAtTime:function(t,e,n){var r=t instanceof Float32Array?t:new Float32Array(t);if(null!==f&&"webkitAudioContext"===f.name){for(var i=e+n,a=p.context.sampleRate,o=Math.ceil(e*a),s=Math.floor(i*a),u=s-o,l=new Float32Array(u),c=0;c<u;c+=1){var v=(r.length-1)/n*((o+c)/a-e),g=Math.floor(v),y=Math.ceil(v);l[c]=g===y?r[g]:(1-(v-g))*r[g]+(1-(y-v))*r[y]}null===b&&_.flush(p.context.currentTime),_.add(h(l,e,n)),m.setValueCurveAtTime(l,e,n);var w=s/a;w<i&&d(x,l[l.length-1],w),d(x,r[r.length-1],i)}else null===b&&_.flush(p.context.currentTime),_.add(h(r,e,n)),m.setValueCurveAtTime(r,e,n);return x}};return n.set(x,m),e.set(x,p),t(x,b),x}}((De=c,function(t,e){De.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),$n,h,(function(t){return{replay:function(e){var n,r=Object(J.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("exponentialRampToValue"===i.type){var a=i.endTime,o=i.value;e.exponentialRampToValueAtTime(o,a)}else if("linearRampToValue"===i.type){var s=i.endTime,u=i.value;e.linearRampToValueAtTime(u,s)}else if("setTarget"===i.type){var l=i.startTime,c=i.target,h=i.timeConstant;e.setTargetAtTime(c,l,h)}else if("setValue"===i.type){var f=i.startTime,d=i.value;e.setValueAtTime(d,f)}else{if("setValueCurve"!==i.type)throw new Error("Can't apply an unknown automation.");var p=i.duration,v=i.startTime,m=i.values;e.setValueCurveAtTime(m,v,p)}}}catch(g){r.e(g)}finally{r.f()}}}}),i.createCancelAndHoldAutomationEvent,i.createCancelScheduledValuesAutomationEvent,i.createExponentialRampToValueAutomationEvent,i.createLinearRampToValueAutomationEvent,i.createSetTargetAutomationEvent,i.createSetValueAutomationEvent,i.createSetValueCurveAutomationEvent,er,(function t(e,n,r){try{e.setValueAtTime(n,r)}catch(i){if(9!==i.code)throw i;t(e,n,r+1e-7)}})),br=function(t,e,n,r,i,a,s,u){return function(t){Object(L.a)(c,t);var l=Object(R.a)(c);function c(t,r){var u;Object(o.a)(this,c);var h=a(t),f=Object(A.a)(Object(A.a)({},X),r),d=i(h,f),p=s(h),v=p?e():null;return(u=l.call(this,t,!1,d,v))._audioBufferSourceNodeRenderer=v,u._isBufferNullified=!1,u._isBufferSet=null!==f.buffer,u._nativeAudioBufferSourceNode=d,u._onended=null,u._playbackRate=n(Object(q.a)(u),p,d.playbackRate,W,H),u}return Object(P.a)(c,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer},set:function(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw r();this._isBufferSet=!0}}},{key:"loop",get:function(){return this._nativeAudioBufferSourceNode.loop},set:function(t){this._nativeAudioBufferSourceNode.loop=t}},{key:"loopEnd",get:function(){return this._nativeAudioBufferSourceNode.loopEnd},set:function(t){this._nativeAudioBufferSourceNode.loopEnd=t}},{key:"loopStart",get:function(){return this._nativeAudioBufferSourceNode.loopStart},set:function(t){this._nativeAudioBufferSourceNode.loopStart=t}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?u(this,t):null;this._nativeAudioBufferSourceNode.onended=e;var n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"playbackRate",get:function(){return this._playbackRate}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,n,r),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===r?[e,n]:[e,n,r]),"closed"!==this.context.state){E(this);var i=function e(){t._nativeAudioBufferSourceNode.removeEventListener("ended",e),G(t)&&O(t)};this._nativeAudioBufferSourceNode.addEventListener("ended",i)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}}]),c}(t)}(ar,yr,_r,Ut,mr,Qn,Kn,Bn),xr=function(t,e,n,r,i,a,s,u){return function(t){Object(L.a)(c,t);var l=Object(R.a)(c);function c(t,n){var r;Object(o.a)(this,c);var h=a(t),f=s(h),d=i(h,n,f),p=f?e(u):null;return(r=l.call(this,t,!1,d,p))._isNodeOfNativeOfflineAudioContext=f,r._nativeAudioDestinationNode=d,r}return Object(P.a)(c,[{key:"channelCount",get:function(){return this._nativeAudioDestinationNode.channelCount},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioDestinationNode.channelCountMode},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=t}},{key:"maxChannelCount",get:function(){return this._nativeAudioDestinationNode.maxChannelCount}}]),c}(t)}(ar,(function(t){var e=null,n=function(){var e=Object(N.a)(D.a.mark((function e(n,r,i){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.destination,e.next=3,t(n,r,a,i);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{render:function(t,r,i){return null===e&&(e=n(t,r,i)),e}}}),F,Ut,function(t,e){return function(n,r,i){var a=n.destination;if(a.channelCount!==r)try{a.channelCount=r}catch(s){}i&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:r});var o=t(n,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(o,"channelCount",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e);try{a.channelCount=e}catch(n){if(e>a.maxChannelCount)throw n}}})),e(o,"channelCountMode",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e),a.channelCountMode=e}})),e(o,"channelInterpretation",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e),a.channelInterpretation=e}})),Object.defineProperty(o,"maxChannelCount",{get:function(){return a.maxChannelCount}}),o.connect(a),o}}(he,Rn),Qn,Kn,Yn),wr=function(t,e,n,r,i){return function(){var a=new WeakMap,o=function(){var o=Object(N.a)(D.a.mark((function o(s,u,l){var c,h,f;return D.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=n(s),(h=B(c,u))||(f={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type},c=e(u,f)),a.set(u,c),h){o.next=15;break}return o.next=7,r(u,s.Q,c.Q,l);case 7:return o.next=9,r(u,s.detune,c.detune,l);case 9:return o.next=11,r(u,s.frequency,c.frequency,l);case 11:return o.next=13,r(u,s.gain,c.gain,l);case 13:o.next=23;break;case 15:return o.next=17,t(u,s.Q,c.Q,l);case 17:return o.next=19,t(u,s.detune,c.detune,l);case 19:return o.next=21,t(u,s.frequency,c.frequency,l);case 21:return o.next=23,t(u,s.gain,c.gain,l);case 23:return o.next=25,i(s,u,c,l);case 25:return o.abrupt("return",c);case 26:case"end":return o.stop()}}),o)})));return function(t,e,n){return o.apply(this,arguments)}}();return{render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):o(t,e,n)}}}}(vr,ae,pt,gr,Yn),Sr=function(t){return function(e,n){return t.set(e,n)}}(Un),kr=(Ne=_r,Be=wr,ze=qt,Fe=ae,Ve=Qn,Ue=Kn,qe=Sr,function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t,r){var i;Object(o.a)(this,n);var a=Ve(t),s=Object(A.a)(Object(A.a)({},Lt),r),u=Fe(a,s),l=Ue(a),c=l?Be():null;return(i=e.call(this,t,!1,u,c))._Q=Ne(Object(q.a)(i),l,u.Q,W,H),i._detune=Ne(Object(q.a)(i),l,u.detune,1200*Math.log2(W),-1200*Math.log2(W)),i._frequency=Ne(Object(q.a)(i),l,u.frequency,t.sampleRate/2,0),i._gain=Ne(Object(q.a)(i),l,u.gain,40*Math.log10(W),H),i._nativeBiquadFilterNode=u,qe(Object(q.a)(i),1),i}return Object(P.a)(n,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"gain",get:function(){return this._gain}},{key:"Q",get:function(){return this._Q}},{key:"type",get:function(){return this._nativeBiquadFilterNode.type},set:function(t){this._nativeBiquadFilterNode.type=t}},{key:"getFrequencyResponse",value:function(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(r){if(11===r.code)throw ze();throw r}if(t.length!==e.length||e.length!==n.length)throw ze()}}]),n}(ar)),Tr=function(t,e){return function(n,r,i){var a,o,s=new Set;return n.connect=(a=n.connect,function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=0===s.size;if(e(i))return a.call(n,i,o,u),t(s,[i,o,u],(function(t){return t[0]===i&&t[1]===o&&t[2]===u}),!0),l&&r(),i;a.call(n,i,o),t(s,[i,o],(function(t){return t[0]===i&&t[1]===o}),!0),l&&r()}),n.disconnect=(o=n.disconnect,function(t,r,a){var u=s.size>0;if(void 0===t)o.apply(n),s.clear();else if("number"===typeof t){o.call(n,t);var l,c=Object(J.a)(s);try{for(c.s();!(l=c.n()).done;){var h=l.value;h[1]===t&&s.delete(h)}}catch(m){c.e(m)}finally{c.f()}}else{e(t)?o.call(n,t,r,a):o.call(n,t,r);var f,d=Object(J.a)(s);try{for(d.s();!(f=d.n()).done;){var p=f.value;p[0]!==t||void 0!==r&&p[1]!==r||void 0!==a&&p[2]!==a||s.delete(p)}}catch(m){d.e(m)}finally{d.f()}}var v=0===s.size;u&&v&&i()}),n}}(at,rr),Er=(He=Ut,We=Tr,function(t,e){e.channelCount=1,e.channelCountMode="explicit",Object.defineProperty(e,"channelCount",{get:function(){return 1},set:function(){throw He()}}),Object.defineProperty(e,"channelCountMode",{get:function(){return"explicit"},set:function(){throw He()}});var n=t.createBufferSource();We(e,(function(){for(var t=e.numberOfInputs,r=0;r<t;r+=1)n.connect(e,0,r)}),(function(){return n.disconnect(e)}))}),Cr=function(t,e){return function(n,r){var i=n.createChannelMerger(r.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),Jt(i,r),i}}(er,Er),Or=function(t,e,n,r,i){return function(t){Object(L.a)(s,t);var a=Object(R.a)(s);function s(t,u){Object(o.a)(this,s);var l=r(t),c=Object(A.a)(Object(A.a)({},Rt),u),h=n(l,c),f=i(l)?e():null;return a.call(this,t,!1,h,f)}return s}(t)}(ar,function(t,e,n){return function(){var r=new WeakMap,i=function(){var i=Object(N.a)(D.a.mark((function i(a,o,s){var u,l;return D.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=e(a),B(u,o)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs},u=t(o,l)),r.set(o,u),i.next=6,n(a,o,u,s);case 6:return i.abrupt("return",u);case 7:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}();return{render:function(t,e,n){var a=r.get(e);return void 0!==a?Promise.resolve(a):i(t,e,n)}}}}(Cr,pt,Yn),Cr,Qn,Kn),Mr=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,l){Object(o.a)(this,u);var c=r(t),h=a(Object(A.a)(Object(A.a)({},jt),l)),f=n(c,h),d=i(c)?e():null;return s.call(this,t,!1,f,d)}return u}(t)}(ar,function(t,e,n){return function(){var r=new WeakMap,i=function(){var i=Object(N.a)(D.a.mark((function i(a,o,s){var u,l;return D.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=e(a),B(u,o)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs},u=t(o,l)),r.set(o,u),i.next=6,n(a,o,u,s);case 6:return i.abrupt("return",u);case 7:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}();return{render:function(t,e,n){var a=r.get(e);return void 0!==a?Promise.resolve(a):i(t,e,n)}}}}(oe,pt,Yn),oe,Qn,Kn,(function(t){return Object(A.a)(Object(A.a)({},t),{},{channelCount:t.numberOfOutputs})})),Ar=function(t,e,n,r){return function(i,a){var o=a.offset,s=ue(a,["offset"]),u=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,Object(A.a)(Object(A.a)({},s),{},{gain:o})),h=u.getChannelData(0);h[0]=1,h[1]=1,l.buffer=u,l.loop=!0;var f={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener:function(){return l.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return l.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return l.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l.start.call(l,t)},stop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l.stop.call(l,t)}};return t(i,l),r(le(f,c),(function(){return l.connect(c)}),(function(){return l.disconnect(c)}))}}(dr,mr,he,Tr),Pr=function(t,e,n,r,i){return function(a,o){if(void 0===a.createConstantSource)return n(a,o);var s=a.createConstantSource();return Jt(s,o),$t(s,o,"offset"),e(r,(function(){return r(a)}))||te(s),e(i,(function(){return i(a)}))||ee(s),t(a,s),s}}(dr,Hn,Ar,jn,Dn),Lr=function(t,e,n,r,i,a,s){return function(t){Object(L.a)(l,t);var u=Object(R.a)(l);function l(t,s){var c;Object(o.a)(this,l);var h=i(t),f=Object(A.a)(Object(A.a)({},It),s),d=r(h,f),p=a(h),v=p?n():null;return(c=u.call(this,t,!1,d,v))._constantSourceNodeRenderer=v,c._nativeConstantSourceNode=d,c._offset=e(Object(q.a)(c),p,d.offset,W,H),c._onended=null,c}return Object(P.a)(l,[{key:"offset",get:function(){return this._offset}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?s(this,t):null;this._nativeConstantSourceNode.onended=e;var n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){E(this);var n=function e(){t._nativeConstantSourceNode.removeEventListener("ended",e),G(t)&&O(t)};this._nativeConstantSourceNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}}]),l}(t)}(ar,_r,function(t,e,n,r,i){return function(){var a=new WeakMap,o=null,s=null,u=function(){var u=Object(N.a)(D.a.mark((function u(l,c,h){var f,d,p;return D.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(f=n(l),(d=B(f,c))||(p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,offset:f.offset.value},f=e(c,p),null!==o&&f.start(o),null!==s&&f.stop(s)),a.set(c,f),d){u.next=9;break}return u.next=7,r(c,l.offset,f.offset,h);case 7:u.next=11;break;case 9:return u.next=11,t(c,l.offset,f.offset,h);case 11:return u.next=13,i(l,c,f,h);case 13:return u.abrupt("return",f);case 14:case"end":return u.stop()}}),u)})));return function(t,e,n){return u.apply(this,arguments)}}();return{set start(t){o=t},set stop(t){s=t},render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):u(t,e,n)}}}}(vr,Pr,pt,gr,Yn),Pr,Qn,Kn,Bn),Rr=function(t,e){return function(n,r){var i=n.createConvolver();if(Jt(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Qt(i,r,"buffer"),r.channelCount>2)throw t();if(e(i,"channelCount",(function(t){return function(){return t.call(i)}}),(function(e){return function(n){if(n>2)throw t();return e.call(i,n)}})),"max"===r.channelCountMode)throw t();return e(i,"channelCountMode",(function(t){return function(){return t.call(i)}}),(function(e){return function(n){if("max"===n)throw t();return e.call(i,n)}})),i}}(kn,Rn),jr=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,l){var c;Object(o.a)(this,u);var h=r(t),f=Object(A.a)(Object(A.a)({},Dt),l),d=n(h,f),p=i(h)?e():null;return(c=s.call(this,t,!1,d,p))._isBufferNullified=!1,c._nativeConvolverNode=d,null!==f.buffer&&a(Object(q.a)(c),f.buffer.duration),c}return Object(P.a)(u,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer},set:function(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){var e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,44100),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}},{key:"normalize",get:function(){return this._nativeConvolverNode.normalize},set:function(t){this._nativeConvolverNode.normalize=t}}]),u}(t)}(ar,function(t,e,n){return function(){var r=new WeakMap,i=function(){var i=Object(N.a)(D.a.mark((function i(a,o,s){var u,l;return D.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=e(a),B(u,o)||(l={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize},u=t(o,l)),r.set(o,u),!ut(u)){i.next=9;break}return i.next=7,n(a,o,u.inputs[0],s);case 7:i.next=11;break;case 9:return i.next=11,n(a,o,u,s);case 11:return i.abrupt("return",u);case 12:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}();return{render:function(t,e,n){var a=r.get(e);return void 0!==a?Promise.resolve(a):i(t,e,n)}}}}(Rr,pt,Yn),Rr,Qn,Kn,Sr),Ir=function(t,e,n,r,i,a,s){return function(t){Object(L.a)(l,t);var u=Object(R.a)(l);function l(t,c){var h;Object(o.a)(this,l);var f=i(t),d=Object(A.a)(Object(A.a)({},Bt),c),p=r(f,d),v=a(f),m=v?n(d.maxDelayTime):null;return(h=u.call(this,t,!1,p,m))._delayTime=e(Object(q.a)(h),v,p.delayTime),s(Object(q.a)(h),d.maxDelayTime),h}return Object(P.a)(l,[{key:"delayTime",get:function(){return this._delayTime}}]),l}(t)}(ar,_r,function(t,e,n,r,i){return function(a){var o=new WeakMap,s=function(){var s=Object(N.a)(D.a.mark((function s(u,l,c){var h,f,d;return D.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(h=n(u),(f=B(h,l))||(d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:a},h=e(l,d)),o.set(l,h),f){s.next=9;break}return s.next=7,r(l,u.delayTime,h.delayTime,c);case 7:s.next=11;break;case 9:return s.next=11,t(l,u.delayTime,h.delayTime,c);case 11:return s.next=13,i(u,l,h,c);case 13:return s.abrupt("return",h);case 14:case"end":return s.stop()}}),s)})));return function(t,e,n){return s.apply(this,arguments)}}();return{render:function(t,e,n){var r=o.get(e);return void 0!==r?Promise.resolve(r):s(t,e,n)}}}}(vr,ce,pt,gr,Yn),ce,Qn,Kn,Sr),Dr=(Ge=kn,function(t,e){var n=t.createDynamicsCompressor();if(Jt(n,e),e.channelCount>2)throw Ge();if("max"===e.channelCountMode)throw Ge();return $t(n,e,"attack"),$t(n,e,"knee"),$t(n,e,"ratio"),$t(n,e,"release"),$t(n,e,"threshold"),n}),Nr=function(t,e,n,r,i,a,s,u){return function(t){Object(L.a)(c,t);var l=Object(R.a)(c);function c(t,i){var h;Object(o.a)(this,c);var f=a(t),d=Object(A.a)(Object(A.a)({},Ft),i),p=r(f,d),v=s(f),m=v?n():null;return(h=l.call(this,t,!1,p,m))._attack=e(Object(q.a)(h),v,p.attack),h._knee=e(Object(q.a)(h),v,p.knee),h._nativeDynamicsCompressorNode=p,h._ratio=e(Object(q.a)(h),v,p.ratio),h._release=e(Object(q.a)(h),v,p.release),h._threshold=e(Object(q.a)(h),v,p.threshold),u(Object(q.a)(h),.006),h}return Object(P.a)(c,[{key:"attack",get:function(){return this._attack}},{key:"channelCount",get:function(){return this._nativeDynamicsCompressorNode.channelCount},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}},{key:"channelCountMode",get:function(){return this._nativeDynamicsCompressorNode.channelCountMode},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}},{key:"knee",get:function(){return this._knee}},{key:"ratio",get:function(){return this._ratio}},{key:"reduction",get:function(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}},{key:"release",get:function(){return this._release}},{key:"threshold",get:function(){return this._threshold}}]),c}(t)}(ar,_r,function(t,e,n,r,i){return function(){var a=new WeakMap,o=function(){var o=Object(N.a)(D.a.mark((function o(s,u,l){var c,h,f;return D.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=n(s),(h=B(c,u))||(f={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value},c=e(u,f)),a.set(u,c),h){o.next=17;break}return o.next=7,r(u,s.attack,c.attack,l);case 7:return o.next=9,r(u,s.knee,c.knee,l);case 9:return o.next=11,r(u,s.ratio,c.ratio,l);case 11:return o.next=13,r(u,s.release,c.release,l);case 13:return o.next=15,r(u,s.threshold,c.threshold,l);case 15:o.next=27;break;case 17:return o.next=19,t(u,s.attack,c.attack,l);case 19:return o.next=21,t(u,s.knee,c.knee,l);case 21:return o.next=23,t(u,s.ratio,c.ratio,l);case 23:return o.next=25,t(u,s.release,c.release,l);case 25:return o.next=27,t(u,s.threshold,c.threshold,l);case 27:return o.next=29,i(s,u,c,l);case 29:return o.abrupt("return",c);case 30:case"end":return o.stop()}}),o)})));return function(t,e,n){return o.apply(this,arguments)}}();return{render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):o(t,e,n)}}}}(vr,Dr,pt,gr,Yn),Dr,kn,Qn,Kn,Sr),Br=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,l){var c;Object(o.a)(this,u);var h=i(t),f=Object(A.a)(Object(A.a)({},Vt),l),d=r(h,f),p=a(h),v=p?n():null;return(c=s.call(this,t,!1,d,v))._gain=e(Object(q.a)(c),p,d.gain,W,H),c}return Object(P.a)(u,[{key:"gain",get:function(){return this._gain}}]),u}(t)}(ar,_r,function(t,e,n,r,i){return function(){var a=new WeakMap,o=function(){var o=Object(N.a)(D.a.mark((function o(s,u,l){var c,h,f;return D.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=n(s),(h=B(c,u))||(f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value},c=e(u,f)),a.set(u,c),h){o.next=9;break}return o.next=7,r(u,s.gain,c.gain,l);case 7:o.next=11;break;case 9:return o.next=11,t(u,s.gain,c.gain,l);case 11:return o.next=13,i(s,u,c,l);case 13:return o.abrupt("return",c);case 14:case"end":return o.stop()}}),o)})));return function(t,e,n){return o.apply(this,arguments)}}();return{render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):o(t,e,n)}}}}(vr,he,pt,gr,Yn),he,Qn,Kn),zr=function(t,e,n,r){return function(i,a,o){var s=o.channelCount,u=o.channelCountMode,l=o.channelInterpretation,c=o.feedback,h=o.feedforward,f=ne(a,i.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),p=h instanceof Float64Array?h:new Float64Array(h),v=d.length,m=p.length,g=Math.min(v,m);if(0===v||v>20)throw r();if(0===d[0])throw e();if(0===m||m>20)throw r();if(0===p[0])throw e();if(1!==d[0]){for(var y=0;y<m;y+=1)p[y]/=d[0];for(var _=1;_<v;_+=1)d[_]/=d[0]}var b=n(i,f,s,s);b.channelCount=s,b.channelCountMode=u,b.channelInterpretation=l;for(var x=[],w=[],S=[],k=0;k<s;k+=1){x.push(0);var T=new Float32Array(32),E=new Float32Array(32);T.fill(0),E.fill(0),w.push(T),S.push(E)}b.onaudioprocess=function(t){for(var e=t.inputBuffer,n=t.outputBuffer,r=e.numberOfChannels,i=0;i<r;i+=1){var a=e.getChannelData(i),o=n.getChannelData(i);x[i]=Wt(d,v,p,m,g,w[i],S[i],x[i],32,a,o)}};var C=i.sampleRate/2;return le({get bufferSize(){return f},get channelCount(){return b.channelCount},set channelCount(t){b.channelCount=t},get channelCountMode(){return b.channelCountMode},set channelCountMode(t){b.channelCountMode=t},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(t){b.channelInterpretation=t},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener:function(){return b.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return b.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse:function(e,n,r){if(e.length!==n.length||n.length!==r.length)throw t();for(var i=e.length,a=0;a<i;a+=1){var o=-Math.PI*(e[a]/C),s=[Math.cos(o),Math.sin(o)],u=fe(de(p,s),de(d,s));n[a]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),r[a]=Math.atan2(u[1],u[0])}},removeEventListener:function(){return b.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},b)}}(qt,Ut,Sn,kn),Fr=function(t,e,n,r){return function(i){return t(Yt,(function(){return Yt(i)}))?Promise.resolve(t(r,r)).then((function(t){if(!t){var e=n(i,512,0,1);i.oncomplete=function(){e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=function(){return i.currentTime},e.connect(i.destination)}return i.startRendering()})):new Promise((function(t){var n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=function(e){n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()}))}}(Hn,he,Sn,function(t,e){return function(){if(null===e)return Promise.resolve(!1);var n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((function(t){n.oncomplete=function(){r.disconnect(),t(0!==n.currentTime)},n.startRendering()}))}}(he,Jn)),Vr=function(t,e,n,r,i){return function(a,o){var s=new WeakMap,u=null,l=function(){var l=Object(N.a)(D.a.mark((function l(c,h,f){var d,p,v,m,g;return D.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(d=null,p=e(c),v=B(p,h),void 0===h.createIIRFilter?d=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):v||(p=h.createIIRFilter(o,a)),s.set(h,null===d?p:d),null===d){l.next=17;break}if(null!==u){l.next=11;break}if(null!==n){l.next=9;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:m=new n(c.context.destination.channelCount,c.context.length,h.sampleRate),u=Object(N.a)(D.a.mark((function t(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(c,m,m.destination,f);case 2:return t.next=4,i(m);case 4:return e=t.sent,t.abrupt("return",Gt(e,h,a,o));case 6:case"end":return t.stop()}}),t)})))();case 11:return l.next=13,u;case 13:return g=l.sent,d.buffer=g,d.start(0),l.abrupt("return",d);case 17:return l.next=19,r(c,h,p,f);case 19:return l.abrupt("return",p);case 20:case"end":return l.stop()}}),l)})));return function(t,e,n){return l.apply(this,arguments)}}();return{render:function(t,e,n){var r=s.get(e);return void 0!==r?Promise.resolve(r):l(t,e,n)}}}}(mr,pt,Jn,Yn,Fr),Ur=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,l){var c;Object(o.a)(this,u);var h=r(t),f=i(h),d=Object(A.a)(Object(A.a)({},Ht),l),p=e(h,f?null:t.baseLatency,d),v=f?n(d.feedback,d.feedforward):null;return c=s.call(this,t,!1,p,v),function(t){var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,function(n,r,i){if(n.length!==r.length||r.length!==i.length)throw qt();return e.call(t,n,r,i)})}(p),c._nativeIIRFilterNode=p,a(Object(q.a)(c),1),c}return Object(P.a)(u,[{key:"getFrequencyResponse",value:function(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}}]),u}(t)}(ar,(Xe=zr,function(t,e,n){if(void 0===t.createIIRFilter)return Xe(t,e,n);var r=t.createIIRFilter(n.feedforward,n.feedback);return Jt(r,n),r}),Vr,Qn,Kn,Sr),qr=function(t,e,n,r,i){return function(a,o){var s=o.listener,u=void 0===s.forwardX?function(){var u=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),l=i(o),c=r(o,256,9,0),h=function(e,r){var i=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});return i.connect(u,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:function(){return r}}),t({context:a},l,i.offset,W,H)},f=[0,0,-1,0,1,0],d=[0,0,0];return c.onaudioprocess=function(t){var e=t.inputBuffer,n=[e.getChannelData(0)[0],e.getChannelData(1)[0],e.getChannelData(2)[0],e.getChannelData(3)[0],e.getChannelData(4)[0],e.getChannelData(5)[0]];n.some((function(t,e){return t!==f[e]}))&&(s.setOrientation.apply(s,n),f=n);var r=[e.getChannelData(6)[0],e.getChannelData(7)[0],e.getChannelData(8)[0]];r.some((function(t,e){return t!==d[e]}))&&(s.setPosition.apply(s,r),d=r)},u.connect(c),{forwardX:h(0,0),forwardY:h(1,0),forwardZ:h(2,-1),positionX:h(6,0),positionY:h(7,0),positionZ:h(8,0),upX:h(3,0),upY:h(4,1),upZ:h(5,0)}}():s,l=u.forwardX,c=u.forwardY,h=u.forwardZ,f=u.positionX,d=u.positionY,p=u.positionZ,v=u.upX,m=u.upY,g=u.upZ;return{get forwardX(){return l},get forwardY(){return c},get forwardZ(){return h},get positionX(){return f},get positionY(){return d},get positionZ(){return p},get upX(){return v},get upY(){return m},get upZ(){return g}}}}(_r,Cr,Pr,Sn,Kn),Hr=new WeakMap,Wr=function(t,e,n,r,i,a){return function(n){Object(L.a)(u,n);var s=Object(R.a)(u);function u(n,a){var l;return Object(o.a)(this,u),(l=s.call(this,n))._nativeContext=n,f.set(Object(q.a)(l),n),r(n)&&i.set(n,new Set),l._destination=new t(Object(q.a)(l),a),l._listener=e(Object(q.a)(l),n),l._onstatechange=null,l}return Object(P.a)(u,[{key:"currentTime",get:function(){return this._nativeContext.currentTime}},{key:"destination",get:function(){return this._destination}},{key:"listener",get:function(){return this._listener}},{key:"onstatechange",get:function(){return this._onstatechange},set:function(t){var e="function"===typeof t?a(this,t):null;this._nativeContext.onstatechange=e;var n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}},{key:"sampleRate",get:function(){return this._nativeContext.sampleRate}},{key:"state",get:function(){return this._nativeContext.state}}]),u}(n)}(xr,qr,tr,Kn,Hr,Bn),Gr=function(t,e,n,r,i,a){return function(o,s){var u=o.createOscillator();return Jt(u,s),$t(u,s,"detune"),$t(u,s,"frequency"),void 0!==s.periodicWave?u.setPeriodicWave(s.periodicWave):Qt(u,s,"type"),e(n,(function(){return n(o)}))||te(u),e(r,(function(){return r(o)}))||a(u,o),e(i,(function(){return i(o)}))||ee(u),t(o,u),u}}(dr,Hn,jn,In,Dn,Nn),Xr=function(t,e,n,r,i,a,s){return function(t){Object(L.a)(l,t);var u=Object(R.a)(l);function l(t,s){var c;Object(o.a)(this,l);var h=i(t),f=Object(A.a)(Object(A.a)({},En),s),d=n(h,f),p=a(h),v=p?r():null,m=t.sampleRate/2;return(c=u.call(this,t,!1,d,v))._detune=e(Object(q.a)(c),p,d.detune,153600,-153600),c._frequency=e(Object(q.a)(c),p,d.frequency,m,-m),c._nativeOscillatorNode=d,c._onended=null,c._oscillatorNodeRenderer=v,null!==c._oscillatorNodeRenderer&&void 0!==f.periodicWave&&(c._oscillatorNodeRenderer.periodicWave=f.periodicWave),c}return Object(P.a)(l,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?s(this,t):null;this._nativeOscillatorNode.onended=e;var n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"type",get:function(){return this._nativeOscillatorNode.type},set:function(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}},{key:"setPeriodicWave",value:function(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){E(this);var n=function e(){t._nativeOscillatorNode.removeEventListener("ended",e),G(t)&&O(t)};this._nativeOscillatorNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}}]),l}(t)}(ar,_r,Gr,function(t,e,n,r,i){return function(){var a=new WeakMap,o=null,s=null,u=null,l=function(){var l=Object(N.a)(D.a.mark((function l(c,h,f){var d,p,v;return D.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(d=n(c),(p=B(d,h))||(v={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===o?void 0:o,type:d.type},d=e(h,v),null!==s&&d.start(s),null!==u&&d.stop(u)),a.set(h,d),p){l.next=11;break}return l.next=7,r(h,c.detune,d.detune,f);case 7:return l.next=9,r(h,c.frequency,d.frequency,f);case 9:l.next=15;break;case 11:return l.next=13,t(h,c.detune,d.detune,f);case 13:return l.next=15,t(h,c.frequency,d.frequency,f);case 15:return l.next=17,i(c,h,d,f);case 17:return l.abrupt("return",d);case 18:case"end":return l.stop()}}),l)})));return function(t,e,n){return l.apply(this,arguments)}}();return{set periodicWave(t){o=t},set start(t){s=t},set stop(t){u=t},render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):l(t,e,n)}}}}(vr,Gr,pt,gr,Yn),Qn,Kn,Bn),Yr=(Ye=mr,function(t,e){var n=Ye(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(e),n.start(),function(){n.stop(),n.disconnect(e)}}),Zr=function(t,e,n,r,i){return function(a,o){var s=o.curve,u=o.oversample,l=ue(o,["curve","oversample"]),c=a.createWaveShaper(),h=a.createWaveShaper();Jt(c,l),Jt(h,l);var f=n(a,Object(A.a)(Object(A.a)({},l),{},{gain:1})),d=n(a,Object(A.a)(Object(A.a)({},l),{},{gain:-1})),p=n(a,Object(A.a)(Object(A.a)({},l),{},{gain:1})),v=n(a,Object(A.a)(Object(A.a)({},l),{},{gain:-1})),m=null,g=!1,y=null,_={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){f.channelCount=t,d.channelCount=t,c.channelCount=t,p.channelCount=t,h.channelCount=t,v.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){f.channelCountMode=t,d.channelCountMode=t,c.channelCountMode=t,p.channelCountMode=t,h.channelCountMode=t,v.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t,d.channelInterpretation=t,c.channelInterpretation=t,p.channelInterpretation=t,h.channelInterpretation=t,v.channelInterpretation=t},get context(){return c.context},get curve(){return y},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,h.curve=n;else{var i=n.length,o=new Float32Array(i+2-i%2),s=new Float32Array(i+2-i%2);o[0]=n[0],s[0]=-n[i-1];for(var u=Math.ceil((i+1)/2),l=(i+1)/2-1,d=1;d<u;d+=1){var p=d/u*l,v=Math.floor(p),_=Math.ceil(p);o[d]=v===_?n[v]:(1-(p-v))*n[v]+(1-(_-p))*n[_],s[d]=v===_?-n[i-1-v]:-(1-(p-v))*n[i-1-v]-(1-(_-p))*n[i-1-_]}o[u]=i%2===1?n[u-1]:(n[u-2]+n[u-1])/2,c.curve=o,h.curve=s}y=n,g&&(r(y)&&null===m?m=t(a,f):null!==m&&(m(),m=null))},get inputs(){return[f]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,h.oversample=t},addEventListener:function(){return f.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return f.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return f.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==s&&(_.curve=s instanceof Float32Array?s:new Float32Array(s)),u!==_.oversample&&(_.oversample=u);return i(le(_,p),(function(){f.connect(c).connect(p),f.connect(d).connect(h).connect(v).connect(p),g=!0,r(y)&&(m=t(a,f))}),(function(){f.disconnect(c),c.disconnect(p),f.disconnect(d),d.disconnect(h),h.disconnect(v),v.disconnect(p),g=!1,null!==m&&(m(),m=null)}))}}(Yr,Ut,he,Ln,Tr),Qr=function(t,e,n,r,i,a,o){return function(s,u){var l=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,u);Jt(l,u);var c=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==c&&c.length<2)throw e();Qt(l,{curve:c},"curve"),Qt(l,u,"oversample");var h=null,f=!1;o(l,"curve",(function(t){return function(){return t.call(l)}}),(function(e){return function(n){return e.call(l,n),f&&(r(n)&&null===h?h=t(s,l):r(n)||null===h||(h(),h=null)),n}}));return i(l,(function(){f=!0,r(l.curve)&&(h=t(s,l))}),(function(){f=!1,null!==h&&(h(),h=null)}))}}(Yr,Ut,Zr,Ln,Tr,er,Rn),Jr=function(t,e,n,r,i,a,o,s,u){return function(l,c){var h=c.coneInnerAngle,f=c.coneOuterAngle,d=c.coneOuterGain,p=c.distanceModel,v=c.maxDistance,m=c.orientationX,g=c.orientationY,y=c.orientationZ,_=c.panningModel,b=c.positionX,x=c.positionY,w=c.positionZ,S=c.refDistance,k=c.rolloffFactor,T=ue(c,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]),E=l.createPanner();if(T.channelCount>2)throw o();if("max"===T.channelCountMode)throw o();Jt(E,T);var C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=n(l,Object(A.a)(Object(A.a)({},C),{},{channelInterpretation:"speakers",numberOfInputs:6})),M=r(l,Object(A.a)(Object(A.a)({},T),{},{gain:1})),P=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:1})),L=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:0})),R=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:0})),j=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:0})),I=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:0})),D=r(l,Object(A.a)(Object(A.a)({},C),{},{gain:0})),N=i(l,256,6,1),B=a(l,Object(A.a)(Object(A.a)({},C),{},{curve:new Float32Array([1,1]),oversample:"none"})),z=[m,g,y],F=[b,x,w];N.onaudioprocess=function(t){var e=t.inputBuffer,n=[e.getChannelData(0)[0],e.getChannelData(1)[0],e.getChannelData(2)[0]];n.some((function(t,e){return t!==z[e]}))&&(E.setOrientation.apply(E,n),z=n);var r=[e.getChannelData(3)[0],e.getChannelData(4)[0],e.getChannelData(5)[0]];r.some((function(t,e){return t!==F[e]}))&&(E.setPosition.apply(E,r),F=r)},Object.defineProperty(L.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(R.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(j.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(I.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(D.gain,"defaultValue",{get:function(){return 0}});var V={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(t){if(t>2)throw o();M.channelCount=t,E.channelCount=t},get channelCountMode(){return E.channelCountMode},set channelCountMode(t){if("max"===t)throw o();M.channelCountMode=t,E.channelCountMode=t},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(t){M.channelInterpretation=t,E.channelInterpretation=t},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(t){E.coneInnerAngle=t},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(t){E.coneOuterAngle=t},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();E.coneOuterGain=t},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(t){E.distanceModel=t},get inputs(){return[M]},get maxDistance(){return E.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;E.maxDistance=t},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return L.gain},get orientationZ(){return R.gain},get panningModel(){return E.panningModel},set panningModel(t){E.panningModel=t},get positionX(){return j.gain},get positionY(){return I.gain},get positionZ(){return D.gain},get refDistance(){return E.refDistance},set refDistance(t){if(t<0)throw new RangeError;E.refDistance=t},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;E.rolloffFactor=t},addEventListener:function(){return M.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return M.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return M.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};h!==V.coneInnerAngle&&(V.coneInnerAngle=h),f!==V.coneOuterAngle&&(V.coneOuterAngle=f),d!==V.coneOuterGain&&(V.coneOuterGain=d),p!==V.distanceModel&&(V.distanceModel=p),v!==V.maxDistance&&(V.maxDistance=v),m!==V.orientationX.value&&(V.orientationX.value=m),g!==V.orientationY.value&&(V.orientationY.value=g),y!==V.orientationZ.value&&(V.orientationZ.value=y),_!==V.panningModel&&(V.panningModel=_),b!==V.positionX.value&&(V.positionX.value=b),x!==V.positionY.value&&(V.positionY.value=x),w!==V.positionZ.value&&(V.positionZ.value=w),S!==V.refDistance&&(V.refDistance=S),k!==V.rolloffFactor&&(V.rolloffFactor=k),1===z[0]&&0===z[1]&&0===z[2]||E.setOrientation.apply(E,Q(z)),0===F[0]&&0===F[1]&&0===F[2]||E.setPosition.apply(E,Q(F));return u(le(V,E),(function(){M.connect(E),t(M,B,0,0),B.connect(P).connect(O,0,0),B.connect(L).connect(O,0,1),B.connect(R).connect(O,0,2),B.connect(j).connect(O,0,3),B.connect(I).connect(O,0,4),B.connect(D).connect(O,0,5),O.connect(N).connect(l.destination)}),(function(){M.disconnect(E),s(M,B,0,0),B.disconnect(P),P.disconnect(O),B.disconnect(L),L.disconnect(O),B.disconnect(R),R.disconnect(O),B.disconnect(j),j.disconnect(O),B.disconnect(I),I.disconnect(O),B.disconnect(D),D.disconnect(O),O.disconnect(N),N.disconnect(l.destination)}))}}(lt,Ut,Cr,he,Sn,Qr,kn,dt,Tr),Kr=(Ze=Jr,function(t,e){var n=t.createPanner();return void 0===n.orientationX?Ze(t,e):(Jt(n,e),$t(n,e,"orientationX"),$t(n,e,"orientationY"),$t(n,e,"orientationZ"),$t(n,e,"positionX"),$t(n,e,"positionY"),$t(n,e,"positionZ"),Qt(n,e,"coneInnerAngle"),Qt(n,e,"coneOuterAngle"),Qt(n,e,"coneOuterGain"),Qt(n,e,"distanceModel"),Qt(n,e,"maxDistance"),Qt(n,e,"panningModel"),Qt(n,e,"refDistance"),Qt(n,e,"rolloffFactor"),n)}),$r=function(t,e,n,r,i,a,s){return function(t){Object(L.a)(l,t);var u=Object(R.a)(l);function l(t,c){var h;Object(o.a)(this,l);var f=i(t),d=Object(A.a)(Object(A.a)({},Cn),c),p=n(f,d),v=a(f),m=v?r():null;return(h=u.call(this,t,!1,p,m))._nativePannerNode=p,h._orientationX=e(Object(q.a)(h),v,p.orientationX,W,H),h._orientationY=e(Object(q.a)(h),v,p.orientationY,W,H),h._orientationZ=e(Object(q.a)(h),v,p.orientationZ,W,H),h._positionX=e(Object(q.a)(h),v,p.positionX,W,H),h._positionY=e(Object(q.a)(h),v,p.positionY,W,H),h._positionZ=e(Object(q.a)(h),v,p.positionZ,W,H),s(Object(q.a)(h),1),h}return Object(P.a)(l,[{key:"coneInnerAngle",get:function(){return this._nativePannerNode.coneInnerAngle},set:function(t){this._nativePannerNode.coneInnerAngle=t}},{key:"coneOuterAngle",get:function(){return this._nativePannerNode.coneOuterAngle},set:function(t){this._nativePannerNode.coneOuterAngle=t}},{key:"coneOuterGain",get:function(){return this._nativePannerNode.coneOuterGain},set:function(t){this._nativePannerNode.coneOuterGain=t}},{key:"distanceModel",get:function(){return this._nativePannerNode.distanceModel},set:function(t){this._nativePannerNode.distanceModel=t}},{key:"maxDistance",get:function(){return this._nativePannerNode.maxDistance},set:function(t){this._nativePannerNode.maxDistance=t}},{key:"orientationX",get:function(){return this._orientationX}},{key:"orientationY",get:function(){return this._orientationY}},{key:"orientationZ",get:function(){return this._orientationZ}},{key:"panningModel",get:function(){return this._nativePannerNode.panningModel},set:function(t){this._nativePannerNode.panningModel=t}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"positionZ",get:function(){return this._positionZ}},{key:"refDistance",get:function(){return this._nativePannerNode.refDistance},set:function(t){this._nativePannerNode.refDistance=t}},{key:"rolloffFactor",get:function(){return this._nativePannerNode.rolloffFactor},set:function(t){this._nativePannerNode.rolloffFactor=t}}]),l}(t)}(ar,_r,Kr,function(t,e,n,r,i,a,o,s,u,l){return function(){var c=new WeakMap,h=null,f=function(){var f=Object(N.a)(D.a.mark((function f(d,p,v){var m,g,y,_,b,x,w;return D.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(m=null,g=a(d),y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},_=Object(A.a)(Object(A.a)({},y),{},{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),b=B(g,p),"bufferSize"in g?m=r(p,Object(A.a)(Object(A.a)({},y),{},{gain:1})):b||(x=Object(A.a)(Object(A.a)({},_),{},{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value}),g=i(p,x)),c.set(p,null===m?g:m),null===m){f.next=12;break}return f.delegateYield(D.a.mark((function t(){var a,c,f,g,b,x,w,S,k,T,E,C,O,M;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==h){t.next=7;break}if(null!==o){t.next=3;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 3:a=new o(6,d.context.length,p.sampleRate),(c=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6})).connect(a.destination),h=Object(N.a)(D.a.mark((function t(){var e,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(function(){var t=Object(N.a)(D.a.mark((function t(e,r){var i;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0}),t.next=3,s(a,e,i.offset,v);case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:for(e=t.sent,r=0;r<6;r+=1)e[r].connect(c,0,r),e[r].start(0);return t.abrupt("return",l(a));case 5:case"end":return t.stop()}}),t)})))();case 7:return t.next=9,h;case 9:return f=t.sent,g=r(p,Object(A.a)(Object(A.a)({},y),{},{gain:1})),t.next=13,u(d,p,g,v);case 13:for(b=[],x=0;x<f.numberOfChannels;x+=1)b.push(f.getChannelData(x));for(w=[b[0][0],b[1][0],b[2][0]],S=[b[3][0],b[4][0],b[5][0]],k=r(p,Object(A.a)(Object(A.a)({},y),{},{gain:1})),T=i(p,Object(A.a)(Object(A.a)({},_),{},{orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:S[0],positionY:S[1],positionZ:S[2]})),g.connect(k).connect(T.inputs[0]),T.connect(m),E=128;E<f.length;E+=128)C=[b[0][E],b[1][E],b[2][E]],O=[b[3][E],b[4][E],b[5][E]],(C.some((function(t,e){return t!==w[e]}))||O.some((function(t,e){return t!==S[e]})))&&(w=C,S=O,M=E/p.sampleRate,k.gain.setValueAtTime(0,M),k=r(p,Object(A.a)(Object(A.a)({},y),{},{gain:0})),T=i(p,Object(A.a)(Object(A.a)({},_),{},{orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:S[0],positionY:S[1],positionZ:S[2]})),k.gain.setValueAtTime(1,M),g.connect(k).connect(T.inputs[0]),T.connect(m));return t.abrupt("return",{v:m});case 23:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:if("object"!==typeof(w=f.t0)){f.next=12;break}return f.abrupt("return",w.v);case 12:if(b){f.next=27;break}return f.next=15,s(p,d.orientationX,g.orientationX,v);case 15:return f.next=17,s(p,d.orientationY,g.orientationY,v);case 17:return f.next=19,s(p,d.orientationZ,g.orientationZ,v);case 19:return f.next=21,s(p,d.positionX,g.positionX,v);case 21:return f.next=23,s(p,d.positionY,g.positionY,v);case 23:return f.next=25,s(p,d.positionZ,g.positionZ,v);case 25:f.next=39;break;case 27:return f.next=29,t(p,d.orientationX,g.orientationX,v);case 29:return f.next=31,t(p,d.orientationY,g.orientationY,v);case 31:return f.next=33,t(p,d.orientationZ,g.orientationZ,v);case 33:return f.next=35,t(p,d.positionX,g.positionX,v);case 35:return f.next=37,t(p,d.positionY,g.positionY,v);case 37:return f.next=39,t(p,d.positionZ,g.positionZ,v);case 39:if(!ut(g)){f.next=44;break}return f.next=42,u(d,p,g.inputs[0],v);case 42:f.next=46;break;case 44:return f.next=46,u(d,p,g,v);case 46:return f.abrupt("return",g);case 47:case"end":return f.stop()}}),f)})));return function(t,e,n){return f.apply(this,arguments)}}();return{render:function(t,e,n){var r=c.get(e);return void 0!==r?Promise.resolve(r):f(t,e,n)}}}}(vr,Cr,Pr,he,Kr,pt,Jn,gr,Yn,Fr),Qn,Kn,Sr),ti=function(t,e,n,r){return function(){function i(a,s){Object(o.a)(this,i);var u=e(a),l=r(Object(A.a)(Object(A.a)({},On),s)),c=t(u,l);return n.add(c),c}return Object(P.a)(i,null,[{key:Symbol.hasInstance,value:function(t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}}]),i}()}(function(t){return function(e,n){var r=n.disableNormalization,i=n.imag,a=n.real,o=i instanceof Float32Array?i:new Float32Array(i),s=a instanceof Float32Array?a:new Float32Array(a),u=e.createPeriodicWave(s,o,{disableNormalization:r});if(Array.from(i).length<2)throw t();return u}}(F),Qn,new WeakSet,(function(t){var e=t.imag,n=t.real;return void 0===e?void 0===n?Object(A.a)(Object(A.a)({},t),{},{imag:[0,0],real:[0,0]}):Object(A.a)(Object(A.a)({},t),{},{imag:Array.from(n,(function(){return 0})),real:n}):void 0===n?Object(A.a)(Object(A.a)({},t),{},{imag:e,real:Array.from(e,(function(){return 0}))}):Object(A.a)(Object(A.a)({},t),{},{imag:e,real:n})})),ei=function(t,e){return function(n,r){var i=r.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,r);var a=n.createStereoPanner();return Jt(a,r),$t(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:function(){return i},set:function(t){if(t!==i)throw e()}}),a}}(function(t,e,n,r,i,a){var o=16385,s=new Float32Array([1,1]),u=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c=Object(A.a)(Object(A.a)({},l),{},{oversample:"none"}),h=function(t,a,h,f,d){if(1===a)return function(t,e,i,a){for(var h=new Float32Array(o),f=new Float32Array(o),d=0;d<o;d+=1){var p=d/16384*u;h[d]=Math.cos(p),f[d]=Math.sin(p)}var v=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),m=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:h})),g=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:s})),y=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),_=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:f}));return{connectGraph:function(){e.connect(v),e.connect(void 0===g.inputs?g:g.inputs[0]),e.connect(y),g.connect(i),i.connect(void 0===m.inputs?m:m.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),m.connect(v.gain),_.connect(y.gain),v.connect(a,0,0),y.connect(a,0,1)},disconnectGraph:function(){e.disconnect(v),e.disconnect(void 0===g.inputs?g:g.inputs[0]),e.disconnect(y),g.disconnect(i),i.disconnect(void 0===m.inputs?m:m.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),m.disconnect(v.gain),_.disconnect(y.gain),v.disconnect(a,0,0),y.disconnect(a,0,1)}}}(t,h,f,d);if(2===a)return function(t,i,a,h){for(var f=new Float32Array(o),d=new Float32Array(o),p=new Float32Array(o),v=new Float32Array(o),m=Math.floor(8192.5),g=0;g<o;g+=1)if(g>m){var y=(g-m)/(16384-m)*u;f[g]=Math.cos(y),d[g]=Math.sin(y),p[g]=0,v[g]=1}else{var _=g/(16384-m)*u;f[g]=1,d[g]=0,p[g]=Math.cos(_),v[g]=Math.sin(_)}var b=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),w=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:f})),S=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),k=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:d})),T=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:s})),E=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),C=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:p})),O=n(t,Object(A.a)(Object(A.a)({},l),{},{gain:0})),M=r(t,Object(A.a)(Object(A.a)({},c),{},{curve:v}));return{connectGraph:function(){i.connect(b),i.connect(void 0===T.inputs?T:T.inputs[0]),b.connect(x,0),b.connect(S,0),b.connect(E,1),b.connect(O,1),T.connect(a),a.connect(void 0===w.inputs?w:w.inputs[0]),a.connect(void 0===k.inputs?k:k.inputs[0]),a.connect(void 0===C.inputs?C:C.inputs[0]),a.connect(void 0===M.inputs?M:M.inputs[0]),w.connect(x.gain),k.connect(S.gain),C.connect(E.gain),M.connect(O.gain),x.connect(h,0,0),E.connect(h,0,0),S.connect(h,0,1),O.connect(h,0,1)},disconnectGraph:function(){i.disconnect(b),i.disconnect(void 0===T.inputs?T:T.inputs[0]),b.disconnect(x,0),b.disconnect(S,0),b.disconnect(E,1),b.disconnect(O,1),T.disconnect(a),a.disconnect(void 0===w.inputs?w:w.inputs[0]),a.disconnect(void 0===k.inputs?k:k.inputs[0]),a.disconnect(void 0===C.inputs?C:C.inputs[0]),a.disconnect(void 0===M.inputs?M:M.inputs[0]),w.disconnect(x.gain),k.disconnect(S.gain),C.disconnect(E.gain),M.disconnect(O.gain),x.disconnect(h,0,0),E.disconnect(h,0,0),S.disconnect(h,0,1),O.disconnect(h,0,1)}}}(t,h,f,d);throw i()};return function(e,r){var o=r.channelCount,s=r.channelCountMode,u=r.pan,l=ue(r,["channelCount","channelCountMode","pan"]);if("max"===s)throw i();var c=t(e,Object(A.a)(Object(A.a)({},l),{},{channelCount:1,channelCountMode:s,numberOfInputs:2})),f=n(e,Object(A.a)(Object(A.a)({},l),{},{channelCount:o,channelCountMode:s,gain:1})),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:u}),p=h(e,o,f,d,c),v=p.connectGraph,m=p.disconnectGraph;Object.defineProperty(d.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(d.gain,"maxValue",{get:function(){return 1}}),Object.defineProperty(d.gain,"minValue",{get:function(){return-1}});var g={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){if(f.channelCount!==t){y&&m();var n=h(e,t,f,d,c);v=n.connectGraph,m=n.disconnectGraph,y&&v()}f.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();f.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get pan(){return d.gain},addEventListener:function(){return f.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return f.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return f.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},y=!1;return a(le(g,c),(function(){v(),y=!0}),(function(){m(),y=!1}))}}(Cr,oe,he,Qr,kn,Tr),kn),ni=function(t,e,n,r,i,a){return function(t){Object(L.a)(u,t);var s=Object(R.a)(u);function u(t,l){var c;Object(o.a)(this,u);var h=i(t),f=Object(A.a)(Object(A.a)({},Mn),l),d=n(h,f),p=a(h),v=p?r():null;return(c=s.call(this,t,!1,d,v))._pan=e(Object(q.a)(c),p,d.pan),c}return Object(P.a)(u,[{key:"pan",get:function(){return this._pan}}]),u}(t)}(ar,_r,ei,function(t,e,n,r,i){return function(){var a=new WeakMap,o=function(){var o=Object(N.a)(D.a.mark((function o(s,u,l){var c,h,f;return D.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=n(s),(h=B(c,u))||(f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value},c=e(u,f)),a.set(u,c),h){o.next=9;break}return o.next=7,r(u,s.pan,c.pan,l);case 7:o.next=11;break;case 9:return o.next=11,t(u,s.pan,c.pan,l);case 11:if(!ut(c)){o.next=16;break}return o.next=14,i(s,u,c.inputs[0],l);case 14:o.next=18;break;case 16:return o.next=18,i(s,u,c,l);case 18:return o.abrupt("return",c);case 19:case"end":return o.stop()}}),o)})));return function(t,e,n){return o.apply(this,arguments)}}();return{render:function(t,e,n){var r=a.get(e);return void 0!==r?Promise.resolve(r):o(t,e,n)}}}}(vr,ei,pt,gr,Yn),Qn,Kn),ri=function(t,e,n){return function(){var r=new WeakMap,i=function(){var i=Object(N.a)(D.a.mark((function i(a,o,s){var u,l;return D.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=e(a),B(u,o)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample},u=t(o,l)),r.set(o,u),!ut(u)){i.next=9;break}return i.next=7,n(a,o,u.inputs[0],s);case 7:i.next=11;break;case 9:return i.next=11,n(a,o,u,s);case 11:return i.abrupt("return",u);case 12:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}();return{render:function(t,e,n){var a=r.get(e);return void 0!==a?Promise.resolve(a):i(t,e,n)}}}}(Qr,pt,Yn),ii=function(t,e,n,r,i,a,s){return function(t){Object(L.a)(l,t);var u=Object(R.a)(l);function l(t,e){var c;Object(o.a)(this,l);var h=i(t),f=Object(A.a)(Object(A.a)({},Pn),e),d=n(h,f),p=a(h)?r():null;return(c=u.call(this,t,!0,d,p))._isCurveNullified=!1,c._nativeWaveShaperNode=d,s(Object(q.a)(c),1),c}return Object(P.a)(l,[{key:"curve",get:function(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve},set:function(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}},{key:"oversample",get:function(){return this._nativeWaveShaperNode.oversample},set:function(t){this._nativeWaveShaperNode.oversample=t}}]),l}(t)}(ar,Ut,Qr,ri,Qn,Kn,Sr),ai=function(t){return null!==t&&t.isSecureContext}(Wn),oi=function(t){return function(e,n,r){Object.defineProperties(t,{currentFrame:{configurable:!0,get:function(){return Math.round(e*n)}},currentTime:{configurable:!0,get:function(){return e}}});try{return r()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}}}(Wn),si=new WeakMap,ui=function(t,e){return function(n){var r=t.get(n);if(void 0!==r)return r;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r}}(si,Jn),li=function(t){return null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null}(Wn),ci=ai?function(t,e,n,r,i,s,u,l,c,h,f,d,p){return function(m,g){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"},w=s(m);if(void 0!==w.audioWorklet)return Promise.all([i(g),Promise.resolve(t(d,d))]).then((function(t){var e=Object(a.a)(t,2),n=Object(a.a)(e[0],2),r=n[0],i=n[1],o=e[1],s=_(r,i),h=Object(a.a)(s,2),f=h[0],d=h[1],p=o?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",v=o?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",m=o?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",g="".concat(f,";((AudioWorkletProcessor,registerProcessor)=>{").concat(d,"\n})(").concat(p,",(n,p)=>registerProcessor(n,class extends p{").concat(v,"process(i,o,p){").concat(m,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac',class extends AudioWorkletProcessor{process(){return !1}})"),b=new Blob([g],{type:"application/javascript; charset=utf-8"}),x=URL.createObjectURL(b);return w.audioWorklet.addModule(x,y).then((function(){if(l(w))return w;var t=u(w);return t.audioWorklet.addModule(x,y).then((function(){return t}))})).then((function(t){if(null===c)throw new SyntaxError;try{new c(t,"__sac")}catch(e){throw new SyntaxError}})).finally((function(){return URL.revokeObjectURL(x)}))}));var S=f.get(m);if(void 0!==S&&S.has(g))return Promise.resolve();var k=h.get(m);if(void 0!==k){var T=k.get(g);if(void 0!==T)return T}var E=i(g).then((function(t){var e=Object(a.a)(t,2),r=e[0],i=e[1],o=_(r,i),s=Object(a.a)(o,2),u=s[0],l=s[1],c="".concat(u,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(l,"\n})})(window,'_AWGS')");return n(c)})).then((function(){var t=p._AWGS.pop();if(void 0===t)throw new SyntaxError;r(w.currentTime,w.sampleRate,(function(){return t((function t(){Object(o.a)(this,t)}),void 0,(function(t,n){if(""===t.trim())throw e();var r=v.get(w);if(void 0!==r){if(r.has(t))throw e();x(n),b(n.parameterDescriptors),r.set(t,n)}else x(n),b(n.parameterDescriptors),v.set(w,new Map([[t,n]]))}),w.sampleRate,void 0,void 0)}))}));return void 0===k?h.set(m,new Map([[g,E]])):k.set(g,E),E.then((function(){var t=f.get(m);void 0===t?f.set(m,new Set([g])):t.add(g)})).finally((function(){var t=h.get(m);void 0!==t&&t.delete(g)})),E}}(Hn,kn,function(t){return function(e){return new Promise((function(n,r){if(null!==t){var i=t.document.head;if(null===i)r(new SyntaxError);else{var a=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(o),u=t.onerror,l=function(){t.onerror=u,URL.revokeObjectURL(s)};t.onerror=function(e,n,i,a,o){return n===s||n===t.location.href&&1===i&&1===a?(l(),r(o),!1):null!==u?u(e,n,i,a,o):void 0},a.onerror=function(){l(),r(new SyntaxError)},a.onload=function(){l(),n()},a.src=s,a.type="module",i.appendChild(a)}}else r(new SyntaxError)}))}}(Wn),oi,(Qe=function(){return new DOMException("","AbortError")},function(){var t=Object(N.a)(D.a.mark((function t(e){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.text();case 7:return t.t0=t.sent,t.t1=n.url,t.abrupt("return",[t.t0,t.t1]);case 10:t.next=14;break;case 12:t.prev=12,t.t2=t.catch(0);case 14:throw Qe();case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()),Qn,ui,Kn,li,new WeakMap,new WeakMap,function(t,e){return Object(N.a)(D.a.mark((function n(){var r,i,a,o,s,u,l;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t){n.next=2;break}return n.abrupt("return",!0);case 2:if(null!==e){n.next=4;break}return n.abrupt("return",!1);case 4:return r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),a=URL.createObjectURL(r),o=!1,s=!1,n.prev=9,n.next=12,i.audioWorklet.addModule(a);case 12:return u=new t(i,"a",{numberOfOutputs:0}),l=i.createOscillator(),u.port.onmessage=function(){return o=!0},u.onprocessorerror=function(){return s=!0},l.connect(u),l.start(0),n.next=20,i.startRendering();case 20:n.next=24;break;case 22:n.prev=22,n.t0=n.catch(9);case 24:return n.prev=24,URL.revokeObjectURL(a),n.finish(24);case 27:return n.abrupt("return",o&&!s);case 28:case"end":return n.stop()}}),n,null,[[9,22,24,27]])})))}(li,Jn),Wn):void 0,hi=function(t,e){return function(n){return t(n)||e(n)}}(nr,Kn),fi=function(t,e,n,r,i,a,o,s,u,l,c){return function(h,f){var d=o(h)?h:a(h);if(i.has(f)){var p=n();return Promise.reject(p)}try{i.add(f)}catch(v){}return e(u,(function(){return u(d)}))?d.decodeAudioData(f).then((function(n){return Nt(f).catch((function(){})),e(s,(function(){return s(n)}))||c(n),t.add(n),n})):new Promise((function(e,n){var i=function(){var t=Object(N.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Nt(f);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),a=function(t){n(t),i()};try{d.decodeAudioData(f,(function(n){"function"!==typeof n.copyFromChannel&&(l(n),V(n)),t.add(n),i().then((function(){return e(n)}))}),(function(t){a(null===t?r():t)}))}catch(p){a(p)}}))}}(sr,Hn,(function(){return new DOMException("","DataCloneError")}),(function(){return new DOMException("","EncodingError")}),new WeakSet,Qn,hi,z,Yt,cr,hr),di=(Je=ci,Ke=or,$e=fr,tn=br,en=kr,nn=Or,rn=Mr,an=Lr,on=jr,sn=fi,un=Ir,ln=Nr,cn=Br,hn=Ur,fn=Xr,dn=$r,pn=ti,vn=ni,mn=ii,function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t,r){var i;return Object(o.a)(this,n),(i=e.call(this,t,r))._nativeContext=t,i._audioWorklet=void 0===Je?void 0:{addModule:function(t,e){return Je(Object(q.a)(i),t,e)}},i}return Object(P.a)(n,[{key:"audioWorklet",get:function(){return this._audioWorklet}},{key:"createAnalyser",value:function(){return new Ke(this)}},{key:"createBiquadFilter",value:function(){return new en(this)}},{key:"createBuffer",value:function(t,e,n){return new $e({length:e,numberOfChannels:t,sampleRate:n})}},{key:"createBufferSource",value:function(){return new tn(this)}},{key:"createChannelMerger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new nn(this,{numberOfInputs:t})}},{key:"createChannelSplitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new rn(this,{numberOfOutputs:t})}},{key:"createConstantSource",value:function(){return new an(this)}},{key:"createConvolver",value:function(){return new on(this)}},{key:"createDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new un(this,{maxDelayTime:t})}},{key:"createDynamicsCompressor",value:function(){return new ln(this)}},{key:"createGain",value:function(){return new cn(this)}},{key:"createIIRFilter",value:function(t,e){return new hn(this,{feedback:e,feedforward:t})}},{key:"createOscillator",value:function(){return new fn(this)}},{key:"createPanner",value:function(){return new dn(this)}},{key:"createPeriodicWave",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1};return new pn(this,Object(A.a)(Object(A.a)({},n),{},{imag:e,real:t}))}},{key:"createStereoPanner",value:function(){return new vn(this)}},{key:"createWaveShaper",value:function(){return new mn(this)}},{key:"decodeAudioData",value:function(t,e,n){return sn(this._nativeContext,t).then((function(t){return"function"===typeof e&&e(t),t}),(function(t){throw"function"===typeof n&&n(t),t}))}}]),n}(Wr)),pi=function(t,e,n,r){return function(t){Object(L.a)(a,t);var i=Object(R.a)(a);function a(t,s){var u;Object(o.a)(this,a);var l=n(t),c=e(l,s);if(r(l))throw TypeError();return(u=i.call(this,t,!0,c,null))._nativeMediaElementAudioSourceNode=c,u}return Object(P.a)(a,[{key:"mediaElement",get:function(){return this._nativeMediaElementAudioSourceNode.mediaElement}}]),a}(t)}(ar,(function(t,e){return t.createMediaElementSource(e.mediaElement)}),Qn,Kn),vi=function(t,e,n,r){return function(t){Object(L.a)(a,t);var i=Object(R.a)(a);function a(t,s){var u;Object(o.a)(this,a);var l=n(t);if(r(l))throw new TypeError;var c=Object(A.a)(Object(A.a)({},Xt),s),h=e(l,c);return(u=i.call(this,t,!1,h,null))._nativeMediaStreamAudioDestinationNode=h,u}return Object(P.a)(a,[{key:"stream",get:function(){return this._nativeMediaStreamAudioDestinationNode.stream}}]),a}(t)}(ar,(function(t,e){var n=t.createMediaStreamDestination();return Jt(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:function(){return 0}}),n}),Qn,Kn),mi=function(t,e,n,r){return function(t){Object(L.a)(a,t);var i=Object(R.a)(a);function a(t,s){var u;Object(o.a)(this,a);var l=n(t),c=e(l,s);if(r(l))throw new TypeError;return(u=i.call(this,t,!0,c,null))._nativeMediaStreamAudioSourceNode=c,u}return Object(P.a)(a,[{key:"mediaStream",get:function(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}]),a}(t)}(ar,(function(t,e){var n=e.mediaStream,r=n.getAudioTracks();r.sort((function(t,e){return t.id<e.id?-1:t.id>e.id?1:0}));var i=r.slice(0,1),a=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:n}),a}),Qn,Kn),gi=function(t,e,n){return function(t){Object(L.a)(i,t);var r=Object(R.a)(i);function i(t,a){Object(o.a)(this,i);var s=n(t),u=e(s,a);return r.call(this,t,!0,u,null)}return i}(t)}(ar,function(t,e){return function(n,r){var i=r.mediaStreamTrack;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);var a=new MediaStream([i]),o=n.createMediaStreamSource(a);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return o}}(Ut,Kn),Qn),yi=function(t,e,n,r,i,a,s,u,l){return function(t){Object(L.a)(h,t);var c=Object(R.a)(h);function h(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(o.a)(this,h),null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(i)}catch(d){if(12===d.code&&"sampleRate is not in range"===d.message)throw n();throw d}if(null===e)throw r();if(!nt(i.latencyHint))throw new TypeError("The provided value '".concat(i.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==i.sampleRate&&e.sampleRate!==i.sampleRate)throw n();t=c.call(this,e,2);var a=i.latencyHint,s=e,u=s.sampleRate;if(t._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===a?512/u:"interactive"===a||void 0===a?256/u:"playback"===a?1024/u:128*Math.max(2,Math.min(128,Math.round(a*u/128)))/u,t._nativeAudioContext=e,"webkitAudioContext"===l.name?(t._nativeGainNode=e.createGain(),t._nativeOscillatorNode=e.createOscillator(),t._nativeGainNode.gain.value=1e-37,t._nativeOscillatorNode.connect(t._nativeGainNode).connect(e.destination),t._nativeOscillatorNode.start()):(t._nativeGainNode=null,t._nativeOscillatorNode=null),t._state=null,"running"===e.state){t._state="suspended";var f=function n(){"suspended"===t._state&&(t._state=null),e.removeEventListener("statechange",n)};e.addEventListener("statechange",f)}return t}return Object(P.a)(h,[{key:"baseLatency",get:function(){return this._baseLatency}},{key:"state",get:function(){return null!==this._state?this._state:this._nativeAudioContext.state}},{key:"close",value:function(){var t=this;return"closed"===this.state?this._nativeAudioContext.close().then((function(){throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((function(){null!==t._nativeGainNode&&null!==t._nativeOscillatorNode&&(t._nativeOscillatorNode.stop(),t._nativeGainNode.disconnect(),t._nativeOscillatorNode.disconnect()),et(t)})))}},{key:"createMediaElementSource",value:function(t){return new i(this,{mediaElement:t})}},{key:"createMediaStreamDestination",value:function(){return new a(this)}},{key:"createMediaStreamSource",value:function(t){return new s(this,{mediaStream:t})}},{key:"createMediaStreamTrackSource",value:function(t){return new u(this,{mediaStreamTrack:t})}},{key:"resume",value:function(){var t=this;return"suspended"===this._state?new Promise((function(e,n){t._nativeAudioContext.addEventListener("statechange",(function r(){t._nativeAudioContext.removeEventListener("statechange",r),"running"===t._nativeAudioContext.state?e():t.resume().then(e,n)}))})):this._nativeAudioContext.resume().catch((function(t){if(void 0===t||15===t.code)throw e();throw t}))}},{key:"suspend",value:function(){return this._nativeAudioContext.suspend().catch((function(t){if(void 0===t)throw e();throw t}))}}]),h}(t)}(di,Ut,kn,An,pi,vi,mi,gi,er),_i=(gn=Hr,function(t){var e=gn.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e}),bi=(yn=_i,function(t,e){yn(t).add(e)}),xi=function(t){return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e[r];if(void 0===a)throw t();return bt(n)?a.connect(n,0,i):a.connect(n,0)}}(F),wi=function(t){return function(e,n){t(e).delete(n)}}(_i),Si=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?e.forEach((function(t){return t.disconnect()})):"number"===typeof n?zt(t,e,n).disconnect():bt(n)?void 0===r?e.forEach((function(t){return t.disconnect(n)})):void 0===i?zt(t,e,r).disconnect(n,0):zt(t,e,r).disconnect(n,0,i):void 0===r?e.forEach((function(t){return t.disconnect(n)})):zt(t,e,r).disconnect(n,0)}}(F),ki=new WeakMap,Ti=function(t,e){return function(n){return e(t,n)}}(ki,w),Ei=function(t,e,n,r,i,a,o,s,u,l,c,h,f){return function(d,p,v,g){if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw u();var y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some((function(t){return t<1})))throw u();if(y.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw u();var _=g.channelCount*g.numberOfInputs,b=y.reduce((function(t,e){return t+e}),0),x=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length;if(_+x>6||b>6)throw u();for(var w=new MessageChannel,S=[],k=[],T=0;T<g.numberOfInputs;T+=1)S.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(i(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));var E=[];if(void 0!==v.parameterDescriptors){var C,O=Object(J.a)(v.parameterDescriptors);try{var M=function(){var t=C.value,e=t.defaultValue,n=t.maxValue,r=t.minValue,i=t.name,o=a(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===e?0:e});Object.defineProperties(o.offset,{defaultValue:{get:function(){return void 0===e?0:e}},maxValue:{get:function(){return void 0===n?W:n}},minValue:{get:function(){return void 0===r?H:r}}}),E.push(o)};for(O.s();!(C=O.n()).done;)M()}catch(ut){O.e(ut)}finally{O.f()}}for(var P=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+x)}),L=ne(p,d.sampleRate),R=s(d,L,_+x,Math.max(1,b)),j=i(d,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),I=[],D=0;D<g.numberOfOutputs;D+=1)I.push(r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[D]}));for(var N=0;N<g.numberOfInputs;N+=1){S[N].connect(k[N]);for(var B=0;B<g.channelCount;B+=1)k[N].connect(P,B,N*g.channelCount+B)}var z=new kt(void 0===v.parameterDescriptors?[]:v.parameterDescriptors.map((function(t,e){var n=t.name,r=E[e];return r.connect(P,0,_+e),r.start(0),[n,r.offset]})));P.connect(R);var F,V,U=g.channelInterpretation,q=null,G=0===g.numberOfOutputs?[R]:I,X={get bufferSize(){return L},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return U},set channelInterpretation(t){var e,n=Object(J.a)(S);try{for(n.s();!(e=n.n()).done;){e.value.channelInterpretation=t}}catch(ut){n.e(ut)}finally{n.f()}U=t},get context(){return R.context},get inputs(){return S},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(t){"function"===typeof q&&X.removeEventListener("processorerror",q),"function"===typeof(q="function"===typeof t?t:null)&&X.addEventListener("processorerror",q)},get parameters(){return z},get port(){return w.port2},addEventListener:function(){return R.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,G),disconnect:l.bind(null,G),dispatchEvent:function(){return R.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return R.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},Y=new Map;w.port1.addEventListener=(F=w.port1.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var r="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==r){var i=Y.get(e[1]);void 0!==i?e[1]=i:(e[1]=function(t){c(d.currentTime,d.sampleRate,(function(){return r(t)}))},Y.set(r,e[1]))}}return F.call(w.port1,e[0],e[1],e[2])}),w.port1.removeEventListener=(V=w.port1.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var r=Y.get(e[1]);void 0!==r&&(Y.delete(e[1]),e[1]=r)}return V.call(w.port1,e[0],e[1],e[2])});var Z=null;Object.defineProperty(w.port1,"onmessage",{get:function(){return Z},set:function(t){"function"===typeof Z&&w.port1.removeEventListener("message",Z),"function"===typeof(Z="function"===typeof t?t:null)&&(w.port1.addEventListener("message",Z),w.port1.start())}}),v.prototype.port=w.port1;var Q=null;(function(t,e,n,r){var i=m.get(t);void 0===i&&(i=new WeakMap,m.set(t,i));var a=ie(n,r);return i.set(e,a),a})(d,X,v,g).then((function(t){return Q=t}));var K=Mt(g.numberOfInputs,g.channelCount),$=Mt(g.numberOfOutputs,y),tt=void 0===v.parameterDescriptors?[]:v.parameterDescriptors.reduce((function(t,e){var n=e.name;return Object(A.a)(Object(A.a)({},t),{},Object(Et.a)({},n,new Float32Array(128)))}),{}),et=!0,nt=function(){g.numberOfOutputs>0&&R.disconnect(j);for(var t=0,e=0;t<g.numberOfOutputs;t+=1){for(var n=I[t],r=0;r<y[t];r+=1)j.disconnect(n,e+r,r);e+=y[t]}},rt=new Map;R.onaudioprocess=function(t){var e=t.inputBuffer,n=t.outputBuffer;null!==Q&&function(){for(var t=h(X),r=function(r){for(var i=0;i<g.numberOfInputs;i+=1)for(var a=0;a<g.channelCount;a+=1)Ct(e,K[i],a,a,r);void 0!==v.parameterDescriptors&&v.parameterDescriptors.forEach((function(t,n){var i=t.name;Ct(e,tt,i,_+n,r)}));for(var o=0;o<g.numberOfInputs;o+=1)for(var s=0;s<y[o];s+=1)0===$[o][s].byteLength&&($[o][s]=new Float32Array(128));try{var u=K.map((function(e,n){if(t[n].size>0)return rt.set(n,L/128),e;var r=rt.get(n);return void 0===r?[]:(e.every((function(t){return t.every((function(t){return 0===t}))}))&&(1===r?rt.delete(n):rt.set(n,r-1)),e)})),l=c(d.currentTime+r/d.sampleRate,d.sampleRate,(function(){return Q.process(u,$,tt)}));et=l;for(var h=0,f=0;h<g.numberOfOutputs;h+=1){for(var p=0;p<y[h];p+=1)Ot(n,$[h],p,f+p,r);f+=y[h]}}catch(C){et=!1,X.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}))}if(!et){for(var m=0;m<g.numberOfInputs;m+=1){S[m].disconnect(k[m]);for(var b=0;b<g.channelCount;b+=1)k[r].disconnect(P,b,m*g.channelCount+b)}if(void 0!==v.parameterDescriptors)for(var x=v.parameterDescriptors.length,w=0;w<x;w+=1){var T=E[w];T.disconnect(P,0,_+w),T.stop()}return P.disconnect(R),R.onaudioprocess=null,it?nt():st(),"break"}},i=0;i<L;i+=128){if("break"===r(i))break}}()};var it=!1,at=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ot=function(){return R.connect(at).connect(d.destination)},st=function(){R.disconnect(at),at.disconnect()};return ot(),f(X,(function(){if(et){st(),g.numberOfOutputs>0&&R.connect(j);for(var t=0,e=0;t<g.numberOfOutputs;t+=1){for(var n=I[t],r=0;r<y[t];r+=1)j.connect(n,e+r,r);e+=y[t]}}it=!0}),(function(){et&&(ot(),nt()),it=!1}))}}(xi,F,Ut,Cr,oe,Pr,he,Sn,kn,Si,oi,Ti,Tr),Ci=function(t,e,n,r,i){return function(a,o,s,u,l,c){if(null!==s)try{var h=new s(a,u,c),f=new Map,d=null;if(Object.defineProperties(h,{channelCount:{get:function(){return c.channelCount},set:function(){throw t()}},channelCountMode:{get:function(){return"explicit"},set:function(){throw t()}},onprocessorerror:{get:function(){return d},set:function(t){"function"===typeof d&&h.removeEventListener("processorerror",d),"function"===typeof(d="function"===typeof t?t:null)&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(m=h.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("processorerror"===e[0]){var r="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==r){var i=f.get(e[1]);void 0!==i?e[1]=i:(e[1]=function(t){"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),r(t)):r(new ErrorEvent(e[0],Object(A.a)({},t)))},f.set(r,e[1]))}}return m.call(h,"error",e[1],e[2]),m.call.apply(m,[h].concat(e))}),h.removeEventListener=(v=h.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("processorerror"===e[0]){var r=f.get(e[1]);void 0!==r&&(f.delete(e[1]),e[1]=r)}return v.call(h,"error",e[1],e[2]),v.call(h,e[0],e[1],e[2])}),0!==c.numberOfOutputs){var p=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});h.connect(p).connect(a.destination);return i(h,(function(){return p.disconnect()}),(function(){return p.connect(a.destination)}))}return h}catch(g){if(11===g.code)throw r();throw g}var v,m;if(void 0===l)throw r();return function(t){var e=(new MessageChannel).port1;try{e.postMessage(t)}finally{e.close()}}(c),e(a,o,l,c)}}(Ut,Ei,he,kn,Tr),Oi=function(t,e,n,r,i,o,s,u,l,c,h,f,d,p,v,m){return function(g,y,_){var b=new WeakMap,x=null,w=function(){var u=Object(N.a)(D.a.mark((function u(w,S,k){var T,E,C,O,M,A,P,L,R,j,I,z,F,V,U,q,H,W,G,X,Y,Z,Q,K,$,tt,et,nt,rt,it,at,ot,st,ut;return D.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(T=h(w),E=null,C=B(T,S),O=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount),null===f){for(M=O.reduce((function(t,e){return t+e}),0),A=i(S,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),P=[],L=0;L<w.numberOfOutputs;L+=1)P.push(r(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[L]}));(R=s(S,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})).connect=e.bind(null,P),R.disconnect=l.bind(null,P),E=[A,P,R]}else C||(T=new f(S,g));if(b.set(S,null===E?T:E[2]),null===E){u.next=41;break}if(null!==x){u.next=32;break}if(void 0!==_){u.next=10;break}throw new Error("Missing the processor constructor.");case 10:if(null!==d){u.next=12;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 12:if(j=w.channelCount*w.numberOfInputs,I=void 0===_.parameterDescriptors?0:_.parameterDescriptors.length,z=j+I,F=function(){var t=Object(N.a)(D.a.mark((function t(){var e,n,u,l,c,h,f,g,_,b,x,T,E;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=new d(z,128*Math.ceil(w.context.length/128),S.sampleRate),n=[],u=[],l=0;l<y.numberOfInputs;l+=1)n.push(s(e,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),u.push(i(e,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));return t.next=6,Promise.all(Array.from(w.parameters.values()).map(function(){var t=Object(N.a)(D.a.mark((function t(n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n.value}),t.next=3,p(e,n,r.offset,k);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:for(c=t.sent,h=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,j+I)}),f=0;f<y.numberOfInputs;f+=1)for(n[f].connect(u[f]),g=0;g<y.channelCount;g+=1)u[f].connect(h,g,f*y.channelCount+g);_=Object(J.a)(c.entries());try{for(_.s();!(b=_.n()).done;)x=Object(a.a)(b.value,2),T=x[0],(E=x[1]).connect(h,0,j+T),E.start(0)}catch(C){_.e(C)}finally{_.f()}return h.connect(e.destination),t.next=14,Promise.all(n.map((function(t){return v(w,e,t,k)})));case 14:return t.abrupt("return",m(e));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u.t0=Pt,u.t1=w,0!==z){u.next=22;break}u.t2=null,u.next=25;break;case 22:return u.next=24,F();case 24:u.t2=u.sent;case 25:u.t3=u.t2,u.t4=S,u.t5=y,u.t6=O,u.t7=_,u.t8=c,x=(0,u.t0)(u.t1,u.t3,u.t4,u.t5,u.t6,u.t7,u.t8);case 32:return u.next=34,x;case 34:for(V=u.sent,U=n(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),q=E,H=Object(a.a)(q,3),W=H[0],G=H[1],X=H[2],null!==V&&(U.buffer=V,U.start(0)),U.connect(W),Y=0,Z=0;Y<w.numberOfOutputs;Y+=1){for(Q=G[Y],K=0;K<O[Y];K+=1)W.connect(Q,Z+K,K);Z+=O[Y]}return u.abrupt("return",X);case 41:if(C){u.next=61;break}$=Object(J.a)(w.parameters.entries()),u.prev=43,$.s();case 45:if((tt=$.n()).done){u.next=51;break}return et=Object(a.a)(tt.value,2),nt=et[0],rt=et[1],u.next=49,p(S,rt,T.parameters.get(nt),k);case 49:u.next=45;break;case 51:u.next=56;break;case 53:u.prev=53,u.t9=u.catch(43),$.e(u.t9);case 56:return u.prev=56,$.f(),u.finish(56);case 59:u.next=78;break;case 61:it=Object(J.a)(w.parameters.entries()),u.prev=62,it.s();case 64:if((at=it.n()).done){u.next=70;break}return ot=Object(a.a)(at.value,2),st=ot[0],ut=ot[1],u.next=68,t(S,ut,T.parameters.get(st),k);case 68:u.next=64;break;case 70:u.next=75;break;case 72:u.prev=72,u.t10=u.catch(62),it.e(u.t10);case 75:return u.prev=75,it.f(),u.finish(75);case 78:return u.next=80,v(w,S,T,k);case 80:return u.abrupt("return",T);case 81:case"end":return u.stop()}}),u,null,[[43,53,56,59],[62,72,75,78]])})));return function(t,e,n){return u.apply(this,arguments)}}();return{render:function(t,e,n){u(e,t);var r=b.get(e);return void 0!==r?Promise.resolve(r):w(t,e,n)}}}}(vr,xi,mr,Cr,oe,Pr,he,wi,Si,oi,pt,li,Jn,gr,Yn,Fr),Mi=function(t){return function(e){return t.get(e)}}(si),Ai=function(t){return function(e,n){t.set(e,n)}}(ki),Pi=ai?function(t,e,n,r,i,a,s,u,l,c,h,f,d,p){return function(e){Object(L.a)(g,e);var m=Object(R.a)(g);function g(e,p,y){var _,b;Object(o.a)(this,g);var x=u(e),w=l(x),S=h(Object(A.a)(Object(A.a)({},Tt),y));d(S);var k=v.get(x),T=null===k||void 0===k?void 0:k.get(p),E=w||"closed"!==x.state?x:null!==(b=s(x))&&void 0!==b?b:x,C=i(E,w?null:e.baseLatency,c,p,T,S),O=w?r(p,S,T):null;_=m.call(this,e,!0,C,O);var M=[];C.parameters.forEach((function(t,e){var r=n(Object(q.a)(_),w,t);M.push([e,r])})),_._nativeAudioWorkletNode=C,_._onprocessorerror=null,_._parameters=new kt(M),w&&t(x,Object(q.a)(_));var P=a(Object(q.a)(_)).activeInputs;return f(C,P),_}return Object(P.a)(g,[{key:"onprocessorerror",get:function(){return this._onprocessorerror},set:function(t){var e="function"===typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;var n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}},{key:"parameters",get:function(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}},{key:"port",get:function(){return this._nativeAudioWorkletNode.port}}]),g}(e)}(bi,ar,_r,Oi,Ci,K,Mi,Qn,Kn,li,(function(t){return Object(A.a)(Object(A.a)({},t),{},{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(function(){return 1}))})}),Ai,(function(t){var e=new MessageChannel,n=e.port1,r=e.port2;try{n.postMessage(t)}finally{n.close(),r.close()}}),Bn):void 0,Li=(function(t,e,n,r,i){}(Ut,kn,An,Wr,er),function(t,e){return function(n,r,i){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,i)}catch(a){if("SyntaxError"===a.name)throw t();throw a}}}(kn,Jn)),Ri=function(t,e,n,r,i,a,o,s){var u=[];return function(l,c){return n(l).render(l,c,u).then((function(){return Promise.all(Array.from(r(c)).map((function(t){return n(t).render(t,c,u)})))})).then((function(){return i(c)})).then((function(n){return"function"!==typeof n.copyFromChannel?(o(n),V(n)):e(a,(function(){return a(n)}))||s(n),t.add(n),n}))}}(sr,Hn,Xn,_i,Fr,z,cr,hr),ji=(function(t,e,n,r,i){}(Hn,Ut,Li,Wr,Ri),function(t,e,n,r,i){return function(t){Object(L.a)(s,t);var a=Object(R.a)(s);function s(t,n,i){var u,l;if(Object(o.a)(this,s),"number"===typeof t&&void 0!==n&&void 0!==i)l={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!==typeof t)throw new Error("The given parameters are not valid.");l=t}var c=Object(A.a)(Object(A.a)({},Tn),l),h=c.length,f=c.numberOfChannels,d=c.sampleRate,p=r(f,h,d);return e(Yt,(function(){return Yt(p)}))||p.addEventListener("statechange",function(){var t=0;return function e(n){"running"===u._state&&(t>0?(p.removeEventListener("statechange",e),n.stopImmediatePropagation(),u._waitForThePromiseToSettle(n)):t+=1)}}()),(u=a.call(this,p,f))._length=h,u._nativeOfflineAudioContext=p,u._state=null,u}return Object(P.a)(s,[{key:"length",get:function(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}},{key:"state",get:function(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}},{key:"startRendering",value:function(){var t=this;return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((function(){t._state=null,et(t)})))}},{key:"_waitForThePromiseToSettle",value:function(t){var e=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((function(){return e._waitForThePromiseToSettle(t)}))}}]),s}(t)}(di,Hn,Ut,Li,Ri)),Ii=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(f,nr),Di=(_n=l,bn=rr,function(t){return _n.has(t)||bn(t)}),Ni=(xn=h,wn=ir,function(t){return xn.has(t)||wn(t)}),Bi=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(f,Kn);function zi(t,e){if(!t)throw new Error(e)}function Fi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(e<=t&&t<=n))throw new RangeError("Value must be within [".concat(e,", ").concat(n,"], got: ").concat(t))}function Vi(t){t.isOffline||"running"===t.state||Hi('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var Ui=console;function qi(){var t;(t=Ui).log.apply(t,arguments)}function Hi(){var t;(t=Ui).warn.apply(t,arguments)}function Wi(t){return"undefined"===typeof t}function Gi(t){return!Wi(t)}function Xi(t){return"function"===typeof t}function Yi(t){return"number"===typeof t}function Zi(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Qi(t){return"boolean"===typeof t}function Ji(t){return Array.isArray(t)}function Ki(t){return"string"===typeof t}function $i(t){return Ki(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function ta(t){return new yi(t)}function ea(t,e,n){return new ji(t,e,n)}var na="object"===typeof self?self:null,ra=na&&(na.hasOwnProperty("AudioContext")||na.hasOwnProperty("webkitAudioContext"));var ia=n(6),aa=n(5);function oa(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function sa(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))}Object.create;Object.create;var ua=function(){function t(e,n,r){Object(o.a)(this,t),this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}return Object(P.a)(t,[{key:"_createWorker",value:function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}},{key:"_createTimeout",value:function(){var t=this;this._timeout=setTimeout((function(){t._createTimeout(),t._callback()}),1e3*this._updateInterval)}},{key:"_createClock",value:function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}},{key:"_disposeClock",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}},{key:"updateInterval",get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}},{key:"type",get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}},{key:"dispose",value:function(){this._disposeClock()}}]),t}();function la(t){return Ni(t)}function ca(t){return Di(t)}function ha(t){return Bi(t)}function fa(t){return Ii(t)}function da(t){return t instanceof AudioBuffer}function pa(t,e){return"value"===t||la(e)||ca(e)||da(e)}function va(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var i=n.shift();if(Zi(t)&&Zi(i))for(var a in i)pa(a,i[a])?t[a]=i[a]:Zi(i[a])?(t[a]||Object.assign(t,Object(Et.a)({},a,{})),va(t[a],i[a])):Object.assign(t,Object(Et.a)({},a,i[a]));return va.apply(void 0,[t].concat(n))}function ma(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i={},a=Array.from(e);if(Zi(a[0])&&r&&!Reflect.has(a[0],r)){var o=Object.keys(a[0]).some((function(e){return Reflect.has(t,e)}));o||(va(i,Object(Et.a)({},r,a[0])),n.splice(n.indexOf(r),1),a.shift())}if(1===a.length&&Zi(a[0]))va(i,a[0]);else for(var s=0;s<n.length;s++)Gi(a[s])&&(i[n[s]]=a[s]);return va(t,i)}function ga(t,e){return Wi(t)?e:t}function ya(t,e){return e.forEach((function(e){Reflect.has(t,e)&&delete t[e]})),t}var _a=function(){function t(){Object(o.a)(this,t),this.debug=!1,this._wasDisposed=!1}return Object(P.a)(t,[{key:"log",value:function(){if(this.debug||na&&this.toString()===na.TONE_DEBUG_CLASS){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];qi.apply(void 0,[this].concat(e))}}},{key:"dispose",value:function(){return this._wasDisposed=!0,this}},{key:"disposed",get:function(){return this._wasDisposed}},{key:"toString",value:function(){return this.name}}],[{key:"getDefaults",value:function(){return{}}}]),t}();_a.version=r;var ba=1e-6;function xa(t,e){return t>e+ba}function wa(t,e){return xa(t,e)||ka(t,e)}function Sa(t,e){return t+ba<e}function ka(t,e){return Math.abs(t-e)<ba}function Ta(t,e,n){return Math.max(Math.min(t,n),e)}var Ea=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this)).name="Timeline",t._timeline=[];var r=ma(n.getDefaults(),arguments,["memory"]);return t.memory=r.memory,t.increasing=r.increasing,t}return Object(P.a)(n,[{key:"length",get:function(){return this._timeline.length}},{key:"add",value:function(t){if(zi(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];zi(wa(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}return this}},{key:"remove",value:function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return-1!==n?this._timeline[n]:null}},{key:"peek",value:function(){return this._timeline[0]}},{key:"shift",value:function(){return this._timeline.shift()}},{key:"getAfter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}},{key:"getBefore",value:function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null}},{key:"cancel",value:function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(ka(this._timeline[e].time,t)){for(var n=e;n>=0&&ka(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&wa(this._timeline[0].time,t)&&(this._timeline=[]);return this}},{key:"cancelBefore",value:function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}},{key:"previousEvent",value:function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}},{key:"_search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;var n=0,r=this._timeline.length,i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<i;){var a=Math.floor(n+(i-n)/2),o=this._timeline[a],s=this._timeline[a+1];if(ka(o[e],t)){for(var u=a;u<this._timeline.length;u++){var l=this._timeline[u];if(!ka(l[e],t))break;a=u}return a}if(Sa(o[e],t)&&xa(s[e],t))return a;xa(o[e],t)?i=a:n=a+1}return-1}},{key:"_iterate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(e,n+1).forEach(t)}},{key:"forEach",value:function(t){return this._iterate(t),this}},{key:"forEachBefore",value:function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}},{key:"forEachAfter",value:function(t,e){var n=this._search(t);return this._iterate(e,n+1),this}},{key:"forEachBetween",value:function(t,e,n){var r=this._search(t),i=this._search(e);return-1!==r&&-1!==i?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,r,i)):-1===r&&this._iterate(n,0,i),this}},{key:"forEachFrom",value:function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}},{key:"forEachAtTime",value:function(t,e){var n=this._search(t);if(-1!==n&&ka(this._timeline[n].time,t)){for(var r=n,i=n;i>=0&&ka(this._timeline[i].time,t);i--)r=i;this._iterate((function(t){e(t)}),r,n)}return this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._timeline=[],this}}],[{key:"getDefaults",value:function(){return{memory:1/0,increasing:!1}}}]),n}(_a),Ca=[];function Oa(t){Ca.push(t)}var Ma=[];function Aa(t){Ma.push(t)}function Pa(t){Ma.forEach((function(e){return e(t)}))}var La=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="Emitter",t}return Object(P.a)(n,[{key:"on",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(t){Wi(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)})),this}},{key:"once",value:function(t,e){var n=this;return this.on(t,(function r(){e.apply(void 0,arguments),n.off(t,r)})),this}},{key:"off",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(r){if(Wi(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(Wi(e))n._events[t]=[];else for(var i=n._events[t],a=i.length-1;a>=0;a--)i[a]===e&&i.splice(a,1)})),this}},{key:"emit",value:function(t){if(this._events&&this._events.hasOwnProperty(t)){for(var e=this._events[t].slice(0),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=e.length;a<o;a++)e[a].apply(this,r)}return this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._events=void 0,this}}],[{key:"mixin",value:function(t){["on","once","off","emit"].forEach((function(e){var r=Object.getOwnPropertyDescriptor(n.prototype,e);Object.defineProperty(t.prototype,e,r)}))}}]),n}(_a),Ra=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).isOffline=!1,t}return Object(P.a)(n,[{key:"toJSON",value:function(){return{}}}]),n}(La),ja=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this)).name="Context",t._constants=new Map,t._timeouts=new Ea,t._timeoutIds=0,t._initialized=!1,t.isOffline=!1,t._workletModules=new Map;var r=ma(n.getDefaults(),arguments,["context"]);return r.context?t._context=r.context:t._context=ta({latencyHint:r.latencyHint}),t._ticker=new ua(t.emit.bind(Object(q.a)(t),"tick"),r.clockSource,r.updateInterval),t.on("tick",t._timeoutLoop.bind(Object(q.a)(t))),t._context.onstatechange=function(){t.emit("statechange",t.state)},t._setLatencyHint(r.latencyHint),t.lookAhead=r.lookAhead,t}return Object(P.a)(n,[{key:"initialize",value:function(){var t;return this._initialized||(t=this,Ca.forEach((function(e){return e(t)})),this._initialized=!0),this}},{key:"createAnalyser",value:function(){return this._context.createAnalyser()}},{key:"createOscillator",value:function(){return this._context.createOscillator()}},{key:"createBufferSource",value:function(){return this._context.createBufferSource()}},{key:"createBiquadFilter",value:function(){return this._context.createBiquadFilter()}},{key:"createBuffer",value:function(t,e,n){return this._context.createBuffer(t,e,n)}},{key:"createChannelMerger",value:function(t){return this._context.createChannelMerger(t)}},{key:"createChannelSplitter",value:function(t){return this._context.createChannelSplitter(t)}},{key:"createConstantSource",value:function(){return this._context.createConstantSource()}},{key:"createConvolver",value:function(){return this._context.createConvolver()}},{key:"createDelay",value:function(t){return this._context.createDelay(t)}},{key:"createDynamicsCompressor",value:function(){return this._context.createDynamicsCompressor()}},{key:"createGain",value:function(){return this._context.createGain()}},{key:"createIIRFilter",value:function(t,e){return this._context.createIIRFilter(t,e)}},{key:"createPanner",value:function(){return this._context.createPanner()}},{key:"createPeriodicWave",value:function(t,e,n){return this._context.createPeriodicWave(t,e,n)}},{key:"createStereoPanner",value:function(){return this._context.createStereoPanner()}},{key:"createWaveShaper",value:function(){return this._context.createWaveShaper()}},{key:"createMediaStreamSource",value:function(t){return zi(fa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}},{key:"createMediaElementSource",value:function(t){return zi(fa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}},{key:"createMediaStreamDestination",value:function(){return zi(fa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}},{key:"decodeAudioData",value:function(t){return this._context.decodeAudioData(t)}},{key:"currentTime",get:function(){return this._context.currentTime}},{key:"state",get:function(){return this._context.state}},{key:"sampleRate",get:function(){return this._context.sampleRate}},{key:"listener",get:function(){return this.initialize(),this._listener},set:function(t){zi(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}},{key:"transport",get:function(){return this.initialize(),this._transport},set:function(t){zi(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}},{key:"draw",get:function(){return this.initialize(),this._draw},set:function(t){zi(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}},{key:"destination",get:function(){return this.initialize(),this._destination},set:function(t){zi(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}},{key:"createAudioWorkletNode",value:function(t,e){return function(t,e,n){return zi(Gi(Pi),"This node only works in a secure context (https or localhost)"),new Pi(t,e,n)}(this.rawContext,t,e)}},{key:"addAudioWorkletModule",value:function(t,e){return sa(this,void 0,void 0,D.a.mark((function n(){return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return zi(Gi(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),n.next=4,this._workletModules.get(e);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"workletsAreReady",value:function(){return sa(this,void 0,void 0,D.a.mark((function t(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this._workletModules.forEach((function(t){return e.push(t)})),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"updateInterval",get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}},{key:"clockSource",get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}},{key:"latencyHint",get:function(){return this._latencyHint}},{key:"_setLatencyHint",value:function(t){var e=0;if(this._latencyHint=t,Ki(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}},{key:"rawContext",get:function(){return this._context}},{key:"now",value:function(){return this._context.currentTime+this.lookAhead}},{key:"immediate",value:function(){return this._context.currentTime}},{key:"resume",value:function(){return fa(this._context)?this._context.resume():Promise.resolve()}},{key:"close",value:function(){return sa(this,void 0,void 0,D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!fa(this._context)){t.next=3;break}return t.next=3,this._context.close();case 3:this._initialized&&Pa(this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getConstant",value:function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),r=0;r<n.length;r++)n[r]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}},{key:"dispose",value:function(){var t=this;return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((function(e){return t._constants[e].disconnect()})),this}},{key:"_timeoutLoop",value:function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}},{key:"setTimeout",value:function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}},{key:"clearTimeout",value:function(t){var e=this;return this._timeouts.forEach((function(n){n.id===t&&e._timeouts.remove(n)})),this}},{key:"clearInterval",value:function(t){return this.clearTimeout(t)}},{key:"setInterval",value:function(t,e){var n=this,r=++this._timeoutIds;return function i(){var a=n.now();n._timeouts.add({callback:function(){t(),i()},id:r,time:a+e})}(),r}}],[{key:"getDefaults",value:function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}}]),n}(Ra),Ia=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).lookAhead=0,t.latencyHint=0,t.isOffline=!1,t}return Object(P.a)(n,[{key:"createAnalyser",value:function(){return{}}},{key:"createOscillator",value:function(){return{}}},{key:"createBufferSource",value:function(){return{}}},{key:"createBiquadFilter",value:function(){return{}}},{key:"createBuffer",value:function(t,e,n){return{}}},{key:"createChannelMerger",value:function(t){return{}}},{key:"createChannelSplitter",value:function(t){return{}}},{key:"createConstantSource",value:function(){return{}}},{key:"createConvolver",value:function(){return{}}},{key:"createDelay",value:function(t){return{}}},{key:"createDynamicsCompressor",value:function(){return{}}},{key:"createGain",value:function(){return{}}},{key:"createIIRFilter",value:function(t,e){return{}}},{key:"createPanner",value:function(){return{}}},{key:"createPeriodicWave",value:function(t,e,n){return{}}},{key:"createStereoPanner",value:function(){return{}}},{key:"createWaveShaper",value:function(){return{}}},{key:"createMediaStreamSource",value:function(t){return{}}},{key:"createMediaElementSource",value:function(t){return{}}},{key:"createMediaStreamDestination",value:function(){return{}}},{key:"decodeAudioData",value:function(t){return Promise.resolve({})}},{key:"createAudioWorkletNode",value:function(t,e){return{}}},{key:"rawContext",get:function(){return{}}},{key:"addAudioWorkletModule",value:function(t,e){return sa(this,void 0,void 0,D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}}),t)})))}},{key:"resume",value:function(){return Promise.resolve()}},{key:"setTimeout",value:function(t,e){return 0}},{key:"clearTimeout",value:function(t){return this}},{key:"setInterval",value:function(t,e){return 0}},{key:"clearInterval",value:function(t){return this}},{key:"getConstant",value:function(t){return{}}},{key:"currentTime",get:function(){return 0}},{key:"state",get:function(){return{}}},{key:"sampleRate",get:function(){return 0}},{key:"listener",get:function(){return{}}},{key:"transport",get:function(){return{}}},{key:"draw",get:function(){return{}},set:function(t){}},{key:"destination",get:function(){return{}},set:function(t){}},{key:"now",value:function(){return 0}},{key:"immediate",value:function(){return 0}}]),n}(Ra);function Da(t,e){Ji(e)?e.forEach((function(e){return Da(t,e)})):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Na(t,e){Ji(e)?e.forEach((function(e){return Na(t,e)})):Object.defineProperty(t,e,{writable:!0})}var Ba=function(){},za=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this)).name="ToneAudioBuffer",t.onload=Ba;var r=ma(n.getDefaults(),arguments,["url","onload","onerror"]);return t.reverse=r.reverse,t.onload=r.onload,r.url&&da(r.url)||r.url instanceof n?t.set(r.url):Ki(r.url)&&t.load(r.url).catch(r.onerror),t}return Object(P.a)(n,[{key:"sampleRate",get:function(){return this._buffer?this._buffer.sampleRate:qa().sampleRate}},{key:"set",value:function(t){var e=this;return t instanceof n?t.loaded?this._buffer=t.get():t.onload=function(){e.set(t),e.onload(e)}:this._buffer=t,this._reversed&&this._reverse(),this}},{key:"get",value:function(){return this._buffer}},{key:"load",value:function(t){return sa(this,void 0,void 0,D.a.mark((function e(){var r,i,a=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.load(t).then((function(t){a.set(t),a.onload(a)})),n.downloads.push(r),e.prev=2,e.next=5,r;case 5:return e.prev=5,i=n.downloads.indexOf(r),n.downloads.splice(i,1),e.finish(5);case 9:return e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this,[[2,,5,9]])})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._buffer=void 0,this}},{key:"fromArray",value:function(t){for(var e=Ji(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=qa(),a=i.createBuffer(n,r,i.sampleRate),o=e||1!==n?t:[t],s=0;s<n;s++)a.copyToChannel(o[s],s);return this._buffer=a,this}},{key:"toMono",value:function(t){if(Yi(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,r=0;r<n;r++)for(var i=this.toArray(r),a=0;a<i.length;a++)e[a]+=i[a];e=e.map((function(t){return t/n})),this.fromArray(e)}return this}},{key:"toArray",value:function(t){if(Yi(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e}},{key:"getChannelData",value:function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,r=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);zi(r<i,"The start time must be less than the end time");for(var a=i-r,o=qa().createBuffer(this.numberOfChannels,a,this.sampleRate),s=0;s<this.numberOfChannels;s++)o.copyToChannel(this.getChannelData(s).subarray(r,i),s);return new n(o)}},{key:"_reverse",value:function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}},{key:"loaded",get:function(){return this.length>0}},{key:"duration",get:function(){return this._buffer?this._buffer.duration:0}},{key:"length",get:function(){return this._buffer?this._buffer.length:0}},{key:"numberOfChannels",get:function(){return this._buffer?this._buffer.numberOfChannels:0}},{key:"reverse",get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}],[{key:"getDefaults",value:function(){return{onerror:Ba,onload:Ba,reverse:!1}}},{key:"fromArray",value:function(t){return(new n).fromArray(t)}},{key:"fromUrl",value:function(t){return sa(this,void 0,void 0,D.a.mark((function e(){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new n,e.next=3,r.load(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))}},{key:"load",value:function(t){return sa(this,void 0,void 0,D.a.mark((function e(){var r,i,a,o,s,u,l,c,h,f;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.match(/\[([^\]\[]+\|.+)\]$/))){e.next=23;break}i=r[1].split("|"),a=i[0],o=Object(J.a)(i),e.prev=5,o.s();case 7:if((s=o.n()).done){e.next=14;break}if(u=s.value,!n.supportsType(u)){e.next=12;break}return a=u,e.abrupt("break",14);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:t=t.replace(r[0],a);case 23:return l=""===n.baseUrl||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",e.next=26,fetch(l+t);case 26:if((c=e.sent).ok){e.next=29;break}throw new Error("could not load url: ".concat(t));case 29:return e.next=31,c.arrayBuffer();case 31:return h=e.sent,e.next=34,qa().decodeAudioData(h);case 34:return f=e.sent,e.abrupt("return",f);case 36:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))}},{key:"supportsType",value:function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}},{key:"loaded",value:function(){return sa(this,void 0,void 0,D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:if(!n.downloads.length){t.next=7;break}return t.next=5,n.downloads[0];case 5:t.next=2;break;case 7:case"end":return t.stop()}}),t)})))}}]),n}(_a);za.baseUrl="",za.downloads=[];var Fa=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this,{clockSource:"offline",context:ha(arguments[0])?arguments[0]:ea(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ha(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})).name="OfflineContext",t._currentTime=0,t.isOffline=!0,t._duration=ha(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],t}return Object(P.a)(n,[{key:"now",value:function(){return this._currentTime}},{key:"currentTime",get:function(){return this._currentTime}},{key:"_renderClock",value:function(t){return sa(this,void 0,void 0,D.a.mark((function e(){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(this._duration-this._currentTime>=0)){e.next=11;break}if(this.emit("tick"),this._currentTime+=128/this.sampleRate,n++,r=Math.floor(this.sampleRate/128),!t||n%r!==0){e.next=9;break}return e.next=9,new Promise((function(t){return setTimeout(t,1)}));case 9:e.next=1;break;case 11:case"end":return e.stop()}}),e,this)})))}},{key:"render",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return sa(this,void 0,void 0,D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workletsAreReady();case 2:return e.next=4,this._renderClock(t);case 4:return e.next=6,this._context.startRendering();case 6:return n=e.sent,e.abrupt("return",new za(n));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return Promise.resolve()}}]),n}(ja),Va=new Ia,Ua=Va;function qa(){return Ua===Va&&ra&&Ha(new ja),Ua}function Ha(t){Ua=fa(t)?new ja(t):ha(t)?new Fa(t):t}function Wa(){return Ua.resume()}if(na&&!na.TONE_SILENCE_LOGGING){var Ga="v";0;var Xa=" * Tone.js ".concat(Ga).concat(r," * ");console.log("%c".concat(Xa),"background: #000; color: #fff")}function Ya(t){return Math.pow(10,t/20)}function Za(t){return Math.log(t)/Math.LN10*20}function Qa(t){return Math.pow(2,t/12)}var Ja=440;function Ka(t){return Math.round($a(t))}function $a(t){return 69+12*Math.log2(t/Ja)}function to(t){return Ja*Math.pow(2,(t-69)/12)}var eo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="TimeClass",t}return Object(P.a)(n,[{key:"_getExpressions",value:function(){var t=this;return Object.assign(Object(ia.a)(Object(aa.a)(n.prototype),"_getExpressions",this).call(this),{now:{method:function(e){return t._now()+new t.constructor(t.context,e).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(e){var r=new n(t.context,e).valueOf();return t._secondsToUnits(t.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})}},{key:"quantize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),i=Math.round(r/n),a=i*n,o=a-r;return r+o*e}},{key:"toNotation",value:function(){for(var t=this,e=this.toSeconds(),r=["1m"],i=1;i<9;i++){var a=Math.pow(2,i);r.push(a+"n."),r.push(a+"n"),r.push(a+"t")}r.push("0");var o=r[0],s=new n(this.context,r[0]).toSeconds();return r.forEach((function(r){var i=new n(t.context,r).toSeconds();Math.abs(i-e)<Math.abs(s-e)&&(o=r,s=i)})),o}},{key:"toBarsBeatsSixteenths",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),r=e%1*4;e=Math.floor(e)%this._getTimeSignature();var i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,e,r].join(":")}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}},{key:"toSeconds",value:function(){return this.valueOf()}},{key:"toMidi",value:function(){return Ka(this.toFrequency())}},{key:"_now",value:function(){return this.context.now()}}]),n}(function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t,r,i){var a;return Object(o.a)(this,n),(a=e.call(this)).defaultUnits="s",a._val=r,a._units=i,a.context=t,a._expressions=a._getExpressions(),a}return Object(P.a)(n,[{key:"_getExpressions",value:function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var r=parseInt(e,10),i="."===n?1.5:1;return 1===r?t._beatsToUnits(t._getTimeSignature())*i:t._beatsToUnits(4/r)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,r){var i=0;return e&&"0"!==e&&(i+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(i+=t._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(i+=t._beatsToUnits(parseFloat(r)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}},{key:"valueOf",value:function(){if(this._val instanceof n&&this.fromType(this._val),Wi(this._val))return this._noArg();if(Ki(this._val)&&Wi(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Zi(this._val)){var e=0;for(var r in this._val)if(Gi(this._val[r])){var i=this._val[r];e+=new this.constructor(this.context,r).valueOf()*i}return e}if(Gi(this._units)){var a=this._expressions[this._units],o=this._val.toString().trim().match(a.regexp);return o?a.method.apply(this,o.slice(1)):a.method.call(this,this._val)}return Ki(this._val)?parseFloat(this._val):this._val}},{key:"_frequencyToUnits",value:function(t){return 1/t}},{key:"_beatsToUnits",value:function(t){return 60/this._getBpm()*t}},{key:"_secondsToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return t*this._beatsToUnits(1)/this._getPPQ()}},{key:"_noArg",value:function(){return this._now()}},{key:"_getBpm",value:function(){return this.context.transport.bpm.value}},{key:"_getTimeSignature",value:function(){return this.context.transport.timeSignature}},{key:"_getPPQ",value:function(){return this.context.transport.PPQ}},{key:"fromType",value:function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}},{key:"toFrequency",value:function(){return 1/this.toSeconds()}},{key:"toSamples",value:function(){return this.toSeconds()*this.context.sampleRate}},{key:"toMilliseconds",value:function(){return 1e3*this.toSeconds()}}]),n}(_a));var no=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="Frequency",t.defaultUnits="hz",t}return Object(P.a)(n,[{key:"_getExpressions",value:function(){return Object.assign({},Object(ia.a)(Object(aa.a)(n.prototype),"_getExpressions",this).call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:n.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var r=ro[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?r:n.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}},{key:"transpose",value:function(t){return new n(this.context,this.valueOf()*Qa(t))}},{key:"harmonize",value:function(t){var e=this;return t.map((function(t){return e.transpose(t)}))}},{key:"toMidi",value:function(){return Ka(this.valueOf())}},{key:"toNote",value:function(){var t=this.toFrequency(),e=Math.log2(t/n.A4),r=Math.round(12*e)+57,i=Math.floor(r/12);return i<0&&(r+=-12*i),io[r%12]+i.toString()}},{key:"toSeconds",value:function(){return 1/Object(ia.a)(Object(aa.a)(n.prototype),"toSeconds",this).call(this)}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}},{key:"_noArg",value:function(){return 0}},{key:"_frequencyToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}},{key:"_beatsToUnits",value:function(t){return 1/Object(ia.a)(Object(aa.a)(n.prototype),"_beatsToUnits",this).call(this,t)}},{key:"_secondsToUnits",value:function(t){return 1/t}}],[{key:"A4",get:function(){return Ja},set:function(t){!function(t){Ja=t}(t)}},{key:"mtof",value:function(t){return to(t)}},{key:"ftom",value:function(t){return Ka(t)}}]),n}(eo),ro={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},io=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var ao=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="TransportTime",t}return Object(P.a)(n,[{key:"_now",value:function(){return this.context.transport.seconds}}]),n}(eo);var oo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),t=e.call(this);var r=ma(n.getDefaults(),arguments,["context"]);return t.defaultContext?t.context=t.defaultContext:t.context=r.context,t}return Object(P.a)(n,[{key:"now",value:function(){return this.context.currentTime+this.context.lookAhead}},{key:"immediate",value:function(){return this.context.currentTime}},{key:"sampleTime",get:function(){return 1/this.context.sampleRate}},{key:"blockTime",get:function(){return 128/this.context.sampleRate}},{key:"toSeconds",value:function(t){return new eo(this.context,t).toSeconds()}},{key:"toFrequency",value:function(t){return new no(this.context,t).toFrequency()}},{key:"toTicks",value:function(t){return new ao(this.context,t).toTicks()}},{key:"_getPartialProperties",value:function(t){var e=this.get();return Object.keys(e).forEach((function(n){Wi(t[n])&&delete e[n]})),e}},{key:"get",value:function(){var t=this,e=this.constructor.getDefaults();return Object.keys(e).forEach((function(r){if(Reflect.has(t,r)){var i=t[r];Gi(i)&&Gi(i.value)&&Gi(i.setValueAtTime)?e[r]=i.value:i instanceof n?e[r]=i._getPartialProperties(e[r]):Ji(i)||Yi(i)||Ki(i)||Qi(i)?e[r]=i:delete e[r]}})),e}},{key:"set",value:function(t){var e=this;return Object.keys(t).forEach((function(r){Reflect.has(e,r)&&Gi(e[r])&&(e[r]&&Gi(e[r].value)&&Gi(e[r].setValueAtTime)?e[r].value!==t[r]&&(e[r].value=t[r]):e[r]instanceof n?e[r].set(t[r]):e[r]=t[r])})),this}}],[{key:"getDefaults",value:function(){return{context:qa()}}}]),n}(_a),so=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";return Object(o.a)(this,n),(t=e.call(this)).name="StateTimeline",t._initial=r,t.setStateAtTime(t._initial,0),t}return Object(P.a)(n,[{key:"getValueAtTime",value:function(t){var e=this.get(t);return null!==e?e.state:this._initial}},{key:"setStateAtTime",value:function(t,e,n){return Fi(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}},{key:"getLastState",value:function(t,e){for(var n=this._search(e);n>=0;n--){var r=this._timeline[n];if(r.state===t)return r}}},{key:"getNextState",value:function(t,e){var n=this._search(e);if(-1!==n)for(var r=n;r<this._timeline.length;r++){var i=this._timeline[r];if(i.state===t)return i}}}]),n}(Ea),uo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["param","units","convert"]))).name="Param",t.overridden=!1,t._minOutput=1e-7;var r=ma(n.getDefaults(),arguments,["param","units","convert"]);for(zi(Gi(r.param)&&(la(r.param)||r.param instanceof n),"param must be an AudioParam");!la(r.param);)r.param=r.param._param;return t._swappable=!!Gi(r.swappable)&&r.swappable,t._swappable?(t.input=t.context.createGain(),t._param=r.param,t.input.connect(t._param)):t._param=t.input=r.param,t._events=new Ea(1e3),t._initialValue=t._param.defaultValue,t.units=r.units,t.convert=r.convert,t._minValue=r.minValue,t._maxValue=r.maxValue,Gi(r.value)&&r.value!==t._toType(t._initialValue)&&t.setValueAtTime(r.value,0),t}return Object(P.a)(n,[{key:"value",get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}},{key:"minValue",get:function(){return Gi(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}},{key:"maxValue",get:function(){return Gi(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}},{key:"_is",value:function(t,e){return this.units===e}},{key:"_assertRange",value:function(t){return Gi(this.maxValue)&&Gi(this.minValue)&&Fi(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}},{key:"_fromType",value:function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Ya(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}},{key:"_toType",value:function(t){return this.convert&&"decibels"===this.units?Za(t):t}},{key:"setValueAtTime",value:function(t,e){var n=this.toSeconds(e),r=this._fromType(t);return zi(isFinite(r)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(r),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}},{key:"getValueAtTime",value:function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),r=this._events.get(e),i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var a=r.value;if("setTargetAtTime"===r.type){var o=this._events.getBefore(r.time);a=null===o?this._initialValue:o.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,a,n.time,n.value,e):this._exponentialInterpolate(r.time,a,n.time,n.value,e)}else i=r.value;else{var s,u=this._events.getBefore(r.time);s=null===u?this._initialValue:u.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,s,r.value,r.constant,e))}return this._toType(i)}},{key:"setRampPoint",value:function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}},{key:"linearRampToValueAtTime",value:function(t,e){var n=this._fromType(t),r=this.toSeconds(e);return zi(isFinite(n)&&isFinite(r),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){var n=this._fromType(t);n=ka(n,0)?this._minOutput:n,this._assertRange(n);var r=this.toSeconds(e);return zi(isFinite(n)&&isFinite(r),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this}},{key:"exponentialRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"linearRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"targetRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}},{key:"setTargetAtTime",value:function(t,e,n){var r=this._fromType(t);zi(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var i=this.toSeconds(e);return this._assertRange(r),zi(isFinite(r)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(r,i,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),e=this.toSeconds(e);var i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);for(var a=n/(t.length-1),o=1;o<t.length;o++){var s=this._fromType(t[o])*r;this.linearRampToValueAtTime(this._toType(s),e+o*a)}return this}},{key:"cancelScheduledValues",value:function(t){var e=this.toSeconds(t);return zi(isFinite(e),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(t))),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}},{key:"cancelAndHoldAtTime",value:function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));zi(isFinite(e),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(t))),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);var r=this._events.get(e),i=this._events.getAfter(e);return r&&ka(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}},{key:"rampTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}},{key:"apply",value:function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var r=this._events.getAfter(n.time),i=r?r.time:e+2,a=(i-e)/10,o=e;o<i;o+=a)t.linearRampToValueAtTime(this.getValueAtTime(o),o);return this._events.forEachAfter(this.context.currentTime,(function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}},{key:"setParam",value:function(t){zi(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._events.dispose(),this}},{key:"defaultValue",get:function(){return this._toType(this._param.defaultValue)}},{key:"_exponentialApproach",value:function(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)}},{key:"_linearInterpolate",value:function(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)}},{key:"_exponentialInterpolate",value:function(t,e,n,r,i){return e*Math.pow(r/e,(i-t)/(n-t))}}],[{key:"getDefaults",value:function(){return Object.assign(oo.getDefaults(),{convert:!0,units:"number"})}}]),n}(oo),lo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="ToneAudioNode",t._internalChannels=[],t}return Object(P.a)(n,[{key:"numberOfInputs",get:function(){return Gi(this.input)?la(this.input)||this.input instanceof uo?1:this.input.numberOfInputs:0}},{key:"numberOfOutputs",get:function(){return Gi(this.output)?this.output.numberOfOutputs:0}},{key:"_isAudioNode",value:function(t){return Gi(t)&&(t instanceof n||ca(t))}},{key:"_getInternalNodes",value:function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}},{key:"_setChannelProperties",value:function(t){this._getInternalNodes().forEach((function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}},{key:"_getChannelProperties",value:function(){var t=this._getInternalNodes();zi(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}},{key:"channelCount",get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}},{key:"channelCountMode",get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}},{key:"channelInterpretation",get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ho(this,t,e,n),this}},{key:"toDestination",value:function(){return this.connect(this.context.destination),this}},{key:"toMaster",value:function(){return Hi("toMaster() has been renamed toDestination()"),this.toDestination()}},{key:"disconnect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return fo(this,t,e,n),this}},{key:"chain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return co.apply(void 0,[this].concat(e)),this}},{key:"fan",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){return t.connect(e)})),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),Gi(this.input)&&(this.input instanceof n?this.input.dispose():ca(this.input)&&this.input.disconnect()),Gi(this.output)&&(this.output instanceof n?this.output.dispose():ca(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}]),n}(oo);function co(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();e.reduce((function(t,e){return t instanceof lo?t.connect(e):ca(t)&&ho(t,e),e}),r)}function ho(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(zi(Gi(t),"Cannot connect from undefined node"),zi(Gi(e),"Cannot connect to undefined node"),(e instanceof lo||ca(e))&&zi(e.numberOfInputs>0,"Cannot connect to node with no inputs"),zi(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof lo||e instanceof uo;)Gi(e.input)&&(e=e.input);for(;t instanceof lo;)Gi(t.output)&&(t=t.output);la(e)?t.connect(e,n):t.connect(e,n,r)}function fo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Gi(e))for(;e instanceof lo;)e=e.input;for(;!ca(t);)Gi(t.output)&&(t=t.output);la(e)?t.disconnect(e,n):ca(e)?t.disconnect(e,n,r):t.disconnect()}var po=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["gain","units"]))).name="Gain",t._gainNode=t.context.createGain(),t.input=t._gainNode,t.output=t._gainNode;var r=ma(n.getDefaults(),arguments,["gain","units"]);return t.gain=new uo({context:t.context,convert:r.convert,param:t._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),Da(Object(q.a)(t),"gain"),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{convert:!0,gain:1,units:"gain"})}}]),n}(lo),vo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).onended=Ba,r._startTime=-1,r._stopTime=-1,r._timeout=-1,r.output=new po({context:r.context,gain:0}),r._gainNode=r.output,r.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},r._fadeIn=t.fadeIn,r._fadeOut=t.fadeOut,r._curve=t.curve,r.onended=t.onended,r}return Object(P.a)(n,[{key:"_startGain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;zi(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}},{key:"stop",value:function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}},{key:"_stopGain",value:function(t){var e=this;zi(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()}),this._stopTime-this.context.currentTime),this}},{key:"_onended",value:function(){var t=this;if(this.onended!==Ba&&(this.onended(this),this.onended=Ba,!this.context.isOffline)){var e=function(){return t.dispose()};"undefined"!==typeof window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,1e3)}}},{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"cancelStop",value:function(){return this.log("cancelStop"),zi(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ba})}}]),n}(lo),mo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["offset"]))).name="ToneConstantSource",t._source=t.context.createConstantSource();var r=ma(n.getDefaults(),arguments,["offset"]);return ho(t._source,t._gainNode),t.offset=new uo({context:t.context,convert:r.convert,param:t._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue}),t}return Object(P.a)(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}},{key:"_stopSource",value:function(t){this._source.stop(t)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(vo.getDefaults(),{convert:!0,offset:1,units:"number"})}}]),n}(vo),go=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["value","units"]))).name="Signal",t.override=!0;var r=ma(n.getDefaults(),arguments,["value","units"]);return t.output=t._constantSource=new mo({context:t.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),t._constantSource.start(0),t.input=t._param=t._constantSource.offset,t}return Object(P.a)(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yo(this,t,e,n),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._param.dispose(),this._constantSource.dispose(),this}},{key:"setValueAtTime",value:function(t,e){return this._param.setValueAtTime(t,e),this}},{key:"getValueAtTime",value:function(t){return this._param.getValueAtTime(t)}},{key:"setRampPoint",value:function(t){return this._param.setRampPoint(t),this}},{key:"linearRampToValueAtTime",value:function(t,e){return this._param.linearRampToValueAtTime(t,e),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}},{key:"exponentialRampTo",value:function(t,e,n){return this._param.exponentialRampTo(t,e,n),this}},{key:"linearRampTo",value:function(t,e,n){return this._param.linearRampTo(t,e,n),this}},{key:"targetRampTo",value:function(t,e,n){return this._param.targetRampTo(t,e,n),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}},{key:"setTargetAtTime",value:function(t,e,n){return this._param.setTargetAtTime(t,e,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n,r){return this._param.setValueCurveAtTime(t,e,n,r),this}},{key:"cancelScheduledValues",value:function(t){return this._param.cancelScheduledValues(t),this}},{key:"cancelAndHoldAtTime",value:function(t){return this._param.cancelAndHoldAtTime(t),this}},{key:"rampTo",value:function(t,e,n){return this._param.rampTo(t,e,n),this}},{key:"value",get:function(){return this._param.value},set:function(t){this._param.value=t}},{key:"convert",get:function(){return this._param.convert},set:function(t){this._param.convert=t}},{key:"units",get:function(){return this._param.units}},{key:"overridden",get:function(){return this._param.overridden},set:function(t){this._param.overridden=t}},{key:"maxValue",get:function(){return this._param.maxValue}},{key:"minValue",get:function(){return this._param.minValue}},{key:"apply",value:function(t){return this._param.apply(t),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{convert:!0,units:"number",value:0})}}]),n}(lo);function yo(t,e,n,r){(e instanceof uo||la(e)||e instanceof go&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof go&&(e.overridden=!0)),ho(t,e,n,r)}var _o=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["value"]))).name="TickParam",t._events=new Ea(1/0),t._multiplier=1;var r=ma(n.getDefaults(),arguments,["value"]);return t._multiplier=r.multiplier,t._events.cancel(0),t._events.add({ticks:0,time:0,type:"setValueAtTime",value:t._fromType(r.value)}),t.setValueAtTime(r.value,0),t}return Object(P.a)(n,[{key:"setTargetAtTime",value:function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var r=this._fromType(t),i=this._events.get(e),a=Math.round(Math.max(1/n,1)),o=0;o<=a;o++){var s=n*o+e,u=this._exponentialApproach(i.time,i.value,r,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"setValueAtTime",value:function(t,e){var r=this.toSeconds(e);Object(ia.a)(Object(aa.a)(n.prototype),"setValueAtTime",this).call(this,t,e);var i=this._events.get(r),a=this._events.previousEvent(i),o=this._getTicksUntilEvent(a,r);return i.ticks=Math.max(o,0),this}},{key:"linearRampToValueAtTime",value:function(t,e){var r=this.toSeconds(e);Object(ia.a)(Object(aa.a)(n.prototype),"linearRampToValueAtTime",this).call(this,t,e);var i=this._events.get(r),a=this._events.previousEvent(i),o=this._getTicksUntilEvent(a,r);return i.ticks=Math.max(o,0),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max(10*(e-r.time),1)),a=(e-r.time)/i,o=0;o<=i;o++){var s=a*o+r.time,u=this._exponentialInterpolate(r.time,r.value,e,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"_getTicksUntilEvent",value:function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Wi(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var r=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),a=this._events.get(e);return a&&a.time===e&&"setValueAtTime"===a.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(r+i)+t.ticks}},{key:"getTicksAtTime",value:function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}},{key:"getDurationOfTicks",value:function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-n}},{key:"getTimeOfTick",value:function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var r=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),a=Math.sqrt(Math.pow(r,2)-2*i*(e.ticks-t)),o=(-r+a)/i;return(o>0?o:(-r-a)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}},{key:"ticksToTime",value:function(t,e){return this.getDurationOfTicks(t,e)}},{key:"timeToTicks",value:function(t,e){var n=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}},{key:"_fromType",value:function(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):Object(ia.a)(Object(aa.a)(n.prototype),"_fromType",this).call(this,t)}},{key:"_toType",value:function(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:Object(ia.a)(Object(aa.a)(n.prototype),"_toType",this).call(this,t)}},{key:"multiplier",get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}],[{key:"getDefaults",value:function(){return Object.assign(uo.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(uo),bo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["value"]))).name="TickSignal";var r=ma(n.getDefaults(),arguments,["value"]);return t.input=t._param=new _o({context:t.context,convert:r.convert,multiplier:r.multiplier,param:t._constantSource.offset,units:r.units,value:r.value}),t}return Object(P.a)(n,[{key:"ticksToTime",value:function(t,e){return this._param.ticksToTime(t,e)}},{key:"timeToTicks",value:function(t,e){return this._param.timeToTicks(t,e)}},{key:"getTimeOfTick",value:function(t){return this._param.getTimeOfTick(t)}},{key:"getDurationOfTicks",value:function(t,e){return this._param.getDurationOfTicks(t,e)}},{key:"getTicksAtTime",value:function(t){return this._param.getTicksAtTime(t)}},{key:"multiplier",get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._param.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(go.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(go),xo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency"]))).name="TickSource",t._state=new so,t._tickOffset=new Ea;var r=ma(n.getDefaults(),arguments,["frequency"]);return t.frequency=new bo({context:t.context,units:r.units,value:r.frequency}),Da(Object(q.a)(t),"frequency"),t._state.setStateAtTime("stopped",0),t.setTicksAtTime(0,0),t}return Object(P.a)(n,[{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Gi(e)&&this.setTicksAtTime(e,n)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}},{key:"cancel",value:function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}},{key:"getTicksAtTime",value:function(t){var e=this,n=this.toSeconds(t),r=this._state.getLastState("stopped",n),i={state:"paused",time:n};this._state.add(i);var a=r,o=0;return this._state.forEachBetween(r.time,n+this.sampleTime,(function(t){var n=a.time,r=e._tickOffset.get(t.time);r&&r.time>=a.time&&(o=r.ticks,n=r.time),"started"===a.state&&"started"!==t.state&&(o+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),a=t})),this._state.remove(i),o}},{key:"ticks",get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}},{key:"seconds",get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}},{key:"getSecondsAtTime",value:function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);var i=n,a=0;return this._state.forEachBetween(n.time,t+this.sampleTime,(function(t){var n=i.time,r=e._tickOffset.get(t.time);r&&r.time>=i.time&&(a=r.seconds,n=r.time),"started"===i.state&&"started"!==t.state&&(a+=t.time-n),i=t})),this._state.remove(r),a}},{key:"setTicksAtTime",value:function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}},{key:"getStateAtTime",value:function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now(),n=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(n.time,r.time),a=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(a)}},{key:"forEachTickBetween",value:function(t,e,n){var r=this,i=this._state.get(t);this._state.forEachBetween(t,e,(function(e){i&&"started"===i.state&&"started"!==e.state&&r.forEachTickBetween(Math.max(i.time,t),e.time-r.sampleTime,n),i=e}));var a=null;if(i&&"started"===i.state){var o=Math.max(i.time,t),s=this.frequency.getTicksAtTime(o),u=s-this.frequency.getTicksAtTime(i.time),l=Math.ceil(u)-u;l=ka(l,1)?0:l;for(var c=this.frequency.getTimeOfTick(s+l);c<e;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(h){a=h;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(a)throw a;return this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign({frequency:1,units:"hertz"},oo.getDefaults())}}]),n}(oo),wo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["callback","frequency"]))).name="Clock",t.callback=Ba,t._lastUpdate=0,t._state=new so("stopped"),t._boundLoop=t._loop.bind(Object(q.a)(t));var r=ma(n.getDefaults(),arguments,["callback","frequency"]);return t.callback=r.callback,t._tickSource=new xo({context:t.context,frequency:r.frequency,units:r.units}),t._lastUpdate=0,t.frequency=t._tickSource.frequency,Da(Object(q.a)(t),"frequency"),t._state.setStateAtTime("stopped",0),t.context.on("tick",t._boundLoop),t}return Object(P.a)(n,[{key:"state",get:function(){return this._state.getValueAtTime(this.now())}},{key:"start",value:function(t,e){Vi(this.context);var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}},{key:"ticks",get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}},{key:"seconds",get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}},{key:"getSecondsAtTime",value:function(t){return this._tickSource.getSecondsAtTime(t)}},{key:"setTicksAtTime",value:function(t,e){return this._tickSource.setTicksAtTime(t,e),this}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(t,e)}},{key:"getTicksAtTime",value:function(t){return this._tickSource.getTicksAtTime(t)}},{key:"nextTickTime",value:function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)}},{key:"_loop",value:function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,(function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}})),this._tickSource.forEachTickBetween(e,n,(function(e,n){t.callback(e,n)})))}},{key:"getStateAtTime",value:function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(oo.getDefaults(),{callback:Ba,frequency:1,units:"hertz"})}}]),n}(oo);La.mixin(wo);var So=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this)).name="ToneAudioBuffers",t._buffers=new Map,t._loadingCount=0;var r=ma(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return t.baseUrl=r.baseUrl,Object.keys(r.urls).forEach((function(e){t._loadingCount++;var n=r.urls[e];t.add(e,n,t._bufferLoaded.bind(Object(q.a)(t),r.onload),r.onerror)})),t}return Object(P.a)(n,[{key:"has",value:function(t){return this._buffers.has(t.toString())}},{key:"get",value:function(t){return zi(this.has(t),"ToneAudioBuffers has no buffer named: ".concat(t)),this._buffers.get(t.toString())}},{key:"_bufferLoaded",value:function(t){this._loadingCount--,0===this._loadingCount&&t&&t()}},{key:"loaded",get:function(){return Array.from(this._buffers).every((function(t){var e=Object(a.a)(t,2);e[0];return e[1].loaded}))}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ba,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ba;return Ki(e)?this._buffers.set(t.toString(),new za(this.baseUrl+e,n,r)):this._buffers.set(t.toString(),new za(e,n,r)),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._buffers.forEach((function(t){return t.dispose()})),this._buffers.clear(),this}}],[{key:"getDefaults",value:function(){return{baseUrl:"",onerror:Ba,onload:Ba,urls:{}}}}]),n}(_a);var ko=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="Ticks",t.defaultUnits="i",t}return Object(P.a)(n,[{key:"_now",value:function(){return this.context.transport.ticks}},{key:"_beatsToUnits",value:function(t){return this._getPPQ()*t}},{key:"_secondsToUnits",value:function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}},{key:"_ticksToUnits",value:function(t){return t}},{key:"toTicks",value:function(){return this.valueOf()}},{key:"toSeconds",value:function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}]),n}(ao);var To=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="Draw",t.expiration=.25,t.anticipation=.008,t._events=new Ea,t._boundDrawLoop=t._drawLoop.bind(Object(q.a)(t)),t._animationFrame=-1,t}return Object(P.a)(n,[{key:"schedule",value:function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}},{key:"cancel",value:function(t){return this._events.cancel(this.toSeconds(t)),this}},{key:"_drawLoop",value:function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}]),n}(oo);Oa((function(t){t.draw=new To({context:t})})),Aa((function(t){t.draw.dispose()}));var Eo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="IntervalTimeline",t._root=null,t._length=0,t}return Object(P.a)(n,[{key:"add",value:function(t){zi(Gi(t.time),"Events must have a time property"),zi(Gi(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new Co(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}},{key:"remove",value:function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.event===t){this._removeNode(i),this._length--;break}}}return this}},{key:"length",get:function(){return this._length}},{key:"cancel",value:function(t){var e=this;return this.forEachFrom(t,(function(t){return e.remove(t)})),this}},{key:"_setRoot",value:function(t){this._root=t,null!==this._root&&(this._root.parent=null)}},{key:"_replaceNodeInParent",value:function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}},{key:"_removeNode",value:function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}},{key:"_rotateLeft",value:function(t){var e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}},{key:"_rotateRight",value:function(t){var e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}},{key:"_rebalance",value:function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}},{key:"get",value:function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],r=1;r<e.length;r++)e[r].low>n.low&&(n=e[r]);return n.event}}return null}},{key:"forEach",value:function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){return e.push(t)})),e.forEach((function(e){e.event&&t(e.event)}))}return this}},{key:"forEachAtTime",value:function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"forEachFrom",value:function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),null!==this._root&&this._root.traverse((function(t){return t.dispose()})),this._root=null,this}}]),n}(_a),Co=function(){function t(e,n,r){Object(o.a)(this,t),this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}return Object(P.a)(t,[{key:"insert",value:function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}},{key:"search",value:function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}},{key:"searchAfter",value:function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}},{key:"traverse",value:function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}},{key:"updateHeight",value:function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}},{key:"updateMax",value:function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}},{key:"getBalance",value:function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}},{key:"isLeftChild",value:function(){return null!==this.parent&&this.parent.left===this}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"dispose",value:function(){this.parent=null,this._left=null,this._right=null,this.event=null}}]),t}(),Oo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["volume"]))).name="Volume";var r=ma(n.getDefaults(),arguments,["volume"]);return t.input=t.output=new po({context:t.context,gain:r.volume,units:"decibels"}),t.volume=t.output.gain,Da(Object(q.a)(t),"volume"),t._unmutedVolume=r.volume,t.mute=r.mute,t}return Object(P.a)(n,[{key:"mute",get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{mute:!1,volume:0})}}]),n}(lo),Mo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="Destination",t.input=new Oo({context:t.context}),t.output=new po({context:t.context}),t.volume=t.input.volume;var r=ma(n.getDefaults(),arguments);return co(t.input,t.output,t.context.rawContext.destination),t.mute=r.mute,t._internalChannels=[t.input,t.context.rawContext.destination,t.output],t}return Object(P.a)(n,[{key:"mute",get:function(){return this.input.mute},set:function(t){this.input.mute=t}},{key:"chain",value:function(){this.input.disconnect();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift(this.input),e.push(this.output),co.apply(void 0,e),this}},{key:"maxChannelCount",get:function(){return this.context.rawContext.destination.maxChannelCount}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{mute:!1,volume:0})}}]),n}(lo);Oa((function(t){t.destination=new Mo({context:t})})),Aa((function(t){t.destination.dispose()}));var Ao=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this)).name="TimelineValue",r._timeline=new Ea({memory:10}),r._initialValue=t,r}return Object(P.a)(n,[{key:"set",value:function(t,e){return this._timeline.add({value:t,time:e}),this}},{key:"get",value:function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue}}]),n}(_a),Po=function(){function t(e,n){Object(o.a)(this,t),this.id=t._eventId++;var r=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}return Object(P.a)(t,[{key:"invoke",value:function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}},{key:"dispose",value:function(){return this.callback=void 0,this}}],[{key:"getDefaults",value:function(){return{callback:Ba,once:!1,time:0}}}]),t}();Po._eventId=0;var Lo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t,r){var i;Object(o.a)(this,n),(i=e.call(this,t,r))._currentId=-1,i._nextId=-1,i._nextTick=i.time,i._boundRestart=i._restart.bind(Object(q.a)(i));var a=Object.assign(n.getDefaults(),r);return i.duration=new ko(t.context,a.duration).valueOf(),i._interval=new ko(t.context,a.interval).valueOf(),i._nextTick=a.time,i.transport.on("start",i._boundRestart),i.transport.on("loopStart",i._boundRestart),i.context=i.transport.context,i._restart(),i}return Object(P.a)(n,[{key:"invoke",value:function(t){this._createEvents(t),Object(ia.a)(Object(aa.a)(n.prototype),"invoke",this).call(this,t)}},{key:"_createEvents",value:function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ko(this.context,this._nextTick).toSeconds()))}},{key:"_restart",value:function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ko(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ko(this.context,this._nextTick).toSeconds())}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}],[{key:"getDefaults",value:function(){return Object.assign({},Po.getDefaults(),{duration:1/0,interval:1,once:!1})}}]),n}(Po),Ro=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="Transport",t._loop=new Ao(!1),t._loopStart=0,t._loopEnd=0,t._scheduledEvents={},t._timeline=new Ea,t._repeatedEvents=new Eo,t._syncedSignals=[],t._swingAmount=0;var r=ma(n.getDefaults(),arguments);return t._ppq=r.ppq,t._clock=new wo({callback:t._processTick.bind(Object(q.a)(t)),context:t.context,frequency:0,units:"bpm"}),t._bindClockEvents(),t.bpm=t._clock.frequency,t._clock.frequency.multiplier=r.ppq,t.bpm.setValueAtTime(r.bpm,0),Da(Object(q.a)(t),"bpm"),t._timeSignature=r.timeSignature,t._swingTicks=r.ppq/2,t}return Object(P.a)(n,[{key:"_processTick",value:function(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;t+=new ko(this.context,2*this._swingTicks/3).toSeconds()*r}this._timeline.forEachAtTime(e,(function(e){return e.invoke(t)}))}},{key:"schedule",value:function(t,e){var n=new Po(this,{callback:t,time:new ao(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"scheduleRepeat",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=new Lo(this,{callback:t,duration:new eo(this.context,r).toTicks(),interval:new eo(this.context,e).toTicks(),time:new ao(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}},{key:"scheduleOnce",value:function(t,e){var n=new Po(this,{callback:t,once:!0,time:new ao(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"clear",value:function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}},{key:"_addEvent",value:function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}},{key:"cancel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.toTicks(e);return this._timeline.forEachFrom(n,(function(e){return t.clear(e.id)})),this._repeatedEvents.forEachFrom(n,(function(e){return t.clear(e.id)})),this}},{key:"_bindClockEvents",value:function(){var t=this;this._clock.on("start",(function(e,n){n=new ko(t.context,n).toSeconds(),t.emit("start",e,n)})),this._clock.on("stop",(function(e){t.emit("stop",e)})),this._clock.on("pause",(function(e){t.emit("pause",e)}))}},{key:"state",get:function(){return this._clock.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n;return Gi(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}},{key:"stop",value:function(t){return this._clock.stop(t),this}},{key:"pause",value:function(t){return this._clock.pause(t),this}},{key:"toggle",value:function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}},{key:"timeSignature",get:function(){return this._timeSignature},set:function(t){Ji(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}},{key:"loopStart",get:function(){return new eo(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}},{key:"loopEnd",get:function(){return new eo(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}},{key:"loop",get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"swing",get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}},{key:"swingSubdivision",get:function(){return new ko(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}},{key:"position",get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new ko(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}},{key:"seconds",get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}},{key:"progress",get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}},{key:"ticks",get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();if("started"===this.state){var n=this._clock.getTicksAtTime(e),r=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this._clock.setTicksAtTime(t,e)}}},{key:"getTicksAtTime",value:function(t){return Math.round(this._clock.getTicksAtTime(t))}},{key:"getSecondsAtTime",value:function(t){return this._clock.getSecondsAtTime(t)}},{key:"PPQ",get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t}},{key:"nextSubdivision",value:function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}},{key:"syncSignal",value:function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}var i=new po(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}},{key:"unsyncSignal",value:function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._clock.dispose(),Na(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(oo.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}}]),n}(oo);La.mixin(Ro),Oa((function(t){t.transport=new Ro({context:t})})),Aa((function(t){t.transport.dispose()}));var jo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).input=void 0,r._state=new so("stopped"),r._synced=!1,r._scheduled=[],r._syncedStart=Ba,r._syncedStop=Ba,r._state.memory=100,r._state.increasing=!0,r._volume=r.output=new Oo({context:r.context,mute:t.mute,volume:t.volume}),r.volume=r._volume.volume,Da(Object(q.a)(r),"volume"),r.onstop=t.onstop,r}return Object(P.a)(n,[{key:"state",get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}},{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"_clampToCurrentTime",value:function(t){return this._synced?t:Math.max(t,this.context.currentTime)}},{key:"start",value:function(t,e,n){var r=this,i=Wi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){var a=this._state.get(i);a&&(a.offset=this.toSeconds(ga(e,0)),a.duration=n?this.toSeconds(n):void 0);var o=this.context.transport.schedule((function(t){r._start(t,e,n)}),i);this._scheduled.push(o),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else Vi(this.context),this._start(i,e,n);else zi(xa(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}},{key:"stop",value:function(t){var e=Wi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Gi(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}},{key:"restart",value:function(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}},{key:"sync",value:function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var r=t._state.get(n);if(r&&"started"===r.state&&r.time!==n){var i,a=n-t.toSeconds(r.time);r.duration&&(i=t.toSeconds(r.duration)-a),t._start(e,t.toSeconds(r.offset)+a,i)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}},{key:"unsync",value:function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((function(e){return t.context.transport.clear(e)})),this._scheduled=[],this._state.cancel(0),this._stop(0),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.onstop=Ba,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{mute:!1,onstop:Ba,volume:0})}}]),n}(lo),Io=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["url","onload"]))).name="ToneBufferSource",t._source=t.context.createBufferSource(),t._internalChannels=[t._source],t._sourceStarted=!1,t._sourceStopped=!1;var r=ma(n.getDefaults(),arguments,["url","onload"]);return ho(t._source,t._gainNode),t._source.onended=function(){return t._stopSource()},t.playbackRate=new uo({context:t.context,param:t._source.playbackRate,units:"positive",value:r.playbackRate}),t.loop=r.loop,t.loopStart=r.loopStart,t.loopEnd=r.loopEnd,t._buffer=new za(r.url,r.onload,r.onerror),t._internalChannels.push(t._source),t}return Object(P.a)(n,[{key:"fadeIn",get:function(){return this._fadeIn},set:function(t){this._fadeIn=t}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(t){this._fadeOut=t}},{key:"curve",get:function(){return this._curve},set:function(t){this._curve=t}},{key:"start",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;zi(this.buffer.loaded,"buffer is either not set or not loaded");var i=this.toSeconds(t);this._startGain(i,r),e=this.loop?ga(e,this.loopStart):ga(e,0);var a=Math.max(this.toSeconds(e),0);if(this.loop){var o=this.toSeconds(this.loopEnd)||this.buffer.duration,s=this.toSeconds(this.loopStart),u=o-s;wa(a,o)&&(a=(a-s)%u+s),ka(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Sa(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),Gi(n)){var l=this.toSeconds(n);l=Math.max(l,0),this.stop(i+l)}return this}},{key:"_stopSource",value:function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}},{key:"loopStart",get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}},{key:"loopEnd",get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(vo.getDefaults(),{url:new za,loop:!1,loopEnd:0,loopStart:0,onload:Ba,onerror:Ba,playbackRate:1})}}]),n}(vo);function Do(t,e){return sa(this,void 0,void 0,D.a.mark((function n(){var r,i,a;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e/t.context.sampleRate,i=new Fa(1,r,t.context.sampleRate),new t.constructor(Object.assign(t.get(),{frequency:2/r,detune:0,context:i})).toDestination().start(0),n.next=6,i.render();case 6:return a=n.sent,n.abrupt("return",a.getChannelData(0));case 8:case"end":return n.stop()}}),n)})))}var No=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type"]))).name="ToneOscillatorNode",t._oscillator=t.context.createOscillator(),t._internalChannels=[t._oscillator];var r=ma(n.getDefaults(),arguments,["frequency","type"]);return ho(t._oscillator,t._gainNode),t.type=r.type,t.frequency=new uo({context:t.context,param:t._oscillator.frequency,units:"frequency",value:r.frequency}),t.detune=new uo({context:t.context,param:t._oscillator.detune,units:"cents",value:r.detune}),Da(Object(q.a)(t),["frequency","detune"]),t}return Object(P.a)(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}},{key:"_stopSource",value:function(t){this._oscillator.stop(t)}},{key:"setPeriodicWave",value:function(t){return this._oscillator.setPeriodicWave(t),this}},{key:"type",get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(vo.getDefaults(),{detune:0,frequency:440,type:"sine"})}}]),n}(vo),Bo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type"]))).name="Oscillator",t._oscillator=null;var r=ma(n.getDefaults(),arguments,["frequency","type"]);return t.frequency=new go({context:t.context,units:"frequency",value:r.frequency}),Da(Object(q.a)(t),"frequency"),t.detune=new go({context:t.context,units:"cents",value:r.detune}),Da(Object(q.a)(t),"detune"),t._partials=r.partials,t._partialCount=r.partialCount,t._type=r.type,r.partialCount&&"custom"!==r.type&&(t._type=t.baseType+r.partialCount.toString()),t.phase=r.phase,t}return Object(P.a)(n,[{key:"_start",value:function(t){var e=this,n=this.toSeconds(t),r=new No({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}},{key:"_restart",value:function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}},{key:"syncFrequency",value:function(){return this.context.transport.syncSignal(this.frequency),this}},{key:"unsyncFrequency",value:function(){return this.context.transport.unsyncSignal(this.frequency),this}},{key:"_getCachedPeriodicWave",value:function(){var t=this;if("custom"===this._type)return n._periodicWaveCache.find((function(e){return e.phase===t._phase&&(n=e.partials,r=t._partials,n.length===r.length&&n.every((function(t,e){return r[e]===t})));var n,r}));var e=n._periodicWaveCache.find((function(e){return e.type===t._type&&e.phase===t._phase}));return this._partialCount=e?e.partialCount:this._partialCount,e}},{key:"type",get:function(){return this._type},set:function(t){this._type=t;var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var r=this._getCachedPeriodicWave();if(Gi(r)){var i=r.partials,o=r.wave;this._wave=o,this._partials=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var s=this._getRealImaginary(t,this._phase),u=Object(a.a)(s,2),l=u[0],c=u[1],h=this.context.createPeriodicWave(l,c);this._wave=h,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:l,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}},{key:"baseType",get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}},{key:"partialCount",get:function(){return this._partialCount},set:function(t){Fi(t,0);var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var r=new Float32Array(t);this._partials.forEach((function(t,e){return r[e]=t})),this._partials=Array.from(r),this.type=this._type}}},{key:"_getRealImaginary",value:function(t,e){var n=2048,r=new Float32Array(n),i=new Float32Array(n),a=1;if("custom"===t){if(a=this._partials.length+1,this._partialCount=this._partials.length,n=a,0===this._partials.length)return[r,i]}else{var o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);o?(a=parseInt(o[2],10)+1,this._partialCount=parseInt(o[2],10),t=o[1],n=a=Math.max(a,2)):this._partialCount=0,this._partials=[]}for(var s=1;s<n;++s){var u=2/(s*Math.PI),l=void 0;switch(t){case"sine":l=s<=a?1:0,this._partials[s-1]=l;break;case"square":l=1&s?2*u:0,this._partials[s-1]=l;break;case"sawtooth":l=u*(1&s?1:-1),this._partials[s-1]=l;break;case"triangle":l=1&s?u*u*2*(s-1>>1&1?-1:1):0,this._partials[s-1]=l;break;case"custom":l=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==l?(r[s]=-l*Math.sin(e*s),i[s]=l*Math.cos(e*s)):(r[s]=0,i[s]=0)}return[r,i]}},{key:"_inverseFFT",value:function(t,e,n){for(var r=0,i=t.length,a=0;a<i;a++)r+=t[a]*Math.cos(a*n)+e[a]*Math.sin(a*n);return r}},{key:"getInitialValue",value:function(){for(var t=this._getRealImaginary(this._type,0),e=Object(a.a)(t,2),n=e[0],r=e[1],i=0,o=2*Math.PI,s=0;s<32;s++)i=Math.max(this._inverseFFT(n,r,s/32*o),i);return Ta(-this._inverseFFT(n,r,this._phase)/i,-1,1)}},{key:"partials",get:function(){return this._partials.slice(0,this.partialCount)},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}},{key:"phase",get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jo.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}}]),n}(jo);Bo._periodicWaveCache=[];var zo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){return Object(o.a)(this,n),e.call(this,Object.assign(ma(n.getDefaults(),arguments,["context"])))}return Object(P.a)(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yo(this,t,e,n),this}}]),n}(lo),Fo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["mapping","length"])))).name="WaveShaper",t._shaper=t.context.createWaveShaper(),t.input=t._shaper,t.output=t._shaper;var r=ma(n.getDefaults(),arguments,["mapping","length"]);return Ji(r.mapping)||r.mapping instanceof Float32Array?t.curve=Float32Array.from(r.mapping):Xi(r.mapping)&&t.setMap(r.mapping,r.length),t}return Object(P.a)(n,[{key:"setMap",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=new Float32Array(e),r=0,i=e;r<i;r++){var a=r/(i-1)*2-1;n[r]=t(a,r)}return this.curve=n,this}},{key:"curve",get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(t){zi(["none","2x","4x"].some((function(e){return e.includes(t)})),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._shaper.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(go.getDefaults(),{length:1024})}}]),n}(zo),Vo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="AudioToGain",t._norm=new Fo({context:t.context,mapping:function(t){return(t+1)/2}}),t.input=t._norm,t.output=t._norm,t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(zo),Uo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["value"])))).name="Multiply",t.override=!1;var r=ma(n.getDefaults(),arguments,["value"]);return t._mult=t.input=t.output=new po({context:t.context,minValue:r.minValue,maxValue:r.maxValue}),t.factor=t._param=t._mult.gain,t.factor.setValueAtTime(r.value,0),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(go.getDefaults(),{value:0})}}]),n}(go),qo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="AMOscillator",t._modulationScale=new Vo({context:t.context}),t._modulationNode=new po({context:t.context});var r=ma(n.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new Bo({context:t.context,detune:r.detune,frequency:r.frequency,onstop:function(){return t.onstop(Object(q.a)(t))},phase:r.phase,type:r.type}),t.frequency=t._carrier.frequency,t.detune=t._carrier.detune,t._modulator=new Bo({context:t.context,phase:r.phase,type:r.modulationType}),t.harmonicity=new Uo({context:t.context,units:"positive",value:r.harmonicity}),t.frequency.chain(t.harmonicity,t._modulator.frequency),t._modulator.chain(t._modulationScale,t._modulationNode.gain),t._carrier.chain(t._modulationNode,t.output),Da(Object(q.a)(t),["frequency","detune","harmonicity"]),t}return Object(P.a)(n,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._carrier.restart(t)}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Bo.getDefaults(),{harmonicity:1,modulationType:"square"})}}]),n}(jo),Ho=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="FMOscillator",t._modulationNode=new po({context:t.context,gain:0});var r=ma(n.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new Bo({context:t.context,detune:r.detune,frequency:0,onstop:function(){return t.onstop(Object(q.a)(t))},phase:r.phase,type:r.type}),t.detune=t._carrier.detune,t.frequency=new go({context:t.context,units:"frequency",value:r.frequency}),t._modulator=new Bo({context:t.context,phase:r.phase,type:r.modulationType}),t.harmonicity=new Uo({context:t.context,units:"positive",value:r.harmonicity}),t.modulationIndex=new Uo({context:t.context,units:"positive",value:r.modulationIndex}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t.detune.connect(t._modulator.detune),Da(Object(q.a)(t),["modulationIndex","frequency","detune","harmonicity"]),t}return Object(P.a)(n,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){return this._modulator.restart(t),this._carrier.restart(t),this}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Bo.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}}]),n}(jo),Wo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","width"]))).name="PulseOscillator",t._widthGate=new po({context:t.context,gain:0}),t._thresh=new Fo({context:t.context,mapping:function(t){return t<=0?-1:1}});var r=ma(n.getDefaults(),arguments,["frequency","width"]);return t.width=new go({context:t.context,units:"audioRange",value:r.width}),t._triangle=new Bo({context:t.context,detune:r.detune,frequency:r.frequency,onstop:function(){return t.onstop(Object(q.a)(t))},phase:r.phase,type:"triangle"}),t.frequency=t._triangle.frequency,t.detune=t._triangle.detune,t._triangle.chain(t._thresh,t.output),t.width.chain(t._widthGate,t._thresh),Da(Object(q.a)(t),["width","frequency","detune"]),t}return Object(P.a)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}},{key:"_restart",value:function(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"phase",get:function(){return this._triangle.phase},set:function(t){this._triangle.phase=t}},{key:"type",get:function(){return"pulse"}},{key:"baseType",get:function(){return"pulse"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"carrierType",set:function(t){this._triangle.type=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jo.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}}]),n}(jo),Go=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type","spread"]))).name="FatOscillator",t._oscillators=[];var r=ma(n.getDefaults(),arguments,["frequency","type","spread"]);return t.frequency=new go({context:t.context,units:"frequency",value:r.frequency}),t.detune=new go({context:t.context,units:"cents",value:r.detune}),t._spread=r.spread,t._type=r.type,t._phase=r.phase,t._partials=r.partials,t._partialCount=r.partialCount,t.count=r.count,Da(Object(q.a)(t),["frequency","detune"]),t}return Object(P.a)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.start(t)}))}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.stop(t)}))}},{key:"_restart",value:function(t){this._forEach((function(e){return e.restart(t)}))}},{key:"_forEach",value:function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._forEach((function(e){return e.type=t}))}},{key:"spread",get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach((function(t,r){return t.detune.value=e+n*r}))}}},{key:"count",get:function(){return this._oscillators.length},set:function(t){var e=this;if(Fi(t,1),this._oscillators.length!==t){this._forEach((function(t){return t.dispose()})),this._oscillators=[];for(var n=0;n<t;n++){var r=new Bo({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:0===n?function(){return e.onstop(e)}:Ba});"custom"===this.type&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,"started"===this.state&&this._forEach((function(t){return t.start()}))}}},{key:"phase",get:function(){return this._phase},set:function(t){var e=this;this._phase=t,this._forEach((function(t,n){return t.phase=e._phase+n/e.count*360}))}},{key:"baseType",get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach((function(e){return e.baseType=t})),this._type=this._oscillators[0].type}},{key:"partials",get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((function(e){return e.partials=t})))}},{key:"partialCount",get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach((function(e){return e.partialCount=t})),this._type=this._oscillators[0].type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach((function(t){return t.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(Bo.getDefaults(),{count:3,spread:20,type:"sawtooth"})}}]),n}(jo),Xo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","modulationFrequency"]))).name="PWMOscillator",t.sourceType="pwm",t._scale=new Uo({context:t.context,value:2});var r=ma(n.getDefaults(),arguments,["frequency","modulationFrequency"]);return t._pulse=new Wo({context:t.context,frequency:r.modulationFrequency}),t._pulse.carrierType="sine",t.modulationFrequency=t._pulse.frequency,t._modulator=new Bo({context:t.context,detune:r.detune,frequency:r.frequency,onstop:function(){return t.onstop(Object(q.a)(t))},phase:r.phase}),t.frequency=t._modulator.frequency,t.detune=t._modulator.detune,t._modulator.chain(t._scale,t._pulse.width),t._pulse.connect(t.output),Da(Object(q.a)(t),["modulationFrequency","frequency","detune"]),t}return Object(P.a)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._pulse.restart(t)}},{key:"type",get:function(){return"pwm"}},{key:"baseType",get:function(){return"pwm"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"phase",get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jo.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}}]),n}(jo),Yo={am:qo,fat:Go,fm:Ho,oscillator:Bo,pulse:Wo,pwm:Xo},Zo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type"]))).name="OmniOscillator";var r=ma(n.getDefaults(),arguments,["frequency","type"]);return t.frequency=new go({context:t.context,units:"frequency",value:r.frequency}),t.detune=new go({context:t.context,units:"cents",value:r.detune}),Da(Object(q.a)(t),["frequency","detune"]),t.set(r),t}return Object(P.a)(n,[{key:"_start",value:function(t){this._oscillator.start(t)}},{key:"_stop",value:function(t){this._oscillator.stop(t)}},{key:"_restart",value:function(t){return this._oscillator.restart(t),this}},{key:"type",get:function(){var t=this,e="";return["am","fm","fat"].some((function(e){return t._sourceType===e}))&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}},{key:"partials",get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}},{key:"partialCount",get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}},{key:"set",value:function(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),Object(ia.a)(Object(aa.a)(n.prototype),"set",this).call(this,t),this}},{key:"_createNewOscillator",value:function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var n=Yo[t],r=this.now();if(this._oscillator){var i=this._oscillator;i.stop(r),this.context.setTimeout((function(){return i.dispose()}),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(r)}}},{key:"phase",get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}},{key:"sourceType",get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}},{key:"_getOscType",value:function(t,e){return t instanceof Yo[e]}},{key:"baseType",get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}},{key:"width",get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}},{key:"count",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&Yi(t)&&(this._oscillator.count=t)}},{key:"spread",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&Yi(t)&&(this._oscillator.spread=t)}},{key:"modulationType",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ki(t)&&(this._oscillator.modulationType=t)}},{key:"modulationIndex",get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}},{key:"harmonicity",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}},{key:"modulationFrequency",get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Bo.getDefaults(),Ho.getDefaults(),qo.getDefaults(),Go.getDefaults(),Wo.getDefaults(),Xo.getDefaults())}}]),n}(jo),Qo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["value"])))).override=!1,t.name="Add",t._sum=new po({context:t.context}),t.input=t._sum,t.output=t._sum,t.addend=t._param,co(t._constantSource,t._sum),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._sum.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(go.getDefaults(),{value:0})}}]),n}(go),Jo=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["min","max"])))).name="Scale";var r=ma(n.getDefaults(),arguments,["min","max"]);return t._mult=t.input=new Uo({context:t.context,value:r.max-r.min}),t._add=t.output=new Qo({context:t.context,value:r.min}),t._min=r.min,t._max=r.max,t.input.connect(t.output),t}return Object(P.a)(n,[{key:"min",get:function(){return this._min},set:function(t){this._min=t,this._setRange()}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this._setRange()}},{key:"_setRange",value:function(){this._add.value=this._min,this._mult.value=this._max-this._min}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._add.dispose(),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(zo.getDefaults(),{max:1,min:0})}}]),n}(zo);function Ko(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Fi(r,t,e),n.set(this,r)}})}}function $o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Fi(this.toSeconds(r),t,e),n.set(this,r)}})}}var ts=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["url","onload"]))).name="Player",t._activeSources=new Set;var r=ma(n.getDefaults(),arguments,["url","onload"]);return t._buffer=new za({onload:t._onload.bind(Object(q.a)(t),r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),t.autostart=r.autostart,t._loop=r.loop,t._loopStart=r.loopStart,t._loopEnd=r.loopEnd,t._playbackRate=r.playbackRate,t.fadeIn=r.fadeIn,t.fadeOut=r.fadeOut,t}return Object(P.a)(n,[{key:"load",value:function(t){return sa(this,void 0,void 0,D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._buffer.load(t);case 2:return this._onload(),e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_onload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;t(),this.autostart&&this.start()}},{key:"_onSourceEnd",value:function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}},{key:"start",value:function(t,e,r){return Object(ia.a)(Object(aa.a)(n.prototype),"start",this).call(this,t,e,r),this}},{key:"_start",value:function(t,e,n){e=this._loop?ga(e,this._loopStart):ga(e,0);var r=this.toSeconds(e),i=n;n=ga(n,Math.max(this._buffer.duration-r,0));var a=this.toSeconds(n);a/=this._playbackRate,t=this.toSeconds(t);var o=new Io({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+a),this._state.setStateAtTime("stopped",t+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Wi(i)?o.start(t,r):o.start(t,r,a-this.toSeconds(this.fadeOut))}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._activeSources.forEach((function(t){return t.stop(e)}))}},{key:"restart",value:function(t,e,r){return Object(ia.a)(Object(aa.a)(n.prototype),"restart",this).call(this,t,e,r),this}},{key:"_restart",value:function(t,e,n){this._stop(t),this._start(t,e,n)}},{key:"seek",value:function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var r=this.toSeconds(t);this._stop(n),this._start(n,r)}return this}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this._loopStart=t,this.buffer.loaded&&Fi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopStart=t}))}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this.buffer.loaded&&Fi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopEnd=t}))}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((function(e){e.loop=t})),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((function(t){return t.cancelStop()}))),this._activeSources.forEach((function(n){n.playbackRate.setValueAtTime(t,e)}))}},{key:"reverse",get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}},{key:"loaded",get:function(){return this._buffer.loaded}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._activeSources.forEach((function(t){return t.dispose()})),this._activeSources.clear(),this._buffer.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jo.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ba,onerror:Ba,playbackRate:1,reverse:!1})}}]),n}(jo);oa([$o(0)],ts.prototype,"fadeIn",void 0),oa([$o(0)],ts.prototype,"fadeOut",void 0);var es=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["value"])))).name="Pow";var r=ma(n.getDefaults(),arguments,["value"]);return t._exponentScaler=t.input=t.output=new Fo({context:t.context,mapping:t._expFunc(r.value),length:8192}),t._exponent=r.value,t}return Object(P.a)(n,[{key:"_expFunc",value:function(t){return function(e){return Math.pow(Math.abs(e),t)}}},{key:"value",get:function(){return this._exponent},set:function(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._exponentScaler.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(zo.getDefaults(),{value:1})}}]),n}(zo),ns=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="Envelope",t._sig=new go({context:t.context,value:0}),t.output=t._sig,t.input=void 0;var r=ma(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return t.attack=r.attack,t.decay=r.decay,t.sustain=r.sustain,t.release=r.release,t.attackCurve=r.attackCurve,t.releaseCurve=r.releaseCurve,t.decayCurve=r.decayCurve,t}return Object(P.a)(n,[{key:"value",get:function(){return this.getValueAtTime(this.now())}},{key:"_getCurve",value:function(t,e){if(Ki(t))return t;var n;for(n in rs)if(rs[n][e]===t)return n;return t}},{key:"_setCurve",value:function(t,e,n){if(Ki(n)&&Reflect.has(rs,n)){var r=rs[n];Zi(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else{if(!Ji(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}},{key:"attackCurve",get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}},{key:"releaseCurve",get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}},{key:"decayCurve",get:function(){return this._decayCurve},set:function(t){zi(["linear","exponential"].some((function(e){return e===t})),"Invalid envelope curve: ".concat(t)),this._decayCurve=t}},{key:"triggerAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),r=n,i=this.toSeconds(this.decay),a=this.getValueAtTime(t);if(a>0){var o=1/r,s=1-a;r=s/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,r,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);for(var u=this._attackCurve,l=1;l<u.length;l++)if(u[l-1]<=a&&a<=u[l]){(u=this._attackCurve.slice(l))[0]=a;break}this._sig.setValueCurveAtTime(u,t,r,e)}if(i&&this.sustain<1){var c=e*this.sustain,h=t+r;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(c,i+h):this._sig.exponentialApproachValueAtTime(c,h,i)}return this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(zi(Ji(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}},{key:"getValueAtTime",value:function(t){return this._sig.getValueAtTime(t)}},{key:"triggerAttackRelease",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}},{key:"cancel",value:function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yo(this,t,e,n),this}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return sa(this,void 0,void 0,D.a.mark((function e(){var n,r,i,a,o,s,u,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t/this.context.sampleRate,r=new Fa(1,n,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=i+this.toSeconds(this.release),s=a+(o=.1*a),(u=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/s,decay:n*this.toSeconds(this.decay)/s,release:n*this.toSeconds(this.release)/s,context:r})))._sig.toDestination(),u.triggerAttackRelease(n*(i+o)/s,0),e.next=11,r.render();case 11:return l=e.sent,e.abrupt("return",l.getChannelData(0));case 13:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._sig.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}}]),n}(lo);oa([$o(0)],ns.prototype,"attack",void 0),oa([$o(0)],ns.prototype,"decay",void 0),oa([Ko(0,1)],ns.prototype,"sustain",void 0),oa([$o(0)],ns.prototype,"release",void 0);var rs=function(){var t,e,n=128,r=[];for(t=0;t<n;t++)r[t]=Math.sin(t/127*(Math.PI/2));var i=[];for(t=0;t<127;t++){e=t/127;var a=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=a/10+.83*e}i[127]=1;var o=[];for(t=0;t<n;t++)o[t]=Math.ceil(t/127*5)/5;var s=[];for(t=0;t<n;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));var u,l=[];for(t=0;t<n;t++){e=t/127;var c=4*Math.pow(e,3)+.2,h=Math.cos(c*Math.PI*2*e);l[t]=Math.abs(h*(1-e))}function f(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:f(l),Out:l},cosine:{In:r,Out:(u=r,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:f(i)},sine:{In:s,Out:f(s)},step:{In:o,Out:f(o)}}}(),is=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments)))._scheduledEvents=[],t._synced=!1,t._original_triggerAttack=t.triggerAttack,t._original_triggerRelease=t.triggerRelease;var r=ma(n.getDefaults(),arguments);return t._volume=t.output=new Oo({context:t.context,volume:r.volume}),t.volume=t._volume.volume,Da(Object(q.a)(t),"volume"),t}return Object(P.a)(n,[{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}},{key:"_syncState",value:function(){var t=!1;return this._synced||(this._synced=!0,t=!0),t}},{key:"_syncMethod",value:function(t,e){var n=this,r=this["_original_"+t]=this[t];this[t]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=i[e],s=n.context.transport.schedule((function(t){i[e]=t,r.apply(n,i)}),o);n._scheduledEvents.push(s)}}},{key:"unsync",value:function(){var t=this;return this._scheduledEvents.forEach((function(e){return t.context.transport.clear(e)})),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}},{key:"triggerAttackRelease",value:function(t,e,n,r){var i=this.toSeconds(n),a=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+a),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{volume:0})}}]),n}(lo),as=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),t=e.call(this,ma(n.getDefaults(),arguments));var r=ma(n.getDefaults(),arguments);return t.portamento=r.portamento,t.onsilence=r.onsilence,t}return Object(P.a)(n,[{key:"triggerAttack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",t,e,n);var r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,n),this.setNote(t,r),this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}},{key:"setNote",value:function(t,e){var n=this.toSeconds(e),r=t instanceof no?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}],[{key:"getDefaults",value:function(){return Object.assign(is.getDefaults(),{detune:0,onsilence:Ba,portamento:0})}}]),n}(is);oa([$o(0)],as.prototype,"portamento",void 0);var os=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="AmplitudeEnvelope",t._gainNode=new po({context:t.context,gain:0}),t.output=t._gainNode,t.input=t._gainNode,t._sig.connect(t._gainNode.gain),t.output=t._gainNode,t.input=t._gainNode,t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._gainNode.dispose(),this}}]),n}(ns),ss=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="Synth";var r=ma(n.getDefaults(),arguments);return t.oscillator=new Zo(Object.assign({context:t.context,detune:r.detune,onstop:function(){return t.onsilence(Object(q.a)(t))}},r.oscillator)),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.envelope=new os(Object.assign({context:t.context},r.envelope)),t.oscillator.chain(t.envelope,t.output),Da(Object(q.a)(t),["oscillator","frequency","detune","envelope"]),t}return Object(P.a)(n,[{key:"_triggerEnvelopeAttack",value:function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+r)}}},{key:"_triggerEnvelopeRelease",value:function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(as.getDefaults(),{envelope:Object.assign(ya(ns.getDefaults(),Object.keys(lo.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ya(Zo.getDefaults(),[].concat(Q(Object.keys(jo.getDefaults())),["frequency","detune"])),{type:"triangle"})})}}]),n}(as),us=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="ModulationSynth";var r=ma(n.getDefaults(),arguments);return t._carrier=new ss({context:t.context,oscillator:r.oscillator,envelope:r.envelope,onsilence:function(){return t.onsilence(Object(q.a)(t))},volume:-10}),t._modulator=new ss({context:t.context,oscillator:r.modulation,envelope:r.modulationEnvelope,volume:-10}),t.oscillator=t._carrier.oscillator,t.envelope=t._carrier.envelope,t.modulation=t._modulator.oscillator,t.modulationEnvelope=t._modulator.envelope,t.frequency=new go({context:t.context,units:"frequency"}),t.detune=new go({context:t.context,value:r.detune,units:"cents"}),t.harmonicity=new Uo({context:t.context,value:r.harmonicity,minValue:0}),t._modulationNode=new po({context:t.context,gain:0}),Da(Object(q.a)(t),["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),t}return Object(P.a)(n,[{key:"_triggerEnvelopeAttack",value:function(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}},{key:"_triggerEnvelopeRelease",value:function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(as.getDefaults(),{harmonicity:3,oscillator:Object.assign(ya(Zo.getDefaults(),[].concat(Q(Object.keys(jo.getDefaults())),["frequency","detune"])),{type:"sine"}),envelope:Object.assign(ya(ns.getDefaults(),Object.keys(lo.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ya(Zo.getDefaults(),[].concat(Q(Object.keys(jo.getDefaults())),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign(ya(ns.getDefaults(),Object.keys(lo.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}}]),n}(as),ls=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type"]))).name="BiquadFilter";var r=ma(n.getDefaults(),arguments,["frequency","type"]);return t._filter=t.context.createBiquadFilter(),t.input=t.output=t._filter,t.Q=new uo({context:t.context,units:"number",value:r.Q,param:t._filter.Q}),t.frequency=new uo({context:t.context,units:"frequency",value:r.frequency,param:t._filter.frequency}),t.detune=new uo({context:t.context,units:"cents",value:r.detune,param:t._filter.detune}),t.gain=new uo({context:t.context,units:"decibels",convert:!1,value:r.gain,param:t._filter.gain}),t.type=r.type,t}return Object(P.a)(n,[{key:"type",get:function(){return this._filter.type},set:function(t){zi(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._filter.type=t}},{key:"getFrequencyResponse",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,e=new Float32Array(t),n=0;n<t;n++){var r=Math.pow(n/t,2),i=19980*r+20;e[n]=i}var a=new Float32Array(t),o=new Float32Array(t),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(e,a,o),a}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}}]),n}(lo),cs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["frequency","type","rolloff"]))).name="Filter",t.input=new po({context:t.context}),t.output=new po({context:t.context}),t._filters=[];var r=ma(n.getDefaults(),arguments,["frequency","type","rolloff"]);return t._filters=[],t.Q=new go({context:t.context,units:"positive",value:r.Q}),t.frequency=new go({context:t.context,units:"frequency",value:r.frequency}),t.detune=new go({context:t.context,units:"cents",value:r.detune}),t.gain=new go({context:t.context,units:"decibels",convert:!1,value:r.gain}),t._type=r.type,t.rolloff=r.rolloff,Da(Object(q.a)(t),["detune","frequency","gain","Q"]),t}return Object(P.a)(n,[{key:"type",get:function(){return this._type},set:function(t){zi(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._type=t,this._filters.forEach((function(e){return e.type=t}))}},{key:"rolloff",get:function(){return this._rolloff},set:function(t){var e=Yi(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],r=n.indexOf(e);zi(-1!==r,"rolloff can only be ".concat(n.join(", "))),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((function(t){return t.disconnect()})),this._filters=new Array(r);for(var i=0;i<r;i++){var a=new ls({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[i]=a}this._internalChannels=this._filters,co.apply(void 0,[this.input].concat(Q(this._internalChannels),[this.output]))}},{key:"getFrequencyResponse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,e=new ls({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((function(){return 1}));return this._filters.forEach((function(){e.getFrequencyResponse(t).forEach((function(t,e){return n[e]*=t}))})),e.dispose(),n}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._filters.forEach((function(t){t.dispose()})),Na(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}}]),n}(lo),hs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="FrequencyEnvelope";var r=ma(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return t._octaves=r.octaves,t._baseFrequency=t.toFrequency(r.baseFrequency),t._exponent=t.input=new es({context:t.context,value:r.exponent}),t._scale=t.output=new Jo({context:t.context,min:t._baseFrequency,max:t._baseFrequency*Math.pow(2,t._octaves)}),t._sig.chain(t._exponent,t._scale),t}return Object(P.a)(n,[{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(t){var e=this.toFrequency(t);Fi(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}},{key:"exponent",get:function(){return this._exponent.value},set:function(t){this._exponent.value=t}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._exponent.dispose(),this._scale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(ns.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}}]),n}(ns),fs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="MonoSynth";var r=ma(n.getDefaults(),arguments);return t.oscillator=new Zo(Object.assign(r.oscillator,{context:t.context,detune:r.detune,onstop:function(){return t.onsilence(Object(q.a)(t))}})),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.filter=new cs(Object.assign(r.filter,{context:t.context})),t.filterEnvelope=new hs(Object.assign(r.filterEnvelope,{context:t.context})),t.envelope=new os(Object.assign(r.envelope,{context:t.context})),t.oscillator.chain(t.filter,t.envelope,t.output),t.filterEnvelope.connect(t.filter.frequency),Da(Object(q.a)(t),["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),t}return Object(P.a)(n,[{key:"_triggerEnvelopeAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+r)}}},{key:"_triggerEnvelopeRelease",value:function(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(as.getDefaults(),{envelope:Object.assign(ya(ns.getDefaults(),Object.keys(lo.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ya(cs.getDefaults(),Object.keys(lo.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ya(hs.getDefaults(),Object.keys(lo.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ya(Zo.getDefaults(),Object.keys(jo.getDefaults())),{type:"sawtooth"})})}}]),n}(as),ds=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="FMSynth";var r=ma(n.getDefaults(),arguments);return t.modulationIndex=new Uo({context:t.context,value:r.modulationIndex}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t.detune.fan(t._carrier.detune,t._modulator.detune),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(us.getDefaults(),{modulationIndex:10})}}]),n}(us),ps=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments))).name="MembraneSynth",t.portamento=0;var r=ma(n.getDefaults(),arguments);return t.pitchDecay=r.pitchDecay,t.octaves=r.octaves,Da(Object(q.a)(t),["oscillator","envelope"]),t}return Object(P.a)(n,[{key:"setNote",value:function(t,e){var n=this.toSeconds(e),r=this.toFrequency(t instanceof no?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this}}],[{key:"getDefaults",value:function(){return va(as.getDefaults(),ss.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}}]),n}(ss);oa([Ko(0)],ps.prototype,"octaves",void 0),oa([$o(0)],ps.prototype,"pitchDecay",void 0);var vs=new Set;function ms(t){vs.add(t)}function gs(t,e){var n='registerProcessor("'.concat(t,'", ').concat(e,")");vs.add(n)}ms('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');ms("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");ms("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");var ys="feedback-comb-filter";gs(ys,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');var _s=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))).name="Sampler",t._activeSources=new Map;var r=ma(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),i={};return Object.keys(r.urls).forEach((function(e){var n=parseInt(e,10);if(zi($i(e)||Yi(n)&&isFinite(n),"url key is neither a note or midi pitch: ".concat(e)),$i(e)){var a=new no(t.context,e).toMidi();i[a]=r.urls[e]}else Yi(n)&&isFinite(n)&&(i[n]=r.urls[n])})),t._buffers=new So({urls:i,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),t.attack=r.attack,t.release=r.release,t.curve=r.curve,t._buffers.loaded&&Promise.resolve().then(r.onload),t}return Object(P.a)(n,[{key:"_findClosest",value:function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: ".concat(t))}},{key:"triggerAttack",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",t,e,r),Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=$a(new no(n.context,t).toFrequency()),a=Math.round(i),o=i-a,s=n._findClosest(a),u=a-s,l=n._buffers.get(u),c=Qa(s+o),h=new Io({url:l,context:n.context,curve:n.curve,fadeIn:n.attack,fadeOut:n.release,playbackRate:c}).connect(n.output);h.start(e,0,l.duration/c,r),Ji(n._activeSources.get(a))||n._activeSources.set(a,[]),n._activeSources.get(a).push(h),h.onended=function(){if(n._activeSources&&n._activeSources.has(a)){var t=n._activeSources.get(a),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}})),this}},{key:"triggerRelease",value:function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((function(t){var r=new no(n.context,t).toMidi();if(n._activeSources.has(r)&&n._activeSources.get(r).length){var i=n._activeSources.get(r);e=n.toSeconds(e),i.forEach((function(t){t.stop(e)})),n._activeSources.set(r,[])}})),this}},{key:"releaseAll",value:function(t){var e=this.toSeconds(t);return this._activeSources.forEach((function(t){for(;t.length;){t.shift().stop(e)}})),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"triggerAttackRelease",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=this.toSeconds(n);return this.triggerAttack(t,a,i),Ji(e)?(zi(Ji(t),"notes must be an array when duration is array"),t.forEach((function(t,n){var i=e[Math.min(n,e.length-1)];r.triggerRelease(t,a+r.toSeconds(i))}))):this.triggerRelease(t,a+this.toSeconds(e)),this}},{key:"add",value:function(t,e,n){if(zi($i(t)||isFinite(t),"note must be a pitch or midi: ".concat(t)),$i(t)){var r=new no(this.context,t).toMidi();this._buffers.add(r,e,n)}else this._buffers.add(t,e,n);return this}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._buffers.dispose(),this._activeSources.forEach((function(t){t.forEach((function(t){return t.dispose()}))})),this._activeSources.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(is.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ba,onerror:Ba,release:.1,urls:{}})}}]),n}(is);oa([$o(0)],_s.prototype,"attack",void 0),oa([$o(0)],_s.prototype,"release",void 0);var bs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["callback","value"]))).name="ToneEvent",t._state=new so("stopped"),t._startOffset=0;var r=ma(n.getDefaults(),arguments,["callback","value"]);return t._loop=r.loop,t.callback=r.callback,t.value=r.value,t._loopStart=t.toTicks(r.loopStart),t._loopEnd=t.toTicks(r.loopEnd),t._playbackRate=r.playbackRate,t._probability=r.probability,t._humanize=r.humanize,t.mute=r.mute,t._playbackRate=r.playbackRate,t._state.increasing=!0,t._rescheduleEvents(),t}return Object(P.a)(n,[{key:"_rescheduleEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(e,(function(e){var n;if("started"===e.state){-1!==e.id&&t.context.transport.clear(e.id);var r=e.time+Math.round(t.startOffset/t._playbackRate);if(!0===t._loop||Yi(t._loop)&&t._loop>1){n=1/0,Yi(t._loop)&&(n=t._loop*t._getLoopDuration());var i=t._state.getAfter(r);null!==i&&(n=Math.min(n,i.time-r)),n!==1/0&&(t._state.setStateAtTime("stopped",r+n+1,{id:-1}),n=new ko(t.context,n));var a=new ko(t.context,t._getLoopDuration());e.id=t.context.transport.scheduleRepeat(t._tick.bind(t),a,new ko(t.context,r),n)}else e.id=t.context.transport.schedule(t._tick.bind(t),new ko(t.context,r))}}))}},{key:"state",get:function(){return this._state.getValueAtTime(this.context.transport.ticks)}},{key:"startOffset",get:function(){return this._startOffset},set:function(t){this._startOffset=t}},{key:"probability",get:function(){return this._probability},set:function(t){this._probability=t}},{key:"humanize",get:function(){return this._humanize},set:function(t){this._humanize=t}},{key:"start",value:function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}},{key:"stop",value:function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var n=this._state.getBefore(e),r=e;null!==n&&(r=n.time),this._rescheduleEvents(r)}return this}},{key:"cancel",value:function(t){var e=this;t=ga(t,-1/0);var n=this.toTicks(t);return this._state.forEachFrom(n,(function(t){e.context.transport.clear(t.id)})),this._state.cancel(n),this}},{key:"_tick",value:function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;Qi(this.humanize)||(n=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*n}this.callback(t,this.value)}}},{key:"_getLoopDuration",value:function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}},{key:"loopEnd",get:function(){return new ko(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}},{key:"loopStart",get:function(){return new ko(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}},{key:"progress",get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.cancel(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(oo.getDefaults(),{callback:Ba,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}}]),n}(oo),xs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["callback","events"]))).name="Part",t._state=new so("stopped"),t._events=new Set;var r=ma(n.getDefaults(),arguments,["callback","events"]);return t._state.increasing=!0,r.events.forEach((function(e){Ji(e)?t.add(e[0],e[1]):t.add(e)})),t}return Object(P.a)(n,[{key:"start",value:function(t,e){var n=this,r=this.toTicks(t);if("started"!==this._state.getValueAtTime(r)){e=ga(e,this._loop?this._loopStart:0),e=this._loop?ga(e,this._loopStart):ga(e,0);var i=this.toTicks(e);this._state.add({id:-1,offset:i,state:"started",time:r}),this._forEach((function(t){n._startNote(t,r,i)}))}return this}},{key:"_startNote",value:function(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new ko(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new ko(this.context,e))):t.startOffset>=n&&t.start(new ko(this.context,e))}},{key:"startOffset",get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach((function(t){t.startOffset+=e._startOffset}))}},{key:"stop",value:function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((function(e){e.stop(t)})),this}},{key:"at",value:function(t,e){for(var n=new ao(this.context,t).toTicks(),r=new ko(this.context,1).toSeconds(),i=this._events.values(),a=i.next();!a.done;){var o=a.value;if(Math.abs(n-o.startOffset)<r)return Gi(e)&&(o.value=e),o;a=i.next()}return Gi(e)?(this.add(t,e),this.at(t)):null}},{key:"add",value:function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var n,r=this.toTicks(t);return e instanceof bs?(n=e).callback=this._tick.bind(this):n=new bs({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=r,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this}},{key:"_restartEvent",value:function(t){var e=this;this._state.forEach((function(n){"started"===n.state?e._startNote(t,n.time,n.offset):t.stop(new ko(e.context,n.time))}))}},{key:"remove",value:function(t,e){var n=this;return Zi(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((function(r){r.startOffset===t&&(Wi(e)||Gi(e)&&r.value===e)&&(n._events.delete(r),r.dispose())})),this}},{key:"clear",value:function(){return this._forEach((function(t){return t.dispose()})),this._events.clear(),this}},{key:"cancel",value:function(t){return this._forEach((function(e){return e.cancel(t)})),this._state.cancel(this.toTicks(t)),this}},{key:"_forEach",value:function(t){return this._events&&this._events.forEach((function(e){e instanceof n?e._forEach(t):t(e)})),this}},{key:"_setAll",value:function(t,e){this._forEach((function(n){n[t]=e}))}},{key:"_tick",value:function(t,e){this.mute||this.callback(t,e)}},{key:"_testLoopBoundries",value:function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}},{key:"probability",get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}},{key:"humanize",get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}},{key:"loop",get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach((function(n){n.loopStart=e.loopStart,n.loopEnd=e.loopEnd,n.loop=t,e._testLoopBoundries(n)}))}},{key:"loopEnd",get:function(){return new ko(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach((function(n){n.loopEnd=t,e._testLoopBoundries(n)}))}},{key:"loopStart",get:function(){return new ko(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach((function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)}))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}},{key:"length",get:function(){return this._events.size}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(bs.getDefaults(),{events:[]})}}]),n}(bs);var ws=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["callback","events","subdivision"]))).name="Sequence",t._part=new xs({callback:t._seqCallback.bind(Object(q.a)(t)),context:t.context}),t._events=[],t._eventsArray=[];var r=ma(n.getDefaults(),arguments,["callback","events","subdivision"]);return t._subdivision=t.toTicks(r.subdivision),t.events=r.events,t.loop=r.loop,t.loopStart=r.loopStart,t.loopEnd=r.loopEnd,t.playbackRate=r.playbackRate,t.probability=r.probability,t.humanize=r.humanize,t.mute=r.mute,t.playbackRate=r.playbackRate,t}return Object(P.a)(n,[{key:"_seqCallback",value:function(t,e){null!==e&&this.callback(t,e)}},{key:"events",get:function(){return this._events},set:function(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}},{key:"start",value:function(t,e){return this._part.start(t,e?this._indexTime(e):e),this}},{key:"stop",value:function(t){return this._part.stop(t),this}},{key:"subdivision",get:function(){return new ko(this.context,this._subdivision).toSeconds()}},{key:"_createSequence",value:function(t){var e=this;return new Proxy(t,{get:function(t,e){return t[e]},set:function(t,n,r){return Ki(n)&&isFinite(parseInt(n,10))&&Ji(r)?t[n]=e._createSequence(r):t[n]=r,e._eventsUpdated(),!0}})}},{key:"_eventsUpdated",value:function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}},{key:"_rescheduleSequence",value:function(t,e,n){var r=this;t.forEach((function(t,i){var a=i*e+n;if(Ji(t))r._rescheduleSequence(t,e/t.length,a);else{var o=new ko(r.context,a,"i").toSeconds();r._part.add(o,t)}}))}},{key:"_indexTime",value:function(t){return new ko(this.context,t*this._subdivision+this.startOffset).toSeconds()}},{key:"clear",value:function(){return this._part.clear(),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._part.dispose(),this}},{key:"loop",get:function(){return this._part.loop},set:function(t){this._part.loop=t}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}},{key:"startOffset",get:function(){return this._part.startOffset},set:function(t){this._part.startOffset=t}},{key:"playbackRate",get:function(){return this._part.playbackRate},set:function(t){this._part.playbackRate=t}},{key:"probability",get:function(){return this._part.probability},set:function(t){this._part.probability=t}},{key:"progress",get:function(){return this._part.progress}},{key:"humanize",get:function(){return this._part.humanize},set:function(t){this._part.humanize=t}},{key:"length",get:function(){return this._part.length}}],[{key:"getDefaults",value:function(){return Object.assign(ya(bs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}}]),n}(bs),Ss=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,Object.assign(ma(n.getDefaults(),arguments,["pan"])))).name="Panner",t._panner=t.context.createStereoPanner(),t.input=t._panner,t.output=t._panner;var r=ma(n.getDefaults(),arguments,["pan"]);return t.pan=new uo({context:t.context,param:t._panner.pan,value:r.pan,minValue:-1,maxValue:1}),t._panner.channelCount=r.channelCount,t._panner.channelCountMode="explicit",Da(Object(q.a)(t),"pan"),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.pan.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{pan:0,channelCount:1})}}]),n}(lo),ks="bit-crusher";gs(ks,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");var Ts=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["solo"]))).name="Solo";var r=ma(n.getDefaults(),arguments,["solo"]);return t.input=t.output=new po({context:t.context}),n._allSolos.has(t.context)||n._allSolos.set(t.context,new Set),n._allSolos.get(t.context).add(Object(q.a)(t)),t.solo=r.solo,t}return Object(P.a)(n,[{key:"solo",get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach((function(t){return t._updateSolo()}))}},{key:"muted",get:function(){return 0===this.input.gain.value}},{key:"_addSolo",value:function(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}},{key:"_removeSolo",value:function(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}},{key:"_isSoloed",value:function(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}},{key:"_noSolos",value:function(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&0===n._soloed.get(this.context).size}},{key:"_updateSolo",value:function(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{solo:!1})}}]),n}(lo);Ts._allSolos=new Map,Ts._soloed=new Map;var Es=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["pan","volume"]))).name="PanVol";var r=ma(n.getDefaults(),arguments,["pan","volume"]);return t._panner=t.input=new Ss({context:t.context,pan:r.pan,channelCount:r.channelCount}),t.pan=t._panner.pan,t._volume=t.output=new Oo({context:t.context,volume:r.volume}),t.volume=t._volume.volume,t._panner.connect(t._volume),t.mute=r.mute,Da(Object(q.a)(t),["pan","volume"]),t}return Object(P.a)(n,[{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}}]),n}(lo);(function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(o.a)(this,n),(t=e.call(this,ma(n.getDefaults(),arguments,["volume","pan"]))).name="Channel";var r=ma(n.getDefaults(),arguments,["volume","pan"]);return t._solo=t.input=new Ts({solo:r.solo,context:t.context}),t._panVol=t.output=new Es({context:t.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),t.pan=t._panVol.pan,t.volume=t._panVol.volume,t._solo.connect(t._panVol),Da(Object(q.a)(t),["pan","volume"]),t}return Object(P.a)(n,[{key:"solo",get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}},{key:"muted",get:function(){return this._solo.muted||this.mute}},{key:"mute",get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}},{key:"_getBus",value:function(t){return n.buses.has(t)||n.buses.set(t,new po({context:this.context})),n.buses.get(t)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._getBus(t),r=new po({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(n),r}},{key:"receive",value:function(t){return this._getBus(t).connect(this),this}},{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}}]),n}(lo)).buses=new Map;var Cs=function(t){Object(L.a)(n,t);var e=Object(R.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).name="Listener",t.positionX=new uo({context:t.context,param:t.context.rawContext.listener.positionX}),t.positionY=new uo({context:t.context,param:t.context.rawContext.listener.positionY}),t.positionZ=new uo({context:t.context,param:t.context.rawContext.listener.positionZ}),t.forwardX=new uo({context:t.context,param:t.context.rawContext.listener.forwardX}),t.forwardY=new uo({context:t.context,param:t.context.rawContext.listener.forwardY}),t.forwardZ=new uo({context:t.context,param:t.context.rawContext.listener.forwardZ}),t.upX=new uo({context:t.context,param:t.context.rawContext.listener.upX}),t.upY=new uo({context:t.context,param:t.context.rawContext.listener.upY}),t.upZ=new uo({context:t.context,param:t.context.rawContext.listener.upZ}),t}return Object(P.a)(n,[{key:"dispose",value:function(){return Object(ia.a)(Object(aa.a)(n.prototype),"dispose",this).call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(lo.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}}]),n}(lo);Oa((function(t){t.listener=new Cs({context:t})})),Aa((function(t){t.listener.dispose()}));var Os=qa().transport;qa().destination,qa().destination;qa().listener;qa().draw;qa()},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e){var n=Array.isArray;t.exports=n},,function(t,e,n){var r=n(229),i=n(234);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(49),i=n(230),a=n(231),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(0),i=n(9),a=n(3),o=n(4),s=n(7),u={type:"change"},l={type:"start"},c={type:"end"},h=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,a){var o;Object(r.a)(this,n),o=e.call(this),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=t,o.domElement=a,o.enabled=!0,o.target=new s.zb,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:s.K.ROTATE,MIDDLE:s.K.DOLLY,RIGHT:s.K.PAN},o.touches={ONE:s.tb.ROTATE,TWO:s.tb.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return v.phi},o.getAzimuthalAngle=function(){return v.theta},o.listenToKeyEvents=function(t){t.addEventListener("keydown",Z),this._domElementKeyEvents=t},o.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},o.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(u),h.update(),d=f.NONE},o.update=function(){var e=new s.zb,n=(new s.gb).setFromUnitVectors(t.up,new s.zb(0,1,0)),r=n.clone().invert(),i=new s.zb,a=new s.gb,o=2*Math.PI;return function(){var t=h.object.position;e.copy(t).sub(h.target),e.applyQuaternion(n),v.setFromVector3(e),h.autoRotate&&d===f.NONE&&A(2*Math.PI/60/60*h.autoRotateSpeed),h.enableDamping?(v.theta+=m.theta*h.dampingFactor,v.phi+=m.phi*h.dampingFactor):(v.theta+=m.theta,v.phi+=m.phi);var s=h.minAzimuthAngle,l=h.maxAzimuthAngle;return isFinite(s)&&isFinite(l)&&(s<-Math.PI?s+=o:s>Math.PI&&(s-=o),l<-Math.PI?l+=o:l>Math.PI&&(l-=o),v.theta=s<=l?Math.max(s,Math.min(l,v.theta)):v.theta>(s+l)/2?Math.max(s,v.theta):Math.min(l,v.theta)),v.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=g,v.radius=Math.max(h.minDistance,Math.min(h.maxDistance,v.radius)),!0===h.enableDamping?h.target.addScaledVector(y,h.dampingFactor):h.target.add(y),e.setFromSpherical(v),e.applyQuaternion(r),t.copy(h.target).add(e),h.object.lookAt(h.target),!0===h.enableDamping?(m.theta*=1-h.dampingFactor,m.phi*=1-h.dampingFactor,y.multiplyScalar(1-h.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),g=1,!!(_||i.distanceToSquared(h.object.position)>p||8*(1-a.dot(h.object.quaternion))>p)&&(h.dispatchEvent(u),i.copy(h.object.position),a.copy(h.object.quaternion),_=!1,!0)}}(),o.dispose=function(){h.domElement.removeEventListener("contextmenu",$),h.domElement.removeEventListener("pointerdown",W),h.domElement.removeEventListener("wheel",Y),h.domElement.removeEventListener("touchstart",Q),h.domElement.removeEventListener("touchend",K),h.domElement.removeEventListener("touchmove",J),h.domElement.ownerDocument.removeEventListener("pointermove",G),h.domElement.ownerDocument.removeEventListener("pointerup",X),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",Z)};var h=Object(i.a)(o),f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,p=1e-6,v=new s.rb,m=new s.rb,g=1,y=new s.zb,_=!1,b=new s.yb,x=new s.yb,w=new s.yb,S=new s.yb,k=new s.yb,T=new s.yb,E=new s.yb,C=new s.yb,O=new s.yb;function M(){return Math.pow(.95,h.zoomSpeed)}function A(t){m.theta-=t}function P(t){m.phi-=t}var L=function(){var t=new s.zb;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),y.add(t)}}(),R=function(){var t=new s.zb;return function(e,n){!0===h.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(h.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),j=function(){var t=new s.zb;return function(e,n){var r=h.domElement;if(h.object.isPerspectiveCamera){var i=h.object.position;t.copy(i).sub(h.target);var a=t.length();a*=Math.tan(h.object.fov/2*Math.PI/180),L(2*e*a/r.clientHeight,h.object.matrix),R(2*n*a/r.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(L(e*(h.object.right-h.object.left)/h.object.zoom/r.clientWidth,h.object.matrix),R(n*(h.object.top-h.object.bottom)/h.object.zoom/r.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function I(t){h.object.isPerspectiveCamera?g/=t:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*t)),h.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function D(t){h.object.isPerspectiveCamera?g*=t:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/t)),h.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function N(t){b.set(t.clientX,t.clientY)}function B(t){S.set(t.clientX,t.clientY)}function z(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,n)}}function F(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);E.set(0,r)}function U(t){if(1==t.touches.length)x.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);x.set(e,n)}w.subVectors(x,b).multiplyScalar(h.rotateSpeed);var r=h.domElement;A(2*Math.PI*w.x/r.clientHeight),P(2*Math.PI*w.y/r.clientHeight),b.copy(x)}function q(t){if(1==t.touches.length)k.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);k.set(e,n)}T.subVectors(k,S).multiplyScalar(h.panSpeed),j(T.x,T.y),S.copy(k)}function H(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);C.set(0,r),O.set(0,Math.pow(C.y/E.y,h.zoomSpeed)),I(O.y),E.copy(C)}function W(t){if(!1!==h.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){var e;switch(t.preventDefault(),h.domElement.focus?h.domElement.focus():window.focus(),t.button){case 0:e=h.mouseButtons.LEFT;break;case 1:e=h.mouseButtons.MIDDLE;break;case 2:e=h.mouseButtons.RIGHT;break;default:e=-1}switch(e){case s.K.DOLLY:if(!1===h.enableZoom)return;!function(t){E.set(t.clientX,t.clientY)}(t),d=f.DOLLY;break;case s.K.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===h.enablePan)return;B(t),d=f.PAN}else{if(!1===h.enableRotate)return;N(t),d=f.ROTATE}break;case s.K.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===h.enableRotate)return;N(t),d=f.ROTATE}else{if(!1===h.enablePan)return;B(t),d=f.PAN}break;default:d=f.NONE}d!==f.NONE&&(h.domElement.ownerDocument.addEventListener("pointermove",G),h.domElement.ownerDocument.addEventListener("pointerup",X),h.dispatchEvent(l))}(t)}}function G(t){if(!1!==h.enabled)switch(t.pointerType){case"mouse":case"pen":!function(t){if(!1===h.enabled)return;switch(t.preventDefault(),d){case f.ROTATE:if(!1===h.enableRotate)return;!function(t){x.set(t.clientX,t.clientY),w.subVectors(x,b).multiplyScalar(h.rotateSpeed);var e=h.domElement;A(2*Math.PI*w.x/e.clientHeight),P(2*Math.PI*w.y/e.clientHeight),b.copy(x),h.update()}(t);break;case f.DOLLY:if(!1===h.enableZoom)return;!function(t){C.set(t.clientX,t.clientY),O.subVectors(C,E),O.y>0?I(M()):O.y<0&&D(M()),E.copy(C),h.update()}(t);break;case f.PAN:if(!1===h.enablePan)return;!function(t){k.set(t.clientX,t.clientY),T.subVectors(k,S).multiplyScalar(h.panSpeed),j(T.x,T.y),S.copy(k),h.update()}(t)}}(t)}}function X(t){switch(t.pointerType){case"mouse":case"pen":!function(t){if(h.domElement.ownerDocument.removeEventListener("pointermove",G),h.domElement.ownerDocument.removeEventListener("pointerup",X),!1===h.enabled)return;h.dispatchEvent(c),d=f.NONE}()}}function Y(t){!1===h.enabled||!1===h.enableZoom||d!==f.NONE&&d!==f.ROTATE||(t.preventDefault(),h.dispatchEvent(l),function(t){t.deltaY<0?D(M()):t.deltaY>0&&I(M()),h.update()}(t),h.dispatchEvent(c))}function Z(t){!1!==h.enabled&&!1!==h.enablePan&&function(t){var e=!1;switch(t.code){case h.keys.UP:j(0,h.keyPanSpeed),e=!0;break;case h.keys.BOTTOM:j(0,-h.keyPanSpeed),e=!0;break;case h.keys.LEFT:j(h.keyPanSpeed,0),e=!0;break;case h.keys.RIGHT:j(-h.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),h.update())}(t)}function Q(t){if(!1!==h.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(h.touches.ONE){case s.tb.ROTATE:if(!1===h.enableRotate)return;z(t),d=f.TOUCH_ROTATE;break;case s.tb.PAN:if(!1===h.enablePan)return;F(t),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(h.touches.TWO){case s.tb.DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;!function(t){h.enableZoom&&V(t),h.enablePan&&F(t)}(t),d=f.TOUCH_DOLLY_PAN;break;case s.tb.DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;!function(t){h.enableZoom&&V(t),h.enableRotate&&z(t)}(t),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&h.dispatchEvent(l)}}function J(t){if(!1!==h.enabled)switch(t.preventDefault(),d){case f.TOUCH_ROTATE:if(!1===h.enableRotate)return;U(t),h.update();break;case f.TOUCH_PAN:if(!1===h.enablePan)return;q(t),h.update();break;case f.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;!function(t){h.enableZoom&&H(t),h.enablePan&&q(t)}(t),h.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;!function(t){h.enableZoom&&H(t),h.enableRotate&&U(t)}(t),h.update();break;default:d=f.NONE}}function K(t){!1!==h.enabled&&(h.dispatchEvent(c),d=f.NONE)}function $(t){!1!==h.enabled&&t.preventDefault()}return h.domElement.addEventListener("contextmenu",$),h.domElement.addEventListener("pointerdown",W),h.domElement.addEventListener("wheel",Y,{passive:!1}),h.domElement.addEventListener("touchstart",Q,{passive:!1}),h.domElement.addEventListener("touchend",K),h.domElement.addEventListener("touchmove",J,{passive:!1}),o.update(),o}return n}(s.o)},function(t,e,n){"use strict";function r(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),a=Math.round(t.b),o=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+a+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+a+","+o+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+a+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+a+","+o+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+o+"}":"unknown format"}n.d(e,"a",(function(){return ht}));var i=Array.prototype.forEach,a=Array.prototype.slice,o={BREAK:{},extend:function(t){return this.each(a.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(a.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=a.call(arguments);return function(){for(var e=a.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(i&&t.forEach&&t.forEach===i)t.forEach(e,n);else if(t.length===t.length+0){var r,a=void 0;for(a=0,r=t.length;a<r;a++)if(a in t&&e.call(n,t[a],a)===this.BREAK)return}else for(var o in t)if(e.call(n,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,a=arguments;function o(){r=null,n||t.apply(i,a)}var s=n||!r;clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a)}},toArray:function(t){return t.toArray?t.toArray():a.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:o.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:r},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:r},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:r}}},{litmus:o.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:o.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:o.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b)&&o.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v)&&o.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],u=void 0,l=void 0,c=function(){l=!1;var t=arguments.length>1?o.toArray(arguments):arguments[0];return o.each(s,(function(e){if(e.litmus(t))return o.each(e.conversions,(function(e,n){if(u=e.read(t),!1===l&&!1!==u)return l=u,u.conversionName=n,u.conversion=e,o.BREAK})),o.BREAK})),l},h=void 0,f={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),a=n*(1-e),o=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),a=i-r,o=void 0;return 0===i?{h:NaN,s:0,v:0}:(o=t===i?(e-n)/a:e===i?2+(n-t)/a:4+(t-e)/a,(o/=6)<0&&(o+=1),{h:360*o,s:a/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(h=8*e)|t&~(255<<h)}},d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},g=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},_=function(){function t(){if(p(this,t),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return v(t,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function b(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||_.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(_.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function x(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||_.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(_.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}_.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=f.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");o.extend(t.__state,f.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},_.recalculateHSV=function(t){var e=f.rgb_to_hsv(t.r,t.g,t.b);o.extend(t.__state,{s:e.s,v:e.v}),o.isNaN(e.h)?o.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},_.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(_.prototype,"r",2),b(_.prototype,"g",1),b(_.prototype,"b",0),x(_.prototype,"h"),x(_.prototype,"s"),x(_.prototype,"v"),Object.defineProperty(_.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(_.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=f.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var w=function(){function t(e,n){p(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return v(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),S={};o.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){o.each(t,(function(t){S[t]=e}))}));var k=/(\d+(\.\d+)?)px/;function T(t){if("0"===t||o.isUndefined(t))return 0;var e=t.match(k);return o.isNull(e)?0:parseFloat(e[1])}var E={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;o.isUndefined(i)&&(i=!0),o.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},a=S[e];if(!a)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;o.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(e,i.bubbles||!1,i.cancelable||!0)}o.defaults(s,r),t.dispatchEvent(s)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),E},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),E},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return E},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return E},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return T(e["border-left-width"])+T(e["border-right-width"])+T(e["padding-left"])+T(e["padding-right"])+T(e.width)},getHeight:function(t){var e=getComputedStyle(t);return T(e["border-top-width"])+T(e["border-bottom-width"])+T(e["padding-top"])+T(e["padding-bottom"])+T(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},C=function(t){function e(t,n){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),E.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return g(e,t),v(e,[{key:"setValue",value:function(t){var n=m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w),O=function(t){function e(t,n,r){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r,s=i;if(i.__select=document.createElement("select"),o.isArray(a)){var u={};o.each(a,(function(t){u[t]=t})),a=u}return o.each(a,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),i.updateDisplay(),E.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),i.domElement.appendChild(i.__select),i}return g(e,t),v(e,[{key:"setValue",value:function(t){var n=m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return E.isActive(this.__select)?this:(this.__select.value=this.getValue(),m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(w),M=function(t){function e(t,n){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function a(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),E.bind(r.__input,"keyup",a),E.bind(r.__input,"change",a),E.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),E.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return g(e,t),v(e,[{key:"updateDisplay",value:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w);function A(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var P=function(t){function e(t,n,r){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r||{};return i.__min=a.min,i.__max=a.max,i.__step=a.step,o.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=A(i.__impliedStep),i}return g(e,t),v(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=A(t),this}}]),e}(w);var L=function(t){function e(t,n,r){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var a=i,s=void 0;function u(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function l(t){var e=s-t.clientY;a.setValue(a.getValue()+e*a.__impliedStep),s=t.clientY}function c(){E.unbind(window,"mousemove",l),E.unbind(window,"mouseup",c),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),E.bind(i.__input,"change",(function(){var t=parseFloat(a.__input.value);o.isNaN(t)||a.setValue(t)})),E.bind(i.__input,"blur",(function(){u()})),E.bind(i.__input,"mousedown",(function(t){E.bind(window,"mousemove",l),E.bind(window,"mouseup",c),s=t.clientY})),E.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,u())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return g(e,t),v(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(this.getValue(),this.__precision),m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(P);function R(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var j=function(t){function e(t,n,r,i,a){p(this,e);var o=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:a})),s=o;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(R(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){E.unbind(window,"mousemove",u),E.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(R(e,n.left,n.right,s.__min,s.__max))}function h(){E.unbind(window,"touchmove",c),E.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),E.bind(o.__background,"mousedown",(function(t){document.activeElement.blur(),E.bind(window,"mousemove",u),E.bind(window,"mouseup",l),u(t)})),E.bind(o.__background,"touchstart",(function(t){if(1!==t.touches.length)return;E.bind(window,"touchmove",c),E.bind(window,"touchend",h),c(t)})),E.addClass(o.__background,"slider"),E.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return g(e,t),v(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(P),I=function(t){function e(t,n,r){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,E.bind(i.__button,"click",(function(t){return t.preventDefault(),a.fire(),!1})),E.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return g(e,t),v(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(w),D=function(t){function e(t,n){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new _(r.getValue()),r.__temp=new _(0);var i=r;r.domElement=document.createElement("div"),E.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",E.bind(r.__input,"keydown",(function(t){13===t.keyCode&&d.call(this)})),E.bind(r.__input,"blur",d),E.bind(r.__selector,"mousedown",(function(){E.addClass(this,"drag").bind(window,"mouseup",(function(){E.removeClass(i.__selector,"drag")}))})),E.bind(r.__selector,"touchstart",(function(){E.addClass(this,"drag").bind(window,"touchend",(function(){E.removeClass(i.__selector,"drag")}))}));var a,s=document.createElement("div");function u(t){m(t),E.bind(window,"mousemove",m),E.bind(window,"touchmove",m),E.bind(window,"mouseup",h),E.bind(window,"touchend",h)}function l(t){g(t),E.bind(window,"mousemove",g),E.bind(window,"touchmove",g),E.bind(window,"mouseup",f),E.bind(window,"touchend",f)}function h(){E.unbind(window,"mousemove",m),E.unbind(window,"touchmove",m),E.unbind(window,"mouseup",h),E.unbind(window,"touchend",h),v()}function f(){E.unbind(window,"mousemove",g),E.unbind(window,"touchmove",g),E.unbind(window,"mouseup",f),E.unbind(window,"touchend",f),v()}function d(){var t=c(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function v(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function m(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,a=n.clientY,o=(r-e.left)/(e.right-e.left),s=1-(a-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),o>1?o=1:o<0&&(o=0),i.__color.v=s,i.__color.s=o,i.setValue(i.__color.toOriginal()),!1}function g(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return o.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(s.style,{width:"100%",height:"100%",background:"none"}),B(s,"top","rgba(0,0,0,0)","#000"),o.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(a=r.__hue_field).style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),E.bind(r.__saturation_field,"mousedown",u),E.bind(r.__saturation_field,"touchstart",u),E.bind(r.__field_knob,"mousedown",u),E.bind(r.__field_knob,"touchstart",u),E.bind(r.__hue_field,"mousedown",l),E.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return g(e,t),v(e,[{key:"updateDisplay",value:function(){var t=c(this.getValue());if(!1!==t){var e=!1;o.each(_.COMPONENTS,(function(n){if(!o.isUndefined(t[n])&&!o.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,B(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),o.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(w),N=["-moz-","-o-","-webkit-","-ms-",""];function B(t,e,n,r){t.style.background="",o.each(N,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var z=function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(a){}},F='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',V=function(t,e){var n=t[e];return o.isArray(arguments[2])||o.isObject(arguments[2])?new O(t,e,arguments[2]):o.isNumber(n)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?o.isNumber(arguments[4])?new j(t,e,arguments[2],arguments[3],arguments[4]):new j(t,e,arguments[2],arguments[3]):o.isNumber(arguments[4])?new L(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(t,e,{min:arguments[2],max:arguments[3]}):o.isString(n)?new M(t,e):o.isFunction(n)?new I(t,e,""):o.isBoolean(n)?new C(t,e):null};var U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},q=function(){function t(){p(this,t),this.backgroundElement=document.createElement("div"),o.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),E.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;E.bind(this.backgroundElement,"click",(function(){e.hide()}))}return v(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",E.unbind(t.domElement,"webkitTransitionEnd",e),E.unbind(t.domElement,"transitionend",e),E.unbind(t.domElement,"oTransitionEnd",e)};E.bind(this.domElement,"webkitTransitionEnd",e),E.bind(this.domElement,"transitionend",e),E.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-E.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-E.getHeight(this.domElement)/2+"px"}}]),t}();z(function(t){if(t&&"undefined"!==typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var H="Default",W=function(){try{return!!window.localStorage}catch(t){return!1}}(),G=void 0,X=!0,Y=void 0,Z=!1,Q=[],J=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),E.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=o.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=o.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),o.isUndefined(r.load)?r.load={preset:H}:r.preset&&(r.load.preset=r.preset),o.isUndefined(r.parent)&&r.hideable&&Q.push(this),r.resizable=o.isUndefined(r.parent)&&r.resizable,r.autoPlace&&o.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=W&&"true"===localStorage.getItem(rt(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,ut(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?E.addClass(n.__ul,t.CLASS_CLOSED):E.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(t){W&&(i=t,t?E.bind(window,"unload",a):E.unbind(window,"unload",a),localStorage.setItem(rt(n,"isLocal"),t))}}}),o.isUndefined(r.parent)){if(this.closed=r.closed||!1,E.addClass(this.domElement,t.CLASS_MAIN),E.makeSelectable(this.domElement,!1),W&&i){n.useLocalStorage=!0;var u=localStorage.getItem(rt(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,E.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(E.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(E.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),E.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);E.addClass(l,"controller-name"),s=K(n,l);E.addClass(this.__ul,t.CLASS_CLOSED),E.addClass(s,"title"),E.bind(s,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(o.isUndefined(r.parent)&&(X&&(Y=document.createElement("div"),E.addClass(Y,"dg"),E.addClass(Y,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),X=!1),Y.appendChild(this.domElement),E.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||ut(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},E.bind(window,"resize",this.__resizeHandler),E.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),E.bind(this.__ul,"transitionend",this.__resizeHandler),E.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&st(this),a=function(){W&&"true"===localStorage.getItem(rt(n,"isLocal"))&&localStorage.setItem(rt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||function(){var t=n.getRoot();t.width+=1,o.defer((function(){t.width-=1}))}()};function K(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function $(t){E.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&E.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function tt(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function et(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var a=n.load.remembered,o=void 0;if(a[t.preset])o=a[t.preset];else{if(!a.Default)return;o=a.Default}if(o[r]&&void 0!==o[r][e.property]){var s=o[r][e.property];e.initialValue=s,e.setValue(s)}}}}function nt(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new D(e,n);else{var a=[e,n].concat(r.factoryArgs);i=V.apply(t,a)}r.before instanceof w&&(r.before=r.before.__li),et(t,i),E.addClass(i.domElement,"c");var s=document.createElement("span");E.addClass(s,"property-name"),s.innerHTML=i.property;var u=document.createElement("div");u.appendChild(s),u.appendChild(i.domElement);var l=K(t,u,r.before);return E.addClass(l,J.CLASS_CONTROLLER_ROW),i instanceof D?E.addClass(l,"color"):E.addClass(l,d(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,o.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),nt(t,n.object,n.property,{before:r,factoryArgs:[o.toArray(arguments)]})}if(o.isArray(e)||o.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),nt(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof j){var r=new L(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});o.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),E.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof L){var i=function(e){if(o.isNumber(n.__min)&&o.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var a=nt(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return a.name(r),i&&a.listen(),a}return e};n.min=o.compose(i,n.min),n.max=o.compose(i,n.max)}else n instanceof C?(E.bind(e,"click",(function(){E.fakeEvent(n.__checkbox,"click")})),E.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof I?(E.bind(e,"click",(function(){E.fakeEvent(n.__button,"click")})),E.bind(e,"mouseover",(function(){E.addClass(n.__button,"hover")})),E.bind(e,"mouseout",(function(){E.removeClass(n.__button,"hover")}))):n instanceof D&&(E.addClass(e,"color"),n.updateDisplay=o.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=o.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&tt(t.getRoot(),!0),e}),n.setValue)}(t,l,i),t.__controllers.push(i),i}function rt(t,e){return document.location.href+"."+e}function it(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function at(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ot(t){var e=t.__save_row=document.createElement("li");E.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),E.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",E.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",E.addClass(r,"button"),E.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",E.addClass(i,"button"),E.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",E.addClass(a,"button"),E.addClass(a,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?o.each(t.load.remembered,(function(e,n){it(t,n,n===t.preset)})):it(t,H,!1),E.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(a),W){var u=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(rt(0,"isLocal"))&&l.setAttribute("checked","checked"),at(t,u),E.bind(l,"change",(function(){t.useLocalStorage=!t.useLocalStorage,at(t,u)}))}var c=document.getElementById("dg-new-constructor");E.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||G.hide()})),E.bind(n,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),G.show(),c.focus(),c.select()})),E.bind(r,"click",(function(){t.save()})),E.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),E.bind(a,"click",(function(){t.revert()}))}function st(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){E.removeClass(t.__closeButton,J.CLASS_DRAG),E.unbind(window,"mousemove",n),E.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,E.addClass(t.__closeButton,J.CLASS_DRAG),E.bind(window,"mousemove",n),E.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),o.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),E.bind(t.__resize_handle,"mousedown",i),E.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function ut(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function lt(t,e){var n={};return o.each(t.__rememberedObjects,(function(r,i){var a={},s=t.__rememberedObjectIndecesToControllers[i];o.each(s,(function(t,n){a[n]=e?t.initialValue:t.getValue()})),n[i]=a})),n}function ct(t){0!==t.length&&U.call(window,(function(){ct(t)})),o.each(t,(function(t){t.updateDisplay()}))}J.toggleHide=function(){Z=!Z,o.each(Q,(function(t){t.domElement.style.display=Z?"none":""}))},J.CLASS_AUTO_PLACE="a",J.CLASS_AUTO_PLACE_CONTAINER="ac",J.CLASS_MAIN="main",J.CLASS_CONTROLLER_ROW="cr",J.CLASS_TOO_TALL="taller-than-window",J.CLASS_CLOSED="closed",J.CLASS_CLOSE_BUTTON="close-button",J.CLASS_CLOSE_TOP="close-top",J.CLASS_CLOSE_BOTTOM="close-bottom",J.CLASS_DRAG="drag",J.DEFAULT_WIDTH=245,J.TEXT_CLOSED="Close Controls",J.TEXT_OPEN="Open Controls",J._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||J.toggleHide()},E.bind(window,"keydown",J._keydownHandler,!1),o.extend(J.prototype,{add:function(t,e){return nt(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return nt(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;o.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var t=this;o.each(this.__folders,(function(e){t.removeFolder(e)})),E.unbind(window,"keydown",J._keydownHandler,!1),$(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new J(e);this.__folders[t]=n;var r=K(this,n.domElement);return E.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],$(t);var e=this;o.each(t.__folders,(function(e){t.removeFolder(e)})),o.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=E.getOffset(t.__ul).top,n=0;o.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=E.getHeight(e))})),window.innerHeight-e-20<n?(E.addClass(t.domElement,J.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(E.removeClass(t.domElement,J.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&o.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:o.debounce((function(){this.onResize()}),50),remember:function(){if(o.isUndefined(G)&&((G=new q).domElement.innerHTML=F),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;o.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&ot(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&ut(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=lt(this)),t.folders={},o.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=lt(this),tt(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=lt(this,!0)),this.load.remembered[t]=lt(this),this.preset=t,it(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){o.each(this.__controllers,(function(e){this.getRoot().load.remembered?et(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),o.each(this.__folders,(function(t){t.revert(t)})),t||tt(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&ct(this.__listening)},updateDisplay:function(){o.each(this.__controllers,(function(t){t.updateDisplay()})),o.each(this.__folders,(function(t){t.updateDisplay()}))}});var ht=J,ft={color:{Color:_,math:f,interpret:c},controllers:{Controller:w,BooleanController:C,OptionController:O,StringController:M,NumberController:P,NumberControllerBox:L,NumberControllerSlider:j,FunctionController:I,ColorController:D},dom:{dom:E},gui:{GUI:J},GUI:ht};e.b=ft},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return a}));var i=n(9);function a(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?Object(i.a)(t):e}},function(t,e,n){var r=n(90),i=n(92);function a(e,n){return delete t.exports[e],t.exports[e]=n,n}t.exports={Parser:r,Tokenizer:n(91),ElementType:n(46),DomHandler:i,get FeedHandler(){return a("FeedHandler",n(159))},get Stream(){return a("Stream",n(173))},get WritableStream(){return a("WritableStream",n(99))},get ProxyHandler(){return a("ProxyHandler",n(180))},get DomUtils(){return a("DomUtils",n(94))},get CollectingHandler(){return a("CollectingHandler",n(181))},DefaultHandler:i,get RssHandler(){return a("RssHandler",this.FeedHandler)},parseDOM:function(t,e){var n=new i(e);return new r(n,e).end(t),n.dom},parseFeed:function(e,n){var i=new t.exports.FeedHandler(n);return new r(i,n).end(e),i.dom},createDomStream:function(t,e,n){var a=new i(t,e,n);return new r(a,e)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},function(t,e,n){var r=n(69),i=n(70);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=a?a(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),o?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){var r=n(48),i=n(109);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(111),i=n(246),a=n(43);t.exports=function(t){return a(t)?r(t):i(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(51);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e){t.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(t){return"tag"===t.type||"script"===t.type||"style"===t.type}}},function(t,e,n){var r,i;(function(a,o){var s=(a=a||n(102)).window,u=a.document,l=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,r=Object.create,i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=e.forEach||function(t,e){for(var n=0,r=this.length;n<r;n++)t.call(e,this[n],n,this)},u=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},c=function(t,e,n){if(t){var r=i(t,"length");(r&&"number"===typeof r.value?s:u).call(t,e,n=n||t)}return n};function h(e,n,r,o,s){var u={};function l(t,l){"string"===typeof(l=l||(l=i(n,t))&&(l.get?l:l.value))&&"#"===l[0]&&(l=e[l.substring(1)]||l);var c,h="function"===typeof l,d=l,p=s||h&&!l.base?l&&l.get?t in e:e[t]:null;s&&p||(h&&p&&(l.base=p),h&&!1!==o&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&"function"===typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(i(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),a(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&l(c);for(var c in u){var h=u[c],d=e["set"+h],p=e["get"+h]||d&&e["is"+h];!p||!0!==o&&0!==p.length||l(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,r=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,r),h(this,e,null,n,r)}for(var i=1,a=arguments.length;i<a;i++)this.inject(arguments[i]);return this},extend:function(){for(var t,e,n,i=this,o=0,s=arguments.length;o<s&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:c,create:r,define:a,describe:i,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||"Object"===e.name)},pick:function(t,e){return t!==o?t:e},slice:function(t,e,r){return n.call(t,e,r)}}})};t.exports=l,l.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+l.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?p.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return l.importJSON(t,this)},exportJSON:function(t){return l.exportJSON(this,t)},toJSON:function(){return l.serialize(this)},set:function(t,e){return t&&l.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!l.exports[n]&&(l.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"===typeof t&&"object"===typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!l.equals(t[n],e[n]))return!1}else{var n,r=Object.keys(t);if((n=r.length)!==Object.keys(e).length)return!1;for(;n--;){var i=r[n];if(!e.hasOwnProperty(i)||!l.equals(t[i],e[i]))return!1}}return!0}return!1},read:function(t,e,n,r){if(this===l){var i=this.peek(t,e);return t.__index++,i}var a=this.prototype,s=a._readIndex,u=e||s&&t.__index||0,c=t.length,h=t[u];if(r=r||c-u,h instanceof this||n&&n.readNull&&null==h&&r<=1)return s&&(t.__index=u+1),h&&n&&n.clone?h.clone():h;if(h=l.create(a),s&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+r<c?l.slice(t,u,u+r):t)||h,s){t.__index=u+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=o),h.__read=o}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,r){for(var i,a=[],o=e||0,s=r?o+r:t.length,u=o;u<s;u++)a.push(Array.isArray(i=t[u])?this.read(i,0,n):this.read(t,u,n,1));return a},readNamed:function(t,e,n,r,i){var a=this.getNamed(t,e),s=a!==o;if(s){var u=t.__filtered;if(!u){var c=this.getSource(t);(u=t.__filtered=l.create(c)).__unfiltered=c}u[e]=o}return this.read(s?[a]:t,n,r,i)},readSupported:function(t,e){var n=this.getSource(t),r=this,i=!1;return n&&Object.keys(n).forEach((function(n){if(n in e){var a=r.readNamed(t,n);a!==o&&(e[n]=a),i=!0}})),i},getSource:function(t){var e=t.__source;if(e===o){var n=1===t.length&&t[0];e=t.__source=n&&l.isPlainObject(n)?n:null}return e},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,r){var i;function a(r){if((!n||!(r in n))&&(!i||!(r in i))){var a=e[r];a!==o&&(t[r]=a)}}if(r){for(var s,u={},l=0,c=r.length;l<c;l++)(s=r[l])in e&&(a(s),u[s]=!0);i=u}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return l.isPlainObject(t)||Array.isArray(t)||e&&"string"===typeof t},serialize:function(t,e,n,r){e=e||{};var i,a=!r;if(a&&(e.formatter=new p(e.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,r=this.references[n];if(!r){this.length++;var i=e.call(t),a=t._class;a&&i[0]!==a&&i.unshift(a),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),t&&t._serialize){i=t._serialize(e,r);var o=t._class;!o||t._compactSerialize||!a&&n||i[0]===o||i.unshift(o)}else if(Array.isArray(t)){i=[];for(var s=0,u=t.length;s<u;s++)i[s]=l.serialize(t[s],e,n,r)}else if(l.isPlainObject(t)){i={};var c=Object.keys(t);for(s=0,u=c.length;s<u;s++){var h=c[s];i[h]=l.serialize(t[h],e,n,r)}}else i="number"===typeof t?e.formatter.number(t,e.precision):t;return a&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(t,e,n,r,i){var a=t,o=!n,s=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],c="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h=(u=l.exports[u])?1:0,f=t.length;h<f;h++)a.push(l.deserialize(t[h],e,n,c,s));if(u){var d=a;a=e?e(u,d,o||i):new u(d)}}else if(l.isPlainObject(t))for(var p in a={},r&&(n.dictionary=a),t)a[p]=l.deserialize(t[p],e,n);return s?a[1]:a},exportJSON:function(t,e){var n=l.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return l.deserialize("string"===typeof t?JSON.parse(t):t,(function(t,n,r){var i=r&&e&&e.constructor===t,a=i?e:l.create(t.prototype);if(1===n.length&&a instanceof E&&(i||!(a instanceof O))){var o=n[0];l.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([{insert:!0}])))}return(i?a.set:t).apply(a,n),i&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var r=t.length;t.length+=n;for(var i=0;i<n;i++)t[r+i]=e[i]}return t},splice:function(t,e,n,r){var i=e&&e.length,a=n===o;(n=a?t.length:n)>t.length&&(n=t.length);for(var s=0;s<i;s++)e[s]._index=n+s;if(a)return l.push(t,e),[];var u=[n,r];e&&l.push(u,e);for(var c=t.splice.apply(t,u),h=(s=0,c.length);s<h;s++)c[s]._index=o;for(s=n+i,h=t.length;s<h;s++)t[s]._index=s;return c},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={on:function(t,e){if("string"!==typeof t)l.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,r=n&&n[t],i=this._callbacks=this._callbacks||{};-1===(i=i[t]=i[t]||[]).indexOf(e)&&(i.push(e),r&&r.install&&1===i.length&&r.install.call(this,t))}return this},off:function(t,e){if("string"===typeof t){var n,r=this._eventTypes,i=r&&r[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(i&&i.uninstall&&i.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}l.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var r=l.slice(arguments,1),i=e&&e.target&&!e.currentTarget;n=n.slice(),i&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,r)){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,r=t?"install":"uninstall";if(e)for(var i in n)if(n[i].length>0){var a=e[i],o=a&&a[r];o&&o.call(this,i)}},statics:{inject:function t(e){var n=e._events;if(n){var r={};l.each(n,(function(t,n){var i="string"===typeof t,a=i?t:n,o=l.capitalize(a),s=a.substring(2).toLowerCase();r[s]=i?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=r}return t.base.apply(this,arguments)}}},h=l.extend({_class:"PaperScope",initialize:function t(){ct=this,this.settings=new l({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=ot.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:st.nativeModes},ot.release(n)}if(!this.agent){var r=a.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o="darwin"===i?"mac":i,s=e.agent=e.browser={platform:o};o&&(s[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,r,i){if(!s.chrome){var a="opera"===e?r:/^(node|trident)$/.test(e)?i:n;s.version=a,s.versionNumber=parseFloat(a),e={trident:"msie",jsdom:"node"}[e]||e,s.name=e,s[e]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.12.15",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){},install:function(t){var e=this;for(var n in l.each(["project","view","tool"],(function(n){l.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ct=this,this.project=new T(t),this},createCanvas:function(t,e){return ot.getCanvas(t,e)},activate:function(){ct=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete h._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),f=l.extend(c,{initialize:function(t){this._scope=ct,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(l.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),d={findItemBoundsCollisions:function(t,e,n){function r(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var r=t[n].getBounds();e[n]=[r.left,r.top,r.right,r.bottom]}return e}var i=r(t),a=e&&e!==t?r(e):i;return this.findBoundsCollisions(i,a,n||0)},findCurveBoundsCollisions:function(t,e,n,r){function i(t){for(var e=Math.min,n=Math.max,r=new Array(t.length),i=0;i<t.length;i++){var a=t[i];r[i]=[e(a[0],a[2],a[4],a[6]),e(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return r}var a=i(t),o=e&&e!==t?i(e):a;if(r){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),u=this.findBoundsCollisions(a,o,n||0,!0,!0),l=[],c=0,h=s.length;c<h;c++)l[c]={hor:s[c],ver:u[c]};return l}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(t,e,n,r,i){var a=!e||t===e,o=a?t:t.concat(e),s=t.length,u=o.length;function l(t,e,n){for(var r=0,i=t.length;r<i;){var a=i+r>>>1;o[t[a]][e]<n?r=a+1:i=a}return r-1}for(var c=r?1:0,h=c+2,f=r?0:1,d=f+2,p=new Array(u),v=0;v<u;v++)p[v]=v;p.sort((function(t,e){return o[t][c]-o[e][c]}));var m=[],g=new Array(s);for(v=0;v<u;v++){var y=p[v],_=o[y],b=a?y:y-s,x=y<s,w=a||!x,S=x?[]:null;if(m.length){var k=l(m,h,_[c]-n)+1;if(m.splice(0,k),a&&i){S=S.concat(m);for(var T=0;T<m.length;T++){g[O=m[T]].push(b)}}else{var E=_[d],C=_[f];for(T=0;T<m.length;T++){var O=m[T],M=o[O],A=O<s,P=a||O>=s;(i||(x&&P||w&&A)&&E>=M[f]-n&&C<=M[d]+n)&&(x&&P&&S.push(a?O:O-s),w&&A&&g[O].push(b))}}}if(x&&(t===e&&S.push(y),g[y]=S),m.length){var L=l(m,h,_[h]);m.splice(L+1,0,y)}else m.push(y)}for(v=0;v<g.length;v++){var R=g[v];R&&R.sort((function(t,e){return t-e}))}return g}},p=l.extend({initialize:function(t){this.precision=l.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});p.instance=new p;var v=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E},o=1e-12,s=112e-18;function u(t,e,n){return t<e?e:t>n?n:t}function l(t,e,r){function i(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*r,o=e*e+t*r;if(3*n(a)<o){var s=i(t),u=i(e),l=i(r),c=e*e,h=t*r;a=c-h+(u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1]-(s[0]*l[0]-h+s[0]*l[1]+s[1]*l[0]+s[1]*l[1]))}return a}function c(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?i(2,-Math.round(a(t))):0}return{EPSILON:o,MACHINE_EPSILON:s,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=o},isMachineZero:function(t){return t>=-112e-18&&t<=s},clamp:u,integrate:function(n,r,i,a){for(var o=t[a-2],s=e[a-2],u=.5*(i-r),l=u+r,c=0,h=a+1>>1,f=1&a?s[c++]*n(l):0;c<h;){var d=u*o[c];f+=s[c++]*(n(l+d)+n(l-d))}return u*f},findRoot:function(t,e,r,i,a,o,s){for(var l=0;l<o;l++){var c=t(r),h=c/e(r),f=r-h;if(n(h)<s){r=f;break}c>0?(a=r,r=f<=i?.5*(i+a):f):(i=r,r=f>=a?.5*(i+a):f)}return u(r,i,a)},solveQuadratic:function(t,e,i,a,h,f){var d,p=1/0;if(n(t)<o){if(n(e)<o)return n(i)<o?-1:0;d=-i/e}else{var v=l(t,e*=-.5,i);if(v&&n(v)<s){var m=c(n(t),n(e),n(i));m&&(v=l(t*=m,e*=m,i*=m))}if(v>=-112e-18){var g=v<0?0:r(v),y=e+(e<0?-g:g);0===y?p=-(d=i/t):(d=y/t,p=i/y)}}var _=0,b=null==h,x=h-o,w=f+o;return isFinite(d)&&(b||d>x&&d<w)&&(a[_++]=b?d:u(d,h,f)),p!==d&&isFinite(p)&&(b||p>x&&p<w)&&(a[_++]=b?p:u(p,h,f)),_},solveCubic:function(t,e,a,l,h,f,d){var p,m,g,y,_,b=c(n(t),n(e),n(a),n(l));function x(n){var r=t*(p=n);y=(r+(m=r+e))*p+(g=m*p+a),_=g*p+l}if(b&&(t*=b,e*=b,a*=b,l*=b),n(t)<o)t=e,m=a,g=l,p=1/0;else if(n(l)<o)m=e,g=a,p=0;else{x(-e/t/3);var w=_/t,S=i(n(w),1/3),k=w<0?-1:1,T=-y/t,E=T>0?1.324717957244746*Math.max(S,r(T)):S,C=p-k*E;if(C!==p){do{x(C),C=0===y?p:p-_/y/(1+s)}while(k*C>k*p);n(t)*p*p>n(l/p)&&(m=((g=-l/p)-a)/p)}}var O=v.solveQuadratic(t,m,g,h,f,d),M=null==f;return isFinite(p)&&(0===O||O>0&&p!==h[0]&&p!==h[1])&&(M||p>f-o&&p<d+o)&&(h[O++]=M?p:u(p,f,d)),O}}},m={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},g=l.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if("number"===n){var a="number"===typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();v.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=g.read(arguments),e=this.getLength()*t.getLength();if(v.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=g.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=g.read(t),n=e.x-this.x,r=e.y-this.y,i=n*n+r*r,a=l.read(t);return a?i:Math.sqrt(i)},normalize:function(t){t===o&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,r=new g(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,r=Math.sin(t),i=Math.cos(t);return n=new g(n.x*i-n.y*r,n.x*r+n.y*i),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=g.read(arguments);return new g(this.x+t.x,this.y+t.y)},subtract:function(){var t=g.read(arguments);return new g(this.x-t.x,this.y-t.y)},multiply:function(){var t=g.read(arguments);return new g(this.x*t.x,this.y*t.y)},divide:function(){var t=g.read(arguments);return new g(this.x/t.x,this.y/t.y)},modulo:function(){var t=g.read(arguments);return new g(this.x%t.x,this.y%t.y)},negate:function(){return new g(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var t=arguments,e=g.read(t),n=l.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=g.read(arguments);return g.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=g.read(arguments);return g.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=v.isZero;return t(this.x)&&t(this.y)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.x)||isNaN(this.y)})),isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=g.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=g.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=g.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new g(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=g.read(t),n=g.read(t);return new g(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=g.read(t),n=g.read(t);return new g(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(t,e,n,r){return Math.abs(t*r-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))},isOrthogonal:function(t,e,n,r){return Math.abs(t*n+e*r)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))}}},l.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new g(e(this.x),e(this.y))}}),{})),y=g.extend({initialize:function(t,e,n,r){this._x=t,this._y=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),_=l.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if("number"===n){var a="number"===typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var t=p.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=_.read(arguments);return new _(this.width+t.width,this.height+t.height)},subtract:function(){var t=_.read(arguments);return new _(this.width-t.width,this.height-t.height)},multiply:function(){var t=_.read(arguments);return new _(this.width*t.width,this.height*t.height)},divide:function(){var t=_.read(arguments);return new _(this.width/t.width,this.height/t.height)},modulo:function(){var t=_.read(arguments);return new _(this.width%t.width,this.height%t.height)},negate:function(){return new _(-this.width,-this.height)},isZero:function(){var t=v.isZero;return t(this.width)&&t(this.height)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.width)||isNaN(this.height)})),statics:{min:function(t,e){return new _(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new _(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new _(Math.random(),Math.random())}}},l.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new _(e(this.width),e(this.height))}}),{})),b=_.extend({initialize:function(t,e,n,r){this._width=t,this._height=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),x=l.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,r){var i,a=arguments,s=typeof t;if("number"===s?(this._set(t,e,n,r),i=4):"undefined"===s||null===t?(this._set(0,0,0,0),i=null===t?1:0):1===a.length&&(Array.isArray(t)?(this._set.apply(this,t),i=1):t.x!==o||t.width!==o?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),i=1):t.from===o&&t.to===o&&(this._set(0,0,0,0),l.readSupported(a,this)&&(i=1))),i===o){var u,c,h=g.readNamed(a,"from"),f=l.peek(a),d=h.x,p=h.y;if(f&&f.x!==o||l.hasNamed(a,"to")){var v=g.readNamed(a,"to");u=v.x-d,c=v.y-p,u<0&&(d=v.x,u=-u),c<0&&(p=v.y,c=-c)}else{var m=_.read(a);u=m.width,c=m.height}this._set(d,p,u,c),i=a.__index}var y=a.__filtered;return y&&(this.__filtered=y),this.__read&&(this.__read=i),this},set:"#initialize",_set:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(t){var e=l.isPlainValue(t)?x.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?g:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=g.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?_:b)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=_.read(arguments),e=this._sx,n=this._sy,r=t.width,i=t.height;e&&(this.x+=(this.width-r)*e),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?g:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=g.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==o||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=x.read(arguments),e=l.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=x.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new x(e,n,r-e,i-n)},unite:function(){var t=x.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new x(e,n,r-e,i-n)},include:function(){var t=g.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new x(e,n,r-e,i-n)},expand:function(){var t=_.read(arguments),e=t.width,n=t.height;return new x(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===o?t:e)-this.height)}},l.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),r=/^[RL]/.test(n);e>=4&&(t[1]+=r?"Y":"X");var i=t[r?0:1],a=t[r?1:0],o="get"+i,s="get"+a,u="set"+i,l="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?g:y)(this[o](),this[s](),this,c)},this[c]=function(){var t=g.read(arguments);this[u](t.x),this[l](t.y)}}),{beans:!0})),w=x.extend({initialize:function(t,e,n,r,i,a){this._set(t,e,n,r,!0),this._owner=i,this._setter=a},_set:function(t,e,n,r,i){return this._x=t,this._y=e,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var t=x.prototype;return l.each(["x","y","width","height"],(function(t){var e=l.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),l.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),S=l.extend({_class:"Matrix",initialize:function t(e,n){var r=arguments,i=r.length,a=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):a=!1:i?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,r,i,a,o){return this._a=t,this._b=e,this._c=n,this._d=r,this._tx=i,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return l.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=p.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,l.pick(t,!0),e),this.isIdentity())},translate:function(){var t=g.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=g.read(t),n=g.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=g.read(arguments,1),n=e.x,r=e.y,i=Math.cos(t),a=Math.sin(t),o=n-n*i+r*a,s=r-n*a-r*i,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*u+a*c,this._b=i*l+a*h,this._c=-a*u+i*c,this._d=-a*l+i*h,this._tx+=o*u+s*c,this._ty+=o*l+s*h,this._changed(),this},shear:function(){var t=arguments,e=g.read(t),n=g.read(t,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=g.read(t),n=g.read(t,0,{readNull:!0}),r=Math.PI/180,i=new g(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(i,n)},append:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=t._a,s=t._c,u=t._b,l=t._d,c=t._tx,h=t._ty;this._a=o*n+u*i,this._c=s*n+l*i,this._b=o*r+u*a,this._d=s*r+l*a,this._tx+=c*n+h*i,this._ty+=c*r+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=this._tx,s=this._ty,u=t._a,l=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=u*n+l*r,this._c=u*i+l*a,this._b=c*n+h*r,this._d=c*i+h*a,this._tx=u*o+l*s+f,this._ty=c*o+h*s+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,r=this._d,i=this._tx,a=this._ty,o=t*r-e*n,s=null;return o&&!isNaN(o)&&isFinite(i)&&isFinite(a)&&(this._a=r/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-r*i)/o,this._ty=(e*i-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var r=t.x,i=t.y;return e||(e=new g),e._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var r=0,i=2*n;r<i;r+=2){var a=t[r],o=t[r+1];e[r]=a*this._a+o*this._c+this._tx,e[r+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,r=e+t.width,i=n+t.height,a=[e,n,r,n,r,i,e,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var r=this._transformCorners(t),i=r.slice(0,2),a=i.slice(),o=2;o<8;o++){var s=r[o],u=1&o;s<i[u]?i[u]=s:s>a[u]&&(a[u]=s)}return e||(e=new x),e._set(i[0],i[1],a[0]-i[0],a[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(t,e,n){var r=this._a,i=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,l=r*o-i*a,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new g),c=e._set((h*o-f*a)/l,(f*r-h*i)/l,n)}return c},decompose:function(){var t,e,n,r=this._a,i=this._b,a=this._c,o=this._d,s=r*o-i*a,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);t=Math.acos(r/h)*(i>0?1:-1),e=[h,s/h],n=[l(r*a+i*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,l(r*a+i*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new g(e),skewing:new g(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},l.each(["a","b","c","d","tx","ty"],(function(t){var e=l.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),k=l.extend({_class:"Line",initialize:function(t,e,n,r,i){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=r,a=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return k.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return k.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return k.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return g.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return g.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,r,i,a,o,s,u,l){u||(n-=t,r-=e,o-=i,s-=a);var c=n*s-r*o;if(!v.isMachineZero(c)){var h=t-i,f=e-a,d=(o*f-s*h)/c,p=(n*f-r*h)/c,m=-1e-12,y=1+1e-12;if(l||m<d&&d<y&&m<p&&p<y)return l||(d=d<=0?0:d>=1?1:d),new g(t+d*n,e+d*r)}},getSide:function(t,e,n,r,i,a,o,s){o||(n-=t,r-=e);var u=i-t,l=u*r-(a-e)*n;return!s&&v.isMachineZero(l)&&(l=(u*n+u*n)/(n*n+r*r))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,n,r,i,a,o){return o||(n-=t,r-=e),0===n?r>0?i-t:t-i:0===r?n<0?a-e:e-a:((i-t)*r-(a-e)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(t,e,n,r,i,a,o){return Math.abs(k.getSignedDistance(t,e,n,r,i,a,o))}}}),T=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=J.create(this,t||ot.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return l.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&e){var i=this._changesById,a=e._id,o=i[a];o?o.flags|=t:r.push(i[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new O({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:P,match:function(n){var r=n._definition,i=r._id;return e[i]||(e[i]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var r=t[n],i=r._selection;1&i&&r.isInserted()?e.push(r):i||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(o,t)},insertLayer:function(t,e){if(e instanceof O){e._remove(!1,!0),l.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(o,new O(E.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return E._getItems(this,t)},getItem:function(t){return E._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return l.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var r in n){var i=n[r];for(var a in e){var o=e[a];o&&o!=n&&delete o[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,i=new l({offset:new g(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(t,i);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,u,s,c);t.restore()}}}),E=l.extend(c,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=l.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return l.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&l.isPlainObject(t),r=n&&!0===t.internal,i=this._matrix=new S,a=n&&t.project||ct.project,s=ct.settings;return this._id=r?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&s.applyMatrix,e&&i.translate(e),i._owner=this,this._style=new Y(a._currentStyle,this,a),r||n&&0==t.insert||!s.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(o,this,!0),n&&t!==E.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},r=this;function i(i){for(var a in i){var o=r[a];l.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=l.serialize(o,t,"data"!==a,e))}}return i(this._serializeFields),this instanceof C||i(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=o),16&t&&(this._globalMatrix=o),n&&72&t&&E._clearBoundsCache(n),2&t&&E._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||o,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},l.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=l.capitalize(t),n="_"+t,r={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(r[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,r=t.length;n<r;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,r=e.length;n<r;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?g:y,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=o}},l.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,r=l.set({},n?e:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&t,r).rect;return arguments.length?i:new w(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var t=x.read(arguments),e=this.getBounds(),n=this._matrix,r=new S,i=t.getCenter();r.translate(i),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),r.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(E._updateBoundsCache(this,e.cacheItem),E._getBounds(n,t,e)):new x},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var r=e.internal&&!n,i=e.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=i&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,r),s=this._bounds;if(E._updateBoundsCache(this._parent||this._symbol,i),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var u=this._getBounds(t||a,e),l=u.rect||u,c=this._style,h=u.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:l.clone(),nonscaling:h,internal:r}}return{rect:l,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(e),r.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=o;for(var n=0,r=e.list,i=r.length;n<i;n++){var a=r[n];a!==t&&(a._bounds=a._position=o,a._boundsCache&&E._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var r=1/0,i=-r,a=r,o=i,s=!1;n=n||{};for(var u=0,l=t.length;u<l;u++){var c=t[u];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;r=Math.min(f.x,r),a=Math.min(f.y,a),i=Math.max(f.x+f.width,i),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(r)?new x(r,a,i-r,o-a):new x,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new y(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=g.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),r=this._decomposed,i=new S,a=v.isZero;if(a(t.x)||a(t.y))i.translate(r.translation),n&&i.rotate(n),i.scale(e.x,e.y),this._matrix.set(i);else{var o=this.getPosition(!0);i.translate(o),n&&i.rotate(n),i.scale(e.x/t.x,e.y/t.y),n&&i.rotate(-n),i.translate(o.negate()),this.transform(i)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){e=null;for(var i=0,a=r.length;i<a;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof O)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return l.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(E.NO_INSERT),n=this._children,r=l.pick(t?t.insert:o,t===o||!0===t),i=l.pick(t?t.deep:o,!0);n&&e.copyAttributes(this),n&&!i||e.copyContent(this),n||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,s=this._parent;if(a&&s){n=s._children;for(var u=a,c=1;n[a];)a=u+" "+c++;a!==u&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,r=e&&e.length;n<r;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var a=n[r];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?l.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n,r,i;l.isPlainObject(t)?(n=t.resolution,r=t.insert,i=t.raster):(n=t,r=e),i?i.matrix.reset(!0):i=new A(E.NO_INSERT);var a=this.getStrokeBounds(),s=(n||this.getView().getResolution())/72,u=a.getTopLeft().floor(),c=a.getBottomRight().ceil(),h=new _(c.subtract(u)),f=h.multiply(s);if(i.setSize(f,!0),!f.isZero()){var d=i.getContext(!0),p=(new S).scale(s).translate(u.negate());d.save(),p.applyToContext(d),this.draw(d,new l({matrices:[p]})),d.restore()}return i.transform((new S).translate(u.add(h.divide(2))).scale(1/s)),(r===o||r)&&i.insertAbove(this),i},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(g.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new z.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof E&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(g.read(t),R.getOptions(t))}function e(){var t=arguments,e=g.read(t),n=R.getOptions(t),r=[];return this._hitTest(e,new l({all:r},n)),r}function n(t,e,n,r){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o!==r&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return T.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new _(z._getStrokePadding(a,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var s,u,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==l.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var r=n?s["get"+n]():f.getPosition();if(t.subtract(r).divide(o).length<=1)return new R(e,f,{name:n?l.hyphenate(n):e,point:r})}var v=e.position,m=e.center,g=e.bounds;if(c&&this._parent&&(v||m||g)){if((m||g)&&(s=this.getInternalBounds()),!(u=v&&p("position")||m&&p("center","Center"))&&g)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!u;b++)u=p("bounds",y[b]);u=d(u)}return u||(u=this._hitTestChildren(t,e,i)||c&&d(this._hitTestSelf(t,e,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new R("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var i=/^(empty|editable)$/.test(t)?this["is"+l.capitalize(t)]():"type"===t?l.hyphenate(this._class):this[t];if("class"===t){if("function"===typeof e)return this instanceof e;i=this._class}if("function"===typeof e)return!!e(i);if(e){if(e.test)return e.test(i);if(l.isPlainObject(e))return function t(e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=n[r];if(l.isPlainObject(i)&&l.isPlainObject(a)){if(!t(i,a))return!1}else if(!l.equals(i,a))return!1}return!0}(e,i)}return l.equals(i,e)},getItems:function(t){return E._getItems(this,t,this._matrix)},getItem:function(t){return E._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,r,i,a){if(!i){var o="object"===typeof n&&n,s=o&&o.overlapping,u=o&&o.inside,c=(y=s||u)&&x.read([y]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!s,rect:c,path:s&&new z.Rectangle({rectangle:c,insert:!1})},o&&(n=l.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,f=i.items;r=(c=i.rect)&&(r||new S);for(var d=0,p=h&&h.length;d<p;d++){var v=h[d],m=r&&r.appended(v._matrix),g=!0;if(c){var y=v.getBounds(m);if(!c.intersects(y))continue;c.contains(y)||i.overlapping&&(y.contains(c)||i.path.intersects(v,m))||(g=!1)}if(g&&v.matches(n)&&(f.push(v),a))break;if(!1!==i.recursive&&t(v,n,m,i,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=l.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(o,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var r={},i=(e=l.slice(e)).length-1;i>=0;i--){var a=(c=e[i])&&c._id;!c||r[a]?e.splice(i,1):(c._remove(!1,!0),r[a]=!0)}l.splice(n,e,t,0);for(var o=this._project,s=o._changes,u=(i=0,e.length);i<u;i++){var c,h=(c=e[i])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),s&&c._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),r=t!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(o,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(o,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,r=this._name,i=n[r],a=i?i.indexOf(this):-1;-1!==a&&(e[r]==this&&delete e[r],i.splice(a,1),i.length?e[r]=i[0]:delete n[r])}},_remove:function(t,e){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),l.splice(n._children,null,i,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=l.pick(e,this._children.length);for(var n=l.splice(this._children,null,t,e-t),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var r=0;r<n;r++)if(!e[r].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),r=e(t),i=0,a=Math.min(n.length,r.length);i<a;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},l.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,r=(e?l:g).read(n),i=g.read(n,0,{readNull:!0});return this.transform((new S)[t](r,i||this.getPosition(!0)))}}),{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var r=this._matrix,i=t&&!t.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||e&&this._children);if(!i&&!a)return this;if(i){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,s=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&s.transform(t),u&&u.transform(t)}if(a&&(a=this._transformContent(r,e,n))){var l=this._pivot;l&&r._transformPoint(l,l,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(i||a)&&this._changed(25);var f=i&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90===0){for(var d in c){var p=c[d];if(p.nonscaling)delete c[d];else if(a||!p.internal){var v=p.rect;t._transformBounds(v,v)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else i&&h&&this._pivot&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var r=this._children;if(r){for(var i=0,a=r.length;i<a;i++)r[i].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(t,e){t=x.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=t.height/t.width,a=(e?r>i:r<i)?t.width/n.width:t.height/n.height,o=new x(new g,new _(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,i)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,i),t.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),s=r.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ct.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new S).scale(c,c)),f=h.transform(new g(r.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,i=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){i=i?i.appended(o):o,r.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,u,l,c=this._blendMode,h=v.clamp(this._opacity,0,1),f="normal"===c,d=st.nativeModes[c],p=f&&1===h||e.dontStart||e.clip||(d||f&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!p){var g=this.getStrokeBounds(i);if(!g.width||!g.height)return void r.pop();l=e.offset,u=e.offset=g.getTopLeft().floor(),s=t,t=ot.getContext(g.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,_=!p&&e.clipItem,b=!y||_;if(p?(t.globalAlpha=h,d&&(t.globalCompositeOperation=c)):b&&t.translate(-u.x,-u.y),b&&(p?a:i).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(m,0,0,m,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,i,y),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),p||(st.process(c,t,s,h,u.subtract(l).multiply(m)),ot.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof F)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,r,i){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(i)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,r),u){var d=this.getPosition(!0),p=this._parent,v=p?p.localToGlobal(d):d,m=v.x,g=v.y;t.beginPath(),t.arc(m,g,f,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=f,b=n+1,x=0;x<4;x++){var w=y[x],S=w[0],k=w[1];t.moveTo(m+S*_,g+k*_),t.lineTo(m+S*b,g+k*b),t.stroke()}}if(s){var T=h._transformCorners(this.getInternalBounds());t.beginPath();for(x=0;x<8;x++)t[x?"lineTo":"moveTo"](T[x],T[++x]);t.closePath(),t.stroke();for(x=0;x<8;x++)t.fillRect(T[x]-f,T[++x]-f,n,n)}}},_canComposite:function(){return!1}},l.each(["down","drag","up","move"],(function(t){this["removeOn"+l.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var r=n&&n.easing,i=n&&n.start,a=null!=n&&("number"===typeof n?n:n.duration),o=new it(this,t,e,a,r,i);return a&&this.on("frame",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),C=E.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=o)},_getClipItem:function(){var t=this._clipItem;if(t===o){t=null;for(var e=this._children,n=0,r=e.length;n<r;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),l.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,r){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,n,r,i)},_draw:function(t,e){var n=e.clip,r=!n&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var i=this._children,a=0,o=i.length;a<o;a++){var s=i[a];s!==r&&s.draw(t,e)}}}),O=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),M=E.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&l.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new b(t.width,t.height,this,"setSize")},setSize:function(){var t=_.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,r=t.height;"rectangle"===e?this._radius.set(_.min(this._radius,t.divide(2).abs())):"circle"===e?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new b(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=_.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){n=_.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(z[l.capitalize(this._type)])({center:new g,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ct.settings.applyMatrix&&e.setApplyMatrix(!0),(t===o||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,r){var i=this._style,a=i.hasFill(),o=i.hasStroke(),s=e.dontFinish||e.clip,u=!r;if(a||o||s){var l=this._type,c=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,v=p.width,m=p.height;if(u&&"rectangle"===l&&0===f&&0===d)t.rect(-v/2,-m/2,v,m);else{var g=v/2,y=m/2,_=.44771525016920644,b=f*_,x=d*_,w=[-g,-y+d,-g,-y+x,-g+b,-y,-g+f,-y,g-f,-y,g-b,-y,g,-y+x,g,-y+d,g,y-d,g,y-x,g-b,y,g-f,y,-g+f,y,-g+b,y,-g,y-x,-g,y-d];r&&r.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),g!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),g!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(i.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new x(this._size).setCenter(0,0),r=this._style,i=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(n=t._transformBounds(n)),i?n.expand(z._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var r=t._radius;if(!r.isZero())for(var i=t._size.divide(2),a=1;a<=4;a++){var o=new g(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(i),u=s.subtract(o.multiply(r));if(new x(n?s.add(o.multiply(n)):s,u).contains(e))return{point:u,quadrant:a}}}function e(t,e,n,r){var i=t.divide(e);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var r=t(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,a,o){var s=!1,u=this._style,l=i.stroke&&u.hasStroke(),c=i.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(z._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var v=p.multiply(2),m=t(this,r,v);if(m)s=e(r.subtract(m.point),f,p,m.quadrant);else{var g=new x(this._size).setCenter(0,0),y=g.expand(v),_=g.expand(v.negate());s=y._containsPoint(r)&&!_._containsPoint(r)}}else s=e(r,f,p)}return s?new R(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,r,i){var a=l.create(M.prototype);return a._type=t,a._size=n,a._radius=r,a._initialize(l.getNamed(i),e),a}return{Circle:function(){var e=arguments,n=g.readNamed(e,"center"),r=l.readNamed(e,"radius");return t("circle",n,new _(2*r),r,e)},Rectangle:function(){var e=arguments,n=x.readNamed(e,"rectangle"),r=_.min(_.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),r,e)},Ellipse:function(){var e=arguments,n=M._readEllipse(e),r=n.radius;return t("ellipse",n.center,r.multiply(2),r,e)},_readEllipse:function(t){var e,n;if(l.hasNamed(t,"radius"))e=g.readNamed(t,"center"),n=_.readNamed(t,"radius");else{var r=x.readNamed(t,"rectangle");e=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),A=E.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==o&&g.read(arguments))){var n,r=typeof t,i="string"===r?u.getElementById(t):"object"===r?t:null;if(i&&i!==E.NO_INSERT)if(i.getContext||null!=i.naturalHeight)n=i;else if(i){var a=_.read(arguments);a.isZero()||(n=ot.getCanvas(a))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new _,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var r=ot.getCanvas(t._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new b(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n=_.read(arguments);if(n.equals(this._size))e&&this.clear();else if(n.width>0&&n.height>0){var r=!e&&this.getElement();this._setImage(ot.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ot.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new g(0,0).transform(t),n=new g(1,0).transform(t).subtract(e),r=new g(0,1).transform(t).subtract(e);return new _(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),r=t&&t.type||"load";n&&e.responds(r)&&(ct=n._scope,e.emit(r,new $(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Q.add(t,{load:function(r){e._setImage(t),n(r)},error:n})},_setImage:function(t){this._canvas&&ot.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new _(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=ot.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ot.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new a.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"===typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=x.read(arguments),e=ot.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=x.read(arguments),e=new A(E.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=g.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof B?(n=t,e=t.getBounds()):"object"===typeof t&&("width"in t?e=new x(t):"x"in t&&(e=new x(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=Math.min(e.width,32),i=Math.min(e.height,32),a=A._sampleContext;a?a.clearRect(0,0,33,33):a=A._sampleContext=ot.getContext(new _(32)),a.save();var o=(new S).scale(r/e.width,i/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new l({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),u=this._size;s&&a.drawImage(s,-u.width/2,-u.height/2),a.restore();for(var c=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],f=0,d=0,p=c.length;d<p;d+=4){var v=c[d+3];f+=v,v/=255,h[0]+=c[d]*v,h[1]+=c[d+1]*v,h[2]+=c[d+2]*v}for(d=0;d<3;d++)h[d]/=f;return f?W.read(h):null},getPixel:function(){var t=g.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=g.read(t),n=W.read(t),r=n._convert("rgb"),i=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*r[0],s[1]=255*r[1],s[2]=255*r[2],s[3]=null!=i?255*i:255,a.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=_.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=x.read(arguments);return t.isEmpty()&&(t=new x(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=g.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new x(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new R("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){t.globalAlpha=v.clamp(this._opacity,0,1),this._setStyles(t,e,n);var i=this._smoothing,a="off"===i;Z.setPrefixed(t,a?"imageSmoothingEnabled":"imageSmoothingQuality",!a&&i),t.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),P=E.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==o&&g.read(arguments,1))||this.setDefinition(t instanceof L?t:new L(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var r=e.extend({all:!1}),i=this._definition._item._hitTest(t,r,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),L=l.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=m.get(),this.project=ct.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return l.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&E._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new g),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new P(this,t)},clone:function(){return new L(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),R=l.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&l.read(t);return new l({type:null,tolerance:ct.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),j=l.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,r,i,a){var s,u,l,c,h=arguments.length;h>0&&(null==t||"object"===typeof t?1===h&&t&&"point"in t?(s=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(s=t,u=e,l=n,c=r):(s=[t,e],u=n!==o?[n,r]:null,l=i!==o?[i,a]:null)),new I(s,this,"_point"),new I(u,this,"_handleIn"),new I(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),l.serialize(i,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,r=e._curves,i=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(n=i>0?r[i-1]:e._closed?r[r.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=r[i])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(g.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(g.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(g.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==o?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new N(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var r=t||{},i=r.type,a=r.factor,s=this.getPrevious(),u=this.getNext(),l=(s||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),d=c.getDistance(h);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");if(s&&u){var p=l.subtract(h),v=a===o?.4:a,m=v*f/(f+d);e||this.setHandleIn(p.multiply(m)),n||this.setHandleOut(p.multiply(m-v))}}else{var y=a===o?.5:a,_=Math.pow(f,y),b=_*_,x=Math.pow(d,y),w=x*x;if(!e&&s){var S=2*w+3*x*_+b,k=3*x*(x+_);this.setHandleIn(0!==k?new g((w*l._x+S*c._x-b*h._x)/k-c._x,(w*l._y+S*c._y-b*h._y)/k-c._y):new g)}if(!n&&u){S=2*b+3*_*x+w,k=3*_*(_+x);this.setHandleOut(0!==k?new g((b*h._x+S*c._x-w*l._x)/k-c._x,(b*h._y+S*c._y-w*l._y)/k-c._y):new g)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new j(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new j(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var r=1-n,i=n,a=t._point,o=e._point,s=t._handleIn,u=e._handleIn,l=e._handleOut,c=t._handleOut;this._point._set(r*a._x+i*o._x,r*a._y+i*o._y,!0),this._handleIn._set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut._set(r*c._x+i*l._x,r*c._y+i*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=r._x,s=r._y,u=2;return e[0]=o,e[1]=s,i&&(e[u++]=i._x+o,e[u++]=i._y+s),a&&(e[u++]=a._x+o,e[u++]=a._y+s),t&&(t._transformCoordinates(e,e,u/2),o=e[0],s=e[1],n?(r._x=o,r._y=s,u=2,i&&(i._x=e[u++]-o,i._y=e[u++]-s),a&&(a._x=e[u++]-o,a._y=e[u++]-s)):(i||(e[u++]=o,e[u++]=s),a||(e[u++]=o,e[u++]=s))),e}}),I=g.extend({initialize:function(t,e,n){var r,i,a;if(t)if((r=t[0])!==o)i=t[1];else{var s=t;(r=s.x)===o&&(r=(s=g.read(arguments)).x),i=s.y,a=s.selected}else r=i=0;this._x=r,this._y=i,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=v.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),D=l.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,r,i,a,o,s){var u,l,c,h,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?"segment1"in t?(u=new j(t.segment1),l=new j(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new j(t),l=new j(e)):4===p?(c=t,f=e,d=n,h=r):8===p&&(c=[t,e],h=[o,s],f=[n-t,r-e],d=[i-o,a-s]):(u=new j,l=new j),this._segment1=u||new j(c,null,f),this._segment2=l||new j(h,d,null)},_serialize:function(t,e){return l.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=o},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return D.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(g.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(g.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(g.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(g.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return D.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new g(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new k(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new D(D.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return D.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=.99999999){var r=D.subdivide(this.getValues(),t),i=r[0],a=r[1],o=e||this.hasHandles(),s=this._segment1,u=this._segment2,l=this._path;o&&(s._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=i[6],h=i[7],f=new j(new g(c,h),o&&new g(i[4]-c,i[5]-h),o&&new g(a[2]-c,a[3]-h));l?(l.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new D(f,u))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===o?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===o?.5:e?t:this.getTimeAt(t))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,r){var i=t._point,a=t._handleOut,o=e._handleIn,s=e._point,u=i.x,l=i.y,c=s.x,h=s.y,f=r?[u,l,u,l,c,h,c,h]:[u,l,u+a._x,l+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7];e===o&&(e=.5);var h=1-e,f=h*n+e*i,d=h*r+e*a,p=h*i+e*s,v=h*a+e*u,m=h*s+e*l,g=h*u+e*c,y=h*f+e*p,_=h*d+e*v,b=h*p+e*m,x=h*v+e*g,w=h*y+e*b,S=h*_+e*x;return[[n,r,f,d,y,_,w,S],[w,S,b,x,m,g,l,c]]},getMonoCurves:function(t,e){var n=[],r=e?0:1,i=t[r+0],a=t[r+2],o=t[r+4],s=t[r+6];if(i>=a===a>=o&&a>=o===o>=s||D.isStraight(t))n.push(t);else{var u=3*(a-o)-i+s,l=2*(i+o)-4*a,c=a-i,h=[],f=v.solveQuadratic(u,l,c,h,1e-8,.99999999);if(f){h.sort();var d=h[0],p=D.subdivide(t,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=D.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(t)}return n},solveCubic:function(t,e,n,r,i,a){var o=t[e],s=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(o<n&&l<n&&s<n&&u<n||o>n&&l>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,d=l-o-h-f;c=v.solveCubic(d,f,h,o-n,r,i,a)}return c},getTimeOf:function(t,e){var n=new g(t[0],t[1]),r=new g(t[6],t[7]),i=1e-7;if(null===(e.isClose(n,1e-12)?0:e.isClose(r,1e-12)?1:null))for(var a=[e.x,e.y],o=[],s=0;s<2;s++)for(var u=D.solveCubic(t,s,a[s],o,0,1),l=0;l<u;l++){var c=o[l];if(e.isClose(D.getPoint(t,c),i))return c}return e.isClose(n,i)?0:e.isClose(r,i)?1:null},getNearestTime:function(t,e){if(D.isStraight(t)){var n=t[0],r=t[1],i=t[6]-n,a=t[7]-r,o=i*i+a*a;if(0===o)return 0;var s=((e.x-n)*i+(e.y-r)*a)/o;return s<1e-12?0:s>.999999999999?1:D.getTimeOf(t,new g(n+s*i,r+s*a))}var u=1/0,l=0;function c(n){if(n>=0&&n<=1){var r=e.getDistance(D.getPoint(t,n),!0);if(r<u)return u=r,l=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var f=.005;f>1e-8;)c(l-f)||c(l+f)||(f/=2);return l},getPart:function(t,e,n){var r=e>n;if(r){var i=e;e=n,n=i}return e>0&&(t=D.subdivide(t,e)[1]),n<1&&(t=D.subdivide(t,(n-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=3*i-2*n-u,h=3*a-2*r-l,f=3*o-2*u-n,d=3*s-2*l-r;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return 3*((u-n)*(r+a)-(s-e)*(i+o)+i*(e-a)-r*(n-o)+u*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),r=[0,0],i=0;i<2;i++)D._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,n,r);return new x(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,r,i,a,o,s,u){function l(t,e){var n=t-e,r=t+e;n<o[i]&&(o[i]=n),r>s[i]&&(s[i]=r)}a/=2;var c=o[i]+a,h=s[i]-a;if(t<c||e<c||n<c||r<c||t>h||e>h||n>h||r>h)if(e<t!=e<r&&n<t!=n<r)l(t,0),l(r,0);else{var f=3*(e-n)-t+r,d=2*(t+n)-4*e,p=e-t,m=v.solveQuadratic(f,d,p,u);l(r,0);for(var g=0;g<m;g++){var y=u[g],_=1-y;1e-8<=y&&y<=.99999999&&l(_*_*_*t+3*_*_*y*e+3*_*y*y*n+y*y*y*r,a)}}}}},l.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=z[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),l.each({isStraight:function(t,e,n,r){if(e.isZero()&&n.isZero())return!0;var i=r.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(n)){var a=new k(t,r);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(r.add(n))<1e-7){var o=i.dot(i),s=i.dot(e)/o,u=i.dot(n)/o;return s>=0&&s<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,n,r){var i=r.subtract(t).divide(3);return e.equals(i)&&n.negate().equals(i)}},(function(t,e){this[e]=function(e){var n=this._segment1,r=this._segment2;return t(n._point,n._handleOut,r._handleIn,r._point,e)},this.statics[e]=function(e,n){var r=e[0],i=e[1],a=e[6],o=e[7];return t(new g(r,i),new g(e[2]-r,e[3]-i),new g(e[4]-a,e[5]-o),new g(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new N(this,t):null},getTimeAt:function(t,e){return D.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=g.read(arguments);return t.isZero()?[]:D.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=g.read(arguments),e=this.getValues(),n=D.getNearestTime(e,t),r=D.getPoint(e,n);return new N(this,n,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return l.each(t,(function(t){this[t+"At"]=function(e,n){var r=this.getValues();return D[t](r,n?e:D.getTimeAt(r,e))},this[t+"AtTime"]=function(e){return D[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=9*(r-a)+3*(s-e),c=6*(e+a)-12*r,h=3*(r-e),f=9*(i-o)+3*(u-n),d=6*(n+o)-12*i,p=3*(i-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,r){if(null==e||e<0||e>1)return null;var i=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=v.isZero;f(o-i)&&f(s-a)&&(o=i,s=a),f(u-c)&&f(l-h)&&(u=c,l=h);var d,p,m=3*(o-i),y=3*(u-o)-m,_=c-i-m-y,b=3*(s-a),x=3*(l-s)-b,w=h-a-b-x;if(0===n)d=0===e?i:1===e?c:((_*e+y)*e+m)*e+i,p=0===e?a:1===e?h:((w*e+x)*e+b)*e+a;else{var S=1e-8,k=1-S;if(e<S?(d=m,p=b):e>k?(d=3*(c-u),p=3*(h-l)):(d=(3*_*e+2*y)*e+m,p=(3*w*e+2*x)*e+b),r){0===d&&0===p&&(e<S||e>k)&&(d=u-o,p=l-s);var T=Math.sqrt(d*d+p*p);T&&(d/=T,p/=T)}if(3===n){u=6*_*e+2*y,l=6*w*e+2*x;var E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*l-p*u)/E:0,p=0}}return 2===n?new g(p,-d):new g(d,p)}return{statics:{classify:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=r*(n-l)+i*(u-e)+e*l-n*u,h=3*(a*(i-n)+s*(e-r)+r*n-i*e),f=h-c,d=f-c+(e*(l-s)+n*(a-u)+u*s-l*a),p=Math.sqrt(d*d+f*f+h*h),m=0!==p?1/p:0,g=v.isZero,y="serpentine";function _(t,e,n){var r=e!==o,i=r&&e>0&&e<1,a=r&&n>0&&n<1;return!r||(i||a)&&("loop"!==t||i&&a)||(t="arch",i=a=!1),{type:t,roots:i||a?i&&a?e<n?[e,n]:[n,e]:[i?e:n]:null}}if(f*=m,h*=m,g(d*=m))return g(f)?_(g(h)?"line":"quadratic"):_(y,h/(3*f));var b=3*f*f-4*d*h;if(g(b))return _("cusp",f/(2*d));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*d;return _(b>0?y:"loop",(f+x)/w,(f-x)/w)},getLength:function(n,r,i,a){if(r===o&&(r=0),i===o&&(i=1),D.isStraight(n)){var s=n;i<1&&(s=D.subdivide(s,i)[0],r/=i),r>0&&(s=D.subdivide(s,r)[1]);var u=s[6]-s[0],l=s[7]-s[1];return Math.sqrt(u*u+l*l)}return v.integrate(a||t(n),r,i,e(r,i))},getTimeAt:function(n,r,i){if(i===o&&(i=r<0?1:0),0===r)return i;var a=Math.abs,s=r>0,u=s?i:0,l=s?1:i,c=t(n),h=D.getLength(n,u,l,c),f=a(r)-h;if(a(f)<1e-12)return s?l:u;if(f>1e-12)return null;var d=r/h,p=0;return v.findRoot((function(t){return p+=v.integrate(c,i,t,e(i,t)),i=t,p-r}),c,i+d,u,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=3*r-e-3*a+t[6],u=3*e-6*r+3*a,l=-3*e+3*r,c=3*i-n-3*o+t[7],h=3*n-6*i+3*o,f=-3*n+3*i,d=[];return v.solveCubic(9*(s*s+c*c),9*(s*u+h*c),2*(u*u+h*h)+3*(l*s+f*c),l*u+h*f,d,1e-8,.99999999),d.sort()}}}},new function(){function t(t,e,n,r,i,a,o){var s=!o&&n.getPrevious()===i,u=!o&&n!==i&&n.getNext()===i,l=1e-8,c=1-l;if(null!==r&&r>=(s?l:0)&&r<=(u?c:1)&&null!==a&&a>=(u?l:0)&&a<=(s?c:1)){var h=new N(n,r,null,o),f=new N(i,a,null,o);h._intersection=f,f._intersection=h,e&&!e(h)||N.insert(t,h,!0)}}function e(r,i,a,o,s,u,l,c,h,f,d,p,v){if(++h>=4096||++c>=40)return h;var m,g,y=i[0],_=i[1],b=i[6],x=i[7],w=k.getSignedDistance,S=w(y,_,b,x,i[2],i[3]),T=w(y,_,b,x,i[4],i[5]),E=S*T>0?3/4:4/9,C=E*Math.min(0,S,T),O=E*Math.max(0,S,T),M=w(y,_,b,x,r[0],r[1]),A=w(y,_,b,x,r[2],r[3]),P=w(y,_,b,x,r[4],r[5]),L=w(y,_,b,x,r[6],r[7]),R=function(t,e,n,r){var i,a=[0,t],o=[1/3,e],s=[2/3,n],u=[1,r],l=e-(2*t+r)/3,c=n-(t+2*r)/3;if(l*c<0)i=[[a,o,u],[a,s,u]];else{var h=l/c;i=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(l||c)<0?i.reverse():i}(M,A,P,L),j=R[0],I=R[1];if(0===S&&0===T&&0===M&&0===A&&0===P&&0===L||null==(m=n(j,I,C,O))||null==(g=n(j.reverse(),I.reverse(),C,O)))return h;var N=f+(d-f)*m,B=f+(d-f)*g;if(Math.max(v-p,B-N)<1e-9){var z=(N+B)/2,F=(p+v)/2;t(s,u,l?o:a,l?F:z,l?a:o,l?z:F)}else{r=D.getPart(r,m,g);var V=v-p;if(g-m>.8)if(B-N>V){z=(N+B)/2;h=e(i,(U=D.subdivide(r,.5))[0],o,a,s,u,!l,c,h,p,v,N,z),h=e(i,U[1],o,a,s,u,!l,c,h,p,v,z,B)}else{var U;F=(p+v)/2;h=e((U=D.subdivide(i,.5))[0],r,o,a,s,u,!l,c,h,p,F,N,B),h=e(U[1],r,o,a,s,u,!l,c,h,F,v,N,B)}else h=0===V||V>=1e-9?e(i,r,o,a,s,u,!l,c,h,p,v,N,B):e(r,i,a,o,s,u,l,c,h,N,B,p,v)}return h}function n(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var r=t[0][0],i=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],u=t[a][1];if(e?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function i(t,e,n,r,i){var a=v.isZero;if(a(r)&&a(i)){var o=D.getTimeOf(t,new g(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-i,r),u=Math.sin(s),l=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-n;c.push(d*l-p*u,d*u+p*l)}return D.solveCubic(c,1,0,h,0,1),h}function a(e,n,r,a,o,s,u){for(var l=n[0],c=n[1],h=i(e,l,c,n[6]-l,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],v=D.getPoint(e,p),m=D.getTimeOf(n,v);null!==m&&t(o,s,u?a:r,u?m:p,u?r:a,u?p:m)}}function o(e,n,r,i,a,o){var s=k.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,r,D.getTimeOf(e,s),i,D.getTimeOf(n,s))}function s(n,r,i,s,u,c){var h=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+h>f(r[0],r[2],r[4],r[6])&&f(n[0],n[2],n[4],n[6])-h<d(r[0],r[2],r[4],r[6])&&d(n[1],n[3],n[5],n[7])+h>f(r[1],r[3],r[5],r[7])&&f(n[1],n[3],n[5],n[7])-h<d(r[1],r[3],r[5],r[7])){var p=l(n,r);if(p)for(var v=0;v<2;v++){var m=p[v];t(u,c,i,m[0],s,m[1],!0)}else{var y=D.isStraight(n),_=D.isStraight(r),b=y&&_,x=y&&!_,w=u.length;if((b?o:y||_?a:e)(x?r:n,x?n:r,x?s:i,x?i:s,u,c,x,0,0,0,1,0,1),!b||u.length===w)for(v=0;v<4;v++){var S=v>>1,k=1&v,T=6*S,E=6*k,C=new g(n[T],n[T+1]),O=new g(r[E],r[E+1]);C.isClose(O,h)&&t(u,c,i,S,s,k)}}}return u}function u(e,n,r,i){var a=D.classify(e);if("loop"===a.type){var o=a.roots;t(r,i,n,o[0],n,o[1])}return r}function l(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var r=Math.abs,i=k.getDistance,a=1e-7,o=D.isStraight(t),s=D.isStraight(e),u=o&&s,l=n(t)<n(e),c=l?e:t,h=l?t:e,f=c[0],d=c[1],p=c[6]-f,v=c[7]-d;if(i(f,d,p,v,h[0],h[1],!0)<a&&i(f,d,p,v,h[6],h[7],!0)<a)!u&&i(f,d,p,v,c[2],c[3],!0)<a&&i(f,d,p,v,c[4],c[5],!0)<a&&i(f,d,p,v,h[2],h[3],!0)<a&&i(f,d,p,v,h[4],h[5],!0)<a&&(o=s=u=!0);else if(u)return null;if(o^s)return null;for(var m=[t,e],y=[],_=0;_<4&&y.length<2;_++){var b=1&_,x=1^b,w=_>>1,S=D.getTimeOf(m[b],new g(m[x][w?6:0],m[x][w?7:1]));if(null!=S){var T=b?[w,S]:[S,w];(!y.length||r(T[0]-y[0][0])>1e-8&&r(T[1]-y[0][1])>1e-8)&&y.push(T)}if(_>2&&!y.length)break}if(2!==y.length)y=null;else if(!u){var E=D.getPart(t,y[0][0],y[1][0]),C=D.getPart(e,y[0][1],y[1][1]);(r(C[2]-E[2])>a||r(C[3]-E[3])>a||r(C[4]-E[4])>a||r(C[5]-E[5])>a)&&(y=null)}return y}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,n,r,i,a){var o=!e;o&&(e=t);for(var l=t.length,c=e.length,h=new Array(l),f=o?h:new Array(c),p=[],v=0;v<l;v++)h[v]=t[v].getValues(r);if(!o)for(v=0;v<c;v++)f[v]=e[v].getValues(i);for(var m=d.findCurveBoundsCollisions(h,f,1e-7),g=0;g<l;g++){var y=t[g],_=h[g];o&&u(_,y,p,n);var b=m[g];if(b)for(var x=0;x<b.length;x++){if(a&&p.length)return p;var w=b[x];if(!o||w>g){var S=e[w];s(_,f[w],y,S,p,n)}}}return p},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=e.normalize(),h=c.x,f=c.y,d=3*u-9*o+9*i-3*n,p=3*l-9*s+9*a-3*r,m=6*o-12*i+6*n,g=6*s-12*a+6*r,y=3*i-3*n,_=3*a-3*r,b=2*d*f-2*p*h,x=[];if(Math.abs(b)<v.CURVETIME_EPSILON){if(0!=(b=d*g-p*m)){var w=-(d*_-p*y)/b;w>=0&&w<=1&&x.push(w)}}else{var S=(m*m-4*d*y)*f*f+(-2*m*g+4*p*y+4*d*_)*h*f+(g*g-4*p*_)*h*h,k=m*f-g*h;if(S>=0&&0!=b){var T=Math.sqrt(S),E=-(k+T)/b,C=(-k+T)/b;E>=0&&E<=1&&x.push(E),C>=0&&C<=1&&x.push(C)}}return x}}}}),N=l.extend({_class:"CurveLocation",initialize:function(t,e,n,r,i){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var r=e.getCurves(),i=0;i<n;i++)t+=r[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof N){var r=this.getCurve(),i=t.getCurve(),a=r._path;if(a===i._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),u=!e&&this._intersection,l=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!u&&!l||u&&l&&u.equals(l,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=p.instance;e&&t.push("point: "+e);var r=this.getIndex();null!=r&&t.push("index: "+r);var i=this.getTime();return null!=i&&t.push("time: "+n.number(i)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),r=1e-8,i=1-r,a=e>=r&&e<=i,o=n>=r&&n<=i;if(a&&o)return!this.isTouching();var s=this.getCurve(),u=s&&e<r?s.getPrevious():s,l=t.getCurve(),c=l&&n<r?l.getPrevious():l;if(e>i&&(s=s.getNext()),n>i&&(l=l.getNext()),!u||!s||!c||!l)return!1;var h=[];function f(t,e){var n=t.getValues(),r=D.classify(n).roots||D.getPeaks(n),i=r.length,a=D.getLength(n,e&&i?r[i-1]:0,!e&&i?r[0]:1);h.push(i?a:a/32)}function d(t,e,n){return e<n?t>e&&t<n:t>e||t<n}a||(f(u,!0),f(s,!1)),o||(f(c,!0),f(l,!1));var p=this.getPoint(),v=Math.min.apply(Math,h),m=a?s.getTangentAtTime(e):s.getPointAt(v).subtract(p),g=a?m.negate():u.getPointAt(-v).subtract(p),y=o?l.getTangentAtTime(n):l.getPointAt(v).subtract(p),_=o?y.negate():c.getPointAt(-v).subtract(p),b=g.getAngle(),x=m.getAngle(),w=_.getAngle(),S=y.getAngle();return!!(a?d(b,w,S)^d(x,w,S)&&d(b,S,w)^d(x,S,w):d(w,b,x)^d(S,b,x)&&d(w,x,b)^d(S,x,b))},hasOverlap:function(){return!!this._overlap}},l.each(D._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var r=t.length,i=0,a=r-1;function o(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=t[(a%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;i<=a;){var s,u=i+a>>>1,l=t[u];if(n&&(s=e.equals(l)?l:o(u,-1)||o(u,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?a=u-1:i=u+1}return t.splice(i,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),r=e.length-1;r>=0;r--)t(n,e[r]._intersection,!1);return n}}}}),B=E.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,r;if(l.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"===typeof t&&(e=t),n){var i=n[0];r=i&&Array.isArray(i[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(r?F:z)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,r,i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new g,s=new g;function u(t,n){var r=+e[t];return a&&(r+=o[n]),r}function l(t){return new g(u(t,"x"),u(t+1,"y"))}this.clear();for(var c=0,h=i&&i.length;c<h;c++){var f=i[c],d=f[0],p=d.toLowerCase(),v=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=d===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o),p){case"m":case"l":for(var m="m"===p,y=0;y<v;y+=2)this[m?"moveTo":"lineTo"](o=l(y)),m&&(s=o,m=!1);r=o;break;case"h":case"v":var b="h"===p?"x":"y";o=o.clone();for(y=0;y<v;y++)o[b]=u(y,b),this.lineTo(o);r=o;break;case"c":for(y=0;y<v;y+=6)this.cubicCurveTo(l(y),r=l(y+2),o=l(y+4));break;case"s":for(y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(r):o,r=l(y),o=l(y+2)),n=p;break;case"q":for(y=0;y<v;y+=4)this.quadraticCurveTo(r=l(y),o=l(y+2));break;case"t":for(y=0;y<v;y+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?o.multiply(2).subtract(r):o,o=l(y)),n=p;break;case"a":for(y=0;y<v;y+=7)this.arcTo(o=l(y+5),new _(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,r){var i=this===t||!t,a=this._matrix._orNullIfIdentity(),o=i?a:(n||t._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(t.getBounds(o),1e-12)?D.getIntersections(this.getCurves(),!i&&t.getCurves(),e,a,o,r):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=g.read(arguments),e=this.getCurves(),n=1/0,r=null,i=0,a=e.length;i<a;i++){var o=e[i].getNearestLocation(t);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var r=!this._children,i=r?"_segments":"_children",a=t[i],o=e[i],s=this[i];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=s.length,l=o.length;if(u<l)for(var c=r?j:z,h=u;h<l;h++)this.add(new c);else u>l&&this[r?"removeSegments":"removeChildren"](l,u);for(h=0;h<l;h++)s[h].interpolate(a[h],o[h],n);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],r=t._children?t._children.slice():[t],i=n.length,a=r.length,o=[],s=0;e=!0;for(var u=d.findItemBoundsCollisions(n,r,v.GEOMETRIC_EPSILON),l=i-1;l>=0&&e;l--){var c=n[l];e=!1;var h=u[l];if(h)for(var f=h.length-1;f>=0&&!e;f--)c.compare(r[h[f]])&&(o[h[f]]||(o[h[f]]=!0,s++),e=!0)}e=e&&s===a}return e}}),z=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,n=Array.isArray(t)?"object"===typeof t[0]?t:e:!t||t.size!==o||t.x===o&&t.point===o?null:e;n&&n.length>0?this.setSegments(n):(this._curves=o,this._segmentSelection=0,n||"string"!==typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&l.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=o,32&e)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=o)},getStyle:function(){var t=this._parent;return(t instanceof F?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=o,n){var r=t[n-1];"boolean"===typeof r&&(this.setClosed(r),n--),this._add(j.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var r=0;r<n;r++)t[r]=new D(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new D(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,r,i,a,o,s,u,l,c=this._segments,h=c.length,f=new p(e),d=new Array(6),v=!0,m=[];function g(e,c){if(e._transformCoordinates(t,d),n=d[0],r=d[1],v)m.push("M"+f.pair(n,r)),v=!1;else if(o=d[2],s=d[3],o===n&&s===r&&u===i&&l===a){if(!c){var h=n-i,p=r-a;m.push(0===h?"v"+f.number(p):0===p?"h"+f.number(h):"l"+f.pair(h,p))}}else m.push("c"+f.pair(u-i,l-a)+" "+f.pair(o-i,s-a)+" "+f.pair(n-i,r-a));i=n,a=r,u=d[4],l=d[5]}if(!h)return"";for(var y=0;y<h;y++)g(c[y]);return this._closed&&h>0&&(g(c[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),r=0,i=e.length;r<i;r++)e[r]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,r=this._curves,i=t.length,a=null==e,o=(e=a?n.length:e,0);o<i;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)l.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var c=this._countCurves(),h=e>0&&e+i-1===c?e-1:e,f=h,d=Math.min(h+i,c);t._curves&&(r.splice.apply(r,[h,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)r.splice(o,0,new D(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,r=this._segments,i=this._curves,a=t;a<e;a++)(n=i[a])._path=this,n._segment1=r[a],n._segment2=r[a+1]||r[0],n._changed();(n=i[this._closed&&!t?r.length-1:t-1])&&(n._segment2=r[t]||r[0],n._changed()),(n=i[e])&&(n._segment1=r[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!==typeof t?this._add(j.readList(e)):this._add([j.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!==typeof e?this._add(j.readList(n,1),t):this._add([j.read(n,1)],t)[0]},addSegment:function(){return this._add([j.read(arguments)])[0]},insertSegment:function(t){return this._add([j.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(j.readList(t))},insertSegments:function(t,e){return this._add(j.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=l.pick(e,this._segments.length);var r=this._segments,i=this._curves,a=r.length,o=r.splice(t,e-t),s=o.length;if(!s)return o;for(var u=0;u<s;u++){var c=o[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=t;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(u=(i=i.splice(f,s)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var r=0,i=e.length;r<i;r++){var a=r+1===i;t+=D.getArea(D.getValues(e[r],e[a?0:r+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,r=t?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)e[i]._selection=r},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,r=e&&e.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new z(E.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,e){var n,r=e===o?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var r=t._segments,i=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(i&&i._point.isClose(o._point,n))i.setHandleOut(o._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,r=n?1e-7:0,i=e.length-1;i>=0;i--){var a=e[i];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new V(this,t||.25,256,!0).parts,n=e.length,r=[],i=0;i<n;i++)r.push(new j(e[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new j(e[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new U(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},r=n.type||"asymmetric",i=this._segments,a=i.length,s=this._closed;function u(t,n){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==e)throw new Error(t._class+" "+r+" of "+i+" is not part of "+e);n&&t instanceof D&&r++}else r="number"===typeof t?t:n;return Math.min(r<0&&s?r%a:r<0?r+a:r,a-1)}var l=s&&n.from===o&&n.to===o,c=u(n.from,0),h=u(n.to,a-1);if(c>h)if(s)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,p=Math.min,v=h-c+1,m=v-1,g=l?p(v,4):1,y=g,_=g,b=[];if(s||(y=p(1,c),_=p(1,a-h-1)),(m+=y+_)<=1)return;for(var x=0,w=c-y;x<=m;x++,w++)b[x]=i[(w<0?w+a:w)%a]._point;var S=b[0]._x+2*b[1]._x,k=b[0]._y+2*b[1]._y,T=2,E=m-1,C=[S],O=[k],M=[T],A=[],P=[];for(x=1;x<m;x++){var L=x<E,R=L?4:d?2:7,j=L?4:d?3:8,I=L?2:d?0:1,N=(L||d?1:2)/T;T=M[x]=R-N,S=C[x]=j*b[x]._x+I*b[x+1]._x-N*S,k=O[x]=j*b[x]._y+I*b[x+1]._y-N*k}A[E]=C[E]/M[E],P[E]=O[E]/M[E];for(x=m-2;x>=0;x--)A[x]=(C[x]-A[x+1])/M[x],P[x]=(O[x]-P[x+1])/M[x];A[m]=(3*b[m]._x-A[E])/2,P[m]=(3*b[m]._y-P[E])/2;x=y;var B=m-_;for(w=c;x<=B;x++,w++){var z=i[w<0?w+a:w],F=z._point,V=A[x]-F._x,U=P[x]-F._y;(l||x<B)&&z.setHandleOut(V,U),(l||x>y)&&z.setHandleIn(-V,-U)}}else for(x=c;x<=h;x++)i[x<0?x+a:x].smooth(n,!l&&x===c,!l&&x===h)},toShape:function(t){if(!this._closed)return null;var e,n,r,i,a=this._segments;function s(t,e){var n=a[t],r=n.getNext(),i=a[e],o=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(o._point.subtract(i._point))}function u(t){var e=a[t],n=e.getNext(),r=e._handleOut,i=n._handleIn,o=.5522847498307936;if(r.isOrthogonal(i)){var s=e._point,u=n._point,l=new k(s,r,!0).intersect(new k(u,i,!0),!0);return l&&v.isZero(r.getLength()/l.subtract(s).getLength()-o)&&v.isZero(i.getLength()/l.subtract(u).getLength()-o)}return!1}function l(t,e){return a[t]._point.getDistance(a[e]._point)}if(!this.hasHandles()&&4===a.length&&s(0,2)&&s(1,3)&&function(t){var e=a[t],n=e.getPrevious(),r=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&r._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(r._point.subtract(e._point))}(1)?(e=M.Rectangle,n=new _(l(0,3),l(0,1)),i=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&u(0)&&u(2)&&u(4)&&u(6)&&s(1,5)&&s(3,7)?(e=M.Rectangle,r=(n=new _(l(1,6),l(0,3))).subtract(new _(l(0,7),l(1,2))).divide(2),i=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&u(0)&&u(1)&&u(2)&&u(3)&&(v.isZero(l(0,2)-l(1,3))?(e=M.Circle,r=l(0,2)/2):(e=M.Ellipse,r=new _(l(2,0)/2,l(3,1)/2)),i=a[1]._point),e){var c=this.getPosition(!0),h=new e({center:c,size:n,radius:r,insert:!1});return h.copyAttributes(this,!0),h._matrix.prepend(this._matrix),h.rotate(i.subtract(c).getAngle()+90),(t===o||t)&&h.insertAbove(this),h}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof F)return t.base.call(this,e);var n=this.getCurves(),r=e.getCurves(),i=n.length,a=r.length;if(!i||!a)return i==a;for(var o,s,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<a;f++){var d=r[f].getValues();if(l.push(d),m=D.getOverlaps(u,d)){o=!f&&m[0][0]>0?a-1:f,s=m[0][1];break}}var p,v=Math.abs;for(d=l[o];u&&d;){var m;if(m=D.getOverlaps(u,d))if(v(m[0][0]-h)<1e-8){1===(h=m[1][0])&&(u=++c<i?n[c].getValues():null,h=0);var g=m[0][1];if(v(g-s)<1e-8){if(p||(p=[o,g]),1===(s=m[1][1])&&(++o>=a&&(o=0),d=l[o]||r[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,r){var i,a,o,s,u,l,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,v=e._tolerancePadding,m=v,g=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),_=e.curves,b=g?h.getStrokeWidth()/2:y&&e.tolerance>0||_?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,r){if(!e.selected||n.isSelected()){var i=t._point;if(n!==i&&(n=n.add(i)),x(n,m))return new R(r,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function k(t){s.add(t)}function T(e){var n,u=p||e._index>0&&e._index<d-1;return"round"===(u?i:a)?x(e._point,m):(s=new z({internal:!0,closed:!0}),u?e.isSmooth()||z._addBevelJoin(e,i,b,o,null,r,k,!0):"square"===a&&z._addSquareCap(e,a,b,null,r,k,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&x(n.getPoint(),v))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),m=m.add(z._getStrokePadding(b,r))):i=a="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var E=0;E<d;E++)if(l=S(f[E]))return l}else if(l=S(f[0],!0)||S(f[d-1],!0))return l;if(null!==b){if(u=this.getNearestLocation(t)){var C=u.getTime();0===C||1===C&&d>1?T(u.getSegment())||(u=null):x(u.getPoint(),m)||(u=null)}if(!u&&"miter"===i&&d>1)for(E=0;E<d;E++){var O=f[E];if(t.getDistance(O._point)<=o*b&&T(O)){u=O.getLocation();break}}}return!u&&y&&this._contains(t)||u&&!g&&!_?new R("fill",this):u?new R(g?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},l.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=g.read(arguments),e=this.getCurves(),n=0,r=e.length;n<r;n++){var i=e[n].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"===typeof t){for(var e=this.getCurves(),n=0,r=0,i=e.length;r<i;r++){var a=n,o=e[r];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new N(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=g.read(arguments);if(t.isZero())return[];for(var e=[],n=0,r=this.getCurves(),i=0,a=r.length;i<a;i++){for(var o=r[i],s=o.getTimesWithTangent(t),u=0,l=s.length;u<l;u++){var c=n+o.getOffsetAtTime(s[u]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var r,i,a,o,s,u,l,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function v(e){if(n)e._transformCoordinates(n,d),r=d[0],i=d[1];else{var h=e._point;r=h._x,i=h._y}if(p)t.moveTo(r,i),p=!1;else{if(n)s=d[2],u=d[3];else{var f=e._handleIn;s=r+f._x,u=i+f._y}s===r&&u===i&&l===a&&c===o?t.lineTo(r,i):t.bezierCurveTo(l,c,s,u,r,i)}if(a=r,o=i,n)l=d[4],c=d[5];else{f=e._handleOut;l=a+f._x,c=o+f._y}}for(var m=0;m<f;m++)v(h[m]);e._closed&&f>0&&v(h[0])}return{_draw:function(e,n,r,i){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),u=s.hasFill(),l=s.hasStroke(),c=s.getDashArray(),h=!ct.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(u||l&&!h||o)&&(t(e,this,i),this._closed&&e.closePath()),!o&&(u||l)&&(this._setStyles(e,n,r),u&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(h){a||e.beginPath();for(var d,p=new V(this,.25,32,!1,i),v=p.length,m=-s.getDashOffset(),g=0;m>0;)m-=f(g--)+f(g--);for(;m<v;)d=m+f(g++),(m>0||d>0)&&p.drawPart(e,Math.max(m,0),Math.max(d,0)),m=d+f(g++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,r){if(!(r<=0))for(var i,a,o=r/2,s=r-2,u=o-1,l=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,l),i=l[0],a=l[1],2&d&&v(2),4&d&&v(4),t.fillRect(i-o,a-o,r,r),s>0&&!(1&d)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(i-u,a-u,s,s),t.fillStyle=p}}function v(e){var n=l[e],r=l[e+1];i==n&&a==r||(t.beginPath(),t.moveTo(i,a),t.lineTo(n,r),t.stroke(),t.beginPath(),t.arc(n,r,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ct.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new j(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new j(g.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=g.read(e),r=g.read(e),i=g.read(e),a=t(this);a.setHandleOut(n.subtract(a._point)),this._add([new j(i,r.subtract(i))])},quadraticCurveTo:function(){var e=arguments,n=g.read(e),r=g.read(e),i=t(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var e=arguments,n=g.read(e),r=g.read(e),i=l.pick(l.read(e),.5),a=1-i,o=t(this)._point,s=n.subtract(o.multiply(a*a)).subtract(r.multiply(i*i)).divide(2*i*a);if(s.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(s,r)},arcTo:function(){var e,n,r,i,a=arguments,o=Math.abs,s=Math.sqrt,u=t(this),c=u._point,h=g.read(a),f=l.peek(a);if("boolean"===typeof(b=l.pick(f,!0)))var d=(w=c.add(h).divide(2)).add(w.subtract(c).rotate(b?-90:90));else if(l.remain(a)<=2)d=h,h=g.read(a);else if(!c.equals(h)){var p=_.read(a),m=v.isZero;if(m(p.width)||m(p.height))return this.lineTo(h);var y=l.read(a),b=!!l.read(a),x=!!l.read(a),w=c.add(h).divide(2),T=(Y=c.subtract(w).rotate(-y)).x,E=Y.y,C=o(p.width),O=o(p.height),M=C*C,A=O*O,P=T*T,L=E*E,R=s(P/M+L/A);if(R>1&&(M=(C*=R)*C,A=(O*=R)*O),o(R=(M*A-M*L-A*P)/(M*L+A*P))<1e-12&&(R=0),R<0)throw new Error("Cannot create an arc with the given arguments");e=new g(C*E/O,-O*T/C).multiply((x===b?-1:1)*s(R)).rotate(y).add(w),n=(r=(i=(new S).translate(e).rotate(y).scale(C,O))._inverseTransform(c)).getDirectedAngle(i._inverseTransform(h)),!b&&n>0?n-=360:b&&n<0&&(n+=360)}if(d){var I=new k(c.add(d).divide(2),d.subtract(c).rotate(90),!0),D=new k(d.add(h).divide(2),h.subtract(d).rotate(90),!0),N=new k(c,h),B=N.getSide(d);if(!(e=I.intersect(D,!0))){if(!B)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(r=c.subtract(e)).getDirectedAngle(h.subtract(e));var z=N.getSide(e,!0);0===z?n=B*o(n):B===z&&(n+=n<0?360:-360)}if(n){for(var F=1e-7,V=o(n),U=V>=360?4:Math.ceil((V-F)/90),q=n/U,H=q*Math.PI/360,W=4/3*Math.sin(H)/(1+Math.cos(H)),G=[],X=0;X<=U;X++){var Y=h,Z=null;if(X<U&&(Z=r.rotate(90).multiply(W),i?(Y=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(Y)):Y=e.add(r)),X){var Q=r.rotate(-90).multiply(W);i&&(Q=i._transformPoint(r.add(Q)).subtract(Y)),G.push(new j(Y,Q,Z))}else u.setHandleOut(Z);r=r.rotate(q)}this._add(G)}},lineBy:function(){var e=g.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=g.read(e),r=g.read(e),i=l.read(e),a=t(this)._point;this.curveTo(a.add(n),a.add(r),i)},cubicCurveBy:function(){var e=arguments,n=g.read(e),r=g.read(e),i=g.read(e),a=t(this)._point;this.cubicCurveTo(a.add(n),a.add(r),a.add(i))},quadraticCurveBy:function(){var e=arguments,n=g.read(e),r=g.read(e),i=t(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var e=arguments,n=t(this)._point,r=n.add(g.read(e)),i=l.pick(l.peek(e),!0);"boolean"===typeof i?this.arcTo(r,i):this.arcTo(r,n.add(g.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return z[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,r,i,a){var o=t[0];if(!o)return new x;var s=new Array(6),u=o._transformCoordinates(r,new Array(6)),l=u.slice(0,2),c=l.slice(),h=new Array(2);function f(t){t._transformCoordinates(r,s);for(var e=0;e<2;e++)D._addBounds(u[e],u[e+4],s[e+2],s[e],e,a?a[e]:0,l,c,h);var n=u;u=s,s=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new x(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,r,i){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),u=o&&n._getStrokeMatrix(r,i),l=o&&z._getStrokePadding(s,u),c=z.getBounds(t,e,n,r,i,l);if(!o)return c;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),v=new x(new _(l));function m(t){c=c.include(t)}function g(t){c=c.unite(v.setCenter(t._point.transform(r)))}function y(t,e){"round"===e||t.isSmooth()?g(t):z._addBevelJoin(t,e,h,p,r,u,m)}function b(t,e){"round"===e?g(t):z._addSquareCap(t,e,h,r,u,m)}var w=t.length-(e?0:1);if(w>0){for(var S=1;S<w;S++)y(t[S],f);e?y(t[0],f):(b(t[0],d),b(t[t.length-1],d))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new g(t,0).transform(e),r=new g(0,t).transform(e),i=n.getAngleInRadians(),a=n.getLength(),o=r.getLength(),s=Math.sin(i),u=Math.cos(i),l=Math.tan(i),c=Math.atan2(o*l,a),h=Math.atan2(o,l*a);return[Math.abs(a*Math.cos(c)*u+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,r,i,a,o,s){var u=t.getCurve(),l=u.getPrevious(),c=u.getPoint1().transform(i),h=l.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),"miter"===e){var p=new k(c.add(h),new g(-h.y,h.x),!0).intersect(new k(c.add(f),new g(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=r*n&&o(p)}o(c.add(f))},_addSquareCap:function(t,e,n,r,i,a,o){var s=t._point.transform(r),u=t.getLocation(),l=u.getNormal().multiply(0===u.getTime()?n:-n).transform(i);"square"===e&&(o&&(a(s.subtract(l)),a(s.add(l))),s=s.add(l.rotate(-90))),a(s.add(l)),a(s.subtract(l))},getHandleBounds:function(t,e,n,r,i){var a,o,s=n.getStyle();if(i.stroke&&s.hasStroke()){var u=n._getStrokeMatrix(r,i),l=s.getStrokeWidth()/2,c=l;"miter"===s.getStrokeJoin()&&(c=l*s.getMiterLimit()),"square"===s.getStrokeCap()&&(c=Math.max(c,l*Math.SQRT2)),a=z._getStrokePadding(l,u),o=z._getStrokePadding(c,u)}for(var h=new Array(6),f=1/0,d=-f,p=f,v=d,m=0,g=t.length;m<g;m++){t[m]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var _=y?a:o,b=_?_[0]:0,w=_?_[1]:0,S=h[y],k=h[y+1],T=S-b,E=S+b,C=k-w,O=k+w;T<f&&(f=T),E>d&&(d=E),C<p&&(p=C),O>v&&(v=O)}}return new x(f,p,d-f,v-p)}}});z.inject({statics:new function(){var t=.5522847498307936,e=[new j([-1,0],[0,t],[0,-t]),new j([0,-1],[-t,0],[t,0]),new j([1,0],[0,-t],[0,t]),new j([0,1],[t,0],[-t,0])];function n(t,e,n){var r=l.getNamed(n),i=new z(r&&0==r.insert&&E.NO_INSERT);return i._add(t),i._closed=e,i.set(r,{insert:!0})}function r(t,r,i){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new j(s._point.multiply(r).add(t),s._handleIn.multiply(r),s._handleOut.multiply(r))}return n(a,!0,i)}return{Line:function(){var t=arguments;return n([new j(g.readNamed(t,"from")),new j(g.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=g.readNamed(t,"center"),n=l.readNamed(t,"radius");return r(e,new _(n),t)},Rectangle:function(){var e,r=arguments,i=x.readNamed(r,"rectangle"),a=_.readNamed(r,"radius",0,{readNull:!0}),o=i.getBottomLeft(!0),s=i.getTopLeft(!0),u=i.getTopRight(!0),l=i.getBottomRight(!0);if(!a||a.isZero())e=[new j(o),new j(s),new j(u),new j(l)];else{var c=(a=_.min(a,i.getSize(!0).divide(2))).width,h=a.height,f=c*t,d=h*t;e=[new j(o.add(c,0),null,[-f,0]),new j(o.subtract(0,h),[0,d]),new j(s.add(0,h),null,[0,-d]),new j(s.add(c,0),[-f,0],null),new j(u.subtract(c,0),null,[f,0]),new j(u.add(0,h),[0,-d],null),new j(l.subtract(0,h),null,[0,d]),new j(l.subtract(c,0),[f,0])]}return n(e,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=M._readEllipse(t);return r(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=g.readNamed(t,"from"),n=g.readNamed(t,"through"),r=g.readNamed(t,"to"),i=l.getNamed(t),a=new z(i&&0==i.insert&&E.NO_INSERT);return a.moveTo(e),a.arcTo(n,r),a.set(i)},RegularPolygon:function(){for(var t=arguments,e=g.readNamed(t,"center"),r=l.readNamed(t,"sides"),i=l.readNamed(t,"radius"),a=360/r,o=r%3===0,s=new g(0,o?-i:i),u=o?-1:.5,c=new Array(r),h=0;h<r;h++)c[h]=new j(e.add(s.rotate((h+u)*a)));return n(c,!0,t)},Star:function(){for(var t=arguments,e=g.readNamed(t,"center"),r=2*l.readNamed(t,"points"),i=l.readNamed(t,"radius1"),a=l.readNamed(t,"radius2"),o=360/r,s=new g(0,-1),u=new Array(r),c=0;c<r;c++)u[c]=new j(e.add(s.rotate(o*c).multiply(c%2?a:i)));return n(u,!0,t)}}}});var F=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"===typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var r=n,i=r[0];i&&"number"===typeof i[0]&&(r=[r]);for(var a=n.length-1;a>=0;a--){var o=r[a];r!==n||o instanceof z||(r=l.slice(r)),Array.isArray(o)?r[a]=new z({segments:o,insert:!1}):o instanceof F&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var n=this._children,r=n.length-1;r>=0;r--){var i;(i=n[r].reduce(e)).isEmpty()&&i.remove()}return n.length?t.base.call(this):((i=new z(E.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,r=t.length;n<r;n++)l.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,r=[],i=0,a=n.length;i<a;i++){var o=n[i],s=o._matrix;r.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return r.join("")},_hitTestChildren:function t(e,n,r){return t.base.call(this,e,n.class===z||"path"===n.type?n:l.set({},n,{fill:!1}),r)},_draw:function(t,e,n,r){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=i.length;a<o;a++)i[a].draw(t,e,r);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var r=this._children,i=0,a=r.length;i<a;i++){var o=r[i],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return l.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new z(E.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),r=g.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},l.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,r=this._children,i=0,a=r.length;i<a;i++)n=r[i][t](e)||n;return n}}),{}));B.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function i(t){return t._children||[t]}function a(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var r=i(n),a=0,o=r.length;a<o;a++){(t=r[a])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function s(t,e,n,r,i){var a=new F(E.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),i&&0==i.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function u(t){return t.hasOverlap()||t.isCrossing()}function c(t,e,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return h(t,e,n);var c=a(t,!0),f=e&&t!==e&&a(e,!0),p=r[n];p[n]=!0,f&&(p.subtract||p.exclude)^f.isClockwise()^c.isClockwise()&&f.reverse();var v,y=g(N.expand(c.getIntersections(f,u))),x=i(c),w=f&&i(f),S=[],k=[];function T(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];l.push(S,r._segments),l.push(k,r.getCurves()),r._overlapsOnly=!0}}function E(t){for(var e=[],n=0,r=t&&t.length;n<r;n++)e.push(k[t[n]]);return e}if(y.length){T(x),w&&T(w);for(var C=new Array(k.length),O=0,M=k.length;O<M;O++)C[O]=k[O].getValues();var A=d.findCurveBoundsCollisions(C,C,0,!0),P={};for(O=0;O<k.length;O++){var L=k[O],R=L._path._id;(P[R]=P[R]||{})[L.getIndex()]={hor:E(A[O].hor),ver:E(A[O].ver)}}for(O=0,M=y.length;O<M;O++)_(y[O]._segment,c,f,P,p);for(O=0,M=S.length;O<M;O++){var j=S[O],I=j._intersection;j._winding||_(j,c,f,P,p),I&&I._overlap||(j._path._overlapsOnly=!1)}v=b(S,p)}else v=m(w?x.concat(w):x.slice(),(function(t){return!!p[t]}));return s(v,!0,t,e,o)}function h(t,e,n){var r=a(t),i=a(e),o=r.getIntersections(i,u),l="subtract"===n,c="divide"===n,h={},f=[];function d(t){if(!h[t._id]&&(c||i.contains(t.getPointAt(t.getLength()/2))^l))return f.unshift(t),h[t._id]=!0}for(var p=o.length-1;p>=0;p--){var v=o[p].split();v&&(d(v)&&v.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return d(r),s(f,!1,t,e)}function f(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function p(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function m(t,e,r){var i=t&&t.length;if(i){var a=l.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),s=o[0],u=d.findItemBoundsCollisions(o,null,v.GEOMETRIC_EPSILON);null==r&&(r=s.isClockwise());for(var c=0;c<i;c++){var h=o[c],f=a[h._id],p=0,m=u[c];if(m)for(var g=null,y=m.length-1;y>=0;y--)if(m[y]<c){g=g||h.getInteriorPoint();var _=o[m[y]];if(_.contains(g)){var b=a[_._id];p=b.winding,f.winding+=p,f.container=b.exclude?b.container:_;break}}if(e(f.winding)===e(p))f.exclude=!0,t[f.index]=null;else{var x=f.container;h.setClockwise(x?!x.isClockwise():r)}}}return t}function g(t,e,n){var r,i,a,o=e&&[],s=1e-8,u=!1,l=n||[],c=n&&{};function h(t){return t._path._id+"."+t._segment1._index}for(var d=(n&&n.length)-1;d>=0;d--){(v=n[d])._path&&(c[h(v)]=!0)}for(d=t.length-1;d>=0;d--){var v,m,g=t[d],y=g._time,_=y,b=e&&!e(g);if((v=g._curve)&&(v!==i?(u=!v.hasHandles()||c&&c[h(v)],r=[],a=null,i=v):a>=s&&(y/=a)),b)r&&r.push(g);else{if(e&&o.unshift(g),a=_,y<s)m=v._segment1;else if(y>.99999999)m=v._segment2;else{var x=v.divideAtTime(y,!0);u&&l.push(v,x),m=x._segment1;for(var w=r.length-1;w>=0;w--){var S=r[w];S._time=(S._time-y)/(1-y)}}g._setSegment(m);var k=m._intersection,T=g._intersection;if(k){f(k,T);for(var E=k;E;)f(E._intersection,k),E=E._next}else m._intersection=T}}return n||p(l),o||t}function y(r,i,a,o,s){var u,l,c=Array.isArray(i)?i:i[a?"hor":"ver"],h=a?1:0,f=1^h,d=[r.x,r.y],p=d[h],v=d[f],m=1e-6,g=p-1e-9,_=p+1e-9,b=0,x=0,w=0,S=0,k=!1,T=!1,E=1,C=[];function O(n){var l=n[f+0],c=n[f+6];if(!(v<t(l,c)||v>e(l,c))){var d=n[h+0],b=n[h+2],x=n[h+4],T=n[h+6];if(l!==c){var O=v===l?0:v===c||g>e(d,b,x,T)||_<t(d,b,x,T)?1:D.solveCubic(n,f,v,C,0,1)>0?C[0]:1,M=0===O?d:1===O?T:D.getPoint(n,O)[a?"y":"x"],A=l>c?1:-1,P=u[f]>u[f+6]?1:-1,L=u[h+6];return v!==l?(M<g?w+=A:M>_?S+=A:k=!0,M>p-m&&M<p+m&&(E/=2)):(A!==P?d<g?w+=A:d>_&&(S+=A):d!=L&&(L<_&&M>_?(S+=A,k=!0):L>g&&M<g&&(w+=A,k=!0)),E/=4),u=n,!s&&M>g&&M<_&&0===D.getTangent(n,O)[a?"x":"y"]&&y(r,i,!a,o,!0)}(d<_&&T>g||T<_&&d>g)&&(k=!0)}}function M(n){var r=n[f+0],i=n[f+2],o=n[f+4],s=n[f+6];if(v<=e(r,i,o,s)&&v>=t(r,i,o,s))for(var u,l=n[h+0],c=n[h+2],d=n[h+4],p=n[h+6],m=g>e(l,c,d,p)||_<t(l,c,d,p)?[n]:D.getMonoCurves(n,a),y=0,b=m.length;y<b;y++)if(u=O(m[y]))return u}for(var A=0,P=c.length;A<P;A++){var L,R=c[A],j=R._path,I=R.getValues();if((!A||c[A-1]._path!==j)&&(u=null,j._closed||(l=D.getValues(j.getLastCurve().getSegment2(),R.getSegment1(),null,!o))[f]!==l[f+6]&&(u=l),!u)){u=I;for(var N=j.getLastCurve();N&&N!==R;){var B=N.getValues();if(B[f]!==B[f+6]){u=B;break}N=N.getPrevious()}}if(L=M(I))return L;if(A+1===P||c[A+1]._path!==j){if(l&&(L=M(l)))return L;!k||w||S||(w=S=j.isClockwise(o)^a?1:-1),b+=w,x+=S,w=S=0,k&&(T=!0,k=!1),l=null}}return b=n(b),x=n(x),{winding:e(b,x),windingL:b,windingR:x,quality:E,onPath:T}}function _(t,e,r,i,a){var o=[],s=t,u=0;do{if(_=t.getCurve()){var l=_.getLength();o.push({segment:t,curve:_,length:l}),u+=l}t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){l=u*c[f];for(var d=0,p=o.length;d<p;d++){var m=o[d],g=m.length;if(l<=g){var _,b=(_=m.curve)._path,x=b._parent,w=x instanceof F?x:b,S=v.clamp(_.getTimeAt(l),.001,.999),k=_.getPointAtTime(S),T=n(_.getTangentAtTime(S).y)<Math.SQRT1_2,E=null;if(a.subtract&&r){var C=(w===e?r:e)._getWinding(k,T,!0);if(w===e&&C.winding||w===r&&!C.winding){if(C.quality<1)continue;E={winding:0,quality:1}}}(E=E||y(k,i[b._id][_.getIndex()],T,!0)).quality>h.quality&&(h=E);break}l-=g}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function b(t,e){var n,r=[];function i(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,r=n.length;e<r;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,r=e.length;n<r;n++)e[n]._visited=!0}function s(t,e){var r=t._intersection,o=r,s=[];function u(r,o){for(;r&&r!==o;){var u=r._segment,l=u&&u._path;if(l){var c=u.getNext()||l.getFirstSegment(),h=c._intersection;u!==t&&(a(u)||a(c)||c&&i(u)&&(i(c)||h&&i(h._segment)))&&s.push(u),e&&n.push(u)}r=r._next}}if(e&&(n=[t]),r){for(u(r);r&&r._previous;)r=r._previous;u(r,o)}return s}t.sort((function(t,e){var n=t._intersection,r=e._intersection,i=!(!n||!n._overlap),a=!(!r||!r._overlap),o=t._path,s=e._path;return i^a?i?1:-1:!n^!r?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var u=0,l=t.length;u<l;u++){var c,h,f,d=t[u],p=i(d),v=null,m=!1,g=!0,y=[];if(p&&d._path._overlapsOnly){var _=d._path,b=d._intersection._segment._path;_.compare(b)&&(_.getArea()&&r.push(_.clone(!1)),o(_),o(b),p=!1)}for(;p;){var x=!v,w=s(d,x),S=w.shift(),k=!(m=!x&&(a(d)||a(S)))&&S;if(x&&(v=new z(E.NO_INSERT),c=null),m){(d.isFirst()||d.isLast())&&(g=d._path._closed),d._visited=!0;break}if(k&&c&&(y.push(c),c=null),c||(k&&w.push(d),c={start:v._segments.length,crossings:w,visited:h=[],handleIn:f}),k&&(d=S),!i(d)){v.removeSegments(c.start);for(var T=0,C=h.length;T<C;T++)h[T]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())&&d._path||(d=null,(c=y.pop())&&(h=c.visited,f=c.handleIn))}while(c&&!i(d));if(!d)break}var O=d.getNext();v.add(new j(d._point,f,O&&d._handleOut)),d._visited=!0,h.push(d),d=O||d._path.getFirstSegment(),f=O&&O._handleIn}m&&(g&&(v.getFirstSegment().setHandleIn(f),v.setClosed(g)),0!==v.getArea()&&r.push(v))}return r}return{_getWinding:function(t,e,n){return y(t,this.getCurves(),e,n)},unite:function(t,e){return c(this,t,"unite",e)},intersect:function(t,e){return c(this,t,"intersect",e)},subtract:function(t,e){return c(this,t,"subtract",e)},exclude:function(t,e){return c(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?h(this,t,"divide"):s([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var r=!1,i=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(r=!0)||t.isCrossing()&&(i=!0)})),o=r&&i&&[];if(a=N.expand(a),r)for(var s=g(a,(function(t){return t.hasOverlap()}),o),u=s.length-1;u>=0;u--){var c=s[u],h=c._path,f=c._segment,d=f.getPrevious(),v=f.getNext();n(d,h)&&n(v,h)&&(f.remove(),d._handleOut._set(0,0),v._handleIn._set(0,0),d===f||d.getCurve().hasLength()||(v._handleIn.set(d._handleIn),d.remove()))}i&&(g(a,r&&function(t){var e=t.getCurve(),n=t.getSegment(),r=t._intersection,i=r._curve,a=r._segment;if(e&&i&&e._path&&i._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&p(o),e=b(l.each(e,(function(t){l.push(this,t._segments)}),[])));var m,y=e.length;return y>1&&t?(e!==t&&this.setChildren(e),m=this):1!==y||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),m=this),m||((m=new F(E.NO_INSERT)).addChildren(e),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(m(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==o&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,a=[],o=[],s=0,u=r.length;s<u;s++){var l=r[s].getValues(),c=l[1],h=l[3],f=l[5],d=l[7];if(i>=t(c,h,f,d)&&i<=e(c,h,f,d))for(var p=D.getMonoCurves(l),v=0,m=p.length;v<m;v++){var g=p[v],y=g[1],_=g[7];if(y!==_&&(i>=y&&i<=_||i>=_&&i<=y)){var b=i===y?g[0]:i===_?g[6]:1===D.solveCubic(g,1,i,o,0,1)?D.getPoint(g,o[0]).x:(g[0]+g[6])/2;a.push(b)}}}a.length>1&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var V=l.extend({_class:"PathFlattener",initialize:function(t,e,n,r,i){var a,o=[],s=[],u=0,l=1/(n||32),c=t._segments,h=c[0];function f(t,e){var n=D.getValues(t,e,i);o.push(n),d(n,t._index,0,1)}function d(t,n,i,a){if(!(a-i>l)||r&&D.isStraight(t)||D.isFlatEnough(t,e||.25)){var o=t[6]-t[0],c=t[7]-t[1],h=Math.sqrt(o*o+c*c);h>0&&(u+=h,s.push({offset:u,curve:t,index:n,time:a}))}else{var f=D.subdivide(t,.5),p=(i+a)/2;d(f[0],n,i,p),d(f[1],n,p,a)}}for(var p=1,v=c.length;p<v;p++)f(h,a=c[p]),h=a;t._closed&&f(a||h,c[0]),this.curves=o,this.parts=s,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,r=n.length,i=this.index;e=i,i&&!(n[--i].offset<t););for(;e<r;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-u)/(a.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(t,e,n){for(var r=this._get(e),i=this._get(n),a=r.index,o=i.index;a<=o;a++){var s=D.getPart(this.curves[a],a===r.index?r.time:0,a===i.index?i.time:1);a===r.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},l.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return D[t](this.curves[n.index],n.time)}}),{})),U=l.extend({initialize:function(t){for(var e,n=this.points=[],r=t._segments,i=t._closed,a=0,o=r.length;a<o;a++){var s=r[a].point;e&&e.equals(s)||n.push(e=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(t){var e=this.points,n=e.length,r=null;return n>0&&(r=[new j(e[0])],n>1&&(this.fitCubic(r,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,n,r,i,a){var o=this.points;if(r-n!==1){for(var s,u=this.chordLengthParameterize(n,r),l=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,r,u,i,a),d=this.findMaxError(n,r,f,u);if(d.error<e&&c)return void this.addCurve(t,f);if(s=d.index,d.error>=l)break;c=this.reparameterize(n,r,u,f),l=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,i,p),this.fitCubic(t,e,s,r,p.negate(),a)}else{var v=o[n],m=o[r],g=v.getDistance(m)/3;this.addCurve(t,[v,v.add(i.normalize(g)),m.add(a.normalize(g)),m])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new j(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,r,i){for(var a=1e-12,o=Math.abs,s=this.points,u=s[t],l=s[e],c=[[0,0],[0,0]],h=[0,0],f=0,d=e-t+1;f<d;f++){var p=n[f],v=1-p,m=3*p*v,g=v*v*v,y=m*v,_=m*p,b=p*p*p,x=r.normalize(y),w=i.normalize(_),S=s[t+f].subtract(u.multiply(g+y)).subtract(l.multiply(_+b));c[0][0]+=x.dot(x),c[0][1]+=x.dot(w),c[1][0]=c[0][1],c[1][1]+=w.dot(w),h[0]+=x.dot(S),h[1]+=w.dot(S)}var k,T,E=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(o(E)>a){var C=c[0][0]*h[1]-c[1][0]*h[0];k=(h[0]*c[1][1]-h[1]*c[0][1])/E,T=C/E}else{var O=c[0][0]+c[0][1],M=c[1][0]+c[1][1];k=T=o(O)>a?h[0]/O:o(M)>a?h[1]/M:0}var A,P,L=l.getDistance(u),R=a*L;if(k<R||T<R)k=T=L/3;else{var j=l.subtract(u);A=r.normalize(k),P=i.normalize(T),A.dot(j)-P.dot(j)>L*L&&(k=T=L/3,A=P=null)}return[u,u.add(A||r.normalize(k)),l.add(P||i.normalize(T)),l]},reparameterize:function(t,e,n,r){for(var i=t;i<=e;i++)n[i-t]=this.findRoot(r,this.points[i],n[i-t]);i=1;for(var a=n.length;i<a;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(t,e,n){for(var r=[],i=[],a=0;a<=2;a++)r[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)i[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),l=o.subtract(e),c=s.dot(s)+l.dot(u);return v.isMachineZero(c)?n:n-l.dot(s)/c},evaluate:function(t,e,n){for(var r=e.slice(),i=1;i<=t;i++)for(var a=0;a<=t-i;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(t,e){for(var n=[0],r=t+1;r<=e;r++)n[r-t]=n[r-t-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=e-t;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(t,e,n,r){for(var i=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,r[o-t]).subtract(this.points[o]),u=s.x*s.x+s.y*s.y;u>=a&&(a=u,i=o)}return{error:a,index:i}}}),q=E.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&l.isPlainObject(t)&&t.x===o&&t.y===o;this._initialize(e&&t,!e&&g.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),H=q.extend({_class:"PointText",initialize:function(){q.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=g.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var r=this._lines,i=this._style,a=i.hasFill(),o=i.hasStroke(),s=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var l=0,c=r.length;l<c;l++){t.shadowColor=u;var h=r[l];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,r=this._lines,i=r.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==a&&(u-=s/("center"===a?2:1));var l=new x(u,i?-.75*o:0,s,i*o);return t?t._transformBounds(l,l):l}}),W=l.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]};function i(e){var n,i=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(i){var o=i[4]?4:3;n=new Array(o);for(var u=0;u<o;u++){var l=i[u+1];n[u]=parseInt(1==l.length?l+l:l,16)/255}}else if(i=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=i[1],n=i[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(u=0,Math.min(n.length,4));u<h;u++){var f=n[u];l=parseFloat(f);if(c)if(0===u){var d=f.match(/([a-z]*)$/)[1];l*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else u<3&&(l/=100);else u<3&&(l/=/%$/.test(f)?100:255);n[u]=l}}else{var p=r[e];if(!p)if(s){t||((t=ot.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var v=t.getImageData(0,0,1,1).data;p=r[e]=[v[0]/255,v[1]/255,v[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var r=Math.max(t,e,n),i=r-Math.min(t,e,n);return[0===i?0:60*(r==t?(e-n)/i+(e<n?6:0):r==e?(n-t)/i+2:(t-e)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(t,e,n){var r,i=(t=(t/60%6+6)%6)-(r=Math.floor(t)),o=[n,n*(1-e),n*(1-e*i),n*(1-e*(1-i))];return[o[(r=a[r])[0]],o[r[1]],o[r[2]]]},"rgb-hsl":function(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),a=r-i,o=0===a,s=(r+i)/2;return[o?0:60*(r==t?(e-n)/a+(e<n?6:0):r==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(r+i):a/(2-r-i),s]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var r=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=n<.5?n*(1+e):n+e-n*e,a=2*n-i,o=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return l.each(e,(function(t,r){n[r]=[],l.each(t,(function(t,i){var a=l.capitalize(t),o=/^(hue|saturation)$/.test(t),s=n[r][i]="gradient"===r?"gradient"===t?function(t){var e=this._components[0];return e!==(t=G.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return g.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+a]=function(t){this._type===r||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=e[r],this._type=r),this._components[i]=s.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(r){var a,o,s,u,c=arguments,h=this.__read,f=0;Array.isArray(r)&&(r=(c=r)[0]);var d=null!=r&&typeof r;if("string"===d&&r in e&&(a=r,r=c[1],Array.isArray(r)?(o=r,s=c[2]):(h&&(f=1),c=l.slice(c,1),d=typeof r)),!o){if(u="number"===d?c:"object"===d&&null!=r.length?r:null){a||(a=u.length>=3?"rgb":"gray");var p=e[a].length;s=u[p],h&&(f+=u===arguments?p+(null!=s?1:0):1),u.length>p&&(u=l.slice(u,0,p))}else if("string"===d){var v=i(r);a=v[0],4===(o=v[1]).length&&(s=o[3],o.length--)}else if("object"===d)if(r.constructor===t){if(a=r._type,o=r._components.slice(),s=r._alpha,"gradient"===a)for(var m=1,g=o.length;m<g;m++){var y=o[m];y&&(o[m]=y.clone())}}else if(r.constructor===G)a="gradient",u=c;else{var _=e[a="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb"],b=n[a];this._components=o=[];for(m=0,g=_.length;m<g;m++){null==(x=r[_[m]])&&!m&&"gradient"===a&&"stops"in r&&(x={stops:r.stops,radial:r.radial}),null!=(x=b[m].call(this,x))&&(o[m]=x)}s=r.alpha}h&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(m=0,g=(b=n[this._type]).length;m<g;m++){var x;null!=(x=b[m].call(this,u&&u[m]))&&(o[m]=x)}}return this._components=o,this._properties=e[this._type],this._alpha=s,h&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return l.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=l.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&l.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,r=p.instance,i=0,a=t.length;i<a;i++){var o=this._components[i];null!=o&&e.push(t[i]+": "+(n?o:r.number(o)))}return null!=this._alpha&&e.push("alpha: "+r.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function r(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[r(e[0]),r(e[1]),r(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],a=i._stops,o=r[1],s=r[2],u=r[3],l=e&&e.inverted();if(l&&(o=l._transformPoint(o),s=l._transformPoint(s),u&&(u=l._transformPoint(u))),i._radial){var c=s.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>c&&(u=o.add(h.normalize(c-.1)))}var f=u||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var v=a[d],m=v._offset;n.addColorStop(null==m?d/(p-1):m,v._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,r=e.length;n<r;n++){var i=e[n];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new W(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return l.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=W.read(arguments);for(var n=this._type,r=this._components,i=e._convert(n),a=0,o=r.length;a<o;a++)i[a]=t(r[a],i[a]);return new W(n,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),G=l.extend({_class:"Gradient",initialize:function(t,e){this._id=m.get(),t&&l.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"===typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return l.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=o))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new G(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,r=e.length;n<r;n++)e[n]._owner=o;for(n=0,r=(e=this._stops=X.readList(t,0,{clone:!0})).length;n<r;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,r=e.length;if(r===n.length){for(var i=0;i<r;i++)if(!e[i].equals(n[i]))return!1;return!0}}return!1}}),X=l.extend({_class:"GradientStop",initialize:function(t,e){var n=t,r=e;"object"===typeof t&&e===o&&(Array.isArray(t)&&"number"!==typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new X(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,r=this._offset;return l.serialize(null==r?[n]:[n,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){W._setOwner(this._color,null),this._color=W._setOwner(W.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=l.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},e=l.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=l.set({},e,{fillColor:new W}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:"Style",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||ct.project,this._defaults=!i||i instanceof C?e:i instanceof q?n:t,r&&this.set(r)}};return l.each(e,(function(t,e){var n=/Color$/.test(e),s="shadowOffset"===e,u=l.capitalize(e),c=r[e],h="set"+u,f="get"+u;a[h]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof F);if(a)for(var o=0,s=i.length;o<s;o++)i[o]._style[h](t);if(("selectedColor"===e||!a)&&e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&(W._setOwner(u,null),u._canvasStyle=null),t&&t.constructor===W&&(t=W._setOwner(t,r,a&&h))),this._values[e]=t,r&&r._changed(c||129))}},a[f]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof F);if(a&&!t)for(var u=0,c=i.length;u<c;u++){var d=i[u]._style[f]();if(u){if(!l.equals(p,d))return o}else p=d}else if(e in this._defaults){var p;if((p=this._values[e])===o)(p=this._defaults[e])&&p.clone&&(p=p.clone());else{var v=n?W:s?g:null;!v||p&&p.constructor===v||(this._values[e]=p=v.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=W._setOwner(p,r,a&&h)),p},i[f]=function(t){return this._style[f](t)},i[h]=function(t){this._style[h](t)}})),l.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,r="set"+e;a[n]=i[n]="#get"+t,a[r]=i[r]="#set"+t})),E.inject(i),a},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&e&&i.clone?i.clone():i}},equals:function(t){function e(t,e,n){var r=t._values,i=e._values,a=e._defaults;for(var s in r){var u=r[s],c=i[s];if((!n||!(s in i))&&!l.equals(u,c===o?a[s]:c))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),Z=new function(){function t(t,e,n,r){for(var i=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=i[o],u=s?s+a:e;if(u in t){if(!n)return t[u];t[u]=r;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,r=t.ownerDocument,i=r.body,a=r.documentElement;try{n=t.getBoundingClientRect()}catch(l){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||i.clientLeft||0),s=n.top-(a.clientTop||i.clientTop||0);if(!e){var u=r.defaultView;o+=u.pageXOffset||a.scrollLeft||i.scrollLeft,s+=u.pageYOffset||a.scrollTop||i.scrollTop}return new x(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,r=e.documentElement;return new x(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(t,e){return Z.getBounds(t,e).getPoint()},getSize:function(t){return Z.getBounds(t,!0).getSize()},isInvisible:function(t){return Z.getSize(t).equals(new _(0,0))},isInView:function(t){return!Z.isInvisible(t)&&Z.getViewportBounds(t).intersects(Z.getBounds(t,!0))},isInserted:function(t){return u.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,r){if("object"===typeof n)for(var i in n)t(e,i,!0,n[i]);else t(e,n,!0,r)}}},Q={add:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++){var s=i[a],l=t===u&&("touchstart"===s||"touchmove"===s)&&{passive:!1};t.addEventListener(s,r,l)}},remove:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++)t.removeEventListener(i[a],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new g(e.pageX||e.clientX+u.documentElement.scrollLeft,e.pageY||e.clientY+u.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Q.getPoint(t).subtract(Z.getOffset(e||Q.getTarget(t)))}};Q.requestAnimationFrame=new function(){var t,e=Z.getPrefixed(s,"requestAnimationFrame"),n=!1,r=[];function i(){var t=r;r=[];for(var a=0,o=t.length;a<o;a++)t[a]();(n=e&&r.length)&&e(i)}return function(a){r.push(a),e?n||(e(i),n=!0):t||(t=setInterval(i,1e3/60))}};var J=l.extend(c,{_class:"View",initialize:function t(e,n){function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function i(){var t=Z.getSize(n);return t.isNaN()||t.isZero()?new _(r("width"),r("height")):t}var a;if(s&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),Q.add(n,this._viewEvents);var o="none";if(Z.setPrefixed(n.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:"rgba(0,0,0,0)"}),h.hasAttribute(n,"resize")){var l=this;Q.add(s,this._windowEvents={resize:function(){l.setViewSize(i())}})}if(a=i(),h.hasAttribute(n,"stats")&&"undefined"!==typeof Stats){this._stats=new Stats;var c=this._stats.domElement,f=c.style,d=Z.getOffset(n);f.position="absolute",f.left=d.x+"px",f.top=d.y+"px",u.body.appendChild(c)}}else a=new _(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ct.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Q.remove(this._element,this._viewEvents),Q.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:l.each(E._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Q.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;Z.getPrefixed(u,"hidden")&&"true"!==h.getAttribute(e,"keepalive")||!Z.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ct=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new l({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new l(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=o},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new b(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=_.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Z.isInView(this._element)},isInserted:function(){return Z.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,i=u.createElement("div");i.style.fontSize=t,r.appendChild(i),e=parseFloat(Z.getStyles(i).fontSize),r.removeChild(i)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},l.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,r=(e?l:g).read(n),i=g.read(n,0,{readNull:!0});return this.transform((new S)[t](r,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=g.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new y(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=g.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(t){return this.viewToProject(Q.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return u&&"string"===typeof e&&(e=u.getElementById(e)),new(s?K:J)(t,e)}}},new function(){if(s){var t,e,n,r,i,a=!1,o=!1,l=s.navigator;l.pointerEnabled||l.msPointerEnabled?(n="pointerdown MSPointerDown",r="pointermove MSPointerMove",i="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",r="touchmove",i="touchend touchcancel","ontouchstart"in s&&l.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",r+=" mousemove",i+=" mouseup"));var c={},h={mouseout:function(t){var e=J._focused,n=Q.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var r=Q.getOffset(t,e._element),i=r.x,a=Math.abs,o=a(i),s=o-(1<<25);r.x=a(s)<o?s*(i<0?-1:1):i,C(e,t,e.viewToProject(r))}},scroll:E};c[n]=function(t){var e=J._focused=T(t);a||(a=!0,e._handleMouseEvent("mousedown",t))},h[r]=function(n){var r=J._focused;if(!o){var i=T(n);i?r!==i&&(r&&C(r,n),t||(t=r),r=J._focused=e=i):e&&e===r&&(t&&!t.isInserted()&&(t=null),r=J._focused=t,t=null,E())}r&&C(r,n)},h[n]=function(){o=!0},h[i]=function(t){var e=J._focused;e&&a&&e._handleMouseEvent("mouseup",t),o=a=!1},Q.add(u,h),Q.add(s,{load:E});var f,d,p,v,m,g,y,_,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,k={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var r=this._itemEvents,i=r.native[t],o="mousemove"===t,s=this._scope.tool,u=this;function l(t){return r.virtual[t]||u.responds(t)||s&&s.responds(t)}o&&a&&l("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=i&&c&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,k=!1,T={};if(T[t.substr(5)]=!0,i&&w!==v&&(v&&O(v,null,"mouseleave",e,n),w&&O(w,null,"mouseenter",e,n),v=w),S^c&&(O(this,null,c?"mouseenter":"mouseleave",e,n),c?this:null,k=!0),!c&&!T.drag||n.equals(d)||(M(this,w,o?t:"mousemove",e,n,d),k=!0),S=c,T.down&&c||T.up&&f){if(M(this,w,t,e,n,f),T.down){if(_=w===g&&Date.now()-y<300,p=g=w,!x&&w){for(var E=w;E&&!E.responds("mousedrag");)E=E._parent;E&&(m=w)}f=n}else T.up&&(x||w!==p||(y=Date.now(),M(this,w,_?"doubleclick":"click",e,n,f),_=!1),p=m=null);S=!1,k=!0}d=n,k&&s&&(b=s._handleMouseEvent(t,e,n,T)||b),!1!==e.cancelable&&(b&&!T.move||T.down&&l("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,r){var i,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ct=a,o.emit(t,i=i||new tt(t,e,n,r)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,r=n.native,i=n.virtual;for(var a in k)r[a]=(r[a]||0)+(k[a][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:E,_resetState:function(){a=o=b=S=!1,t=e=f=d=p=v=m=g=y=_=null}}}}function T(t){var e=Q.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function E(){var t=J._focused;if(!t||!t.isVisible())for(var n=0,r=J._views.length;n<r;n++)if((t=J._views[n]).isVisible()){J._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent("mousemove",e,n)}function O(t,e,n,r,i,a,o){var s,u=!1;function l(t,n){if(t.responds(n)){if(s||(s=new nt(n,r,i,e||t,a?i.subtract(a):null)),t.emit(n,s)&&(b=!0,s.prevented&&(x=!0),s.stopped))return u=!0}else{var o=w[n];if(o)return l(t,o)}}for(;t&&t!==o&&!l(t,n);)t=t._parent;return u}function M(t,e,n,r,i,a){return t._project.removeOn(n),x=b=!1,m&&O(m,null,n,r,i,a)||e&&e!==m&&!e.isDescendant(m)&&O(e,null,"mousedrag"===n?"mousemove":n,r,i,a,m)||O(t,m||e||t,n,r,i,a)}}),K=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof s.HTMLCanvasElement)){var n=_.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+l.slice(arguments,1));e=ot.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(h.getAttribute(e,"hidpi"))){var i=s.devicePixelRatio||1,a=Z.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=i/a}J.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var r=this._pixelRatio;if(t.base.call(this,e*r,n*r),1!==r){var i=this._element,a=this._context;if(!h.hasAttribute(i,"resize")){var o=i.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,r=ct.agent;if(r&&r.firefox)n=t.base.call(this,e);else{var i=this._context,a=i.font;i.font=e+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(t,e){var n=this._context,r=n.font,i=0;n.font=t;for(var a=0,o=e.length;a<o;a++)i=Math.max(i,n.measureText(e[a]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=l.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=$.extend({_class:"KeyEvent",initialize:function(t,e,n,r){this.type=t,this.event=e,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),et=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},r={tab:"\t",space:" ",enter:"\r"},i={},a={},c=new l({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ct&&ct.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===o?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?l.hyphenate(e):e.toLowerCase())}function f(e,n,r,o){var s,u=J._focused;if(i[n]=e,e?a[n]=r:delete a[n],n.length>1&&(s=l.camelize(n))in c){c[s]=e;var h=ct&&ct.agent;if("meta"===s&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],o);t=null}}else e&&t&&(t[n]=r);u&&u._handleKeyEvent(e?"keydown":"keyup",o,n,r)}return Q.add(u,{keydown:function(t){var n=h(t),i=ct&&ct.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?f(!0,n,r[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=h(t),r=t.charCode,i=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==e&&(n=i.toLowerCase()),f(!0,n,i,t),e=null}},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),Q.add(s,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:c,isDown:function(t){return!!i[t]}}},nt=$.extend({_class:"MouseEvent",initialize:function(t,e,n,r,i){this.type=t,this.event=e,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),it=(f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){f.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,r){ct=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var i=r.move||r.drag,a=this.responds(t),o=this.minDistance,s=this.maxDistance,u=!1,l=this;function c(t,e){var a=n,o=i?l._point:l._downPoint||a;if(i){if(l._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var s=a.subtract(o),u=s.getLength();if(u<(t||0))return!1;e&&(a=o.add(s.normalize(Math.min(u,e))))}l._moveCount++}return l._point=a,l._lastPoint=o||a,r.down&&(l._moveCount=-1,l._downPoint=a,l._downCount++),!0}function h(){a&&(u=l.emit(t,new rt(l,t,e))||u)}if(r.down)c(),h();else if(r.up)c(null,s),h();else if(a)for(;c(o,s);)h();return u}}),l.extend(c,{_class:"Tween",statics:{easings:new l({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,r,i,a,o){this.object=e;var s=typeof a,u="function"===s;this.type=u?s:"string"===s?a:"linear",this.easing=u?a:t.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var l=n||r;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(n),this._to=l&&this._getState(r),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,r=function(n){return"function"===typeof n?n(e,t):n},i=0,a=n&&n.length;i<a;i++){var o=n[i],s=r(this._from[o]),u=r(this._to[o]),c=s&&u&&s.__add&&u.__add?u.__subtract(s).__multiply(e).__add(s):(u-s)*e+s;this._setProperty(this._parsedKeys[o],c)}this.responds("update")&&this.emit("update",new l({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},r=0,i=e.length;r<i;r++){var a,o=e[r],s=this._parsedKeys[o],u=this._getProperty(s);if(t){var l=this._resolveValue(u,t[o]);this._setProperty(s,l),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,u)}else a=u&&u.clone?u.clone():u;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"===typeof e){var r=e.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],i)}}}return e},_calculate:function(t,e,n){return ct.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n],a=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[i]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,r=0,i=t.length-(e||0);r<i&&n;r++)n=n[t[r]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}})),at=function(t){var e=new a.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,l.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,r='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(r);t.onError(r,n)},e.send(null)},ot=l.exports.CanvasProvider={canvases:[],getCanvas:function(t,e){if(!s)return null;var n,r=!0;"object"===typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=u.createElement("canvas"),r=!1);var i=n.getContext("2d");if(!i)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?r&&i.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),i.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},st=new function(){var t,e,n,r,i,a,o,s,u,c,h,f=Math.min,d=Math.max,p=Math.abs;function v(t,e,n){return.2989*t+.587*e+.114*n}function m(t,e,n,r){var i=r-v(t,e,n),a=(r=v(u=t+i,c=e+i,h=n+i),f(u,c,h)),o=d(u,c,h);if(a<0){var s=r-a;u=r+(u-r)*r/s,c=r+(c-r)*r/s,h=r+(h-r)*r/s}if(o>255){var l=255-r,p=o-r;u=r+(u-r)*l/p,c=r+(c-r)*l/p,h=r+(h-r)*l/p}}function g(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,r){var i,a=[t,e,n],o=d(t,e,n),s=f(t,e,n);i=0===f(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[i]=(a[i]-a[s])*r/(a[o]-a[s]),a[o]=r):a[i]=a[o]=0,a[s]=0,u=a[0],c=a[1],h=a[2]}var _={multiply:function(){u=i*t/255,c=a*e/255,h=o*n/255},screen:function(){u=i+t-i*t/255,c=a+e-a*e/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*t/255:255-2*(255-i)*(255-t)/255,c=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var r=t*i/255;u=r+i*(255-(255-i)*(255-t)/255-r)/255,c=(r=e*a/255)+a*(255-(255-a)*(255-e)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},"hard-light":function(){u=t<128?2*t*i/255:255-2*(255-t)*(255-i)/255,c=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===i?0:255===t?255:f(255,255*i/(255-t)),c=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){u=255===i?255:0===t?0:d(0,255-255*(255-i)/t),c=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){u=i<t?i:t,c=a<e?a:e,h=o<n?o:n},lighten:function(){u=i>t?i:t,c=a>e?a:e,h=o>n?o:n},difference:function(){(u=i-t)<0&&(u=-u),(c=a-e)<0&&(c=-c),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+t*(255-i-i)/255,c=a+e*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,g(i,a,o)),m(u,c,h,v(i,a,o))},saturation:function(){y(i,a,o,g(t,e,n)),m(u,c,h,v(i,a,o))},luminosity:function(){m(i,a,o,v(t,e,n))},color:function(){m(t,e,n,v(i,a,o))},add:function(){u=f(i+t,255),c=f(a+e,255),h=f(o+n,255)},subtract:function(){u=d(i-t,0),c=d(a-e,0),h=d(o-n,0)},average:function(){u=(i+t)/2,c=(a+e)/2,h=(o+n)/2},negation:function(){u=255-p(255-t-i),c=255-p(255-e-a),h=255-p(255-n-o)}},b=this.nativeModes=l.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),x=ot.getContext(1,1);x&&(l.each(_,(function(t,e){var n="darken"===e,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[e]=r})),ot.release(x)),this.process=function(l,f,d,p,v){var m=f.canvas,g="normal"===l;if(g||b[l])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,g||(d.globalCompositeOperation=l),d.drawImage(m,v.x,v.y),d.restore();else{var y=_[l];if(!y)return;for(var x=d.getImageData(v.x,v.y,m.width,m.height),w=x.data,S=f.getImageData(0,0,m.width,m.height).data,k=0,T=w.length;k<T;k+=4){t=S[k],i=w[k],e=S[k+1],a=w[k+1],n=S[k+2],o=w[k+2],r=S[k+3],s=w[k+3],y();var E=r*p/255,C=1-E;w[k]=E*u+C*i,w[k+1]=E*c+C*a,w[k+2]=E*h+C*o,w[k+3]=r*p+C*s}d.putImageData(x,v.x,v.y)}}},ut=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function i(t,e,n){for(var i in e){var a=e[i],o=r[i];"number"===typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,i,a):t.setAttribute(i,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,r){return i(u.createElementNS(t,e),n,r)},get:function(t,e){var n=r[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i},set:i}},lt=l.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof M||t instanceof q)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=l.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&l.each(r,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function e(e,n,r){var i,a=new l,o=e.getTranslation();n&&(e.isInvertible()?(i=(e=e._shiftless())._inverseTransform(o),o=null):i=new g,a[r?"cx":"x"]=i.x,a[r?"cy":"y"]=i.y);if(!e.isIdentity()){var s=e.decompose();if(s){var u=[],c=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&u.push("translate("+t.point(o)+")"),c&&u.push("rotate("+t.number(c)+")"),v.isZero(h.x-1)&&v.isZero(h.y-1)||u.push("scale("+t.point(h)+")"),f.x&&u.push("skewX("+t.number(f.x)+")"),f.y&&u.push("skewY("+t.number(f.y)+")"),a.transform=u.join(" ")}else a.transform="matrix("+e.getValues().join(",")+")"}return a}function n(n,r){for(var i=e(n._matrix),a=n._children,o=ut.create("g",i,t),s=0,u=a.length;s<u;s++){var l=a[s],h=f(l,r);if(h)if(l.isClipMask()){var d=ut.create("clipPath");d.appendChild(h),c(l,d,"clip"),ut.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(h)}return o}function r(n){var r=n._type,i=n._radius,a=e(n._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var o=n._size,s=o.width,u=o.height;a.x-=s/2,a.y-=u/2,a.width=s,a.height=u,i.isZero()&&(i=null)}return i&&("circle"===r?a.r=i:(a.rx=i.width,a.ry=i.height)),ut.create(r,a,t)}var i,o={Group:n,Layer:n,Raster:function(n,r){var i=e(n._matrix,!0),a=n.getSize(),o=n.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=0==r.embedImages&&o&&o.src||n.toDataURL(),ut.create("image",i,t)},Path:function(n,i){var a=i.matchShapes;if(a){var o=n.toShape(!1);if(o)return r(o)}var s,u=n._segments,l=u.length,c=e(n._matrix);if(a&&l>=2&&!n.hasHandles())if(l>2){s=n._closed?"polygon":"polyline";for(var h=[],f=0;f<l;f++)h.push(t.point(u[f]._point));c.points=h.join(" ")}else{s="line";var d=u[0]._point,p=u[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",c.d=n.getPathData(null,i.precision);return ut.create(s,c,t)},Shape:r,CompoundPath:function(n,r){var i=e(n._matrix),a=n.getPathData(null,r.precision);return a&&(i.d=a),ut.create("path",i,t)},SymbolItem:function(n,r){var i=e(n._matrix,!0),a=n._definition,o=u(a,"symbol"),s=a._item,l=s.getStrokeBounds();return o||((o=ut.create("symbol",{viewBox:t.rectangle(l)})).appendChild(f(s,r)),c(a,o,"symbol")),i.href="#"+o.id,i.x+=l.x,i.y+=l.y,i.width=l.width,i.height=l.height,i.overflow="visible",ut.create("use",i,t)},PointText:function(n){var r=ut.create("text",e(n._matrix,!0),t);return r.textContent=n._content,r}};function s(e,n,r){var i={},a=!r&&e.getParent(),o=[];return null!=e._name&&(i.id=e._name),l.each(lt,(function(n){var r=n.get,s=n.type,h=e[r]();if(n.exportFilter?n.exportFilter(e,h):!a||!l.equals(a[r](),h)){if("color"===s&&null!=h){var f=h.getAlpha();f<1&&(i[n.attribute+"-opacity"]=f)}"style"===s?o.push(n.attribute+": "+h):i[n.attribute]=null==h?"none":"color"===s?h.gradient?function(e){var n=u(e,"color");if(!n){var r,i=e.getGradient(),a=i._radial,o=e.getOrigin(),s=e.getDestination();if(a){r={cx:o.x,cy:o.y,r:o.getDistance(s)};var l=e.getHighlight();l&&(r.fx=l.x,r.fy=l.y)}else r={x1:o.x,y1:o.y,x2:s.x,y2:s.y};r.gradientUnits="userSpaceOnUse",n=ut.create((a?"radial":"linear")+"Gradient",r,t);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p=h[f],v=p._color,m=v.getAlpha(),g=p._offset;r={offset:null==g?f/(d-1):g},v&&(r["stop-color"]=v.toCSS(!0)),m<1&&(r["stop-opacity"]=m),n.appendChild(ut.create("stop",r,t))}c(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===s?h.join(","):"lookup"===s?n.toSVG[h]:h}})),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,e._visible||(i.visibility="hidden"),ut.set(n,i,t)}function u(t,e){return i||(i={ids:{},svgs:{}}),t&&i.svgs[e+"-"+(t._id||t.__id||(t.__id=m.get("svg")))]}function c(t,e,n){i||u();var r=i.ids[n]=(i.ids[n]||0)+1;e.id=n+"-"+r,i.svgs[n+"-"+(t._id||t.__id)]=e}function h(t,e){var n=t,r=null;if(i){for(var o in n="svg"===t.nodeName.toLowerCase()&&t,i.svgs)r||(n||(n=ut.create("svg")).appendChild(t),r=n.insertBefore(ut.create("defs"),n.firstChild)),r.appendChild(i.svgs[o]);i=null}return e.asString?(new a.XMLSerializer).serializeToString(n):n}function f(t,e,n){var r=o[t._class],i=r&&r(t,e);if(i){var a=e.onExport;a&&(i=a(t,i,e)||i);var u=JSON.stringify(t._data);u&&"{}"!==u&&"null"!==u&&i.setAttribute("data-paper-data",u)}return i&&s(t,i,n)}function d(e){return e||(e={}),t=new p(e.precision),e}E.inject({exportSVG:function(t){return h(f(this,t=d(t),!0),t)}}),T.inject({exportSVG:function(n){n=d(n);var r=this._children,i=this.getView(),a=l.pick(n.bounds,"view"),o=n.matrix||"view"===a&&i._matrix,s=o&&S.read([o]),u="view"===a?new x([0,0],i.getViewSize()):"content"===a?E._getBounds(r,s,{stroke:!0}).rect:x.read([a],0,{readNull:!0}),c={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(c.viewBox=t.rectangle(u)));var p=ut.create("svg",c,t),v=p;s&&!s.isIdentity()&&(v=p.appendChild(ut.create("g",e(s),t)));for(var m=0,g=r.length;m<g;m++)v.appendChild(f(r[m],n,!0));return h(p,n)}})},new function(){var t,e={};function n(e,n,r,i,a,o){var s=ut.get(e,n)||o,u=null==s?i?null:r?"":0:r?s:parseFloat(s);return/%\s*$/.test(s)?u/100*(a?1:t[/x|^width/.test(n)?"width":"height"]):u}function r(t,e,r,i,a,o,s){return e=n(t,e||"x",!1,i,a,o),r=n(t,r||"y",!1,i,a,s),!i||null!=e&&null!=r?new g(e,r):null}function i(t,e,r,i,a){return e=n(t,e||"width",!1,i,a),r=n(t,r||"height",!1,i,a),!i||null!=e&&null!=r?new _(e,r):null}function c(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?k(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,r){var i=t.childNodes,a="clippath"===e,o="defs"===e,s=new C,u=s._project,l=u._currentStyle,c=[];if(a||o||(s=w(s,t,r),u._currentStyle=s._style.clone()),r)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)O(h[f],n,!1);for(f=0,d=i.length;f<d;f++){var p,v=i[f];1!==v.nodeType||/^defs$/i.test(v.nodeName)||!(p=O(v,n,!1))||p instanceof L||c.push(p)}return s.addChildren(c),a&&(s=w(s.reduce(),t,r)),u._currentStyle=l,(a||o)&&(s.remove(),s=null),s}function f(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,a=n.length;i<a;i+=2)r.push(new g(parseFloat(n[i]),parseFloat(n[i+1])));var o=new z(r);return"polygon"===e&&o.closePath(),o}function d(t,i){var a,o=(n(t,"href",!0)||"").substring(1),s="radialgradient"===i;if(o)(a=e[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var u=t.childNodes,l=[],c=0,h=u.length;c<h;c++){var f=u[c];1===f.nodeType&&l.push(w(new X,f))}a=new G(l,s)}var d,p,v,m="userSpaceOnUse"!==n(t,"gradientUnits",!0);return s?(p=(d=r(t,"cx","cy",!1,m,"50%","50%")).add(n(t,"r",!1,!1,m,"50%"),0),v=r(t,"fx","fy",!0,m)):(d=r(t,"x1","y1",!1,m,"0%","0%"),p=r(t,"x2","y2",!1,m,"100%","0%")),w(new W(a,d,p,v),t)._scaleToBounds=m,null}var p={"#document":function(t,e,n,r){for(var i=t.childNodes,a=0,o=i.length;a<o;a++){var s=i[a];if(1===s.nodeType)return O(s,n,r)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return B.create(t.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(t){var e=new A(n(t,"href",!0));return e.on("load",(function(){var e=i(t);this.setSize(e);var n=r(t).add(e.divide(2));this._matrix.append((new S).translate(n))})),e},symbol:function(t,e,n,r){return new L(h(t,e,n,r),!0)},defs:h,use:function(t){var i=(n(t,"href",!0)||"").substring(1),a=e[i],o=r(t);return a?a instanceof L?a.place(o):a.clone().translate(o):null},circle:function(t){return new M.Circle(r(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new M.Ellipse({center:r(t,"cx","cy"),radius:i(t,"rx","ry")})},rect:function(t){return new M.Rectangle(new x(r(t),i(t)),i(t,"rx","ry"))},line:function(t){return new z.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){var e=new H(r(t).add(r(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:h};function v(t,e,n,r){if(t.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),a=new S,o=0,s=i.length;o<s;o++){var u=i[o];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0],h=l[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new S(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function m(t,e,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=t[r]&&t[r]();i&&i.setAlpha(parseFloat(e))}var y=l.set(l.each(lt,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](c(n,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var i=e.getBounds();r.transform((new S).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,e){var n=k(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:v,transform:v,"fill-opacity":m,"stroke-opacity":m,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,r,a){var o,s=new x(c(e,"array")),u=i(r,null,null,!0);if(t instanceof C){var l=u?u.divide(s.getSize()):1,h=(new S).scale(l).translate(s.getPoint().negate());o=t}else t instanceof L&&(u&&s.setSize(u),o=t._item);if(o){if("visible"!==b(r,"overflow",a)){var f=new M.Rectangle(s);f.setClipMask(!0),o.addChild(f)}h&&o.transform(h)}}});function b(t,e,n){var r=t.attributes[e],i=r&&r.value;if(!i&&t.style){var a=l.camelize(e);(i=t.style[a])||n.node[a]===n.parent[a]||(i=n.node[a])}return i?"none"===i?null:i:o}function w(t,e,n){var r=e.parentNode,i={node:Z.getStyles(e)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&Z.getStyles(r)||{}};return l.each(y,(function(n,r){var a=b(e,r,i);t=a!==o&&n(t,a,r,e,i)||t})),t}function k(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),r=n&&n[1],i=r&&e[s?r.replace(s.location.href.split("#")[0]+"#",""):r];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function O(n,r,a){var o,s,c,h=n.nodeName.toLowerCase(),f="#document"!==h,d=u.body;a&&f&&(t=ct.getView().getSize(),t=i(n,null,null,!0)||t,o=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=n.parentNode,c=n.nextSibling,o.appendChild(n),d.appendChild(o));var v=ct.settings,m=v.applyMatrix,g=v.insertItems;v.applyMatrix=!1,v.insertItems=!1;var y=p[h],_=y&&y(n,h,r,a)||null;if(v.insertItems=g,v.applyMatrix=m,_){!f||_ instanceof C||(_=w(_,n,a));var b=r.onImport,x=f&&n.getAttribute("data-paper-data");b&&(_=b(n,_,r)||_),r.expandShapes&&_ instanceof M&&(_.remove(),_=_.toPath()),x&&(_._data=JSON.parse(x))}return o&&(d.removeChild(o),s&&(c?s.insertBefore(n,c):s.appendChild(n))),a&&(e={},_&&l.pick(r.applyMatrix,m)&&_.matrix.apply(!0,!0)),_}function P(t,e,n){if(!t)return null;e="function"===typeof e?{onLoad:e}:e||{};var r=ct,i=null;function s(s){try{var u="object"===typeof s?s:(new a.DOMParser).parseFromString(s.trim(),"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+t);ct=r,i=O(u,e,!0),e&&!1===e.insert||n._insertItem(o,i);var c=e.onLoad;c&&c(i,s)}catch(h){l(h)}}function l(t,n){var r=e.onError;if(!r)throw new Error(t);r(t,n)}if("string"!==typeof t||/^[\s\S]*</.test(t)){if("undefined"!==typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){s(c.result)},c.onerror=function(){l(c.error)},c.readAsText(t)}s(t)}else{var h=u.getElementById(t);h?s(h):at({url:t,async:!0,onLoad:s,onError:l})}return i}E.inject({importSVG:function(t,e){return P(t,e,this)}}),T.inject({importSVG:function(t,e){return this.activate(),P(t,e,this)}})};var ct=new(h.inject(l.exports,{Base:l,Numerical:v,Key:et,DomEvent:Q,DomElement:Z,document:u,window:s,Symbol:L,PlacedSymbol:P}));return ct.agent.node&&n(103)(ct),(i="function"===typeof(r=ct)?r.call(e,n,e,t):r)===o||(t.exports=i),ct}).call(this,"object"===typeof self?self:null)},function(t,e,n){var r=n(37),i=n(32);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(28).Symbol;t.exports=r},function(t,e,n){var r=n(111),i=n(275),a=n(43);t.exports=function(t){return a(t)?r(t,!0):i(t)}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},,function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(250),i=n(251),a=n(252),o=n(253),s=n(254);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(54);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(36)(Object,"create");t.exports=r},function(t,e,n){var r=n(268);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(303),i=n(304),a=n(305);t.exports=function(t,e,n){return e===e?a(t,e,n):r(t,i,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(2),a=n(3),o=n(4),s=n(7),u=new WeakMap,l=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return Object(i.a)(n,[{key:"setDecoderPath",value:function(t){return this.decoderPath=t,this}},{key:"setDecoderConfig",value:function(t){return this.decoderConfig=t,this}},{key:"setWorkerLimit",value:function(t){return this.workerLimit=t,this}},{key:"load",value:function(t,e,n,r){var i=this,a=new s.q(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(t){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(t,n).then(e).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(t,e,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,i).then(e)}},{key:"decodeGeometry",value:function(t,e){var n=this;for(var r in e.attributeTypes){var i=e.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(e.attributeTypes[r]=i.name)}var a,o=JSON.stringify(e);if(u.has(t)){var s=u.get(t);if(s.key===o)return s.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,c=t.byteLength,h=this._getWorker(l,c).then((function(n){return a=n,new Promise((function(n,r){a._callbacks[l]={resolve:n,reject:r},a.postMessage({type:"decode",id:l,taskConfig:e,buffer:t},[t])}))})).then((function(t){return n._createGeometry(t.geometry)}));return h.catch((function(){return!0})).then((function(){a&&l&&n._releaseTask(a,l)})),u.set(t,{key:o,promise:h}),h}},{key:"_createGeometry",value:function(t){var e=new s.g;t.index&&e.setIndex(new s.f(t.index.array,1));for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n],i=r.name,a=r.array,o=r.itemSize;e.setAttribute(i,new s.f(a,o))}return e}},{key:"_loadLibrary",value:function(t,e){var n=new s.q(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((function(e,r){n.load(t,e,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var t=this;if(this.decoderPending)return this.decoderPending;var e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];e||(t.decoderConfig.wasmBinary=n[1]);var i=c.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");t.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(t,e){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(t){var e=t.data;switch(e.type){case"decode":r._callbacks[e.id].resolve(e);break;case"error":r._callbacks[e.id].reject(e);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+e.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[t]=e,i._taskLoad+=e,i}))}},{key:"_releaseTask",value:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(t){return t._taskLoad})))}},{key:"dispose",value:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}]),n}(s.I);function c(){var t,e;function n(t,e,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,u=s*i.BYTES_PER_ELEMENT,l=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,i),c=t._malloc(u);e.GetAttributeDataArrayForAllPoints(n,a,l,u,c);var h=new i(t.HEAPF32.buffer,c,s).slice();return t._free(c),{name:r,array:h,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":var a=i.buffer,o=i.taskConfig;e.then((function(t){var e=t.draco,r=new e.Decoder,s=new e.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var u=function(t,e,r,i){var a,o,s=i.attributeIDs,u=i.attributeTypes,l=e.GetEncodedGeometryType(r);if(l===t.TRIANGULAR_MESH)a=new t.Mesh,o=e.DecodeBufferToMesh(r,a);else{if(l!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new t.PointCloud,o=e.DecodeBufferToPointCloud(r,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var h in s){var f=self[u[h]],d=void 0,p=void 0;if(i.useUniqueIDs)p=s[h],d=e.GetAttributeByUniqueId(a,p);else{if(-1===(p=e.GetAttributeId(a,t[s[h]])))continue;d=e.GetAttribute(a,p)}c.attributes.push(n(t,e,a,h,f,d))}l===t.TRIANGULAR_MESH&&(c.index=function(t,e,n){var r=3*n.num_faces(),i=4*r,a=t._malloc(i);e.GetTrianglesUInt32Array(n,i,a);var o=new Uint32Array(t.HEAPF32.buffer,a,r).slice();return t._free(a),{array:o,itemSize:1}}(t,e,a));return t.destroy(a),c}(e,r,s,o),l=u.attributes.map((function(t){return t.array.buffer}));u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},l)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{e.destroy(s),e.destroy(r)}}))}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(9),i=n(6),a=n(5),o=n(0),s=n(2),u=n(3),l=n(4),c=n(7),h=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(t){return new m(t)})),r.register((function(t){return new y(t)})),r.register((function(t){return new _(t)})),r.register((function(t){return new g(t)})),r.register((function(t){return new p(t)})),r.register((function(t){return new b(t)})),r}return Object(s.a)(n,[{key:"load",value:function(t,e,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:c.J.extractUrlBase(t),this.manager.itemStart(t);var o=function(e){r?r(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},s=new c.q(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{a.parse(n,i,(function(n){e(n),a.manager.itemEnd(t)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(t){return this.dracoLoader=t,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(t){return this.ktx2Loader=t,this}},{key:"setMeshoptDecoder",value:function(t){return this.meshoptDecoder=t,this}},{key:"register",value:function(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}},{key:"unregister",value:function(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}},{key:"parse",value:function(t,e,n,r){var i,a={},o={};if("string"===typeof t)i=t;else if(c.J.decodeText(new Uint8Array(t,0,4))===x){try{a[d.KHR_BINARY_GLTF]=new k(t)}catch(g){return void(r&&r(g))}i=a[d.KHR_BINARY_GLTF].content}else i=c.J.decodeText(new Uint8Array(t));var s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new et(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var h=this.pluginCallbacks[l](u);o[h.name]=h,a[h.name]=!0}if(s.extensionsUsed)for(var f=0;f<s.extensionsUsed.length;++f){var p=s.extensionsUsed[f],m=s.extensionsRequired||[];switch(p){case d.KHR_MATERIALS_UNLIT:a[p]=new v;break;case d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[p]=new O;break;case d.KHR_DRACO_MESH_COMPRESSION:a[p]=new T(s,this.dracoLoader);break;case d.KHR_TEXTURE_TRANSFORM:a[p]=new E;break;case d.KHR_MESH_QUANTIZATION:a[p]=new M;break;default:m.indexOf(p)>=0&&void 0===o[p]&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(n,r)}}}]),n}(c.I);function f(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}var d={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},p=function(){function t(e){Object(o.a)(this,t),this.parser=e,this.name=d.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return Object(s.a)(t,[{key:"_markDefs",value:function(){for(var t=this.parser,e=this.parser.json.nodes||[],n=0,r=e.length;n<r;n++){var i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(t){var e=this.parser,n="light:"+t,r=e.cache.get(n);if(r)return r;var i,a=e.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[t],s=new c.k(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new c.m(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new c.cb(s)).distance=u;break;case"spot":(i=new c.sb(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=e.createUniqueName(o.name||"light_"+t),r=Promise.resolve(i),e.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(t){var e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))}}]),t}(),v=function(){function t(){Object(o.a)(this,t),this.name=d.KHR_MATERIALS_UNLIT}return Object(s.a)(t,[{key:"getMaterialType",value:function(){return c.P}},{key:"extendParams",value:function(t,e,n){var r=[];t.color=new c.k(1,1,1),t.opacity=1;var i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(t,"map",i.baseColorTexture))}return Promise.all(r)}}]),t}(),m=function(){function t(e){Object(o.a)(this,t),this.parser=e,this.name=d.KHR_MATERIALS_CLEARCOAT}return Object(s.a)(t,[{key:"getMaterialType",value:function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?c.Q:null}},{key:"extendMaterialParams",value:function(t,e){var n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new c.yb(o,-o)}return Promise.all(i)}}]),t}(),g=function(){function t(e){Object(o.a)(this,t),this.parser=e,this.name=d.KHR_MATERIALS_TRANSMISSION}return Object(s.a)(t,[{key:"getMaterialType",value:function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?c.Q:null}},{key:"extendMaterialParams",value:function(t,e){var n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(e.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),t}(),y=function(){function t(e){Object(o.a)(this,t),this.parser=e,this.name=d.KHR_TEXTURE_BASISU}return Object(s.a)(t,[{key:"loadTexture",value:function(t){var e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=n.images[i.source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,a,o)}}]),t}(),_=function(){function t(e){Object(o.a)(this,t),this.parser=e,this.name=d.EXT_TEXTURE_WEBP,this.isSupported=null}return Object(s.a)(t,[{key:"loadTexture",value:function(t){var e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;var a=i.extensions[e],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(t){var e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}]),t}(),b=function(){function t(e){Object(o.a)(this,t),this.name=d.EXT_MESHOPT_COMPRESSION,this.parser=e}return Object(s.a)(t,[{key:"loadBufferView",value:function(t){var e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then((function(t){var e=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new ArrayBuffer(i*o),u=new Uint8Array(t[0],e,n);return a.decodeGltfBuffer(new Uint8Array(s),i,o,u,r.mode,r.filter),s}))}return null}}]),t}(),x="glTF",w=1313821514,S=5130562,k=function t(e){Object(o.a)(this,t),this.name=d.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(e,0,12);if(this.header={magic:c.J.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==x)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(e,12),a=0;a<r;){var s=i.getUint32(a,!0);a+=4;var u=i.getUint32(a,!0);if(a+=4,u===w){var l=new Uint8Array(e,12+a,s);this.content=c.J.decodeText(l)}else if(u===S){var h=12+a;this.body=e.slice(h,h+s)}a+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},T=function(){function t(e,n){if(Object(o.a)(this,t),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=d.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}return Object(s.a)(t,[{key:"decodePrimitive",value:function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,o={},s={},u={};for(var l in a){var c=U[l]||l.toLowerCase();o[c]=a[l]}for(var h in t.attributes){var f=U[h]||h.toLowerCase();if(void 0!==a[h]){var d=n.accessors[t.attributes[h]],p=B[d.componentType];u[f]=p,s[f]=!0===d.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}e(t)}),o,u)}))}))}}]),t}(),E=function(){function t(){Object(o.a)(this,t),this.name=d.KHR_TEXTURE_TRANSFORM}return Object(s.a)(t,[{key:"extendTexture",value:function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t}}]),t}(),C=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),u=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),f={specular:{value:(new c.k).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return i._extraUniforms=f,i.onBeforeCompile=function(t){for(var e in f)t.uniforms[e]=f[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",u).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",h)},Object.defineProperties(Object(r.a)(i),{specular:{get:function(){return f.specular.value},set:function(t){f.specular.value=t}},specularMap:{get:function(){return f.specularMap.value},set:function(t){f.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return f.glossiness.value},set:function(t){f.glossiness.value=t}},glossinessMap:{get:function(){return f.glossinessMap.value},set:function(t){f.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete i.metalness,delete i.roughness,delete i.metalnessMap,delete i.roughnessMap,i.setValues(t),i}return Object(s.a)(n,[{key:"copy",value:function(t){return Object(i.a)(Object(a.a)(n.prototype),"copy",this).call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(c.R),O=function(){function t(){Object(o.a)(this,t),this.name=d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return Object(s.a)(t,[{key:"getMaterialType",value:function(){return C}},{key:"extendParams",value:function(t,e,n){var r=e.extensions[this.name];t.color=new c.k(1,1,1),t.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;t.color.fromArray(a),t.opacity=a[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(t,"map",r.diffuseTexture)),t.emissive=new c.k(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new c.k(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;i.push(n.assignTexture(t,"glossinessMap",o)),i.push(n.assignTexture(t,"specularMap",o))}return Promise.all(i)}},{key:"createMaterial",value:function(t){var e=new C(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=c.ub,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}]),t}(),M=function t(){Object(o.a)(this,t),this.name=d.KHR_MESH_QUANTIZATION},A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r,i,a){return Object(o.a)(this,n),e.call(this,t,r,i,a)}return Object(s.a)(n,[{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,a=0;a!==r;a++)e[a]=n[i+a];return e}}]),n}(c.y);A.prototype.beforeStart_=A.prototype.copySampleValue_,A.prototype.afterEnd_=A.prototype.copySampleValue_,A.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-e,c=(n-e)/l,h=c*c,f=h*c,d=t*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+c,_=0;_!==o;_++){var b=a[p+_+o],x=a[p+_+s]*l,w=a[d+_+o],S=a[d+_]*l;i[_]=g*b+y*x+v*w+m*S}return i};var P=0,L=1,R=2,j=3,I=4,D=5,N=6,B={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},z={9728:c.T,9729:c.F,9984:c.V,9985:c.H,9986:c.U,9987:c.G},F={33071:c.i,33648:c.S,10497:c.jb},V={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H={CUBICSPLINE:void 0,LINEAR:c.A,STEP:c.z},W="OPAQUE",G="MASK",X="BLEND";function Y(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function Z(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function Q(t,e){void 0!==e.extras&&("object"===typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function J(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)t.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function K(t){var e=t.extensions&&t.extensions[d.KHR_DRACO_MESH_COMPRESSION];return e?"draco:"+e.bufferView+":"+e.indices+":"+$(e.attributes):t.indices+":"+$(t.attributes)+":"+t.mode}function $(t){for(var e="",n=Object.keys(t).sort(),r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function tt(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t),this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new f,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new c.v(this.options.manager):this.textureLoader=new c.vb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new c.q(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return Object(s.a)(t,[{key:"setExtensions",value:function(t){this.extensions=t}},{key:"setPlugins",value:function(t){this.plugins=t}},{key:"parse",value:function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){var a={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};Z(i,a,r),Q(a,r),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(a)}))).then((function(){t(a)}))})).catch(e)}},{key:"_markDefs",value:function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r=0,i=e.length;r<i;r++)for(var a=e[r].joints,o=0,s=a.length;o<s;o++)t[a[o]].isBone=!0;for(var u=0,l=t.length;u<l;u++){var c=t[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}},{key:"_getNodeRef",value:function(t,e,n){if(t.refs[e]<=1)return n;var r=n.clone();return r.name+="_instance_"+t.uses[e]++,r}},{key:"_invokeOne",value:function(t){var e=Object.values(this.plugins);e.push(this);for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(t){var e=Object.values(this.plugins);e.unshift(this);for(var n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(t,e){var n=t+":"+e,r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(t){var e=this.cache.get(t);if(!e){var n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e}},{key:"loadBuffer",value:function(t){var e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[d.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(t,i){n.load(Y(e.uri,r.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}},{key:"loadBufferView",value:function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))}},{key:"loadAccessor",value:function(t){var e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){var i,a,o=t[0],s=V[r.type],u=B[r.componentType],l=u.BYTES_PER_ELEMENT,h=l*s,f=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(d&&d!==h){var v=Math.floor(f/d),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count,g=e.cache.get(m);g||(i=new u(o,v*d,r.count*d/l),g=new c.w(i,d/l),e.cache.add(m,g)),a=new c.x(g,s,f%d/l,p)}else i=null===o?new u(r.count*s):new u(o,f,r.count*s),a=new c.f(i,s,p);if(void 0!==r.sparse){var y=V.SCALAR,_=B[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new _(t[1],b,r.sparse.count*y),S=new u(t[2],x,r.sparse.count*s);null!==o&&(a=new c.f(a.array.slice(),a.itemSize,a.normalized));for(var k=0,T=w.length;k<T;k++){var E=w[k];if(a.setX(E,S[k*s]),s>=2&&a.setY(E,S[k*s+1]),s>=3&&a.setZ(E,S[k*s+2]),s>=4&&a.setW(E,S[k*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(t){var e=this.json,n=this.options,r=e.textures[t],i=e.images[r.source],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(t,i,a)}},{key:"loadTextureImage",value:function(t,e,n){var r=this,i=this.json,a=this.options,o=i.textures[t],s=self.URL||self.webkitURL,u=e.uri,l=!1,h=!0;if("image/jpeg"===e.mimeType&&(h=!1),void 0!==e.bufferView)u=r.getDependency("bufferView",e.bufferView).then((function(t){if("image/png"===e.mimeType){var n=new DataView(t,25,1).getUint8(0,!1);h=6===n||4===n||3===n}l=!0;var r=new Blob([t],{type:e.mimeType});return u=s.createObjectURL(r)}));else if(void 0===e.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");return Promise.resolve(u).then((function(t){return new Promise((function(e,r){var i=e;!0===n.isImageBitmapLoader&&(i=function(t){e(new c.h(t))}),n.load(Y(t,a.path),i,void 0,r)}))})).then((function(e){!0===l&&s.revokeObjectURL(u),e.flipY=!1,o.name&&(e.name=o.name),h||(e.format=c.ib);var n=(i.samplers||{})[o.sampler]||{};return e.magFilter=z[n.magFilter]||c.F,e.minFilter=z[n.minFilter]||c.G,e.wrapS=F[n.wrapS]||c.jb,e.wrapT=F[n.wrapT]||c.jb,r.associations.set(e,{type:"textures",index:t}),e}))}},{key:"assignTexture",value:function(t,e,n){var r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),r.extensions[d.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[d.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var o=r.associations.get(i);i=r.extensions[d.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,o)}}t[e]=i}))}},{key:"assignFinalMaterial",value:function(t){var e=t.geometry,n=t.material,r=void 0!==e.attributes.tangent,i=void 0!==e.attributes.color,a=void 0===e.attributes.normal,o=!0===t.isSkinnedMesh,s=Object.keys(e.morphAttributes).length>0,u=s&&void 0!==e.morphAttributes.normal;if(t.isPoints){var l="PointsMaterial:"+n.uuid,h=this.cache.get(l);h||(h=new c.eb,c.L.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(l,h)),n=h}else if(t.isLine){var f="LineBasicMaterial:"+n.uuid,d=this.cache.get(f);d||(d=new c.C,c.L.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(f,d)),n=d}if(r||i||a||o||s){var p="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(p+="specular-glossiness:"),o&&(p+="skinning:"),r&&(p+="vertex-tangents:"),i&&(p+="vertex-colors:"),a&&(p+="flat-shading:"),s&&(p+="morph-targets:"),u&&(p+="morph-normals:");var v=this.cache.get(p);v||(v=n.clone(),o&&(v.skinning=!0),i&&(v.vertexColors=!0),a&&(v.flatShading=!0),s&&(v.morphTargets=!0),u&&(v.morphNormals=!0),r&&(v.vertexTangents=!0,v.normalScale&&(v.normalScale.y*=-1),v.clearcoatNormalScale&&(v.clearcoatNormalScale.y*=-1)),this.cache.add(p,v),this.associations.set(v,this.associations.get(n))),n=v}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}},{key:"getMaterialType",value:function(){return c.R}},{key:"loadMaterial",value:function(t){var e,n=this,r=this.json,i=this.extensions,a=r.materials[t],o={},s=a.extensions||{},u=[];if(s[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=i[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=l.getMaterialType(),u.push(l.extendParams(o,a,n))}else if(s[d.KHR_MATERIALS_UNLIT]){var h=i[d.KHR_MATERIALS_UNLIT];e=h.getMaterialType(),u.push(h.extendParams(o,a,n))}else{var f=a.pbrMetallicRoughness||{};if(o.color=new c.k(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;o.color.fromArray(p),o.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(n.assignTexture(o,"map",f.baseColorTexture)),o.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,o.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(u.push(n.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),e=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),u.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===a.doubleSided&&(o.side=c.n);var v=a.alphaMode||W;return v===X?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,v===G&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&e!==c.P&&(u.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new c.yb(1,-1),void 0!==a.normalTexture.scale&&o.normalScale.set(a.normalTexture.scale,-a.normalTexture.scale)),void 0!==a.occlusionTexture&&e!==c.P&&(u.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&e!==c.P&&(o.emissive=(new c.k).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&e!==c.P&&u.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture)),Promise.all(u).then((function(){var r;return r=e===C?i[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new e(o),a.name&&(r.name=a.name),r.map&&(r.map.encoding=c.Cb),r.emissiveMap&&(r.emissiveMap.encoding=c.Cb),Q(r,a),n.associations.set(r,{type:"materials",index:t}),a.extensions&&Z(i,r,a),r}))}},{key:"createUniqueName",value:function(t){for(var e=c.fb.sanitizeNodeName(t||""),n=e,r=1;this.nodeNamesUsed[n];++r)n=e+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(t){var e=this,n=this.extensions,r=this.primitiveCache;function i(t){return n[d.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return rt(n,t,e)}))}for(var a=[],o=0,s=t.length;o<s;o++){var u=t[o],l=K(u),h=r[l];if(h)a.push(h.promise);else{var f=void 0;f=u.extensions&&u.extensions[d.KHR_DRACO_MESH_COMPRESSION]?i(u):rt(new c.g,u,e),r[l]={primitive:u,promise:f},a.push(f)}}return Promise.all(a)}},{key:"loadMesh",value:function(t){for(var e,n=this,r=this.json,i=this.extensions,a=r.meshes[t],o=a.primitives,s=[],u=0,l=o.length;u<l;u++){var h=void 0===o[u].material?(void 0===(e=this.cache).DefaultMaterial&&(e.DefaultMaterial=new c.R({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:c.r})),e.DefaultMaterial):this.getDependency("material",o[u].material);s.push(h)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(e){for(var r=e.slice(0,e.length-1),s=e[e.length-1],u=[],l=0,h=s.length;l<h;l++){var f=s[l],d=o[l],p=void 0,v=r[l];if(d.mode===I||d.mode===D||d.mode===N||void 0===d.mode)!0!==(p=!0===a.isSkinnedMesh?new c.ob(f,v):new c.O(f,v)).isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),d.mode===D?p.geometry=it(p.geometry,c.xb):d.mode===N&&(p.geometry=it(p.geometry,c.wb));else if(d.mode===L)p=new c.E(f,v);else if(d.mode===j)p=new c.B(f,v);else if(d.mode===R)p=new c.D(f,v);else{if(d.mode!==P)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);p=new c.db(f,v)}Object.keys(p.geometry.morphAttributes).length>0&&J(p,a),p.name=n.createUniqueName(a.name||"mesh_"+t),Q(p,a),d.extensions&&Z(i,p,d),n.assignFinalMaterial(p),u.push(p)}if(1===u.length)return u[0];for(var m=new c.s,g=0,y=u.length;g<y;g++)m.add(u[g]);return m}))}},{key:"loadCamera",value:function(t){var e,n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new c.bb(c.M.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new c.Y(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Q(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}},{key:"loadAnimation",value:function(t){for(var e=this.json.animations[t],n=[],r=[],i=[],a=[],o=[],s=0,u=e.channels.length;s<u;s++){var l=e.channels[s],h=e.samplers[l.sampler],f=l.target,d=void 0!==f.node?f.node:f.id,p=void 0!==e.parameters?e.parameters[h.input]:h.input,v=void 0!==e.parameters?e.parameters[h.output]:h.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",p)),i.push(this.getDependency("accessor",v)),a.push(h),o.push(f)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){for(var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=[],l=function(t,e){var n=r[t],l=i[t],h=a[t],f=o[t],d=s[t];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var p=void 0;switch(q[d.path]){case q.weights:p=c.W;break;case q.rotation:p=c.hb;break;case q.position:case q.scale:default:p=c.Ab}var v=n.name?n.name:n.uuid,m=void 0!==f.interpolation?H[f.interpolation]:c.A,g=[];q[d.path]===q.weights?n.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&g.push(t.name?t.name:t.uuid)})):g.push(v);var y=h.array;if(h.normalized){for(var _=tt(y.constructor),b=new Float32Array(y.length),x=0,w=y.length;x<w;x++)b[x]=y[x]*_;y=b}for(var S=0,k=g.length;S<k;S++){var T=new p(g[S]+"."+q[d.path],l.array,y,m);"CUBICSPLINE"===f.interpolation&&(T.createInterpolant=function(t){return new A(this.times,this.values,this.getValueSize()/3,t)},T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(T)}},h=0,f=r.length;h<f;h++)l(h);var d=e.name?e.name:"animation_"+t;return new c.b(d,void 0,u)}))}},{key:"createNodeMesh",value:function(t){var e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(t){var e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=r.weights.length;e<n;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))}},{key:"loadNode",value:function(t){var e=this.json,n=this.extensions,r=this,i=e.nodes[t],a=i.name?r.createUniqueName(i.name):"";return function(){var e=[],n=r._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==i.camera&&e.push(r.getDependency("camera",i.camera).then((function(t){return r._getNodeRef(r.cameraCache,i.camera,t)}))),r._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){var o;if((o=!0===i.isBone?new c.c:e.length>1?new c.s:1===e.length?e[0]:new c.X)!==e[0])for(var s=0,u=e.length;s<u;s++)o.add(e[s]);if(i.name&&(o.userData.name=i.name,o.name=a),Q(o,i),i.extensions&&Z(n,o,i),void 0!==i.matrix){var l=new c.N;l.fromArray(i.matrix),o.applyMatrix4(l)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.set(o,{type:"nodes",index:t}),o}))}},{key:"loadScene",value:function(t){var e=this.json,n=this.extensions,r=this.json.scenes[t],i=new c.s;r.name&&(i.name=this.createUniqueName(r.name)),Q(i,r),r.extensions&&Z(n,i,r);for(var a=r.nodes||[],o=[],s=0,u=a.length;s<u;s++)o.push(nt(a[s],i,e,this));return Promise.all(o).then((function(){return i}))}}]),t}();function nt(t,e,n,r){var i=n.nodes[t];return r.getDependency("node",t).then((function(t){return void 0===i.skin?t:r.getDependency("skin",i.skin).then((function(t){for(var n=[],i=0,a=(e=t).joints.length;i<a;i++)n.push(r.getDependency("node",e.joints[i]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var r=[],i=[],a=0,o=n.length;a<o;a++){var s=n[a];if(s){r.push(s);var u=new c.N;void 0!==e.inverseBindMatrices&&u.fromArray(e.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[a])}t.bind(new c.nb(r,i),t.matrixWorld)}})),t}));var e})).then((function(t){e.add(t);var a=[];if(i.children)for(var o=i.children,s=0,u=o.length;s<u;s++){var l=o[s];a.push(nt(l,t,n,r))}return Promise.all(a)}))}function rt(t,e,n){var r=e.attributes,i=[];function a(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(var o in r){var s=U[o]||o.toLowerCase();s in t.attributes||i.push(a(r[o],s))}if(void 0!==e.indices&&!t.index){var u=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(u)}return Q(t,e),function(t,e,n){var r=e.attributes,i=new c.d;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new c.zb(o[0],o[1],o[2]),new c.zb(s[0],s[1],s[2])),a.normalized){var u=tt(B[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=e.targets;if(void 0!==l){for(var h=new c.zb,f=new c.zb,d=0,p=l.length;d<p;d++){var v=l[d];if(void 0!==v.POSITION){var m=n.json.accessors[v.POSITION],g=m.min,y=m.max;if(void 0!==g&&void 0!==y){if(f.setX(Math.max(Math.abs(g[0]),Math.abs(y[0]))),f.setY(Math.max(Math.abs(g[1]),Math.abs(y[1]))),f.setZ(Math.max(Math.abs(g[2]),Math.abs(y[2]))),m.normalized){var _=tt(B[m.componentType]);f.multiplyScalar(_)}h.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(h)}t.boundingBox=i;var b=new c.pb;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(t,e,n),Promise.all(i).then((function(){return void 0!==e.targets?function(t,e,n){for(var r=!1,i=!1,a=0,o=e.length;a<o;a++){var s=e[a];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(t);for(var u=[],l=[],c=0,h=e.length;c<h;c++){var f=e[c];if(r){var d=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):t.attributes.position;u.push(d)}if(i){var p=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):t.attributes.normal;l.push(p)}}return Promise.all([Promise.all(u),Promise.all(l)]).then((function(e){var n=e[0],a=e[1];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=a),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function it(t,e){var n=t.getIndex();if(null===n){var r=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var a=0;a<i.count;a++)r.push(a);t.setIndex(r),n=t.getIndex()}var o=n.count-2,s=[];if(e===c.wb)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2===0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var h=t.clone();return h.setIndex(s),h}},,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=o(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.filter((function(t){return!(0,r.default)(t)})).map((function(t,n){var r=void 0;return"function"!==typeof e||null!==(r=e(t,n))&&!r?(0,i.default)(t,n,e):r}))};var r=a(n(150)),i=a(n(89));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";(function(t){var r=n(177),i=n(178),a=n(179);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(t,a+f)!==l(e,f)){h=!1;break}if(h)return a}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return q(V(e,t.length-n),t,n,r)}function x(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function S(t,e,n,r){return q(U(e),t,n,r)}function k(t,e,n,r){return q(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=C));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(l[h]!==c[h]){a=l[h],o=c[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=F(t[a]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,a){return a||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,a){return a||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:V(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(66))},function(t,e,n){var r=n(70),i=n(54),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(104);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(243),i=n(29),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(28),i=n(244),a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(74)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t){var r=n(105),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=s}).call(this,n(74)(t))},function(t,e,n){var r=n(36)(n(28),"Map");t.exports=r},function(t,e,n){var r=n(118),i=n(119),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(113)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(281),i=n(76),a=n(282),o=n(283),s=n(284),u=n(37),l=n(106),c="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",v=l(r),m=l(i),g=l(a),y=l(o),_=l(s),b=u;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=c||a&&b(a.resolve())!=h||o&&b(new o)!=f||s&&b(new s)!=d)&&(b=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return p;case m:return c;case g:return h;case y:return f;case _:return d}return e}),t.exports=b},function(t,e,n){var r=n(287);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(37),i=n(79),a=n(29),o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},function(t,e,n){"use strict";(function(t){var r=n(10),i=n.n(r),a=n(25),o=n(21),s=n.n(o),u=1073741823,l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function c(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}var h=i.a.createContext||function(t,e){var n,i,o="__create-react-context-"+function(){var t="__global_unique_id__";return l[t]=(l[t]||0)+1}()+"__",h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=c(e.props.value),e}Object(a.a)(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[o]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof e?e(r,i):u,0!==(n|=0)&&this.emitter.set(t.value,n))}var a,o},r.render=function(){return this.props.children},n}(r.Component);h.childContextTypes=((n={})[o]=s.a.object.isRequired,n);var f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}Object(a.a)(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(r.Component);return f.contextTypes=((i={})[o]=s.a.object,i),{Provider:h,Consumer:f}};e.a=h}).call(this,n(66))},function(t,e,n){var r=n(145);t.exports=d,t.exports.parse=a,t.exports.compile=function(t,e){return s(a(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(t,e){for(var n,r=[],a=0,o=0,s="",c=e&&e.delimiter||"/";null!=(n=i.exec(t));){var h=n[0],f=n[1],d=n.index;if(s+=t.slice(o,d),o=d+h.length,f)s+=f[1];else{var p=t[o],v=n[2],m=n[3],g=n[4],y=n[5],_=n[6],b=n[7];s&&(r.push(s),s="");var x=null!=v&&null!=p&&p!==v,w="+"===_||"*"===_,S="?"===_||"*"===_,k=n[2]||c,T=g||y;r.push({name:m||a++,prefix:v||"",delimiter:k,optional:S,repeat:w,partial:x,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+u(k)+"]+?"})}}return o<t.length&&(s+=t.substr(o)),s&&r.push(s),r}function o(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",h(e)));return function(e,i){for(var a="",s=e||{},u=(i||{}).pretty?o:encodeURIComponent,l=0;l<t.length;l++){var c=t[l];if("string"!==typeof c){var h,f=s[c.name];if(null==f){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(f)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[l].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(f).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[l].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');a+=c.prefix+h}}else a+=c}return a}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function c(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function f(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<t.length;s++){var l=t[s];if("string"===typeof l)o+=u(l);else{var f=u(l.prefix),d="(?:"+l.pattern+")";e.push(l),l.repeat&&(d+="(?:"+f+d+")*"),o+=d=l.optional?l.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",c(new RegExp("^"+o,h(n)),e)}function d(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(d(t[i],e,n).source);return c(new RegExp("(?:"+r.join("|")+")",h(n)),e)}(t,e,n):function(t,e,n){return f(a(t,n),e,n)}(t,e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.htmlparser2=e.convertNodeToElement=e.processNodes=void 0;var r=n(67);Object.defineProperty(e,"processNodes",{enumerable:!0,get:function(){return s(r).default}});var i=n(89);Object.defineProperty(e,"convertNodeToElement",{enumerable:!0,get:function(){return s(i).default}});var a=n(41);Object.defineProperty(e,"htmlparser2",{enumerable:!0,get:function(){return s(a).default}});var o=s(n(191));function s(t){return t&&t.__esModule?t:{default:t}}e.default=o.default},function(t,e,n){"use strict";n.d(e,"a",(function(){return ue}));var r,i,a,o,s,u,l,c,h,f,d,p,v,m,g,y,_,b,x,w,S,k,T,E,C,O,M,A=1,P=[],L=[],R=Date.now,j=R(),I=0,D=1,N=function(t){return t},B=function(t){return Math.round(1e5*t)/1e5||0},z=function(){return"undefined"!==typeof window},F=function(){return r||z()&&(r=window.gsap)&&r.registerPlugin&&r},V=function(t){return!!~l.indexOf(t)},U=function(t,e){return~P.indexOf(t)&&P[P.indexOf(t)+1][e]},q=function(t,e){var n=e.s,r=e.sc,i=L.indexOf(t),a=r===yt.sc?1:2;return!~i&&(i=L.push(t)-1),L[i+a]||(L[i+a]=U(t,n)||(V(t)?r:function(e){return arguments.length?t[n]=e:t[n]}))},H=function(t){return U(t,"getBoundingClientRect")||(V(t)?function(){return re.width=a.innerWidth,re.height=a.innerHeight,re}:function(){return xt(t)})},W=function(t,e){var n=e.s,r=e.d2,i=e.d,o=e.a;return(n="scroll"+r)&&(o=U(t,n))?o()-H(t)()[i]:V(t)?Math.max(s[n],u[n])-(a["inner"+r]||s["client"+r]||u["client"+r]):t[n]-t["offset"+r]},G=function(t,e){for(var n=0;n<S.length;n+=3)(!e||~e.indexOf(S[n+1]))&&t(S[n],S[n+1],S[n+2])},X=function(t){return"string"===typeof t},Y=function(t){return"function"===typeof t},Z=function(t){return"number"===typeof t},Q=function(t){return"object"===typeof t},J=function(t){return Y(t)&&t()},K=function(t,e){return function(){var n=J(t),r=J(e);return function(){J(n),J(r)}}},$=Math.abs,tt="scrollLeft",et="scrollTop",nt="left",rt="top",it="right",at="bottom",ot="width",st="height",ut="Right",lt="Left",ct="Top",ht="Bottom",ft="padding",dt="margin",pt="Width",vt="Height",mt="px",gt={s:tt,p:nt,p2:lt,os:it,os2:ut,d:ot,d2:pt,a:"x",sc:function(t){return arguments.length?a.scrollTo(t,yt.sc()):a.pageXOffset||o.scrollLeft||s.scrollLeft||u.scrollLeft||0}},yt={s:et,p:rt,p2:ct,os:at,os2:ht,d:st,d2:vt,a:"y",op:gt,sc:function(t){return arguments.length?a.scrollTo(gt.sc(),t):a.pageYOffset||o.scrollTop||s.scrollTop||u.scrollTop||0}},_t=function(t){return a.getComputedStyle(t)},bt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},xt=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==_t(t)[_]&&r.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return n&&n.progress(0).kill(),i},wt=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},St=function(t){var e,n=[],r=t.labels,i=t.duration();for(e in r)n.push(r[e]/i);return n},kt=function(t,e,n,r){return n.split(",").forEach((function(n){return t(e,n,r)}))},Tt=function(t,e,n){return t.addEventListener(e,n,{passive:!0})},Et=function(t,e,n){return t.removeEventListener(e,n)},Ct={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ot={toggleActions:"play",anticipatePin:0},Mt={top:0,left:0,center:.5,bottom:1,right:1},At=function(t,e){if(X(t)){var n=t.indexOf("="),r=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;~n&&(t.indexOf("%")>n&&(r*=e/100),t=t.substr(0,n-1)),t=r+(t in Mt?Mt[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Pt=function(t,e,n,r,i,a,s){var l=i.startColor,c=i.endColor,h=i.fontSize,f=i.indent,d=i.fontWeight,p=o.createElement("div"),v=V(n)||"fixed"===U(n,"pinType"),m=-1!==t.indexOf("scroller"),g=v?u:n,y=-1!==t.indexOf("start"),_=y?l:c,b="border-color:"+_+";font-size:"+h+";color:"+_+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+(m&&v?"fixed;":"absolute;"),(m||!v)&&(b+=(r===yt?it:at)+":"+(a+parseFloat(f))+"px;"),s&&(b+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),p._isStart=y,p.setAttribute("class","gsap-marker-"+t),p.style.cssText=b,p.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(p,g.children[0]):g.appendChild(p),p._offset=p["offset"+r.op.d2],Lt(p,0,r,y),p},Lt=function(t,e,n,i){var a={display:"block"},o=n[i?"os2":"p2"],s=n[i?"p2":"os2"];t._isFlipped=i,a[n.a+"Percent"]=i?-100:0,a[n.a]=i?"1px":0,a["border"+o+pt]=1,a["border"+s+pt]=0,a[n.p]=e+"px",r.set(t,a)},Rt=[],jt={},It=function(){return f||(f=h(Qt))},Dt=function(){f||(f=h(Qt),I||qt("scrollStart"),I=R())},Nt=function(){return!g&&!E&&!o.fullscreenElement&&c.restart(!0)},Bt={},zt=[],Ft=[],Vt=function(t){var e,n=r.ticker.frame,o=[],s=0;if(M!==n||A){for(Gt();s<Ft.length;s+=4)(e=a.matchMedia(Ft[s]).matches)!==Ft[s+3]&&(Ft[s+3]=e,e?o.push(s):Gt(1,Ft[s])||Y(Ft[s+2])&&Ft[s+2]());for(Wt(),s=0;s<o.length;s++)e=o[s],O=Ft[e],Ft[e+2]=Ft[e+1](t);O=0,i&&Xt(0,1),M=n,qt("matchMedia")}},Ut=function t(){return Et(ue,"scrollEnd",t)||Xt(!0)},qt=function(t){return Bt[t]&&Bt[t].map((function(t){return t()}))||zt},Ht=[],Wt=function(t){for(var e=0;e<Ht.length;e+=4)t&&Ht[e+3]!==t||(Ht[e].style.cssText=Ht[e+1],Ht[e+2].uncache=1)},Gt=function(t,e){var n;for(b=0;b<Rt.length;b++)n=Rt[b],e&&n.media!==e||(t?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));Wt(e),e||qt("revert")},Xt=function(t,e){if(!I||t){var n=qt("refreshInit");for(k&&ue.sort(),e||Gt(),b=0;b<Rt.length;b++)Rt[b].refresh();for(n.forEach((function(t){return t&&t.render&&t.render(-1)})),b=Rt.length;b--;)Rt[b].scroll.rec=0;c.pause(),qt("refresh")}else Tt(ue,"scrollEnd",Ut)},Yt=0,Zt=1,Qt=function(){var t=Rt.length,e=R(),n=e-j>=50,r=t&&Rt[0].scroll();if(Zt=Yt>r?-1:1,Yt=r,n&&(I&&!y&&e-I>200&&(I=0,qt("scrollEnd")),v=j,j=e),Zt<0){for(b=t;b-- >0;)Rt[b]&&Rt[b].update(0,n);Zt=1}else for(b=0;b<t;b++)Rt[b]&&Rt[b].update(0,n);f=0},Jt=[nt,rt,at,it,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex"],Kt=Jt.concat([ot,st,"boxSizing","maxWidth","maxHeight","position",dt,ft,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),$t=function(t,e,n,r){if(t.parentNode!==e){for(var i,a=Jt.length,o=e.style,s=t.style;a--;)o[i=Jt[a]]=n[i];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),s.bottom=s.right="auto",o.overflow="visible",o.boxSizing="border-box",o.width=wt(t,gt)+mt,o.height=wt(t,yt)+mt,o.padding=s.margin=s.top=s.left="0",ee(r),s.width=s.maxWidth=n.width,s.height=s.maxHeight=n.height,s.padding=n.padding,t.parentNode.insertBefore(e,t),e.appendChild(t)}},te=/([A-Z])/g,ee=function(t){if(t){var e,n,i=t.t.style,a=t.length,o=0;for((t.t._gsap||r.core.getCache(t.t)).uncache=1;o<a;o+=2)n=t[o+1],e=t[o],n?i[e]=n:i[e]&&i.removeProperty(e.replace(te,"-$1").toLowerCase())}},ne=function(t){for(var e=Kt.length,n=t.style,r=[],i=0;i<e;i++)r.push(Kt[i],n[Kt[i]]);return r.t=t,r},re={left:0,top:0},ie=function(t,e,n,r,i,a,o,l,c,h,f,p){if(Y(t)&&(t=t(l)),X(t)&&"max"===t.substr(0,3)&&(t=p+("="===t.charAt(4)?At("0"+t.substr(3),n):0)),Z(t))o&&Lt(o,n,r,!0);else{Y(e)&&(e=e(l));var v,m,g,y=d(e)[0]||u,_=xt(y)||{},b=t.split(" ");_&&(_.left||_.top)||"none"!==_t(y).display||(g=y.style.display,y.style.display="block",_=xt(y),g?y.style.display=g:y.style.removeProperty("display")),v=At(b[0],_[r.d]),m=At(b[1]||"0",n),t=_[r.p]-c[r.p]-h+v+i-m,o&&Lt(o,m,r,n-m<20||o._isStart&&m>20),n-=n-m}if(a){var x=t+n,w=a._isStart;p="scroll"+r.d2,Lt(a,x,r,w&&x>20||!w&&(f?Math.max(u[p],s[p]):a.parentNode[p])<=x+1),f&&(c=xt(o),f&&(a.style[r.op.p]=c[r.op.p]-r.op.m-a._offset+mt))}return Math.round(t)},ae=/(?:webkit|moz|length|cssText|inset)/i,oe=function(t,e,n,i){if(t.parentNode!==e){var a,o,s=t.style;if(e===u){for(a in t._stOrig=s.cssText,o=_t(t))+a||ae.test(a)||!o[a]||"string"!==typeof s[a]||"0"===a||(s[a]=o[a]);s.top=n,s.left=i}else s.cssText=t._stOrig;r.core.getCache(t).uncache=1,e.appendChild(t)}},se=function(t,e){var n,i,a=q(t,e),o="_scroll"+e.p2,s=function e(s,u,l,c,h){var f=e.tween,d=u.onComplete,p={};return f&&f.kill(),n=Math.round(l),u[o]=s,u.modifiers=p,p[o]=function(t){return(t=B(a()))!==n&&t!==i&&Math.abs(t-n)>2?(f.kill(),e.tween=0):t=l+c*f.ratio+h*f.ratio*f.ratio,i=n,n=B(t)},u.onComplete=function(){e.tween=0,d&&d.call(f)},f=e.tween=r.to(t,u)};return t[o]=a,t.addEventListener("wheel",(function(){return s.tween&&s.tween.kill()&&(s.tween=0)})),s};gt.op=yt;var ue=function(){function t(e,n){i||t.register(r)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=this.start=0,this.vars&&this.kill(1),D){var i,l,c,h,f,m,_,x,w,S,E,M,L,j,B,z,F,G,J,K,tt,et,nt,rt,it,at,ot,st,ut,lt,ct,ht,vt,kt,Mt,Lt,It,Bt,zt,Ft=(e=bt(X(e)||Z(e)||e.nodeType?{trigger:e}:e,Ot)).horizontal?gt:yt,Vt=e,qt=Vt.onUpdate,Ht=Vt.toggleClass,Wt=Vt.id,Gt=Vt.onToggle,Xt=Vt.onRefresh,Yt=Vt.scrub,Qt=Vt.trigger,Jt=Vt.pin,Kt=Vt.pinSpacing,te=Vt.invalidateOnRefresh,ae=Vt.anticipatePin,ue=Vt.onScrubComplete,le=Vt.onSnapComplete,ce=Vt.once,he=Vt.snap,fe=Vt.pinReparent,de=!Yt&&0!==Yt,pe=d(e.scroller||a)[0],ve=r.core.getCache(pe),me=V(pe),ge="pinType"in e?"fixed"===e.pinType:me||"fixed"===U(pe,"pinType"),ye=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],_e=de&&e.toggleActions.split(" "),be="markers"in e?e.markers:Ot.markers,xe=me?0:parseFloat(_t(pe)["border"+Ft.p2+pt])||0,we=this,Se=e.onRefreshInit&&function(){return e.onRefreshInit(we)},ke=function(t,e,n){var r=n.d,i=n.d2,o=n.a;return(o=U(t,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(e?a["inner"+i]:t["client"+i])||0}}(pe,me,Ft),Te=function(t,e){return!e||~P.indexOf(t)?H(t):function(){return re}}(pe,me);we.media=O,ae*=45,Rt.push(we),we.scroller=pe,we.scroll=q(pe,Ft),f=we.scroll(),we.vars=e,n=n||e.animation,"refreshPriority"in e&&(k=1),ve.tweenScroll=ve.tweenScroll||{top:se(pe,yt),left:se(pe,gt)},we.tweenTo=i=ve.tweenScroll[Ft.p],n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.render(0,!0,!0),we.animation=n.pause(),n.scrollTrigger=we,(ht=Z(Yt)&&Yt)&&(ct=r.to(n,{ease:"power3",duration:ht,onComplete:function(){return ue&&ue(we)}})),ut=0,Wt||(Wt=n.vars.id)),he&&(Q(he)||(he={snapTo:he}),"scrollBehavior"in u.style&&r.set(me?[u,s]:pe,{scrollBehavior:"auto"}),c=Y(he.snapTo)?he.snapTo:"labels"===he.snapTo?function(t){return function(e){return r.utils.snap(St(t),e)}}(n):"labelsDirectional"===he.snapTo?(Bt=n,function(t,e){var n,r=St(Bt);if(r.sort((function(t,e){return t-e})),e.direction>0){for(t-=1e-4,n=0;n<r.length;n++)if(r[n]>=t)return r[n];return r.pop()}for(n=r.length,t+=1e-4;n--;)if(r[n]<=t)return r[n];return r[0]}):r.utils.snap(he.snapTo),vt=he.duration||{min:.1,max:2},vt=Q(vt)?p(vt.min,vt.max):p(vt,vt),kt=r.delayedCall(he.delay||ht/2||.1,(function(){if(Math.abs(we.getVelocity())<10&&!y){var t=n&&!de?n.totalProgress():we.progress,e=(t-lt)/(R()-v)*1e3||0,r=$(e/2)*e/.185,a=t+(!1===he.inertia?0:r),o=p(0,1,c(a,we)),s=we.scroll(),u=Math.round(_+o*j),l=he,h=l.onStart,f=l.onInterrupt,d=l.onComplete,m=i.tween;if(s<=x&&s>=_&&u!==s){if(m&&!m._initted&&m.data<=Math.abs(u-s))return;i(u,{duration:vt($(.185*Math.max($(a-t),$(o-t))/e/.05||0)),ease:he.ease||"power3",data:Math.abs(u-s),onInterrupt:function(){return kt.restart(!0)&&f&&f(we)},onComplete:function(){ut=lt=n&&!de?n.totalProgress():we.progress,le&&le(we),d&&d(we)}},s,r*j,u-s-r*j),h&&h(we,i.tween)}}else we.isActive&&kt.restart(!0)})).pause()),Wt&&(jt[Wt]=we),Qt=we.trigger=d(Qt||Jt)[0],Jt=!0===Jt?Qt:d(Jt)[0],X(Ht)&&(Ht={targets:Qt,className:Ht}),Jt&&(!1===Kt||Kt===dt||(Kt=!(!Kt&&"flex"===_t(Jt.parentNode).display)&&ft),we.pin=Jt,!1!==e.force3D&&r.set(Jt,{force3D:!0}),(l=r.core.getCache(Jt)).spacer?B=l.pinState:(l.spacer=G=o.createElement("div"),G.setAttribute("class","pin-spacer"+(Wt?" pin-spacer-"+Wt:"")),l.pinState=B=ne(Jt)),we.spacer=G=l.spacer,st=_t(Jt),rt=st[Kt+Ft.os2],K=r.getProperty(Jt),tt=r.quickSetter(Jt,Ft.a,mt),$t(Jt,G,st),F=ne(Jt)),be&&(L=Q(be)?bt(be,Ct):Ct,E=Pt("scroller-start",Wt,pe,Ft,L,0),M=Pt("scroller-end",Wt,pe,Ft,L,0,E),J=E["offset"+Ft.op.d2],w=Pt("start",Wt,pe,Ft,L,J),S=Pt("end",Wt,pe,Ft,L,J),ge||((zt=me?u:pe).style.position="absolute"===_t(zt).position?"absolute":"relative",r.set([E,M],{force3D:!0}),at=r.quickSetter(E,Ft.a,mt),ot=r.quickSetter(M,Ft.a,mt))),we.revert=function(t){var e=!1!==t||!we.enabled,r=g;e!==h&&(e&&(Lt=Math.max(we.scroll(),we.scroll.rec||0),Mt=we.progress,It=n&&n.progress()),w&&[w,S,E,M].forEach((function(t){return t.style.display=e?"none":"block"})),e&&(g=1),we.update(e),g=r,Jt&&(e?function(t,e,n){if(ee(n),t.parentNode===e){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}}(Jt,G,B):(!fe||!we.isActive)&&$t(Jt,G,_t(Jt),it)),h=e)},we.refresh=function(i,a){if(!g&&we.enabled||a)if(Jt&&i&&I)Tt(t,"scrollEnd",Ut);else{g=1,ct&&ct.pause(),te&&n&&n.progress(0).invalidate(),h||we.revert();for(var o,s,l,c,d,p,v,y,b,k=ke(),C=Te(),O=W(pe,Ft),A=0,P=0,L=e.end,R=e.endTrigger||Qt,D=e.start||(0!==e.start&&Qt?Jt?"0 0":"0 100%":0),N=Qt&&Math.max(0,Rt.indexOf(we))||0,V=N;V--;)(p=Rt[V]).end||p.refresh(0,1)||(g=1),(v=p.pin)&&(v===Qt||v===Jt)&&p.revert();for(_=ie(D,Qt,k,Ft,we.scroll(),w,E,we,C,xe,ge,O)||(Jt?-.001:0),Y(L)&&(L=L(we)),X(L)&&!L.indexOf("+=")&&(~L.indexOf(" ")?L=(X(D)?D.split(" ")[0]:"")+L:(A=At(L.substr(2),k),L=X(D)?D:_+A,R=Qt)),x=Math.max(_,ie(L||(R?"100% 0":O),R,k,Ft,we.scroll()+A,S,M,we,C,xe,ge,O))||-.001,j=x-_||(_-=.01)&&.001,A=0,V=N;V--;)(v=(p=Rt[V]).pin)&&p.start-p._pinPush<_&&(o=p.end-p.start,v===Qt&&(A+=o),v===Jt&&(P+=o));if(_+=A,x+=A,we._pinPush=P,w&&A&&((o={})[Ft.a]="+="+A,r.set([w,S],o)),Jt)o=_t(Jt),c=Ft===yt,l=we.scroll(),et=parseFloat(K(Ft.a))+P,!O&&x>1&&((me?u:pe).style["overflow-"+Ft.a]="scroll"),$t(Jt,G,o),F=ne(Jt),s=xt(Jt,!0),y=ge&&q(pe,c?gt:yt)(),Kt&&((it=[Kt+Ft.os2,j+P+mt]).t=G,(V=Kt===ft?wt(Jt,Ft)+j+P:0)&&it.push(Ft.d,V+mt),ee(it),ge&&we.scroll(Lt)),ge&&((d={top:s.top+(c?l-_:y)+mt,left:s.left+(c?y:l-_)+mt,boxSizing:"border-box",position:"fixed"}).width=d.maxWidth=Math.ceil(s.width)+mt,d.height=d.maxHeight=Math.ceil(s.height)+mt,d.margin=d.marginTop=d.marginRight=d.marginBottom=d.marginLeft="0",d.padding=o.padding,d.paddingTop=o.paddingTop,d.paddingRight=o.paddingRight,d.paddingBottom=o.paddingBottom,d.paddingLeft=o.paddingLeft,z=function(t,e,n){for(var r,i=[],a=t.length,o=n?8:0;o<a;o+=2)r=t[o],i.push(r,r in e?e[r]:t[o+1]);return i.t=t.t,i}(B,d,fe)),n?(b=n._initted,T(1),n.progress(1,!0),nt=K(Ft.a)-et+j+P,j!==nt&&z.splice(z.length-2,2),n.progress(0,!0),b||n.invalidate(),T(0)):nt=j;else if(Qt&&we.scroll())for(s=Qt.parentNode;s&&s!==u;)s._pinOffset&&(_-=s._pinOffset,x-=s._pinOffset),s=s.parentNode;for(V=0;V<N;V++)(p=Rt[V].pin)&&(p===Qt||p===Jt)&&Rt[V].revert(!1);we.start=_,we.end=x,(f=m=we.scroll())<Lt&&we.scroll(Lt),we.revert(!1),g=0,n&&de&&n._initted&&n.progress(It,!0).render(n.time(),!0,!0),Mt!==we.progress&&(ct&&n.totalProgress(Mt,!0),we.progress=Mt,we.update()),Jt&&Kt&&(G._pinOffset=Math.round(we.progress*nt)),Xt&&Xt(we)}},we.getVelocity=function(){return(we.scroll()-m)/(R()-v)*1e3||0},we.update=function(t,e){var r,a,o,s,l,c=we.scroll(),h=t?0:(c-_)/j,p=h<0?0:h>1?1:h||0,y=we.progress;if(e&&(m=f,f=c,he&&(lt=ut,ut=n&&!de?n.totalProgress():p)),ae&&!p&&Jt&&!g&&!A&&I&&_<c+(c-m)/(R()-v)*ae&&(p=1e-4),p!==y&&we.enabled){if(s=(l=(r=we.isActive=!!p&&p<1)!==(!!y&&y<1))||!!p!==!!y,we.direction=p>y?1:-1,we.progress=p,de||(!ct||g||A?n&&n.totalProgress(p,!!g):(ct.vars.totalProgress=p,ct.invalidate().restart())),Jt)if(t&&Kt&&(G.style[Kt+Ft.os2]=rt),ge){if(s){if(o=!t&&p>y&&x+1>c&&c+1>=W(pe,Ft),fe)if(t||!r&&!o)oe(Jt,G);else{var b=xt(Jt,!0),w=c-_;oe(Jt,u,b.top+(Ft===yt?w:0)+mt,b.left+(Ft===yt?0:w)+mt)}ee(r||o?z:F),nt!==j&&p<1&&r||tt(et+(1!==p||o?0:nt))}}else tt(et+nt*p);he&&!i.tween&&!g&&!A&&kt.restart(!0),Ht&&(l||ce&&p&&(p<1||!C))&&d(Ht.targets).forEach((function(t){return t.classList[r||ce?"add":"remove"](Ht.className)})),qt&&!de&&!t&&qt(we),s&&!g?(a=p&&!y?0:1===p?1:1===y?2:3,de&&(o=!l&&"none"!==_e[a+1]&&_e[a+1]||_e[a],n&&("complete"===o||"reset"===o||o in n)&&("complete"===o?n.pause().totalProgress(1):"reset"===o?n.restart(!0).pause():n[o]()),qt&&qt(we)),!l&&C||(Gt&&l&&Gt(we),ye[a]&&ye[a](we),ce&&(1===p?we.kill(!1,1):ye[a]=0),l||ye[a=1===p?1:3]&&ye[a](we))):de&&qt&&!g&&qt(we)}ot&&(at(c+(E._isFlipped?1:0)),ot(c))},we.enable=function(){we.enabled||(we.enabled=!0,Tt(pe,"resize",Nt),Tt(pe,"scroll",Dt),Se&&Tt(t,"refreshInit",Se),n&&n.add?r.delayedCall(.01,(function(){return _||x||we.refresh()}))&&(j=.01)&&(_=x=0):we.refresh())},we.disable=function(e,n){if(we.enabled&&(!1!==e&&we.revert(),we.enabled=we.isActive=!1,n||ct&&ct.pause(),Lt=0,l&&(l.uncache=1),Se&&Et(t,"refreshInit",Se),kt&&(kt.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!me)){for(var r=Rt.length;r--;)if(Rt[r].scroller===pe&&Rt[r]!==we)return;Et(pe,"resize",Nt),Et(pe,"scroll",Dt)}},we.kill=function(t,e){we.disable(t,e),Wt&&delete jt[Wt];var r=Rt.indexOf(we);Rt.splice(r,1),r===b&&Zt>0&&b--,n&&(n.scrollTrigger=null,t&&n.render(-1),e||n.kill()),w&&[w,S,E,M].forEach((function(t){return t.parentNode.removeChild(t)})),Jt&&(l&&(l.uncache=1),r=0,Rt.forEach((function(t){return t.pin===Jt&&r++})),r||(l.spacer=0))},we.enable()}else this.update=this.refresh=this.kill=N},t.register=function(e){if(!i&&(r=e||F(),z()&&window.document&&(a=window,o=document,s=o.documentElement,u=o.body),r&&(d=r.utils.toArray,p=r.utils.clamp,T=r.core.suppressOverwrites||N,r.core.globals("ScrollTrigger",t),u))){h=a.requestAnimationFrame||function(t){return setTimeout(t,16)},Tt(a,"wheel",Dt),l=[a,o,s,u],Tt(o,"scroll",Dt);var n,f=u.style,v=f.borderTop;f.borderTop="1px solid #000",n=xt(u),yt.m=Math.round(n.top+yt.sc())||0,gt.m=Math.round(n.left+gt.sc())||0,v?f.borderTop=v:f.removeProperty("border-top"),m=setInterval(It,200),r.delayedCall(.5,(function(){return A=0})),Tt(o,"touchcancel",N),Tt(u,"touchstart",N),kt(Tt,o,"pointerdown,touchstart,mousedown",(function(){return y=1})),kt(Tt,o,"pointerup,touchend,mouseup",(function(){return y=0})),_=r.utils.checkPrefix("transform"),Kt.push(_),i=R(),c=r.delayedCall(.2,Xt).pause(),S=[o,"visibilitychange",function(){var t=a.innerWidth,e=a.innerHeight;o.hidden?(x=t,w=e):x===t&&w===e||Nt()},o,"DOMContentLoaded",Xt,a,"load",function(){return I||Xt()},a,"resize",Nt],G(Tt)}return i},t.defaults=function(t){for(var e in t)Ot[e]=t[e]},t.kill=function(){D=0,Rt.slice(0).forEach((function(t){return t.kill(1)}))},t.config=function(t){"limitCallbacks"in t&&(C=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(m)||(m=e)&&setInterval(It,e),"autoRefreshEvents"in t&&(G(Et)||G(Tt,t.autoRefreshEvents||"none"),E=-1===(t.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var n=d(t)[0],r=L.indexOf(n),i=V(n);~r&&L.splice(r,i?6:2),i?P.unshift(a,e,u,e,s,e):P.unshift(n,e)},t.matchMedia=function(t){var e,n,r,i,o;for(n in t)r=Ft.indexOf(n),i=t[n],O=n,"all"===n?i():(e=a.matchMedia(n))&&(e.matches&&(o=i()),~r?(Ft[r+1]=K(Ft[r+1],i),Ft[r+2]=K(Ft[r+2],o)):(r=Ft.length,Ft.push(n,i,o),e.addListener?e.addListener(Vt):e.addEventListener("change",Vt)),Ft[r+3]=e.matches),O=0;return Ft},t.clearMatchMedia=function(t){t||(Ft.length=0),(t=Ft.indexOf(t))>=0&&Ft.splice(t,4)},t}();ue.version="3.6.1",ue.saveStyles=function(t){return t?d(t).forEach((function(t){if(t&&t.style){var e=Ht.indexOf(t);e>=0&&Ht.splice(e,4),Ht.push(t,t.style.cssText,r.core.getCache(t),O)}})):Ht},ue.revert=function(t,e){return Gt(!t,e)},ue.create=function(t,e){return new ue(t,e)},ue.refresh=function(t){return t?Nt():Xt(!0)},ue.update=Qt,ue.maxScroll=function(t,e){return W(t,e?gt:yt)},ue.getScrollFunc=function(t,e){return q(d(t)[0],e?gt:yt)},ue.getById=function(t){return jt[t]},ue.getAll=function(){return Rt.slice(0)},ue.isScrolling=function(){return!!I},ue.addEventListener=function(t,e){var n=Bt[t]||(Bt[t]=[]);~n.indexOf(e)||n.push(e)},ue.removeEventListener=function(t,e){var n=Bt[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},ue.batch=function(t,e){var n,i=[],a={},o=e.interval||.016,s=e.batchMax||1e9,u=function(t,e){var n=[],i=[],a=r.delayedCall(o,(function(){e(n,i),n=[],i=[]})).pause();return function(t){n.length||a.restart(!0),n.push(t.trigger),i.push(t),s<=n.length&&a.progress(1)}};for(n in e)a[n]="on"===n.substr(0,2)&&Y(e[n])&&"onRefreshInit"!==n?u(0,e[n]):e[n];return Y(s)&&(s=s(),Tt(ue,"refresh",(function(){return s=e.batchMax()}))),d(t).forEach((function(t){var e={};for(n in a)e[n]=a[n];e.trigger=t,i.push(ue.create(e))})),i},ue.sort=function(t){return Rt.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},F()&&r.registerPlugin(ue)},function(t,e,n){"use strict";var r,i,a,o,s,u,l=n(0),c=n(2),h=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],f=[].concat(h,h),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;Object(l.a)(this,t),this._seedValue=t.xorshift(e),this.noise=this.noise.bind(this),this.setSeed=this.setSeed.bind(this)}return Object(c.a)(t,[{key:"setSeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;this._seedValue=t.xorshift(e)}},{key:"noise",value:function(e,n,r){var i=e+this._seedValue,a=n+this._seedValue,o=r+this._seedValue,s=255&Math.floor(i),u=255&Math.floor(a),l=255&Math.floor(o);i-=Math.floor(i),a-=Math.floor(a),o-=Math.floor(o);var c=t.fade(i),h=t.fade(a),d=t.fade(o),p=f[s]+u,v=f[p]+l,m=f[p+1]+l,g=f[s+1]+u,y=f[g]+l,_=f[g+1]+l;return t.lerp(d,t.lerp(h,t.lerp(c,t.grad(f[v],i,a,o),t.grad(f[y],i-1,a,o)),t.lerp(c,t.grad(f[m],i,a-1,o),t.grad(f[_],i-1,a-1,o))),t.lerp(h,t.lerp(c,t.grad(f[v+1],i,a,o-1),t.grad(f[y+1],i-1,a,o-1)),t.lerp(c,t.grad(f[m+1],i,a-1,o-1),t.grad(f[_+1],i-1,a-1,o-1))))}}],[{key:"xorshift",value:function(t){var e=t^t>>12;return e^=e<<25,2*(e^=e>>27)}},{key:"lerp",value:function(t,e,n){return e+t*(n-e)}},{key:"fade",value:function(t){return t*t*t*(t*(6*t-15)+10)}},{key:"grad",value:function(t,e,n,r){var i=15&t,a=i<8?e:n,o=i<4?n:12===i||14===i?e:r;return(0===(1&i)?a:-a)+(0===(2&i)?o:-o)}}]),t}(),p=[0,0,0],v=[21,56,50,44,13,19,7,42],m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;Object(l.a)(this,t),this._seedValue=t.xorshift(e),this.setSeed=this.setSeed.bind(this),this.noise=this.noise.bind(this)}return Object(c.a)(t,[{key:"setSeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;this._seedValue=t.xorshift(e)}},{key:"noise",value:function(e,n,l){var c=e+this._seedValue,h=n+this._seedValue,f=l+this._seedValue,d=(c+h+f)/3;r=Math.floor(c+d),i=Math.floor(h+d),a=Math.floor(f+d),o=c-r+(d=(r+i+a)/6),s=h-i+d,u=f-a+d,p[0]=p[1]=p[2]=0;var v=o>=u?o>=s?0:1:s>=u?1:2,m=o<u?o<s?0:1:s<u?1:2;return t.K(v)+t.K(3-v-m)+t.K(m)+t.K(0)}}],[{key:"xorshift",value:function(t){var e=t^t>>12;return e^=e<<25,2*(e^=e>>27)}},{key:"b2func",value:function(t,e){return t>>e&1}},{key:"b4func",value:function(e,n,r,i){return v[t.b2func(e,i)<<2|t.b2func(n,i)<<1|t.b2func(r,i)]}},{key:"K",value:function(e){var n=(p[0]+p[1]+p[2])/6,l=o-p[0]+n,c=s-p[1]+n,h=u-p[2]+n,f=.6-l*l-c*c-h*h,d=t.shuffle(r+p[0],i+p[1],a+p[2]);if(p[e]++,f<0)return 0;var v=d>>5&1,m=d>>4&1,g=d>>3&1,y=3&d,_=1===y?l:2===y?c:h,b=1===y?c:2===y?h:l,x=1===y?h:2===y?l:c;return b=v===m?-b:b,x=v!==(m^g)?-x:x,8*(f*=f)*f*((_=v===g?-_:_)+(0===y?b+x:0===(d>>2&1)?b:x))}},{key:"shuffle",value:function(e,n,r){return t.b4func(e,n,r,0)+t.b4func(n,r,e,1)+t.b4func(r,e,n,2)+t.b4func(e,n,r,3)+t.b4func(n,r,e,4)+t.b4func(r,e,n,5)+t.b4func(e,n,r,6)+t.b4func(n,r,e,7)}}]),t}(),g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;Object(l.a)(this,t),this._seedValue=e,this.setSeed=this.setSeed.bind(this),this.noise=this.noise.bind(this),this.Euclidean=this.Euclidean.bind(this),this.Manhattan=this.Manhattan.bind(this)}return Object(c.a)(t,[{key:"noise",value:function(e,n){for(var r,i,a,o,s,u={x:0,y:0,z:0},l={x:0,y:0,z:0},c=[9999999,9999999,9999999],h=-1;h<2;++h)for(var f=-1;f<2;++f)for(var d=-1;d<2;++d){a=Math.floor(e.x)+h,o=Math.floor(e.y)+f,s=Math.floor(e.z)+d,r=t.xorshift(t.hash(a+this._seedValue&4294967295,4294967295&o,4294967295&s)),i=t.probLookup(r);for(var p=0;p<i;++p)r=t.xorshift(r),u.X=r/4294967296,r=t.xorshift(r),u.Y=r/4294967296,r=t.xorshift(r),u.Z=r/4294967296,l={x:u.X+a,y:u.Y+o,z:u.Z+s},t.insert(c,n(e,l))}return c.map((function(t){return t<0?0:t>1?1:t}))}},{key:"setSeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;this._seedValue=t}},{key:"Euclidean",value:function(e,n,r){return this.noise({x:e,y:n,z:r},t.EuclideanDistance)}},{key:"Manhattan",value:function(e,n,r){return this.noise({x:e,y:n,z:r},t.ManhattanDistance)}}],[{key:"xorshift",value:function(t){var e=t^t>>12;return e^=e<<25,2*(e^=e>>27)}},{key:"hash",value:function(t,e,n){return 16777619*(16777619*(16777619*(2166136261^t)^e)^n)&4294967295}},{key:"d",value:function(t,e){return[t.x-e.x,t.y-e.y,t.z-e.z]}},{key:"EuclideanDistance",value:function(e,n){return t.d(e,n).reduce((function(t,e){return t+e*e}),0)}},{key:"ManhattanDistance",value:function(e,n){return t.d(e,n).reduce((function(t,e){return t+Math.abs(e)}),0)}},{key:"probLookup",value:function(t){return(t&=4294967295)<393325350?1:t<1022645910?2:t<1861739990?3:t<2700834071?4:t<3372109335?5:t<3819626178?6:t<4075350088?7:t<4203212043?8:9}},{key:"insert",value:function(t,e){for(var n,r=t.length-1;r>=0&&!(e>t[r]);r--)n=t[r],t[r]=e,r+1<t.length&&(t[r+1]=n)}}]),t}(),y=function(){function t(){Object(l.a)(this,t)}return Object(c.a)(t,null,[{key:"noise",value:function(t,e,n,r,i){for(var a=0,o=1,s=0,u=0;u<r;u++)s+=i(t*o,e*o,n*o)/o,a+=1/o,o*=2;return s/a}}]),t}(),_=new d,b=new m,x=new g,w={Perlin:{noise:_.noise,setSeed:_.setSeed,create:function(t){return new d(t)}},Simplex:{noise:b.noise,setSeed:b.setSeed,create:function(t){return new m(t)}},Worley:{Euclidean:x.Euclidean,Manhattan:x.Manhattan,setSeed:x.setSeed,create:function(t){return new g(t)}},Fractal:{noise:y.noise}};e.a=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return a.default[t.type](t,e,n)};var r,i=n(151),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){var r=n(91),i={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},a={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:i,input:i,output:i,button:i,datalist:i,textarea:i,option:{option:!0},optgroup:{optgroup:!0}},o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s={__proto__:null,math:!0,svg:!0},u={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},l=/\s|\//;function c(t,e){this._options=e||{},this._cbs=t||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._foreignContext=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(r=this._options.Tokenizer),this._tokenizer=new r(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}n(53)(c,n(157).EventEmitter),c.prototype._updatePosition=function(t){null===this.endIndex?this._tokenizer._sectionStart<=t?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-t:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},c.prototype.ontext=function(t){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(t)},c.prototype.onopentagname=function(t){if(this._lowerCaseTagNames&&(t=t.toLowerCase()),this._tagname=t,!this._options.xmlMode&&t in a)for(var e;(e=this._stack[this._stack.length-1])in a[t];this.onclosetag(e));!this._options.xmlMode&&t in o||(this._stack.push(t),t in s?this._foreignContext.push(!0):t in u&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(t),this._cbs.onopentag&&(this._attribs={})},c.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in o&&this._cbs.onclosetag(this._tagname),this._tagname=""},c.prototype.onclosetag=function(t){if(this._updatePosition(1),this._lowerCaseTagNames&&(t=t.toLowerCase()),(t in s||t in u)&&this._foreignContext.pop(),!this._stack.length||t in o&&!this._options.xmlMode)this._options.xmlMode||"br"!==t&&"p"!==t||(this.onopentagname(t),this._closeCurrentTag());else{var e=this._stack.lastIndexOf(t);if(-1!==e)if(this._cbs.onclosetag)for(e=this._stack.length-e;e--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=e;else"p"!==t||this._options.xmlMode||(this.onopentagname(t),this._closeCurrentTag())}},c.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},c.prototype._closeCurrentTag=function(){var t=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===t&&(this._cbs.onclosetag&&this._cbs.onclosetag(t),this._stack.pop())},c.prototype.onattribname=function(t){this._lowerCaseAttributeNames&&(t=t.toLowerCase()),this._attribname=t},c.prototype.onattribdata=function(t){this._attribvalue+=t},c.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},c.prototype._getInstructionName=function(t){var e=t.search(l),n=e<0?t:t.substr(0,e);return this._lowerCaseTagNames&&(n=n.toLowerCase()),n},c.prototype.ondeclaration=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("!"+e,"!"+t)}},c.prototype.onprocessinginstruction=function(t){if(this._cbs.onprocessinginstruction){var e=this._getInstructionName(t);this._cbs.onprocessinginstruction("?"+e,"?"+t)}},c.prototype.oncomment=function(t){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(t),this._cbs.oncommentend&&this._cbs.oncommentend()},c.prototype.oncdata=function(t){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(t),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+t+"]]")},c.prototype.onerror=function(t){this._cbs.onerror&&this._cbs.onerror(t)},c.prototype.onend=function(){if(this._cbs.onclosetag)for(var t=this._stack.length;t>0;this._cbs.onclosetag(this._stack[--t]));this._cbs.onend&&this._cbs.onend()},c.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},c.prototype.parseComplete=function(t){this.reset(),this.end(t)},c.prototype.write=function(t){this._tokenizer.write(t)},c.prototype.end=function(t){this._tokenizer.end(t)},c.prototype.pause=function(){this._tokenizer.pause()},c.prototype.resume=function(){this._tokenizer.resume()},c.prototype.parseChunk=c.prototype.write,c.prototype.done=c.prototype.end,t.exports=c},function(t,e,n){t.exports=mt;var r=n(152),i=n(154),a=n(155),o=n(156),s=0,u=s++,l=s++,c=s++,h=s++,f=s++,d=s++,p=s++,v=s++,m=s++,g=s++,y=s++,_=s++,b=s++,x=s++,w=s++,S=s++,k=s++,T=s++,E=s++,C=s++,O=s++,M=s++,A=s++,P=s++,L=s++,R=s++,j=s++,I=s++,D=s++,N=s++,B=s++,z=s++,F=s++,V=s++,U=s++,q=s++,H=s++,W=s++,G=s++,X=s++,Y=s++,Z=s++,Q=s++,J=s++,K=s++,$=s++,tt=s++,et=s++,nt=s++,rt=s++,it=s++,at=s++,ot=s++,st=s++,ut=s++,lt=0,ct=lt++,ht=lt++,ft=lt++;function dt(t){return" "===t||"\n"===t||"\t"===t||"\f"===t||"\r"===t}function pt(t,e,n){var r=t.toLowerCase();return t===r?function(t){t===r?this._state=e:(this._state=n,this._index--)}:function(i){i===r||i===t?this._state=e:(this._state=n,this._index--)}}function vt(t,e){var n=t.toLowerCase();return function(r){r===n||r===t?this._state=e:(this._state=c,this._index--)}}function mt(t,e){this._state=u,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=u,this._special=ct,this._cbs=e,this._running=!0,this._ended=!1,this._xmlMode=!(!t||!t.xmlMode),this._decodeEntities=!(!t||!t.decodeEntities)}mt.prototype._stateText=function(t){"<"===t?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=l,this._sectionStart=this._index):this._decodeEntities&&this._special===ct&&"&"===t&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=u,this._state=it,this._sectionStart=this._index)},mt.prototype._stateBeforeTagName=function(t){"/"===t?this._state=f:"<"===t?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===t||this._special!==ct||dt(t)?this._state=u:"!"===t?(this._state=w,this._sectionStart=this._index+1):"?"===t?(this._state=k,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==t&&"S"!==t?c:B,this._sectionStart=this._index)},mt.prototype._stateInTagName=function(t){("/"===t||">"===t||dt(t))&&(this._emitToken("onopentagname"),this._state=v,this._index--)},mt.prototype._stateBeforeCloseingTagName=function(t){dt(t)||(">"===t?this._state=u:this._special!==ct?"s"===t||"S"===t?this._state=z:(this._state=u,this._index--):(this._state=d,this._sectionStart=this._index))},mt.prototype._stateInCloseingTagName=function(t){(">"===t||dt(t))&&(this._emitToken("onclosetag"),this._state=p,this._index--)},mt.prototype._stateAfterCloseingTagName=function(t){">"===t&&(this._state=u,this._sectionStart=this._index+1)},mt.prototype._stateBeforeAttributeName=function(t){">"===t?(this._cbs.onopentagend(),this._state=u,this._sectionStart=this._index+1):"/"===t?this._state=h:dt(t)||(this._state=m,this._sectionStart=this._index)},mt.prototype._stateInSelfClosingTag=function(t){">"===t?(this._cbs.onselfclosingtag(),this._state=u,this._sectionStart=this._index+1):dt(t)||(this._state=v,this._index--)},mt.prototype._stateInAttributeName=function(t){("="===t||"/"===t||">"===t||dt(t))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=g,this._index--)},mt.prototype._stateAfterAttributeName=function(t){"="===t?this._state=y:"/"===t||">"===t?(this._cbs.onattribend(),this._state=v,this._index--):dt(t)||(this._cbs.onattribend(),this._state=m,this._sectionStart=this._index)},mt.prototype._stateBeforeAttributeValue=function(t){'"'===t?(this._state=_,this._sectionStart=this._index+1):"'"===t?(this._state=b,this._sectionStart=this._index+1):dt(t)||(this._state=x,this._sectionStart=this._index,this._index--)},mt.prototype._stateInAttributeValueDoubleQuotes=function(t){'"'===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=it,this._sectionStart=this._index)},mt.prototype._stateInAttributeValueSingleQuotes=function(t){"'"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=it,this._sectionStart=this._index)},mt.prototype._stateInAttributeValueNoQuotes=function(t){dt(t)||">"===t?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v,this._index--):this._decodeEntities&&"&"===t&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=it,this._sectionStart=this._index)},mt.prototype._stateBeforeDeclaration=function(t){this._state="["===t?M:"-"===t?T:S},mt.prototype._stateInDeclaration=function(t){">"===t&&(this._cbs.ondeclaration(this._getSection()),this._state=u,this._sectionStart=this._index+1)},mt.prototype._stateInProcessingInstruction=function(t){">"===t&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=u,this._sectionStart=this._index+1)},mt.prototype._stateBeforeComment=function(t){"-"===t?(this._state=E,this._sectionStart=this._index+1):this._state=S},mt.prototype._stateInComment=function(t){"-"===t&&(this._state=C)},mt.prototype._stateAfterComment1=function(t){this._state="-"===t?O:E},mt.prototype._stateAfterComment2=function(t){">"===t?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=u,this._sectionStart=this._index+1):"-"!==t&&(this._state=E)},mt.prototype._stateBeforeCdata1=pt("C",A,S),mt.prototype._stateBeforeCdata2=pt("D",P,S),mt.prototype._stateBeforeCdata3=pt("A",L,S),mt.prototype._stateBeforeCdata4=pt("T",R,S),mt.prototype._stateBeforeCdata5=pt("A",j,S),mt.prototype._stateBeforeCdata6=function(t){"["===t?(this._state=I,this._sectionStart=this._index+1):(this._state=S,this._index--)},mt.prototype._stateInCdata=function(t){"]"===t&&(this._state=D)},mt.prototype._stateAfterCdata1=function(t){this._state="]"===t?N:I},mt.prototype._stateAfterCdata2=function(t){">"===t?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=u,this._sectionStart=this._index+1):"]"!==t&&(this._state=I)},mt.prototype._stateBeforeSpecial=function(t){"c"===t||"C"===t?this._state=F:"t"===t||"T"===t?this._state=Q:(this._state=c,this._index--)},mt.prototype._stateBeforeSpecialEnd=function(t){this._special!==ht||"c"!==t&&"C"!==t?this._special!==ft||"t"!==t&&"T"!==t?this._state=u:this._state=tt:this._state=W},mt.prototype._stateBeforeScript1=vt("R",V),mt.prototype._stateBeforeScript2=vt("I",U),mt.prototype._stateBeforeScript3=vt("P",q),mt.prototype._stateBeforeScript4=vt("T",H),mt.prototype._stateBeforeScript5=function(t){("/"===t||">"===t||dt(t))&&(this._special=ht),this._state=c,this._index--},mt.prototype._stateAfterScript1=pt("R",G,u),mt.prototype._stateAfterScript2=pt("I",X,u),mt.prototype._stateAfterScript3=pt("P",Y,u),mt.prototype._stateAfterScript4=pt("T",Z,u),mt.prototype._stateAfterScript5=function(t){">"===t||dt(t)?(this._special=ct,this._state=d,this._sectionStart=this._index-6,this._index--):this._state=u},mt.prototype._stateBeforeStyle1=vt("Y",J),mt.prototype._stateBeforeStyle2=vt("L",K),mt.prototype._stateBeforeStyle3=vt("E",$),mt.prototype._stateBeforeStyle4=function(t){("/"===t||">"===t||dt(t))&&(this._special=ft),this._state=c,this._index--},mt.prototype._stateAfterStyle1=pt("Y",et,u),mt.prototype._stateAfterStyle2=pt("L",nt,u),mt.prototype._stateAfterStyle3=pt("E",rt,u),mt.prototype._stateAfterStyle4=function(t){">"===t||dt(t)?(this._special=ct,this._state=d,this._sectionStart=this._index-5,this._index--):this._state=u},mt.prototype._stateBeforeEntity=pt("#",at,ot),mt.prototype._stateBeforeNumericEntity=pt("X",ut,st),mt.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var t=this._buffer.substring(this._sectionStart+1,this._index),e=this._xmlMode?o:i;e.hasOwnProperty(t)&&(this._emitPartial(e[t]),this._sectionStart=this._index+1)}},mt.prototype._parseLegacyEntity=function(){var t=this._sectionStart+1,e=this._index-t;for(e>6&&(e=6);e>=2;){var n=this._buffer.substr(t,e);if(a.hasOwnProperty(n))return this._emitPartial(a[n]),void(this._sectionStart+=e+1);e--}},mt.prototype._stateInNamedEntity=function(t){";"===t?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(t<"a"||t>"z")&&(t<"A"||t>"Z")&&(t<"0"||t>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==u?"="!==t&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},mt.prototype._decodeNumericEntity=function(t,e){var n=this._sectionStart+t;if(n!==this._index){var i=this._buffer.substring(n,this._index),a=parseInt(i,e);this._emitPartial(r(a)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},mt.prototype._stateInNumericEntity=function(t){";"===t?(this._decodeNumericEntity(2,10),this._sectionStart++):(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},mt.prototype._stateInHexEntity=function(t){";"===t?(this._decodeNumericEntity(3,16),this._sectionStart++):(t<"a"||t>"f")&&(t<"A"||t>"F")&&(t<"0"||t>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},mt.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===u?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},mt.prototype.write=function(t){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=t,this._parse()},mt.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var t=this._buffer.charAt(this._index);this._state===u?this._stateText(t):this._state===l?this._stateBeforeTagName(t):this._state===c?this._stateInTagName(t):this._state===f?this._stateBeforeCloseingTagName(t):this._state===d?this._stateInCloseingTagName(t):this._state===p?this._stateAfterCloseingTagName(t):this._state===h?this._stateInSelfClosingTag(t):this._state===v?this._stateBeforeAttributeName(t):this._state===m?this._stateInAttributeName(t):this._state===g?this._stateAfterAttributeName(t):this._state===y?this._stateBeforeAttributeValue(t):this._state===_?this._stateInAttributeValueDoubleQuotes(t):this._state===b?this._stateInAttributeValueSingleQuotes(t):this._state===x?this._stateInAttributeValueNoQuotes(t):this._state===w?this._stateBeforeDeclaration(t):this._state===S?this._stateInDeclaration(t):this._state===k?this._stateInProcessingInstruction(t):this._state===T?this._stateBeforeComment(t):this._state===E?this._stateInComment(t):this._state===C?this._stateAfterComment1(t):this._state===O?this._stateAfterComment2(t):this._state===M?this._stateBeforeCdata1(t):this._state===A?this._stateBeforeCdata2(t):this._state===P?this._stateBeforeCdata3(t):this._state===L?this._stateBeforeCdata4(t):this._state===R?this._stateBeforeCdata5(t):this._state===j?this._stateBeforeCdata6(t):this._state===I?this._stateInCdata(t):this._state===D?this._stateAfterCdata1(t):this._state===N?this._stateAfterCdata2(t):this._state===B?this._stateBeforeSpecial(t):this._state===z?this._stateBeforeSpecialEnd(t):this._state===F?this._stateBeforeScript1(t):this._state===V?this._stateBeforeScript2(t):this._state===U?this._stateBeforeScript3(t):this._state===q?this._stateBeforeScript4(t):this._state===H?this._stateBeforeScript5(t):this._state===W?this._stateAfterScript1(t):this._state===G?this._stateAfterScript2(t):this._state===X?this._stateAfterScript3(t):this._state===Y?this._stateAfterScript4(t):this._state===Z?this._stateAfterScript5(t):this._state===Q?this._stateBeforeStyle1(t):this._state===J?this._stateBeforeStyle2(t):this._state===K?this._stateBeforeStyle3(t):this._state===$?this._stateBeforeStyle4(t):this._state===tt?this._stateAfterStyle1(t):this._state===et?this._stateAfterStyle2(t):this._state===nt?this._stateAfterStyle3(t):this._state===rt?this._stateAfterStyle4(t):this._state===it?this._stateBeforeEntity(t):this._state===at?this._stateBeforeNumericEntity(t):this._state===ot?this._stateInNamedEntity(t):this._state===st?this._stateInNumericEntity(t):this._state===ut?this._stateInHexEntity(t):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},mt.prototype.pause=function(){this._running=!1},mt.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},mt.prototype.end=function(t){this._ended&&this._cbs.onerror(Error(".end() after done!")),t&&this.write(t),this._ended=!0,this._running&&this._finish()},mt.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},mt.prototype._handleTrailingData=function(){var t=this._buffer.substr(this._sectionStart);this._state===I||this._state===D||this._state===N?this._cbs.oncdata(t):this._state===E||this._state===C||this._state===O?this._cbs.oncomment(t):this._state!==ot||this._xmlMode?this._state!==st||this._xmlMode?this._state!==ut||this._xmlMode?this._state!==c&&this._state!==v&&this._state!==y&&this._state!==g&&this._state!==m&&this._state!==b&&this._state!==_&&this._state!==x&&this._state!==d&&this._cbs.ontext(t):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},mt.prototype.reset=function(){mt.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},mt.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},mt.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},mt.prototype._emitToken=function(t){this._cbs[t](this._getSection()),this._sectionStart=-1},mt.prototype._emitPartial=function(t){this._baseState!==u?this._cbs.onattribdata(t):this._cbs.ontext(t)}},function(t,e,n){var r=n(46),i=/\s+/g,a=n(93),o=n(158);function s(t,e,n){"object"===typeof t?(n=e,e=t,t=null):"function"===typeof e&&(n=e,e=u),this._callback=t,this._options=e||u,this._elementCB=n,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var u={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};s.prototype.onparserinit=function(t){this._parser=t},s.prototype.onreset=function(){s.call(this,this._callback,this._options,this._elementCB)},s.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},s.prototype._handleCallback=s.prototype.onerror=function(t){if("function"===typeof this._callback)this._callback(t,this.dom);else if(t)throw t},s.prototype.onclosetag=function(){var t=this._tagStack.pop();this._options.withEndIndices&&t&&(t.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(t)},s.prototype._createDomElement=function(t){if(!this._options.withDomLvl1)return t;var e;for(var n in e="tag"===t.type?Object.create(o):Object.create(a),t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s.prototype._addDomElement=function(t){var e=this._tagStack[this._tagStack.length-1],n=e?e.children:this.dom,r=n[n.length-1];t.next=null,this._options.withStartIndices&&(t.startIndex=this._parser.startIndex),this._options.withEndIndices&&(t.endIndex=this._parser.endIndex),r?(t.prev=r,r.next=t):t.prev=null,n.push(t),t.parent=e||null},s.prototype.onopentag=function(t,e){var n={type:"script"===t?r.Script:"style"===t?r.Style:r.Tag,name:t,attribs:e,children:[]},i=this._createDomElement(n);this._addDomElement(i),this._tagStack.push(i)},s.prototype.ontext=function(t){var e,n=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(e=this.dom[this.dom.length-1]).type===r.Text)n?e.data=(e.data+t).replace(i," "):e.data+=t;else if(this._tagStack.length&&(e=this._tagStack[this._tagStack.length-1])&&(e=e.children[e.children.length-1])&&e.type===r.Text)n?e.data=(e.data+t).replace(i," "):e.data+=t;else{n&&(t=t.replace(i," "));var a=this._createDomElement({data:t,type:r.Text});this._addDomElement(a)}},s.prototype.oncomment=function(t){var e=this._tagStack[this._tagStack.length-1];if(e&&e.type===r.Comment)e.data+=t;else{var n={data:t,type:r.Comment},i=this._createDomElement(n);this._addDomElement(i),this._tagStack.push(i)}},s.prototype.oncdatastart=function(){var t={children:[{data:"",type:r.Text}],type:r.CDATA},e=this._createDomElement(t);this._addDomElement(e),this._tagStack.push(e)},s.prototype.oncommentend=s.prototype.oncdataend=function(){this._tagStack.pop()},s.prototype.onprocessinginstruction=function(t,e){var n=this._createDomElement({name:t,data:e,type:r.Directive});this._addDomElement(n)},t.exports=s},function(t,e){var n=t.exports={get firstChild(){var t=this.children;return t&&t[0]||null},get lastChild(){var t=this.children;return t&&t[t.length-1]||null},get nodeType(){return i[this.type]||i.element}},r={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},i={element:1,text:3,cdata:4,comment:8};Object.keys(r).forEach((function(t){var e=r[t];Object.defineProperty(n,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})}))},function(t,e,n){var r=t.exports;[n(160),n(168),n(169),n(170),n(171),n(172)].forEach((function(t){Object.keys(t).forEach((function(e){r[e]=t[e].bind(r)}))}))},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHTML=e.decodeHTMLStrict=e.decodeXML=void 0;var i=r(n(96)),a=r(n(164)),o=r(n(97)),s=r(n(165)),u=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function l(t){var e=h(t);return function(t){return String(t).replace(u,e)}}e.decodeXML=l(o.default),e.decodeHTMLStrict=l(i.default);var c=function(t,e){return t<e?1:-1};function h(t){return function(e){if("#"===e.charAt(1)){var n=e.charAt(2);return"X"===n||"x"===n?s.default(parseInt(e.substr(3),16)):s.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}e.decodeHTML=function(){for(var t=Object.keys(a.default).sort(c),e=Object.keys(i.default).sort(c),n=0,r=0;n<e.length;n++)t[r]===e[n]?(e[n]+=";?",r++):e[n]+=";";var o=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=h(i.default);function u(t){return";"!==t.substr(-1)&&(t+=";"),s(t)}return function(t){return String(t).replace(o,u)}}()},function(t){t.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\ud835\udd04","afr":"\ud835\udd1e","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\ud835\udd38","aopf":"\ud835\udd52","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\ud835\udc9c","ascr":"\ud835\udcb6","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\ud835\udd05","bfr":"\ud835\udd1f","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\ud835\udd39","bopf":"\ud835\udd53","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\ud835\udcb7","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\ud835\udd20","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\ud835\udd54","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\ud835\udc9e","cscr":"\ud835\udcb8","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\ud835\udd07","dfr":"\ud835\udd21","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\ud835\udd3b","dopf":"\ud835\udd55","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\ud835\udc9f","dscr":"\ud835\udcb9","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\ud835\udd08","efr":"\ud835\udd22","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\ud835\udd3c","eopf":"\ud835\udd56","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\ud835\udd09","ffr":"\ud835\udd23","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\ud835\udd3d","fopf":"\ud835\udd57","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\ud835\udcbb","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\ud835\udd0a","gfr":"\ud835\udd24","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\ud835\udd3e","gopf":"\ud835\udd58","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\ud835\udca2","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\ud835\udd25","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\ud835\udd59","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\ud835\udcbd","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\ud835\udd26","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\ud835\udd40","iopf":"\ud835\udd5a","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\ud835\udcbe","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\ud835\udd0d","jfr":"\ud835\udd27","jmath":"\u0237","Jopf":"\ud835\udd41","jopf":"\ud835\udd5b","Jscr":"\ud835\udca5","jscr":"\ud835\udcbf","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\ud835\udd0e","kfr":"\ud835\udd28","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\ud835\udd42","kopf":"\ud835\udd5c","Kscr":"\ud835\udca6","kscr":"\ud835\udcc0","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\ud835\udd0f","lfr":"\ud835\udd29","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\ud835\udd43","lopf":"\ud835\udd5d","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\ud835\udcc1","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\ud835\udd10","mfr":"\ud835\udd2a","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\ud835\udd44","mopf":"\ud835\udd5e","mp":"\u2213","mscr":"\ud835\udcc2","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\ud835\udd11","nfr":"\ud835\udd2b","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\ud835\udd5f","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\ud835\udca9","nscr":"\ud835\udcc3","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\ud835\udd12","ofr":"\ud835\udd2c","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\ud835\udd46","oopf":"\ud835\udd60","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\ud835\udcaa","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\ud835\udd13","pfr":"\ud835\udd2d","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\ud835\udd61","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\ud835\udcab","pscr":"\ud835\udcc5","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\ud835\udd14","qfr":"\ud835\udd2e","qint":"\u2a0c","qopf":"\ud835\udd62","Qopf":"\u211a","qprime":"\u2057","Qscr":"\ud835\udcac","qscr":"\ud835\udcc6","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\ud835\udd2f","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\ud835\udd63","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\ud835\udcc7","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\ud835\udd16","sfr":"\ud835\udd30","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\ud835\udd4a","sopf":"\ud835\udd64","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\ud835\udcae","sscr":"\ud835\udcc8","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\ud835\udd17","tfr":"\ud835\udd31","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\ud835\udd4b","topf":"\ud835\udd65","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\ud835\udcaf","tscr":"\ud835\udcc9","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\ud835\udd18","ufr":"\ud835\udd32","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\ud835\udd4c","uopf":"\ud835\udd66","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\ud835\udcb0","uscr":"\ud835\udcca","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\ud835\udd19","vfr":"\ud835\udd33","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\ud835\udd4d","vopf":"\ud835\udd67","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\ud835\udcb1","vscr":"\ud835\udccb","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\ud835\udd1a","wfr":"\ud835\udd34","Wopf":"\ud835\udd4e","wopf":"\ud835\udd68","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\ud835\udcb2","wscr":"\ud835\udccc","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\ud835\udd1b","xfr":"\ud835\udd35","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\ud835\udd4f","xopf":"\ud835\udd69","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\ud835\udcb3","xscr":"\ud835\udccd","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\ud835\udd1c","yfr":"\ud835\udd36","YIcy":"\u0407","yicy":"\u0457","Yopf":"\ud835\udd50","yopf":"\ud835\udd6a","Yscr":"\ud835\udcb4","yscr":"\ud835\udcce","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\ud835\udd37","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\ud835\udd6b","Zopf":"\u2124","Zscr":"\ud835\udcb5","zscr":"\ud835\udccf","zwj":"\u200d","zwnj":"\u200c"}')},function(t){t.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=void 0;var i=c(r(n(97)).default),a=h(i);e.encodeXML=m(i);var o,s,u=c(r(n(96)).default),l=h(u);function c(t){return Object.keys(t).sort().reduce((function(e,n){return e[t[n]]="&"+n+";",e}),{})}function h(t){for(var e=[],n=[],r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];1===a.length?e.push("\\"+a):n.push(a)}e.sort();for(var o=0;o<e.length-1;o++){for(var s=o;s<e.length-1&&e[s].charCodeAt(1)+1===e[s+1].charCodeAt(1);)s+=1;var u=1+s-o;u<3||e.splice(o,u,e[o]+"-"+e[s])}return n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}e.encodeHTML=(o=u,s=l,function(t){return t.replace(s,(function(t){return o[t]})).replace(f,p)}),e.encodeNonAsciiHTML=m(u);var f=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,d=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function p(t){return"&#x"+(t.length>1?d(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}var v=new RegExp(a.source+"|"+f.source,"g");function m(t){return function(e){return e.replace(v,(function(e){return t[e]||p(e)}))}}e.escape=function(t){return t.replace(v,p)},e.escapeUTF8=function(t){return t.replace(a,p)}},function(t,e,n){t.exports=s;var r=n(90),i=n(174).Writable,a=n(175).StringDecoder,o=n(68).Buffer;function s(t,e){var n=this._parser=new r(t,e),o=this._decoder=new a;i.call(this,{decodeStrings:!1}),this.once("finish",(function(){n.end(o.end())}))}n(53)(s,i),s.prototype._write=function(t,e,n){t instanceof o&&(t=this._decoder.write(t)),this._parser.write(t),n()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){var n=r({},(0,i.default)(t),{key:e});"string"===typeof n.style||n.style instanceof String?n.style=(0,a.default)(n.style):delete n.style;return n};var i=o(n(184)),a=o(n(187));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i.hasOwnProperty(t)||(i[t]=r.test(t));return i[t]};var r=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,i={}},,,function(t,e,n){var r=n(36),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(66))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(108),i=n(241);t.exports=function(t){return r((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e}))}},function(t,e,n){var r=n(71),i=n(235),a=n(237);t.exports=function(t,e){return a(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(242),i=n(72),a=n(34),o=n(73),s=n(110),u=n(112),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&u(t),d=n||c||h||f,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!l.call(t,m)||d&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},function(t,e,n){var r=n(245),i=n(56),a=n(75),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(57),i=n(255),a=n(256),o=n(257),s=n(258),u=n(259);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e,n){var r=n(260),i=n(267),a=n(269),o=n(270),s=n(271);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){(function(t){var r=n(28),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(74)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(78),i=n(79),a=n(77),o=n(119),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,a(t)),t=i(t);return e}:o;t.exports=s},function(t,e,n){var r=n(78),i=n(34);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e,n){var r=n(81);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(291),i=n(79),a=n(55);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:r(i(t))}},function(t,e,n){var r=n(43),i=n(29);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(37),i=n(34),a=n(29);t.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(316),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},function(t,e,n){var r=n(37),i=n(29);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(70),i=n(54);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(49),i=n(82),a=n(34),o=n(127),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(134)},function(t,e,n){"use strict";var r=n(148),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?o:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&t(e,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(e),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{l(e,g,y)}catch(_){}}}}return e}},function(t,e,n){"use strict";var r=n(65),i=60103,a=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var o=60109,s=60110,u=60112;e.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}function g(){}function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},g.prototype=m.prototype;var _=y.prototype=new g;_.constructor=y,r(_,m.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,n){var r,a={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,r)&&!w.hasOwnProperty(r)&&(a[r]=e[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:t,key:o,ref:s,props:a,_owner:b.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var T=/\/+/g;function E(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,n,r,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=t),t=""===r?"."+E(u,0):r,Array.isArray(o)?(n="",null!=t&&(n=t.replace(T,"$&/")+"/"),C(o,e,n,"",(function(t){return t}))):null!=o&&(k(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+t)),e.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=r+E(s=t[l],l);u+=C(s,e,n,c,o)}else if("function"===typeof(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=c.call(t),l=0;!(s=t.next()).done;)u+=C(s=s.value,e,n,c=r+E(s,l++),o);else if("object"===s)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function O(t,e,n){if(null==t)return t;var r=[],i=0;return C(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function M(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var A={current:null};function P(){var t=A.current;if(null===t)throw Error(d(321));return t}var L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error(d(143));return t}},e.Component=m,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var a=r({},t.props),o=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=b.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];a.children=l}return{$$typeof:i,type:t.type,key:o,ref:s,props:a,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:l,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return P().useCallback(t,e)},e.useContext=function(t,e){return P().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return P().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return P().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return P().useLayoutEffect(t,e)},e.useMemo=function(t,e){return P().useMemo(t,e)},e.useReducer=function(t,e,n){return P().useReducer(t,e,n)},e.useRef=function(t){return P().useRef(t)},e.useState=function(t){return P().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var r=n(10),i=n(65),a=n(135);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(t,e,n,r,i,a,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(v,t)||!d.call(p,t)&&(f.test(t)?v[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,k=60107,T=60108,E=60114,C=60109,O=60110,M=60112,A=60113,P=60120,L=60115,R=60116,j=60121,I=60128,D=60129,N=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),S=z("react.portal"),k=z("react.fragment"),T=z("react.strict_mode"),E=z("react.profiler"),C=z("react.provider"),O=z("react.context"),M=z("react.forward_ref"),A=z("react.suspense"),P=z("react.suspense_list"),L=z("react.memo"),R=z("react.lazy"),j=z("react.block"),z("react.scope"),I=z("react.opaque.id"),D=z("react.debug_trace_mode"),N=z("react.offscreen"),B=z("react.legacy_hidden")}var F,V="function"===typeof Symbol&&Symbol.iterator;function U(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=V&&t[V]||t["@@iterator"])?t:null}function q(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var H=!1;function W(t,e){if(!t||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?q(t):""}function G(t){switch(t.tag){case 5:return q(t.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1);case 11:return t=W(t.type.render,!1);case 22:return t=W(t.type._render,!1);case 1:return t=W(t.type,!0);default:return""}}function X(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case L:return X(t.type);case j:return X(t._render);case R:e=t._payload,t=t._init;try{return X(t(e))}catch(n){}}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Z(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Q(t){t._valueTracker||(t._valueTracker=function(t){var e=Z(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function J(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function K(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Y(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&K(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function at(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function ot(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function lt(t,e){var n=Y(e.value),r=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var vt,mt,gt=(mt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((vt=vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return mt(t,e)}))}:mt);function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var _t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function xt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||_t.hasOwnProperty(t)&&_t[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(_t).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_t[e]=_t[t]}))}));var St=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(t,e){if(e){if(St[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function Tt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Et(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,Ot=null,Mt=null;function At(t){if(t=ti(t)){if("function"!==typeof Ct)throw Error(o(280));var e=t.stateNode;e&&(e=ni(e),Ct(t.stateNode,t.type,e))}}function Pt(t){Ot?Mt?Mt.push(t):Mt=[t]:Ot=t}function Lt(){if(Ot){var t=Ot,e=Mt;if(Mt=Ot=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Rt(t,e){return t(e)}function jt(t,e,n,r,i){return t(e,n,r,i)}function It(){}var Dt=Rt,Nt=!1,Bt=!1;function zt(){null===Ot&&null===Mt||(It(),Lt())}function Ft(t,e){var n=t.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Vt=!1;if(h)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(mt){Vt=!1}function qt(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Ht=!1,Wt=null,Gt=!1,Xt=null,Yt={onError:function(t){Ht=!0,Wt=t}};function Zt(t,e,n,r,i,a,o,s,u){Ht=!1,Wt=null,qt.apply(Yt,arguments)}function Qt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Kt(t){if(Qt(t)!==t)throw Error(o(188))}function $t(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Qt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Kt(i),t;if(a===r)return Kt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,ae=!1,oe=[],se=null,ue=null,le=null,ce=new Map,he=new Map,fe=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ve(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function me(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t=pe(e,n,r,i,a),null!==e&&(null!==(e=ti(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ge(t){var e=$r(t.target);if(null!==e){var n=Qt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Jt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){a.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ti(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function _e(t,e,n){ye(t)&&n.delete(e)}function be(){for(ae=!1;0<oe.length;){var t=oe[0];if(null!==t.blockedOn){null!==(t=ti(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&oe.shift()}null!==se&&ye(se)&&(se=null),null!==ue&&ye(ue)&&(ue=null),null!==le&&ye(le)&&(le=null),ce.forEach(_e),he.forEach(_e)}function xe(t,e){t.blockedOn===e&&(t.blockedOn=null,ae||(ae=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,be)))}function we(t){function e(e){return xe(e,t)}if(0<oe.length){xe(oe[0],t);for(var n=1;n<oe.length;n++){var r=oe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==se&&xe(se,t),null!==ue&&xe(ue,t),null!==le&&xe(le,t),ce.forEach(e),he.forEach(e),n=0;n<fe.length;n++)(r=fe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<fe.length&&null===(n=fe[0]).blockedOn;)ge(n),null===n.blockedOn&&fe.shift()}function Se(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ke={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionend:Se("Transition","TransitionEnd")},Te={},Ee={};function Ce(t){if(Te[t])return Te[t];if(!ke[t])return t;var e,n=ke[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ee)return Te[t]=n[e];return t}h&&(Ee=document.createElement("div").style,"AnimationEvent"in window||(delete ke.animationend.animation,delete ke.animationiteration.animation,delete ke.animationstart.animation),"TransitionEvent"in window||delete ke.transitionend.transition);var Oe=Ce("animationend"),Me=Ce("animationiteration"),Ae=Ce("animationstart"),Pe=Ce("transitionend"),Le=new Map,Re=new Map,je=["abort","abort",Oe,"animationEnd",Me,"animationIteration",Ae,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pe,"transitionEnd","waiting","waiting"];function Ie(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Re.set(r,e),Le.set(r,i),l(i,[r])}}(0,a.unstable_now)();var De=8;function Ne(t){if(0!==(1&t))return De=15,1;if(0!==(2&t))return De=14,2;if(0!==(4&t))return De=13,4;var e=24&t;return 0!==e?(De=12,e):0!==(32&t)?(De=11,32):0!==(e=192&t)?(De=10,e):0!==(256&t)?(De=9,256):0!==(e=3584&t)?(De=8,e):0!==(4096&t)?(De=7,4096):0!==(e=4186112&t)?(De=6,e):0!==(e=62914560&t)?(De=5,e):67108864&t?(De=4,67108864):0!==(134217728&t)?(De=3,134217728):0!==(e=805306368&t)?(De=2,e):0!==(1073741824&t)?(De=1,1073741824):(De=8,t)}function Be(t,e){var n=t.pendingLanes;if(0===n)return De=0;var r=0,i=0,a=t.expiredLanes,o=t.suspendedLanes,s=t.pingedLanes;if(0!==a)r=a,i=De=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ne(u),i=De):0!==(s&=a)&&(r=Ne(s),i=De)}else 0!==(a=n&~o)?(r=Ne(a),i=De):0!==s&&(r=Ne(s),i=De);if(0===r)return 0;if(r=n&((0>(r=31-He(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&o)){if(Ne(e),i<=De)return e;De=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-He(e)),r|=t[n],e&=~i;return r}function ze(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Fe(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ve(24&~e))?Fe(10,e):t;case 10:return 0===(t=Ve(192&~e))?Fe(8,e):t;case 8:return 0===(t=Ve(3584&~e))&&(0===(t=Ve(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ve(805306368&~e))&&(e=268435456),e}throw Error(o(358,t))}function Ve(t){return t&-t}function Ue(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qe(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-He(e)]=n}var He=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(We(t)/Ge|0)|0},We=Math.log,Ge=Math.LN2;var Xe=a.unstable_UserBlockingPriority,Ye=a.unstable_runWithPriority,Ze=!0;function Qe(t,e,n,r){Nt||It();var i=Ke,a=Nt;Nt=!0;try{jt(i,t,e,n,r)}finally{(Nt=a)||zt()}}function Je(t,e,n,r){Ye(Xe,Ke.bind(null,t,e,n,r))}function Ke(t,e,n,r){var i;if(Ze)if((i=0===(4&e))&&0<oe.length&&-1<de.indexOf(t))t=pe(null,t,e,n,r),oe.push(t);else{var a=$e(t,e,n,r);if(null===a)i&&ve(t,r);else{if(i){if(-1<de.indexOf(t))return t=pe(a,t,e,n,r),void oe.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return se=me(se,t,e,n,r,i),!0;case"dragenter":return ue=me(ue,t,e,n,r,i),!0;case"mouseover":return le=me(le,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return ce.set(a,me(ce.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,he.set(a,me(he.get(a)||null,t,e,n,r,i)),!0}return!1}(a,t,e,n,r))return;ve(t,r)}Lr(t,e,r,null,n)}}}function $e(t,e,n,r){var i=Et(r);if(null!==(i=$r(i))){var a=Qt(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Jt(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function an(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function on(){return!0}function sn(){return!1}function un(t){function e(e,n,r,i,a){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),e}var ln,cn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(ln=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=ln=0,hn=t),ln)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),gn=un(mn),yn=un(i({},mn,{dataTransfer:0})),_n=un(i({},pn,{relatedTarget:0})),bn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=un(i({},fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=un(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Tn[t])&&!!e[t]}function Cn(){return En}var On=un(i({},pn,{key:function(t){if(t.key){var e=Sn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=an(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?kn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?an(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?an(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Mn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=un(i({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],jn=h&&"CompositionEvent"in window,In=null;h&&"documentMode"in document&&(In=document.documentMode);var Dn=h&&"TextEvent"in window&&!In,Nn=h&&(!jn||In&&8<In&&11>=In),Bn=String.fromCharCode(32),zn=!1;function Fn(t,e){switch(t){case"keyup":return-1!==Rn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!qn[t.type]:"textarea"===e}function Wn(t,e,n,r){Pt(r),0<(e=jr(e,"onChange")).length&&(n=new dn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gn=null,Xn=null;function Yn(t){Er(t,0)}function Zn(t){if(J(ei(t)))return t}function Qn(t,e){if("change"===t)return e}var Jn=!1;if(h){var Kn;if(h){var $n="oninput"in document;if(!$n){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),$n="function"===typeof tr.oninput}Kn=$n}else Kn=!1;Jn=Kn&&(!document.documentMode||9<document.documentMode)}function er(){Gn&&(Gn.detachEvent("onpropertychange",nr),Xn=Gn=null)}function nr(t){if("value"===t.propertyName&&Zn(Xn)){var e=[];if(Wn(e,Xn,t,Et(t)),t=Yn,Nt)t(e);else{Nt=!0;try{Rt(t,e)}finally{Nt=!1,zt()}}}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Gn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Zn(Xn)}function ar(t,e){if("click"===t)return Zn(e)}function or(t,e){if("input"===t||"change"===t)return Zn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ur=Object.prototype.hasOwnProperty;function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(e,n[r])||!sr(t[n[r]],e[n[r]]))return!1;return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hr(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function fr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?fr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=K();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=K((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var vr=h&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,_r=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=jr(gr,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}Ie("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ie("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ie(je,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<xr.length;wr++)Re.set(xr[wr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Tr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,u,l){if(Zt.apply(this,arguments),Ht){if(!Ht)throw Error(o(198));var c=Wt;Ht=!1,Wt=null,Gt||(Gt=!0,Xt=c)}}(r,e,void 0,t),t.currentTarget=null}function Er(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break t;Tr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break t;Tr(i,s,l),a=u}}}if(Gt)throw t=Xt,Gt=!1,Xt=null,t}function Cr(t,e){var n=ri(e),r=t+"__bubble";n.has(r)||(Pr(e,t,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Mr(t){t[Or]||(t[Or]=!0,s.forEach((function(e){kr.has(e)||Ar(e,!1,t,null),Ar(e,!0,t,null)})))}function Ar(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===t&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!e&&kr.has(t)){if("scroll"!==t)return;i|=2,a=r}var o=ri(a),s=t+"__"+(e?"capture":"bubble");o.has(s)||(e&&(i|=4),Pr(a,t,i,e),o.add(s))}function Pr(t,e,n,r){var i=Re.get(e);switch(void 0===i?2:i){case 0:i=Qe;break;case 1:i=Je;break;default:i=Ke}n=i.bind(null,e,n,t),i=void 0,!Vt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lr(t,e,n,r,i){var a=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=$r(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Bt)return t(e,n);Bt=!0;try{Dt(t,e,n)}finally{Bt=!1,zt()}}((function(){var r=a,i=Et(n),o=[];t:{var s=Le.get(t);if(void 0!==s){var u=dn,l=t;switch(t){case"keypress":if(0===an(n))break t;case"keydown":case"keyup":u=On;break;case"focusin":l="focus",u=_n;break;case"focusout":l="blur",u=_n;break;case"beforeblur":case"afterblur":u=_n;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Oe:case Me:case Ae:u=bn;break;case Pe:u=Pn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Mn}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ft(p,f))&&c.push(Rr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(l=n.relatedTarget||n.fromElement)||!$r(l)&&!l[Jr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?$r(l):null)&&(l!==(h=Qt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=Mn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ei(u),d=null==l?s:ei(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,$r(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)t:{for(f=l,p=0,d=c=u;d;d=Ir(d))p++;for(d=0,v=f;v;v=Ir(v))d++;for(;0<p-d;)c=Ir(c),p--;for(;0<d-p;)f=Ir(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break t;c=Ir(c),f=Ir(f)}c=null}else c=null;null!==u&&Dr(o,s,u,c,!1),null!==l&&null!==h&&Dr(o,h,l,c,!0)}if("select"===(u=(s=r?ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(Hn(s))if(Jn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(t,r))?Wn(o,m,n,i):(g&&g(t,s,r),"focusout"===t&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&it(s,"number",s.value)),g=r?ei(r):window,t){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(jn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Un?Fn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Nn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==_?"onCompositionEnd"===_&&Un&&(y=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Un=!0)),0<(g=jr(r,_)).length&&(_=new wn(_,t,null,n,i),o.push({event:_,listeners:g}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Dn?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(zn=!0,Bn);case"textInput":return(t=e.data)===Bn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!jn&&Fn(t,e)?(t=rn(),nn=en=tn=null,Un=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Er(o,e)}))}function Rr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ft(t,n))&&r.unshift(Rr(t,a,i)),null!=(a=Ft(t,e))&&r.push(Rr(t,a,i))),t=t.return}return r}function Ir(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Dr(t,e,n,r,i){for(var a=e._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ft(n,a))&&o.unshift(Rr(n,u,s)):i||null!=(u=Ft(n,a))&&o.push(Rr(n,u,s))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}function Nr(){}var Br=null,zr=null;function Fr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Ur="function"===typeof setTimeout?setTimeout:void 0,qr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Wr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Gr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Xr=0;var Yr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Yr,Qr="__reactProps$"+Yr,Jr="__reactContainer$"+Yr,Kr="__reactEvents$"+Yr;function $r(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[Zr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Gr(t);null!==t;){if(n=t[Zr])return n;t=Gr(t)}return e}n=(t=n).parentNode}return null}function ti(t){return!(t=t[Zr]||t[Jr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ei(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function ni(t){return t[Qr]||null}function ri(t){var e=t[Kr];return void 0===e&&(e=t[Kr]=new Set),e}var ii=[],ai=-1;function oi(t){return{current:t}}function si(t){0>ai||(t.current=ii[ai],ii[ai]=null,ai--)}function ui(t,e){ai++,ii[ai]=t.current,t.current=e}var li={},ci=oi(li),hi=oi(!1),fi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function pi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function vi(){si(hi),si(ci)}function mi(t,e,n){if(ci.current!==li)throw Error(o(168));ui(ci,e),ui(hi,n)}function gi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,X(e)||"Unknown",a));return i({},n,r)}function yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,fi=ci.current,ui(ci,t),ui(hi,hi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=gi(t,e,fi),r.__reactInternalMemoizedMergedChildContext=t,si(hi),si(ci),ui(ci,t)):si(hi),ui(hi,n)}var bi=null,xi=null,wi=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,ki=a.unstable_cancelCallback,Ti=a.unstable_shouldYield,Ei=a.unstable_requestPaint,Ci=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Mi=a.unstable_ImmediatePriority,Ai=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Ri=a.unstable_IdlePriority,ji={},Ii=void 0!==Ei?Ei:function(){},Di=null,Ni=null,Bi=!1,zi=Ci(),Fi=1e4>zi?Ci:function(){return Ci()-zi};function Vi(){switch(Oi()){case Mi:return 99;case Ai:return 98;case Pi:return 97;case Li:return 96;case Ri:return 95;default:throw Error(o(332))}}function Ui(t){switch(t){case 99:return Mi;case 98:return Ai;case 97:return Pi;case 96:return Li;case 95:return Ri;default:throw Error(o(332))}}function qi(t,e){return t=Ui(t),wi(t,e)}function Hi(t,e,n){return t=Ui(t),Si(t,e,n)}function Wi(){if(null!==Ni){var t=Ni;Ni=null,ki(t)}Gi()}function Gi(){if(!Bi&&null!==Di){Bi=!0;var t=0;try{var e=Di;qi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Di=null}catch(n){throw null!==Di&&(Di=Di.slice(t+1)),Si(Mi,Wi),n}finally{Bi=!1}}}var Xi=x.ReactCurrentBatchConfig;function Yi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Zi=oi(null),Qi=null,Ji=null,Ki=null;function $i(){Ki=Ji=Qi=null}function ta(t){var e=Zi.current;si(Zi),t.type._context._currentValue=e}function ea(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function na(t,e){Qi=t,Ki=Ji=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(jo=!0),t.firstContext=null)}function ra(t,e){if(Ki!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ki=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ji){if(null===Qi)throw Error(o(308));Ji=e,Qi.dependencies={lanes:0,firstContext:e,responders:null}}else Ji=Ji.next=e;return t._currentValue}var ia=!1;function aa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oa(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ua(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function la(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ca(t,e,n,r){var a=t.updateQueue;ia=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,h=c=l=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,v=o;switch(u=e,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break t}f=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break t;f=i({},f,u);break t;case 2:ia=!0}}null!==o.callback&&(t.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=d,l=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=h,Bs|=s,t.lanes=s,t.memoizedState=f}}function ha(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var fa=(new r.Component).refs;function da(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var pa={isMounted:function(t){return!!(t=t._reactInternals)&&Qt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lu(),i=cu(t),a=sa(r,i);a.payload=e,void 0!==n&&null!==n&&(a.callback=n),ua(t,a),hu(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lu(),i=cu(t),a=sa(r,i);a.tag=1,a.payload=e,void 0!==n&&null!==n&&(a.callback=n),ua(t,a),hu(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lu(),r=cu(t),i=sa(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ua(t,i),hu(t,r,n)}};function va(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ma(t,e,n){var r=!1,i=li,a=e.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=pi(e)?fi:ci.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):li),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=pa,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ga(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pa.enqueueReplaceState(e,e.state,null)}function ya(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=fa,aa(t);var a=e.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=pi(e)?fi:ci.current,i.context=di(t,a)),ca(t,n,i,r),i.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(da(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&pa.enqueueReplaceState(i,i.state,null),ca(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var _a=Array.isArray;function ba(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===fa&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function xa(t,e){if("textarea"!==t.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function wa(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=qu(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Xu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=ba(t,e,n),r.return=t,r):((r=Hu(n.type,n.key,n.props,null,t.mode,r)).ref=ba(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Yu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=Wu(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Xu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Hu(e.type,e.key,e.props,null,t.mode,n)).ref=ba(t,null,e),n.return=t,n;case S:return(e=Yu(e,t.mode,n)).return=t,e}if(_a(e)||U(e))return(e=Wu(e,t.mode,n,null)).return=t,e;xa(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===k?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case S:return n.key===i?c(t,e,n,r):null}if(_a(n)||U(n))return null!==i?null:h(t,e,n,r,null);xa(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return t=t.get(null===r.key?n:r.key)||null,r.type===k?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case S:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||U(r))return h(e,t=t.get(n)||null,r,i,null);xa(e,r)}return null}function v(i,o,s,u){for(var l=null,c=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}t&&h&&null===g.alternate&&e(i,h),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(t&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(i,t)})),l}function m(i,s,u,l){var c=U(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=d(i,v,y.value,l);if(null===_){null===v&&(v=g);break}t&&v&&null===_.alternate&&e(i,v),s=a(_,s,m),null===h?c=_:h.sibling=_,h=_,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,m),null===h?c=y:h.sibling=y,h=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(t&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?c=y:h.sibling=y,h=y);return t&&v.forEach((function(t){return e(i,t)})),c}return function(t,r,a,u){var l="object"===typeof a&&null!==a&&a.type===k&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case w:t:{for(c=a.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(a.type===k){n(t,l.sibling),(r=i(l,a.props.children)).return=t,t=r;break t}break;default:if(l.elementType===a.type){n(t,l.sibling),(r=i(l,a.props)).ref=ba(t,l,a),r.return=t,t=r;break t}}n(t,l);break}e(t,l),l=l.sibling}a.type===k?((r=Wu(a.props.children,t.mode,u,a.key)).return=t,t=r):((u=Hu(a.type,a.key,a.props,null,t.mode,u)).ref=ba(t,r,a),u.return=t,t=u)}return s(t);case S:t:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(t,r.sibling),(r=i(r,a.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Yu(a,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,a)).return=t,t=r):(n(t,r),(r=Xu(a,t.mode,u)).return=t,t=r),s(t);if(_a(a))return v(t,r,a,u);if(U(a))return m(t,r,a,u);if(c&&xa(t,a),"undefined"===typeof a&&!l)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,X(t.type)||"Component"))}return n(t,r)}}var Sa=wa(!0),ka=wa(!1),Ta={},Ea=oi(Ta),Ca=oi(Ta),Oa=oi(Ta);function Ma(t){if(t===Ta)throw Error(o(174));return t}function Aa(t,e){switch(ui(Oa,e),ui(Ca,t),ui(Ea,Ta),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}si(Ea),ui(Ea,e)}function Pa(){si(Ea),si(Ca),si(Oa)}function La(t){Ma(Oa.current);var e=Ma(Ea.current),n=pt(e,t.type);e!==n&&(ui(Ca,t),ui(Ea,n))}function Ra(t){Ca.current===t&&(si(Ea),si(Ca))}var ja=oi(0);function Ia(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Da=null,Na=null,Ba=!1;function za(t,e){var n=Vu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Fa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Va(t){if(Ba){var e=Na;if(e){var n=e;if(!Fa(t,e)){if(!(e=Wr(n.nextSibling))||!Fa(t,e))return t.flags=-1025&t.flags|2,Ba=!1,void(Da=t);za(Da,n)}Da=t,Na=Wr(e.firstChild)}else t.flags=-1025&t.flags|2,Ba=!1,Da=t}}function Ua(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Da=t}function qa(t){if(t!==Da)return!1;if(!Ba)return Ua(t),Ba=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Vr(e,t.memoizedProps))for(e=Na;e;)za(t,e),e=Wr(e.nextSibling);if(Ua(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Na=Wr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Na=null}}else Na=Da?Wr(t.stateNode.nextSibling):null;return!0}function Ha(){Na=Da=null,Ba=!1}var Wa=[];function Ga(){for(var t=0;t<Wa.length;t++)Wa[t]._workInProgressVersionPrimary=null;Wa.length=0}var Xa=x.ReactCurrentDispatcher,Ya=x.ReactCurrentBatchConfig,Za=0,Qa=null,Ja=null,Ka=null,$a=!1,to=!1;function eo(){throw Error(o(321))}function no(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ro(t,e,n,r,i,a){if(Za=a,Qa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xa.current=null===t||null===t.memoizedState?Ao:Po,t=n(r,i),to){a=0;do{if(to=!1,!(25>a))throw Error(o(301));a+=1,Ka=Ja=null,e.updateQueue=null,Xa.current=Lo,t=n(r,i)}while(to)}if(Xa.current=Mo,e=null!==Ja&&null!==Ja.next,Za=0,Ka=Ja=Qa=null,$a=!1,e)throw Error(o(300));return t}function io(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ka?Qa.memoizedState=Ka=t:Ka=Ka.next=t,Ka}function ao(){if(null===Ja){var t=Qa.alternate;t=null!==t?t.memoizedState:null}else t=Ja.next;var e=null===Ka?Qa.memoizedState:Ka.next;if(null!==e)Ka=e,Ja=t;else{if(null===t)throw Error(o(310));t={memoizedState:(Ja=t).memoizedState,baseState:Ja.baseState,baseQueue:Ja.baseQueue,queue:Ja.queue,next:null},null===Ka?Qa.memoizedState=Ka=t:Ka=Ka.next=t}return Ka}function oo(t,e){return"function"===typeof e?e(t):e}function so(t){var e=ao(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=Ja,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.lane;if((Za&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,Qa.lanes|=c,Bs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,sr(r,e.memoizedState)||(jo=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function uo(t){var e=ao(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(jo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function lo(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Za&t)===t)&&(e._workInProgressVersionPrimary=r,Wa.push(e))),t)return n(e._source);throw Wa.push(e),Error(o(350))}function co(t,e,n,r){var i=As;if(null===i)throw Error(o(349));var a=e._getVersion,s=a(e._source),u=Xa.current,l=u.useState((function(){return lo(i,e,n)})),c=l[1],h=l[0];l=Ka;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=Qa;return t.memoizedState={refs:d,source:e,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var t=a(e._source);if(!sr(s,t)){t=n(e._source),sr(h,t)||(c(t),t=cu(m),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,o=t;0<o;){var u=31-He(o),l=1<<u;r[u]|=t,o&=~l}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var r=cu(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[e,r]),sr(p,n)&&sr(v,e)&&sr(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:h}).dispatch=c=Oo.bind(null,Qa,t),l.queue=t,l.baseQueue=null,h=lo(i,e,n),l.memoizedState=l.baseState=h),h}function ho(t,e,n){return co(ao(),t,e,n)}function fo(t){var e=io();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:t}).dispatch=Oo.bind(null,Qa,t),[e.memoizedState,t]}function po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Qa.updateQueue)?(e={lastEffect:null},Qa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function vo(t){return t={current:t},io().memoizedState=t}function mo(){return ao().memoizedState}function go(t,e,n,r){var i=io();Qa.flags|=t,i.memoizedState=po(1|e,n,void 0,void 0===r?null:r)}function yo(t,e,n,r){var i=ao();r=void 0===r?null:r;var a=void 0;if(null!==Ja){var o=Ja.memoizedState;if(a=o.destroy,null!==r&&no(r,o.deps))return void po(e,n,a,r)}Qa.flags|=t,i.memoizedState=po(1|e,n,a,r)}function _o(t,e){return go(516,4,t,e)}function bo(t,e){return yo(516,4,t,e)}function xo(t,e){return yo(4,2,t,e)}function wo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function So(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,yo(4,2,wo.bind(null,e,t),n)}function ko(){}function To(t,e){var n=ao();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&no(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Eo(t,e){var n=ao();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&no(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Co(t,e){var n=Vi();qi(98>n?98:n,(function(){t(!0)})),qi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{t(!1),e()}finally{Ya.transition=n}}))}function Oo(t,e,n){var r=lu(),i=cu(t),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),e.pending=a,o=t.alternate,t===Qa||null!==o&&o===Qa)to=$a=!0;else{if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,sr(u,s))return}catch(l){}hu(t,i,r)}}var Mo={readContext:ra,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useOpaqueIdentifier:eo,unstable_isNewReconciler:!1},Ao={readContext:ra,useCallback:function(t,e){return io().memoizedState=[t,void 0===e?null:e],t},useContext:ra,useEffect:_o,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,go(4,2,wo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return go(4,2,t,e)},useMemo:function(t,e){var n=io();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=io();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Oo.bind(null,Qa,t),[r.memoizedState,t]},useRef:vo,useState:fo,useDebugValue:ko,useDeferredValue:function(t){var e=fo(t),n=e[0],r=e[1];return _o((function(){var e=Ya.transition;Ya.transition=1;try{r(t)}finally{Ya.transition=e}}),[t]),n},useTransition:function(){var t=fo(!1),e=t[0];return vo(t=Co.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=io();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},co(r,t,e,n)},useOpaqueIdentifier:function(){if(Ba){var t=!1,e=function(t){return{$$typeof:I,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=fo(e)[1];return 0===(2&Qa.mode)&&(Qa.flags|=516,po(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),e}return fo(e="r:"+(Xr++).toString(36)),e},unstable_isNewReconciler:!1},Po={readContext:ra,useCallback:To,useContext:ra,useEffect:bo,useImperativeHandle:So,useLayoutEffect:xo,useMemo:Eo,useReducer:so,useRef:mo,useState:function(){return so(oo)},useDebugValue:ko,useDeferredValue:function(t){var e=so(oo),n=e[0],r=e[1];return bo((function(){var e=Ya.transition;Ya.transition=1;try{r(t)}finally{Ya.transition=e}}),[t]),n},useTransition:function(){var t=so(oo)[0];return[mo().current,t]},useMutableSource:ho,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Lo={readContext:ra,useCallback:To,useContext:ra,useEffect:bo,useImperativeHandle:So,useLayoutEffect:xo,useMemo:Eo,useReducer:uo,useRef:mo,useState:function(){return uo(oo)},useDebugValue:ko,useDeferredValue:function(t){var e=uo(oo),n=e[0],r=e[1];return bo((function(){var e=Ya.transition;Ya.transition=1;try{r(t)}finally{Ya.transition=e}}),[t]),n},useTransition:function(){var t=uo(oo)[0];return[mo().current,t]},useMutableSource:ho,useOpaqueIdentifier:function(){return uo(oo)[0]},unstable_isNewReconciler:!1},Ro=x.ReactCurrentOwner,jo=!1;function Io(t,e,n,r){e.child=null===t?ka(e,null,n,r):Sa(e,t.child,n,r)}function Do(t,e,n,r,i){n=n.render;var a=e.ref;return na(e,i),r=ro(t,e,n,r,a,i),null===t||jo?(e.flags|=1,Io(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function No(t,e,n,r,i,a){if(null===t){var o=n.type;return"function"!==typeof o||Uu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Hu(n.type,null,r,e,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Bo(t,e,o,r,i,a))}return o=t.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:lr)(i,r)&&t.ref===e.ref)?ns(t,e,a):(e.flags|=1,(t=qu(o,r)).ref=e.ref,t.return=e,e.child=t)}function Bo(t,e,n,r,i,a){if(null!==t&&lr(t.memoizedProps,r)&&t.ref===e.ref){if(jo=!1,0===(a&i))return e.lanes=t.lanes,ns(t,e,a);0!==(16384&t.flags)&&(jo=!0)}return Vo(t,e,n,r,a)}function zo(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},_u(e,n);else{if(0===(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},_u(e,t),null;e.memoizedState={baseLanes:0},_u(e,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,_u(e,r);return Io(t,e,i,n),e.child}function Fo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Vo(t,e,n,r,i){var a=pi(n)?fi:ci.current;return a=di(e,a),na(e,i),n=ro(t,e,n,r,a,i),null===t||jo?(e.flags|=1,Io(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function Uo(t,e,n,r,i){if(pi(n)){var a=!0;yi(e)}else a=!1;if(na(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),ma(e,n,r),ya(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ra(l):l=di(e,l=pi(n)?fi:ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&ga(e,o,r,l),ia=!1;var f=e.memoizedState;o.state=f,ca(e,r,o,i),u=e.memoizedState,s!==r||f!==u||hi.current||ia?("function"===typeof c&&(da(e,n,c,r),u=e.memoizedState),(s=ia||va(e,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4)):("function"===typeof o.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(e.flags|=4),r=!1)}else{o=e.stateNode,oa(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Yi(e.type,s),o.props=l,h=e.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=ra(u):u=di(e,u=pi(n)?fi:ci.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&ga(e,o,r,u),ia=!1,f=e.memoizedState,o.state=f,ca(e,r,o,i);var p=e.memoizedState;s!==h||f!==p||hi.current||ia?("function"===typeof d&&(da(e,n,d,r),p=e.memoizedState),(l=ia||va(e,n,l,r,f,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return qo(t,e,n,r,a,i)}function qo(t,e,n,r,i,a){Fo(t,e);var o=0!==(64&e.flags);if(!r&&!o)return i&&_i(e,n,!1),ns(t,e,a);r=e.stateNode,Ro.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=Sa(e,t.child,null,a),e.child=Sa(e,null,s,a)):Io(t,e,s,a),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function Ho(t){var e=t.stateNode;e.pendingContext?mi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&mi(0,e.context,!1),Aa(t,e.containerInfo)}var Wo,Go,Xo,Yo={dehydrated:null,retryLane:0};function Zo(t,e,n){var r,i=e.pendingProps,a=ja.current,o=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(o=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ui(ja,1&a),null===t?(void 0!==i.fallback&&Va(e),t=i.children,a=i.fallback,o?(t=Qo(e,t,a,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Yo,t):"number"===typeof i.unstable_expectedLoadTime?(t=Qo(e,t,a,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Yo,e.lanes=33554432,t):((n=Gu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,o?(i=Ko(t,e,i.children,i.fallback,n),o=e.child,a=t.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=t.childLanes&~n,e.memoizedState=Yo,i):(n=Jo(t,e,i.children,n),e.memoizedState=null,n))}function Qo(t,e,n,r){var i=t.mode,a=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=e):a=Gu(e,i,0,null),n=Wu(n,i,r,null),a.return=t,n.return=t,a.sibling=n,t.child=a,n}function Jo(t,e,n,r){var i=t.child;return t=i.sibling,n=qu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Ko(t,e,n,r,i){var a=e.mode,o=t.child;t=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&e.child!==o?((n=e.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=qu(o,s),null!==t?r=qu(t,r):(r=Wu(r,a,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function $o(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),ea(t.return,e)}function ts(t,e,n,r,i,a){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function es(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Io(t,e,r.children,n),0!==(2&(r=ja.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&$o(t,n);else if(19===t.tag)$o(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ui(ja,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Ia(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ts(e,!1,i,n,a,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Ia(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ts(e,!0,n,null,a,e.lastEffect);break;case"together":ts(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ns(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Bs|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=qu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=qu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function rs(t,e){if(!Ba)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function is(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pi(e.type)&&vi(),null;case 3:return Pa(),si(hi),si(ci),Ga(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(qa(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Ra(e);var a=Ma(Oa.current);if(n=e.type,null!==t&&null!=e.stateNode)Go(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(o(166));return null}if(t=Ma(Ea.current),qa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zr]=e,r[Qr]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(t=0;t<Sr.length;t++)Cr(Sr[t],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":tt(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ut(r,s),Cr("invalid",r)}for(var l in kt(n,s),t=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?r.textContent!==a&&(t=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(t=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Cr("scroll",r));switch(n){case"input":Q(r),rt(r,s,!0);break;case"textarea":Q(r),ct(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Nr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Zr]=e,t[Qr]=r,Wo(t,e),e.stateNode=t,l=Tt(n,r),n){case"dialog":Cr("cancel",t),Cr("close",t),a=r;break;case"iframe":case"object":case"embed":Cr("load",t),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Cr(Sr[a],t);a=r;break;case"source":Cr("error",t),a=r;break;case"img":case"image":case"link":Cr("error",t),Cr("load",t),a=r;break;case"details":Cr("toggle",t),a=r;break;case"input":tt(t,r),a=$(t,r),Cr("invalid",t);break;case"option":a=at(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Cr("invalid",t);break;case"textarea":ut(t,r),a=st(t,r),Cr("invalid",t);break;default:a=r}kt(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&gt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Cr("scroll",t):null!=h&&b(t,s,h,l))}switch(n){case"input":Q(t),rt(t,r,!1);break;case"textarea":Q(t),ct(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Y(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?ot(t,!!r.multiple,s,!1):null!=r.defaultValue&&ot(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(t.onclick=Nr)}Fr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Xo(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));n=Ma(Oa.current),Ma(Ea.current),qa(e)?(r=e.stateNode,n=e.memoizedProps,r[Zr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=e,e.stateNode=r)}return null;case 13:return si(ja),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&qa(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&ja.current)?0===Is&&(Is=3):(0!==Is&&3!==Is||(Is=4),null===As||0===(134217727&Bs)&&0===(134217727&zs)||vu(As,Ls))),(r||n)&&(e.flags|=4),null);case 4:return Pa(),null===t&&Mr(e.stateNode.containerInfo),null;case 10:return ta(e),null;case 17:return pi(e.type)&&vi(),null;case 19:if(si(ja),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(l=r.rendering))if(s)rs(r,!1);else{if(0!==Is||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(l=Ia(t))){for(e.flags|=64,rs(r,!1),null!==(s=l.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ui(ja,1&ja.current|2),e.child}t=t.sibling}null!==r.tail&&Fi()>qs&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Ia(l))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ba)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>qs&&1073741824!==n&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432);r.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=r.last)?n.sibling=l:e.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,e=ja.current,ui(ja,s?1&e|2:1&e),n):null;case 23:case 24:return bu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(o(156,e.tag))}function as(t){switch(t.tag){case 1:pi(t.type)&&vi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Pa(),si(hi),si(ci),Ga(),0!==(64&(e=t.flags)))throw Error(o(285));return t.flags=-4097&e|64,t;case 5:return Ra(t),null;case 13:return si(ja),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return si(ja),null;case 4:return Pa(),null;case 10:return ta(t),null;case 23:case 24:return bu(),null;default:return null}}function os(t,e){try{var n="",r=e;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i}}function ss(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,Ma(Ea.current);var o,s=null;switch(n){case"input":a=$(t,a),r=$(t,r),s=[];break;case"option":a=at(t,a),r=at(t,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=st(t,a),r=st(t,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(t.onclick=Nr)}for(h in kt(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var l=a[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Cr("scroll",t),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===I?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Xo=function(t,e,n,r){n!==r&&(e.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function ls(t,e,n){(n=sa(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xs||(Xs=!0,Ys=r),ss(0,e)},n}function cs(t,e,n){(n=sa(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ss(0,e),r(i)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),ss(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Nu(t,n)}else e.current=null}function ds(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Hr(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ps(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ju(n,t),Ru(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Yi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&ha(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ha(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function vs(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ms(t,e){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(bi,e)}catch(a){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))ju(e,n);else{r=e;try{i()}catch(a){Nu(r,a)}}n=n.next}while(n!==t)}break;case 1:if(fs(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Nu(e,a)}break;case 5:fs(e);break;case 4:ws(t,e)}}function gs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ys(t){return 5===t.tag||3===t.tag||4===t.tag}function _s(t){t:{for(var e=t.return;null!==e;){if(ys(e))break t;e=e.return}throw Error(o(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ys(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?bs(t,n,e):xs(t,n,e)}function bs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Nr));else if(4!==r&&null!==(t=t.child))for(bs(t,e,n),t=t.sibling;null!==t;)bs(t,e,n),t=t.sibling}function xs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(xs(t,e,n),t=t.sibling;null!==t;)xs(t,e,n),t=t.sibling}function ws(t,e){for(var n,r,i=e,a=!1;;){if(!a){a=i.return;t:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}a=a.return}a=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,l=u;;)if(ms(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break t;for(;null===l.sibling;){if(null===l.return||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ms(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ss(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[Qr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Tt(t,i),e=Tt(t,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?wt(n,u):"dangerouslySetInnerHTML"===s?gt(n,u):"children"===s?yt(n,u):b(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":lt(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?ot(n,!!r.multiple,a,!1):t!==!!r.multiple&&(null!=r.defaultValue?ot(n,!!r.multiple,r.defaultValue,!0):ot(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(o(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Us=Fi(),vs(e.child,!0)),void ks(e);case 19:return void ks(e);case 17:return;case 23:case 24:return void vs(e,null!==e.memoizedState)}throw Error(o(163))}function ks(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new hs),e.forEach((function(e){var r=zu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Ts(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Es=Math.ceil,Cs=x.ReactCurrentDispatcher,Os=x.ReactCurrentOwner,Ms=0,As=null,Ps=null,Ls=0,Rs=0,js=oi(0),Is=0,Ds=null,Ns=0,Bs=0,zs=0,Fs=0,Vs=null,Us=0,qs=1/0;function Hs(){qs=Fi()+500}var Ws,Gs=null,Xs=!1,Ys=null,Zs=null,Qs=!1,Js=null,Ks=90,$s=[],tu=[],eu=null,nu=0,ru=null,iu=-1,au=0,ou=0,su=null,uu=!1;function lu(){return 0!==(48&Ms)?Fi():-1!==iu?iu:iu=Fi()}function cu(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Vi()?1:2;if(0===au&&(au=Ns),0!==Xi.transition){0!==ou&&(ou=null!==Vs?Vs.pendingLanes:0),t=au;var e=4186112&~ou;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Vi(),0!==(4&Ms)&&98===t?t=Fe(12,au):t=Fe(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),au),t}function hu(t,e,n){if(50<nu)throw nu=0,ru=null,Error(o(185));if(null===(t=fu(t,e)))return null;qe(t,e,n),t===As&&(zs|=e,4===Is&&vu(t,Ls));var r=Vi();1===e?0!==(8&Ms)&&0===(48&Ms)?mu(t):(du(t,n),0===Ms&&(Hs(),Wi())):(0===(4&Ms)||98!==r&&99!==r||(null===eu?eu=new Set([t]):eu.add(t)),du(t,n)),Vs=t}function fu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function du(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-He(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=e,Ne(l);var h=De;a[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);s&=~l}if(r=Be(t,t===As?Ls:0),e=De,0===r)null!==n&&(n!==ji&&ki(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==ji&&ki(n)}15===e?(n=mu.bind(null,t),null===Di?(Di=[n],Ni=Si(Mi,Gi)):Di.push(n),n=ji):14===e?n=Hi(99,mu.bind(null,t)):n=Hi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,t))}}(e),pu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function pu(t){if(iu=-1,ou=au=0,0!==(48&Ms))throw Error(o(327));var e=t.callbackNode;if(Lu()&&t.callbackNode!==e)return null;var n=Be(t,t===As?Ls:0);if(0===n)return null;var r=n,i=Ms;Ms|=16;var a=Su();for(As===t&&Ls===r||(Hs(),xu(t,r));;)try{Eu();break}catch(u){wu(t,u)}if($i(),Cs.current=a,Ms=i,null!==Ps?r=0:(As=null,Ls=0,r=Is),0!==(Ns&zs))xu(t,0);else if(0!==r){if(2===r&&(Ms|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(n=ze(t))&&(r=ku(t,n))),1===r)throw e=Ds,xu(t,0),vu(t,n),du(t,Fi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:Mu(t);break;case 3:if(vu(t,n),(62914560&n)===n&&10<(r=Us+500-Fi())){if(0!==Be(t,0))break;if(((i=t.suspendedLanes)&n)!==n){lu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ur(Mu.bind(null,t),r);break}Mu(t);break;case 4:if(vu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-He(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Es(n/1960))-n)){t.timeoutHandle=Ur(Mu.bind(null,t),n);break}Mu(t);break;case 5:Mu(t);break;default:throw Error(o(329))}}return du(t,Fi()),t.callbackNode===e?pu.bind(null,t):null}function vu(t,e){for(e&=~Fs,e&=~zs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-He(e),r=1<<n;t[n]=-1,e&=~r}}function mu(t){if(0!==(48&Ms))throw Error(o(327));if(Lu(),t===As&&0!==(t.expiredLanes&Ls)){var e=Ls,n=ku(t,e);0!==(Ns&zs)&&(n=ku(t,e=Be(t,e)))}else n=ku(t,e=Be(t,0));if(0!==t.tag&&2===n&&(Ms|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(e=ze(t))&&(n=ku(t,e))),1===n)throw n=Ds,xu(t,0),vu(t,e),du(t,Fi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mu(t),du(t,Fi()),null}function gu(t,e){var n=Ms;Ms|=1;try{return t(e)}finally{0===(Ms=n)&&(Hs(),Wi())}}function yu(t,e){var n=Ms;Ms&=-2,Ms|=8;try{return t(e)}finally{0===(Ms=n)&&(Hs(),Wi())}}function _u(t,e){ui(js,Rs),Rs|=e,Ns|=e}function bu(){Rs=js.current,si(js)}function xu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,qr(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Pa(),si(hi),si(ci),Ga();break;case 5:Ra(r);break;case 4:Pa();break;case 13:case 19:si(ja);break;case 10:ta(r);break;case 23:case 24:bu()}n=n.return}As=t,Ps=qu(t.current,null),Ls=Rs=Ns=e,Is=0,Ds=null,Fs=zs=Bs=0}function wu(t,e){for(;;){var n=Ps;try{if($i(),Xa.current=Mo,$a){for(var r=Qa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}$a=!1}if(Za=0,Ka=Ja=Qa=null,to=!1,Os.current=null,null===n||null===n.return){Is=1,Ds=e,Ps=null;break}t:{var a=t,o=n.return,s=n,u=e;if(e=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&ja.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=sa(-1,1);y.tag=2,ua(s,y)}s.lanes|=1;break t}u=void 0,s=e;var _=a.pingCache;if(null===_?(_=a.pingCache=new us,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var b=Bu.bind(null,a,l,s);l.then(b,b)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Is&&(Is=2),u=os(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,e&=-e,f.lanes|=e,la(f,ls(0,a,e));break t;case 1:a=u;var x=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Zs||!Zs.has(w)))){f.flags|=4096,e&=-e,f.lanes|=e,la(f,cs(f,a,e));break t}}f=f.return}while(null!==f)}Ou(n)}catch(S){e=S,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function Su(){var t=Cs.current;return Cs.current=Mo,null===t?Mo:t}function ku(t,e){var n=Ms;Ms|=16;var r=Su();for(As===t&&Ls===e||xu(t,e);;)try{Tu();break}catch(i){wu(t,i)}if($i(),Ms=n,Cs.current=r,null!==Ps)throw Error(o(261));return As=null,Ls=0,Is}function Tu(){for(;null!==Ps;)Cu(Ps)}function Eu(){for(;null!==Ps&&!Ti();)Cu(Ps)}function Cu(t){var e=Ws(t.alternate,t,Rs);t.memoizedProps=t.pendingProps,null===e?Ou(t):Ps=e,Os.current=null}function Ou(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=is(n,e,Rs)))return void(Ps=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Rs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=as(e)))return n.flags&=2047,void(Ps=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ps=e);Ps=e=t}while(null!==e);0===Is&&(Is=5)}function Mu(t){var e=Vi();return qi(99,Au.bind(null,t,e)),null}function Au(t,e){do{Lu()}while(null!==Js);if(0!==(48&Ms))throw Error(o(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<a;){var l=31-He(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==eu&&0===(24&r)&&eu.has(t)&&eu.delete(t),t===As&&(Ps=As=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ms,Ms|=32,Os.current=null,Br=Ze,pr(s=dr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(E){u=null;break t}var h=0,f=-1,d=-1,p=0,v=0,m=s,g=null;e:for(;;){for(var y;m!==u||0!==a&&3!==m.nodeType||(f=h+a),m!==l||0!==c&&3!==m.nodeType||(d=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break e;if(g===u&&++p===a&&(f=h),g===l&&++v===c&&(d=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Ze=!1,su=null,uu=!1,Gs=r;do{try{Pu()}catch(E){if(null===Gs)throw Error(o(330));Nu(Gs,E),Gs=Gs.nextEffect}}while(null!==Gs);su=null,Gs=r;do{try{for(s=t;null!==Gs;){var _=Gs.flags;if(16&_&&yt(Gs.stateNode,""),128&_){var b=Gs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:_s(Gs),Gs.flags&=-3;break;case 6:_s(Gs),Gs.flags&=-3,Ss(Gs.alternate,Gs);break;case 1024:Gs.flags&=-1025;break;case 1028:Gs.flags&=-1025,Ss(Gs.alternate,Gs);break;case 4:Ss(Gs.alternate,Gs);break;case 8:ws(s,u=Gs);var w=u.alternate;gs(u),null!==w&&gs(w)}Gs=Gs.nextEffect}}catch(E){if(null===Gs)throw Error(o(330));Nu(Gs,E),Gs=Gs.nextEffect}}while(null!==Gs);if(x=zr,b=dr(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&fr(_.ownerDocument.documentElement,_)){null!==s&&pr(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),u=_.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!x.extend&&w>s&&(u=s,s=w,w=u),u=hr(_,w),a=hr(_,s),u&&a&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==a.node||x.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ze=!!Br,zr=Br=null,t.current=n,Gs=r;do{try{for(_=t;null!==Gs;){var S=Gs.flags;if(36&S&&ps(_,Gs.alternate,Gs),128&S){b=void 0;var k=Gs.ref;if(null!==k){var T=Gs.stateNode;switch(Gs.tag){case 5:b=T;break;default:b=T}"function"===typeof k?k(b):k.current=b}}Gs=Gs.nextEffect}}catch(E){if(null===Gs)throw Error(o(330));Nu(Gs,E),Gs=Gs.nextEffect}}while(null!==Gs);Gs=null,Ii(),Ms=i}else t.current=n;if(Qs)Qs=!1,Js=t,Ks=e;else for(Gs=r;null!==Gs;)e=Gs.nextEffect,Gs.nextEffect=null,8&Gs.flags&&((S=Gs).sibling=null,S.stateNode=null),Gs=e;if(0===(r=t.pendingLanes)&&(Zs=null),1===r?t===ru?nu++:(nu=0,ru=t):nu=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(bi,n,void 0,64===(64&n.current.flags))}catch(E){}if(du(t,Fi()),Xs)throw Xs=!1,t=Ys,Ys=null,t;return 0!==(8&Ms)||Wi(),null}function Pu(){for(;null!==Gs;){var t=Gs.alternate;uu||null===su||(0!==(8&Gs.flags)?te(Gs,su)&&(uu=!0):13===Gs.tag&&Ts(t,Gs)&&te(Gs,su)&&(uu=!0));var e=Gs.flags;0!==(256&e)&&ds(t,Gs),0===(512&e)||Qs||(Qs=!0,Hi(97,(function(){return Lu(),null}))),Gs=Gs.nextEffect}}function Lu(){if(90!==Ks){var t=97<Ks?97:Ks;return Ks=90,qi(t,Iu)}return!1}function Ru(t,e){$s.push(e,t),Qs||(Qs=!0,Hi(97,(function(){return Lu(),null})))}function ju(t,e){tu.push(e,t),Qs||(Qs=!0,Hi(97,(function(){return Lu(),null})))}function Iu(){if(null===Js)return!1;var t=Js;if(Js=null,0!==(48&Ms))throw Error(o(331));var e=Ms;Ms|=32;var n=tu;tu=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));Nu(a,l)}}for(n=$s,$s=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===a)throw Error(o(330));Nu(a,l)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ms=e,Wi(),!0}function Du(t,e,n){ua(t,e=ls(0,e=os(n,e),1)),e=lu(),null!==(t=fu(t,1))&&(qe(t,1,e),du(t,e))}function Nu(t,e){if(3===t.tag)Du(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Du(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=cs(n,t=os(e,t),1);if(ua(n,i),i=lu(),null!==(n=fu(n,1)))qe(n,1,i),du(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(e,t)}catch(a){}break}}n=n.return}}function Bu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=lu(),t.pingedLanes|=t.suspendedLanes&n,As===t&&(Ls&n)===n&&(4===Is||3===Is&&(62914560&Ls)===Ls&&500>Fi()-Us?xu(t,0):Fs|=n),du(t,e)}function zu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Vi()?1:2:(0===au&&(au=Ns),0===(e=Ve(62914560&~au))&&(e=4194304))),n=lu(),null!==(t=fu(t,e))&&(qe(t,e,n),du(t,n))}function Fu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(t,e,n,r){return new Fu(t,e,n,r)}function Uu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function qu(t,e){var n=t.alternate;return null===n?((n=Vu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hu(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Uu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case k:return Wu(n.children,i,a,e);case D:s=8,i|=16;break;case T:s=8,i|=1;break;case E:return(t=Vu(12,n,e,8|i)).elementType=E,t.type=E,t.lanes=a,t;case A:return(t=Vu(13,n,e,i)).type=A,t.elementType=A,t.lanes=a,t;case P:return(t=Vu(19,n,e,i)).elementType=P,t.lanes=a,t;case N:return Gu(n,i,a,e);case B:return(t=Vu(24,n,e,i)).elementType=B,t.lanes=a,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case O:s=9;break t;case M:s=11;break t;case L:s=14;break t;case R:s=16,r=null;break t;case j:s=22;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Vu(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Wu(t,e,n,r){return(t=Vu(7,t,r,e)).lanes=n,t}function Gu(t,e,n,r){return(t=Vu(23,t,r,e)).elementType=N,t.lanes=n,t}function Xu(t,e,n){return(t=Vu(6,t,null,e)).lanes=n,t}function Yu(t,e,n){return(e=Vu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ue(0),this.expirationTimes=Ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.mutableSourceEagerHydrationData=null}function Qu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Ju(t,e,n,r){var i=e.current,a=lu(),s=cu(i);t:if(n){e:{if(Qt(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(pi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(pi(l)){n=gi(n,l,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=sa(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ua(i,e),hu(i,s,a),s}function Ku(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function $u(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function tl(t,e){$u(t,e),(t=t.alternate)&&$u(t,e)}function el(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zu(t,e,null!=n&&!0===n.hydrate),e=Vu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,aa(e),t[Jr]=n.current,Mr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function nl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function rl(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Ku(o);s.call(t)}}Ju(e,o,t,i)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new el(t,0,e?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Ku(o);u.call(t)}}yu((function(){Ju(e,o,t,i)}))}return Ku(o)}function il(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(e))throw Error(o(200));return Qu(t,e,null,n)}Ws=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hi.current)jo=!0;else{if(0===(n&r)){switch(jo=!1,e.tag){case 3:Ho(e),Ha();break;case 5:La(e);break;case 1:pi(e.type)&&yi(e);break;case 4:Aa(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ui(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Zo(t,e,n):(ui(ja,1&ja.current),null!==(e=ns(t,e,n))?e.sibling:null);ui(ja,1&ja.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return es(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(ja,ja.current),r)break;return null;case 23:case 24:return e.lanes=0,zo(t,e,n)}return ns(t,e,n)}jo=0!==(16384&t.flags)}else jo=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=di(e,ci.current),na(e,n),i=ro(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pi(r)){var a=!0;yi(e)}else a=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&da(e,r,s,t),i.updater=pa,e.stateNode=i,i._reactInternals=e,ya(e,r,t,n),e=qo(null,e,r,!0,a,n)}else e.tag=0,Io(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(a=i._init)(i._payload),e.type=i,a=e.tag=function(t){if("function"===typeof t)return Uu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===L)return 14}return 2}(i),t=Yi(i,t),a){case 0:e=Vo(null,e,i,t,n);break t;case 1:e=Uo(null,e,i,t,n);break t;case 11:e=Do(null,e,i,t,n);break t;case 14:e=No(null,e,i,Yi(i.type,t),r,n);break t}throw Error(o(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Vo(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Uo(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 3:if(Ho(e),r=e.updateQueue,null===t||null===r)throw Error(o(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,oa(t,e),ca(e,r,null,n),(r=e.memoizedState.element)===i)Ha(),e=ns(t,e,n);else{if((a=(i=e.stateNode).hydrate)&&(Na=Wr(e.stateNode.containerInfo.firstChild),Da=e,a=Ba=!0),a){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(a=t[i])._workInProgressVersionPrimary=t[i+1],Wa.push(a);for(n=ka(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Io(t,e,r,n),Ha();e=e.child}return e;case 5:return La(e),null===t&&Va(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==a&&Vr(r,a)&&(e.flags|=16),Fo(t,e),Io(t,e,s,n),e.child;case 6:return null===t&&Va(e),null;case 13:return Zo(t,e,n);case 4:return Aa(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Sa(e,null,r,n):Io(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Do(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 7:return Io(t,e,e.pendingProps,n),e.child;case 8:case 12:return Io(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value;var u=e.type._context;if(ui(Zi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=sr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!hi.current){e=ns(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===u.tag&&((c=sa(-1,n&-n)).tag=2,ua(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ea(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Io(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(a=e.pendingProps).children,na(e,n),r=r(i=ra(i,a.unstable_observedBits)),e.flags|=1,Io(t,e,r,n),e.child;case 14:return a=Yi(i=e.type,e.pendingProps),No(t,e,i,a=Yi(i.type,a),r,n);case 15:return Bo(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pi(r)?(t=!0,yi(e)):t=!1,na(e,n),ma(e,r,i),ya(e,r,i,n),qo(null,e,r,!0,t,n);case 19:return es(t,e,n);case 23:case 24:return zo(t,e,n)}throw Error(o(156,e.tag))},el.prototype.render=function(t){Ju(t,this._internalRoot,null,null)},el.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Ju(null,t,null,(function(){e[Jr]=null}))},ee=function(t){13===t.tag&&(hu(t,4,lu()),tl(t,4))},ne=function(t){13===t.tag&&(hu(t,67108864,lu()),tl(t,67108864))},re=function(t){if(13===t.tag){var e=lu(),n=cu(t);hu(t,n,e),tl(t,n)}},ie=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ni(r);if(!i)throw Error(o(90));J(r),nt(r,i)}}}break;case"textarea":lt(t,n);break;case"select":null!=(e=n.value)&&ot(t,!!n.multiple,e,!1)}},Rt=gu,jt=function(t,e,n,r,i){var a=Ms;Ms|=4;try{return qi(98,t.bind(null,e,n,r,i))}finally{0===(Ms=a)&&(Hs(),Wi())}},It=function(){0===(49&Ms)&&(function(){if(null!==eu){var t=eu;eu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,du(t,Fi())}))}Wi()}(),Lu())},Dt=function(t,e){var n=Ms;Ms|=2;try{return t(e)}finally{0===(Ms=n)&&(Hs(),Wi())}};var al={Events:[ti,ei,ni,Pt,Lt,Lu,{current:!1}]},ol={findFiberByHostInstance:$r,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sl={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=$t(t))?null:t.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{bi=ul.inject(sl),xi=ul}catch(mt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,e.createPortal=il,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw Error(o(268,Object.keys(t)))}return t=null===(t=$t(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ms;if(0!==(48&n))return t(e);Ms|=1;try{if(t)return qi(99,t.bind(null,e))}finally{Ms=n,Wi()}},e.hydrate=function(t,e,n){if(!nl(e))throw Error(o(200));return rl(null,t,e,!0,n)},e.render=function(t,e,n){if(!nl(e))throw Error(o(200));return rl(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nl(t))throw Error(o(40));return!!t._reactRootContainer&&(yu((function(){rl(null,null,t,!1,(function(){t._reactRootContainer=null,t[Jr]=null}))})),!0)},e.unstable_batchedUpdates=gu,e.unstable_createPortal=function(t,e){return il(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nl(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return rl(t,e,n,!1,r)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(136)},function(t,e,n){"use strict";var r,i,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,f=function t(){if(null!==c)try{var n=e.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==c?setTimeout(r,0,t):(c=t,setTimeout(f,0))},i=function(t,e){h=setTimeout(t,e)},a=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,_=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();b=t+_;try{g(!0,t)?w.postMessage(null):(m=!1,g=null)}catch(n){throw w.postMessage(null),n}}else m=!1},r=function(t){g=t,m||(m=!0,w.postMessage(null))},i=function(t,n){y=d((function(){t(e.unstable_now())}),n)},a=function(){p(y),y=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<E(i,e)))break t;t[r]=e,t[n]=i,n=r}}function k(t){return void 0===(t=t[0])?null:t}function T(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var a=2*(r+1)-1,o=t[a],s=a+1,u=t[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(t[r]=u,t[s]=n,r=s):(t[r]=o,t[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function E(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],O=[],M=1,A=null,P=3,L=!1,R=!1,j=!1;function I(t){for(var e=k(O);null!==e;){if(null===e.callback)T(O);else{if(!(e.startTime<=t))break;T(O),e.sortIndex=e.expirationTime,S(C,e)}e=k(O)}}function D(t){if(j=!1,I(t),!R)if(null!==k(C))R=!0,r(N);else{var e=k(O);null!==e&&i(D,e.startTime-t)}}function N(t,n){R=!1,j&&(j=!1,a()),L=!0;var r=P;try{for(I(n),A=k(C);null!==A&&(!(A.expirationTime>n)||t&&!e.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,P=A.priorityLevel;var s=o(A.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?A.callback=s:A===k(C)&&T(C),I(n)}else T(C);A=k(C)}if(null!==A)var u=!0;else{var l=k(O);null!==l&&i(D,l.startTime-n),u=!1}return u}finally{A=null,P=r,L=!1}}var B=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){R||L||(R=!0,r(N))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return k(C)},e.unstable_next=function(t){switch(P){case 1:case 2:case 3:var e=3;break;default:e=P}var n=P;P=e;try{return t()}finally{P=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=B,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=P;P=t;try{return e()}finally{P=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:M++,callback:n,priorityLevel:t,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(t.sortIndex=o,S(O,t),null===k(C)&&t===k(O)&&(j?a():j=!0,i(D,o-s))):(t.sortIndex=u,S(C,t),R||L||(R=!0,r(N))),t},e.unstable_wrapCallback=function(t){var e=P;return function(){var n=P;P=e;try{return t.apply(this,arguments)}finally{P=n}}}},,,,function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(P){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var _={};_[a]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(M([])));x&&x!==n&&r.call(x,a)&&(_=x);var w=y.prototype=m.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,a,o,s){var u=c(t[i],t,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:e,done:!0}}return g.prototype=w.constructor=y,y.constructor=g,g.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(w),u(w,s,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";n(65);var r=n(10),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),e.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===a[r]&&(a[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:c,props:a,_owner:o.current}}e.jsx=l,e.jsxs=l},,function(t,e,n){"use strict";var r=n(144);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";t.exports=n(147)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case f:case o:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case a:return e}}}function S(t){return w(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=a,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return S(t)||w(t)===h},e.isConcurrentMode=S,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===a},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===f||t===u||t===s||t===p||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===y)},e.typeOf=w},function(t,e,n){"use strict";t.exports=n(149)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case f:case o:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case a:return e}}}function S(t){return w(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=a,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return S(t)||w(t)===h},e.isConcurrentMode=S,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===a},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===f||t===u||t===s||t===p||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===y)},e.typeOf=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"text"===t.type&&/\r?\n/.test(t.data)&&""===t.data.trim()}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});var i=n(41),a=l(n(182)),o=l(n(183)),s=l(n(189)),u=l(n(190));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=(c(r={},i.ElementType.Text,a.default),c(r,i.ElementType.Tag,o.default),c(r,i.ElementType.Style,s.default),c(r,i.ElementType.Directive,u.default),c(r,i.ElementType.Comment,u.default),c(r,i.ElementType.Script,u.default),c(r,i.ElementType.CDATA,u.default),c(r,i.ElementType.Doctype,u.default),r)},function(t,e,n){var r=n(153);t.exports=function(t){if(t>=55296&&t<=57343||t>1114111)return"\ufffd";t in r&&(t=r[t]);var e="";t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t);return e+=String.fromCharCode(t)}},function(t){t.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(t){t.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\ud835\udd04","afr":"\ud835\udd1e","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\ud835\udd38","aopf":"\ud835\udd52","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\ud835\udc9c","ascr":"\ud835\udcb6","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\ud835\udd05","bfr":"\ud835\udd1f","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\ud835\udd39","bopf":"\ud835\udd53","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\ud835\udcb7","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\ud835\udd20","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\ud835\udd54","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\ud835\udc9e","cscr":"\ud835\udcb8","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\ud835\udd07","dfr":"\ud835\udd21","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\ud835\udd3b","dopf":"\ud835\udd55","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\ud835\udc9f","dscr":"\ud835\udcb9","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\ud835\udd08","efr":"\ud835\udd22","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\ud835\udd3c","eopf":"\ud835\udd56","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\ud835\udd09","ffr":"\ud835\udd23","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\ud835\udd3d","fopf":"\ud835\udd57","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\ud835\udcbb","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\ud835\udd0a","gfr":"\ud835\udd24","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\ud835\udd3e","gopf":"\ud835\udd58","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\ud835\udca2","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\ud835\udd25","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\ud835\udd59","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\ud835\udcbd","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\ud835\udd26","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\ud835\udd40","iopf":"\ud835\udd5a","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\ud835\udcbe","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\ud835\udd0d","jfr":"\ud835\udd27","jmath":"\u0237","Jopf":"\ud835\udd41","jopf":"\ud835\udd5b","Jscr":"\ud835\udca5","jscr":"\ud835\udcbf","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\ud835\udd0e","kfr":"\ud835\udd28","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\ud835\udd42","kopf":"\ud835\udd5c","Kscr":"\ud835\udca6","kscr":"\ud835\udcc0","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\ud835\udd0f","lfr":"\ud835\udd29","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\ud835\udd43","lopf":"\ud835\udd5d","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\ud835\udcc1","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\ud835\udd10","mfr":"\ud835\udd2a","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\ud835\udd44","mopf":"\ud835\udd5e","mp":"\u2213","mscr":"\ud835\udcc2","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\ud835\udd11","nfr":"\ud835\udd2b","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\ud835\udd5f","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\ud835\udca9","nscr":"\ud835\udcc3","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\ud835\udd12","ofr":"\ud835\udd2c","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\ud835\udd46","oopf":"\ud835\udd60","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\ud835\udcaa","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\ud835\udd13","pfr":"\ud835\udd2d","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\ud835\udd61","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\ud835\udcab","pscr":"\ud835\udcc5","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\ud835\udd14","qfr":"\ud835\udd2e","qint":"\u2a0c","qopf":"\ud835\udd62","Qopf":"\u211a","qprime":"\u2057","Qscr":"\ud835\udcac","qscr":"\ud835\udcc6","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\ud835\udd2f","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\ud835\udd63","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\ud835\udcc7","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\ud835\udd16","sfr":"\ud835\udd30","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\ud835\udd4a","sopf":"\ud835\udd64","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\ud835\udcae","sscr":"\ud835\udcc8","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\ud835\udd17","tfr":"\ud835\udd31","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\ud835\udd4b","topf":"\ud835\udd65","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\ud835\udcaf","tscr":"\ud835\udcc9","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\ud835\udd18","ufr":"\ud835\udd32","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\ud835\udd4c","uopf":"\ud835\udd66","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\ud835\udcb0","uscr":"\ud835\udcca","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\ud835\udd19","vfr":"\ud835\udd33","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\ud835\udd4d","vopf":"\ud835\udd67","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\ud835\udcb1","vscr":"\ud835\udccb","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\ud835\udd1a","wfr":"\ud835\udd34","Wopf":"\ud835\udd4e","wopf":"\ud835\udd68","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\ud835\udcb2","wscr":"\ud835\udccc","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\ud835\udd1b","xfr":"\ud835\udd35","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\ud835\udd4f","xopf":"\ud835\udd69","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\ud835\udcb3","xscr":"\ud835\udccd","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\ud835\udd1c","yfr":"\ud835\udd36","YIcy":"\u0407","yicy":"\u0457","Yopf":"\ud835\udd50","yopf":"\ud835\udd6a","Yscr":"\ud835\udcb4","yscr":"\ud835\udcce","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\ud835\udd37","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\ud835\udd6b","Zopf":"\u2124","Zscr":"\ud835\udcb5","zscr":"\ud835\udccf","zwj":"\u200d","zwnj":"\u200c"}')},function(t){t.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},function(t){t.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(t,e,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,a=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&g(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,a,o,s;if(l(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"===typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[t];if(void 0===u)return!1;if("function"===typeof u)a(u,this,e);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,a,o;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){var r=n(93),i=t.exports=Object.create(r),a={tagName:"name"};Object.keys(a).forEach((function(t){var e=a[t];Object.defineProperty(i,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})}))},function(t,e,n){var r=n(92),i=n(94);function a(t,e){this.init(t,e)}function o(t,e){return i.getElementsByTagName(t,e,!0)}function s(t,e){return i.getElementsByTagName(t,e,!0,1)[0]}function u(t,e,n){return i.getText(i.getElementsByTagName(t,e,n,1)).trim()}function l(t,e,n,r,i){var a=u(n,r,i);a&&(t[e]=a)}n(53)(a,r),a.prototype.init=r;var c=function(t){return"rss"===t||"feed"===t||"rdf:RDF"===t};a.prototype.onend=function(){var t,e,n={},i=s(c,this.dom);i&&("feed"===i.name?(e=i.children,n.type="atom",l(n,"id","id",e),l(n,"title","title",e),(t=s("link",e))&&(t=t.attribs)&&(t=t.href)&&(n.link=t),l(n,"description","subtitle",e),(t=u("updated",e))&&(n.updated=new Date(t)),l(n,"author","email",e,!0),n.items=o("entry",e).map((function(t){var e,n={};return l(n,"id","id",t=t.children),l(n,"title","title",t),(e=s("link",t))&&(e=e.attribs)&&(e=e.href)&&(n.link=e),(e=u("summary",t)||u("content",t))&&(n.description=e),(e=u("updated",t))&&(n.pubDate=new Date(e)),n}))):(e=s("channel",i.children).children,n.type=i.name.substr(0,3),n.id="",l(n,"title","title",e),l(n,"link","link",e),l(n,"description","description",e),(t=u("lastBuildDate",e))&&(n.updated=new Date(t)),l(n,"author","managingEditor",e,!0),n.items=o("item",i.children).map((function(t){var e,n={};return l(n,"id","guid",t=t.children),l(n,"title","title",t),l(n,"link","link",t),l(n,"description","description",t),(e=u("pubDate",t))&&(n.pubDate=new Date(e)),n})))),this.dom=n,r.prototype._handleCallback.call(this,i?null:Error("couldn't find root of feed"))},t.exports=a},function(t,e,n){var r=n(46),i=n(161),a=r.isTag;t.exports={getInnerHTML:function(t,e){return t.children?t.children.map((function(t){return i(t,e)})).join(""):""},getOuterHTML:i,getText:function t(e){return Array.isArray(e)?e.map(t).join(""):a(e)?"br"===e.name?"\n":t(e.children):e.type===r.CDATA?t(e.children):e.type===r.Text?e.data:""}}},function(t,e,n){var r=n(162),i=n(163),a=n(167);a.elementNames.__proto__=null,a.attributeNames.__proto__=null;var o={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var s={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},u=t.exports=function(t,e){Array.isArray(t)||t.cheerio||(t=[t]),e=e||{};for(var n="",i=0;i<t.length;i++){var a=t[i];"root"===a.type?n+=u(a.children,e):r.isTag(a)?n+=c(a,e):a.type===r.Directive?n+=h(a):a.type===r.Comment?n+=p(a):a.type===r.CDATA?n+=d(a):n+=f(a,e)}return n},l=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function c(t,e){"foreign"===e.xmlMode&&(t.name=a.elementNames[t.name]||t.name,t.parent&&l.indexOf(t.parent.name)>=0&&(e=Object.assign({},e,{xmlMode:!1}))),!e.xmlMode&&["svg","math"].indexOf(t.name)>=0&&(e=Object.assign({},e,{xmlMode:"foreign"}));var n="<"+t.name,r=function(t,e){if(t){var n,r="";for(var o in t)n=t[o],r&&(r+=" "),"foreign"===e.xmlMode&&(o=a.attributeNames[o]||o),r+=o,(null!==n&&""!==n||e.xmlMode)&&(r+='="'+(e.decodeEntities?i.encodeXML(n):n.replace(/\"/g,"&quot;"))+'"');return r}}(t.attribs,e);return r&&(n+=" "+r),!e.xmlMode||t.children&&0!==t.children.length?(n+=">",t.children&&(n+=u(t.children,e)),s[t.name]&&!e.xmlMode||(n+="</"+t.name+">")):n+="/>",n}function h(t){return"<"+t.data+">"}function f(t,e){var n=t.data||"";return!e.decodeEntities||t.parent&&t.parent.name in o||(n=i.encodeXML(n)),n}function d(t){return"<![CDATA["+t.children[0].data+"]]>"}function p(t){return"\x3c!--"+t.data+"--\x3e"}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"}(r=e.ElementType||(e.ElementType={})),e.isTag=function(t){return t.type===r.Tag||t.type===r.Script||t.type===r.Style},e.Root=r.Root,e.Text=r.Text,e.Directive=r.Directive,e.Comment=r.Comment,e.Script=r.Script,e.Style=r.Style,e.Tag=r.Tag,e.CDATA=r.CDATA,e.Doctype=r.Doctype},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0;var r=n(95),i=n(98);e.decode=function(t,e){return(!e||e<=0?r.decodeXML:r.decodeHTML)(t)},e.decodeStrict=function(t,e){return(!e||e<=0?r.decodeXML:r.decodeHTMLStrict)(t)},e.encode=function(t,e){return(!e||e<=0?i.encodeXML:i.encodeHTML)(t)};var a=n(98);Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return a.encodeXML}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return a.encodeNonAsciiHTML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return a.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return a.escapeUTF8}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return a.encodeHTML}});var o=n(95);Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},function(t){t.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(166)),a=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)};e.default=function(t){return t>=55296&&t<=57343||t>1114111?"\ufffd":(t in i.default&&(t=i.default[t]),a(t))}},function(t){t.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(t){t.exports=JSON.parse('{"elementNames":{"altglyph":"altGlyph","altglyphdef":"altGlyphDef","altglyphitem":"altGlyphItem","animatecolor":"animateColor","animatemotion":"animateMotion","animatetransform":"animateTransform","clippath":"clipPath","feblend":"feBlend","fecolormatrix":"feColorMatrix","fecomponenttransfer":"feComponentTransfer","fecomposite":"feComposite","feconvolvematrix":"feConvolveMatrix","fediffuselighting":"feDiffuseLighting","fedisplacementmap":"feDisplacementMap","fedistantlight":"feDistantLight","fedropshadow":"feDropShadow","feflood":"feFlood","fefunca":"feFuncA","fefuncb":"feFuncB","fefuncg":"feFuncG","fefuncr":"feFuncR","fegaussianblur":"feGaussianBlur","feimage":"feImage","femerge":"feMerge","femergenode":"feMergeNode","femorphology":"feMorphology","feoffset":"feOffset","fepointlight":"fePointLight","fespecularlighting":"feSpecularLighting","fespotlight":"feSpotLight","fetile":"feTile","feturbulence":"feTurbulence","foreignobject":"foreignObject","glyphref":"glyphRef","lineargradient":"linearGradient","radialgradient":"radialGradient","textpath":"textPath"},"attributeNames":{"definitionurl":"definitionURL","attributename":"attributeName","attributetype":"attributeType","basefrequency":"baseFrequency","baseprofile":"baseProfile","calcmode":"calcMode","clippathunits":"clipPathUnits","diffuseconstant":"diffuseConstant","edgemode":"edgeMode","filterunits":"filterUnits","glyphref":"glyphRef","gradienttransform":"gradientTransform","gradientunits":"gradientUnits","kernelmatrix":"kernelMatrix","kernelunitlength":"kernelUnitLength","keypoints":"keyPoints","keysplines":"keySplines","keytimes":"keyTimes","lengthadjust":"lengthAdjust","limitingconeangle":"limitingConeAngle","markerheight":"markerHeight","markerunits":"markerUnits","markerwidth":"markerWidth","maskcontentunits":"maskContentUnits","maskunits":"maskUnits","numoctaves":"numOctaves","pathlength":"pathLength","patterncontentunits":"patternContentUnits","patterntransform":"patternTransform","patternunits":"patternUnits","pointsatx":"pointsAtX","pointsaty":"pointsAtY","pointsatz":"pointsAtZ","preservealpha":"preserveAlpha","preserveaspectratio":"preserveAspectRatio","primitiveunits":"primitiveUnits","refx":"refX","refy":"refY","repeatcount":"repeatCount","repeatdur":"repeatDur","requiredextensions":"requiredExtensions","requiredfeatures":"requiredFeatures","specularconstant":"specularConstant","specularexponent":"specularExponent","spreadmethod":"spreadMethod","startoffset":"startOffset","stddeviation":"stdDeviation","stitchtiles":"stitchTiles","surfacescale":"surfaceScale","systemlanguage":"systemLanguage","tablevalues":"tableValues","targetx":"targetX","targety":"targetY","textlength":"textLength","viewbox":"viewBox","viewtarget":"viewTarget","xchannelselector":"xChannelSelector","ychannelselector":"yChannelSelector","zoomandpan":"zoomAndPan"}}')},function(t,e){var n=e.getChildren=function(t){return t.children},r=e.getParent=function(t){return t.parent};e.getSiblings=function(t){var e=r(t);return e?n(e):[t]},e.getAttributeValue=function(t,e){return t.attribs&&t.attribs[e]},e.hasAttrib=function(t,e){return!!t.attribs&&hasOwnProperty.call(t.attribs,e)},e.getName=function(t){return t.name}},function(t,e){e.removeElement=function(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children;e.splice(e.lastIndexOf(t),1)}},e.replaceElement=function(t,e){var n=e.prev=t.prev;n&&(n.next=e);var r=e.next=t.next;r&&(r.prev=e);var i=e.parent=t.parent;if(i){var a=i.children;a[a.lastIndexOf(t)]=e}},e.appendChild=function(t,e){if(e.parent=t,1!==t.children.push(e)){var n=t.children[t.children.length-2];n.next=e,e.prev=n,e.next=null}},e.append=function(t,e){var n=t.parent,r=t.next;if(e.next=r,e.prev=t,t.next=e,e.parent=n,r){if(r.prev=e,n){var i=n.children;i.splice(i.lastIndexOf(r),0,e)}}else n&&n.children.push(e)},e.prepend=function(t,e){var n=t.parent;if(n){var r=n.children;r.splice(r.lastIndexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=n,e.prev=t.prev,e.next=t,t.prev=e}},function(t,e,n){var r=n(46).isTag;function i(t,e,n,r){for(var a,o=[],s=0,u=e.length;s<u&&!(t(e[s])&&(o.push(e[s]),--r<=0))&&(a=e[s].children,!(n&&a&&a.length>0&&(a=i(t,a,n,r),o=o.concat(a),(r-=a.length)<=0)));s++);return o}t.exports={filter:function(t,e,n,r){Array.isArray(e)||(e=[e]);"number"===typeof r&&isFinite(r)||(r=1/0);return i(t,e,!1!==n,r)},find:i,findOneChild:function(t,e){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n];return null},findOne:function t(e,n){for(var i=null,a=0,o=n.length;a<o&&!i;a++)r(n[a])&&(e(n[a])?i=n[a]:n[a].children.length>0&&(i=t(e,n[a].children)));return i},existsOne:function t(e,n){for(var i=0,a=n.length;i<a;i++)if(r(n[i])&&(e(n[i])||n[i].children.length>0&&t(e,n[i].children)))return!0;return!1},findAll:function(t,e){var n=[],i=e.slice();for(;i.length;){var a=i.shift();r(a)&&(a.children&&a.children.length>0&&i.unshift.apply(i,a.children),t(a)&&n.push(a))}return n}}},function(t,e,n){var r=n(46),i=e.isTag=r.isTag;e.testElement=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("tag_name"===n){if(!i(e)||!t.tag_name(e.name))return!1}else if("tag_type"===n){if(!t.tag_type(e.type))return!1}else if("tag_contains"===n){if(i(e)||!t.tag_contains(e.data))return!1}else if(!e.attribs||!t[n](e.attribs[n]))return!1}else;return!0};var a={tag_name:function(t){return"function"===typeof t?function(e){return i(e)&&t(e.name)}:"*"===t?i:function(e){return i(e)&&e.name===t}},tag_type:function(t){return"function"===typeof t?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return"function"===typeof t?function(e){return!i(e)&&t(e.data)}:function(e){return!i(e)&&e.data===t}}};function o(t,e){return"function"===typeof e?function(n){return n.attribs&&e(n.attribs[t])}:function(n){return n.attribs&&n.attribs[t]===e}}function s(t,e){return function(n){return t(n)||e(n)}}e.getElements=function(t,e,n,r){var i=Object.keys(t).map((function(e){var n=t[e];return e in a?a[e](n):o(e,n)}));return 0===i.length?[]:this.filter(i.reduce(s),e,n,r)},e.getElementById=function(t,e,n){return Array.isArray(e)||(e=[e]),this.findOne(o("id",t),e,!1!==n)},e.getElementsByTagName=function(t,e,n,r){return this.filter(a.tag_name(t),e,n,r)},e.getElementsByTagType=function(t,e,n,r){return this.filter(a.tag_type(t),e,n,r)}},function(t,e){e.removeSubsets=function(t){for(var e,n,r,i=t.length;--i>-1;){for(e=n=t[i],t[i]=null,r=!0;n;){if(t.indexOf(n)>-1){r=!1,t.splice(i,1);break}n=n.parent}r&&(t[i]=e)}return t};var n=1,r=2,i=4,a=8,o=16,s=e.compareDocumentPosition=function(t,e){var s,u,l,c,h,f,d=[],p=[];if(t===e)return 0;for(s=t;s;)d.unshift(s),s=s.parent;for(s=e;s;)p.unshift(s),s=s.parent;for(f=0;d[f]===p[f];)f++;return 0===f?n:(l=(u=d[f-1]).children,c=d[f],h=p[f],l.indexOf(c)>l.indexOf(h)?u===e?i|o:i:u===t?r|a:r)};e.uniqueSort=function(t){var e,n,a=t.length;for(t=t.slice();--a>-1;)e=t[a],(n=t.indexOf(e))>-1&&n<a&&t.splice(a,1);return t.sort((function(t,e){var n=s(t,e);return n&r?-1:n&i?1:0})),t}},function(t,e,n){t.exports=i;var r=n(99);function i(t){r.call(this,new a(this),t)}function a(t){this.scope=t}n(53)(i,r),i.prototype.readable=!0;var o=n(41).EVENTS;Object.keys(o).forEach((function(t){if(0===o[t])a.prototype["on"+t]=function(){this.scope.emit(t)};else if(1===o[t])a.prototype["on"+t]=function(e){this.scope.emit(t,e)};else{if(2!==o[t])throw Error("wrong number of arguments!");a.prototype["on"+t]=function(e,n){this.scope.emit(t,e,n)}}}))},,function(t,e,n){"use strict";var r=n(176).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=o(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){var r=n(68),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),a(i,o),o.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),o=r[0],s=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=16383,s=0,u=n-i;s<u;s+=o)a.push(c(t,s,s+o>u?u:s+o));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=l}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+d]=255&o,d+=p,o/=256,l-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){function r(t){this._cbs=t||{}}t.exports=r;var i=n(41).EVENTS;Object.keys(i).forEach((function(t){if(0===i[t])t="on"+t,r.prototype[t]=function(){this._cbs[t]&&this._cbs[t]()};else if(1===i[t])t="on"+t,r.prototype[t]=function(e){this._cbs[t]&&this._cbs[t](e)};else{if(2!==i[t])throw Error("wrong number of arguments");t="on"+t,r.prototype[t]=function(e,n){this._cbs[t]&&this._cbs[t](e,n)}}}))},function(t,e,n){function r(t){this._cbs=t||{},this.events=[]}t.exports=r;var i=n(41).EVENTS;Object.keys(i).forEach((function(t){if(0===i[t])t="on"+t,r.prototype[t]=function(){this.events.push([t]),this._cbs[t]&&this._cbs[t]()};else if(1===i[t])t="on"+t,r.prototype[t]=function(e){this.events.push([t,e]),this._cbs[t]&&this._cbs[t](e)};else{if(2!==i[t])throw Error("wrong number of arguments");t="on"+t,r.prototype[t]=function(e,n){this.events.push([t,e,n]),this._cbs[t]&&this._cbs[t](e,n)}}})),r.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},r.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var t=0,e=this.events.length;t<e;t++)if(this._cbs[this.events[t][0]]){var n=this.events[t].length;1===n?this._cbs[this.events[t][0]]():2===n?this._cbs[this.events[t][0]](this.events[t][1]):this._cbs[this.events[t][0]](this.events[t][1],this.events[t][2])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.data}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var u=t.name;if(!(0,s.default)(u))return null;var l=(0,a.default)(t.attribs,e),c=null;-1===o.default.indexOf(u)&&(c=(0,i.default)(t.children,n));return r.default.createElement(u,l,c)};var r=u(n(10)),i=u(n(67)),a=u(n(100)),o=u(n(188)),s=u(n(101));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Object.keys(t).filter((function(t){return(0,a.default)(t)})).reduce((function(e,n){var a=n.toLowerCase(),o=i.default[a]||a;return e[o]=function(t,e){r.default.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())>=0&&(e=t);return e}(o,t[n]),e}),{})};var r=o(n(185)),i=o(n(186)),a=o(n(101));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["allowfullScreen","async","autoplay","capture","checked","controls","default","defer","disabled","formnovalidate","hidden","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","scoped","seamless","selected","itemscope"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",as:"as",async:"async",autocomplete:"autoComplete",autoplay:"autoPlay",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",challenge:"challenge",checked:"checked",cite:"cite",classid:"classID",class:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlsList:"controlsList",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime",default:"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",enctype:"encType",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",for:"htmlFor","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",integrity:"integrity",is:"is",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginheight:"marginHeight",marginwidth:"marginWidth",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",slot:"slot",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",datatype:"datatype",inlist:"inlist",prefix:"prefix",property:"property",resource:"resource",typeof:"typeof",vocab:"vocab",autocapitalize:"autoCapitalize",autocorrect:"autoCorrect",autosave:"autoSave",color:"color",itemprop:"itemProp",itemscope:"itemScope",itemtype:"itemType",itemid:"itemID",itemref:"itemRef",results:"results",security:"security",unselectable:"unselectable"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===t)return{};return t.split(";").reduce((function(t,e){var n=e.split(/^([^:]+):/).filter((function(t,e){return e>0})).map((function(t){return t.trim().toLowerCase()})),i=r(n,2),a=i[0],o=i[1];return void 0===o||(t[a=a.replace(/^-ms-/,"ms-").replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))]=o),t}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=void 0;t.children.length>0&&(n=t.children[0].data);var a=(0,i.default)(t.attribs,e);return r.default.createElement("style",a,n)};var r=a(n(10)),i=a(n(100));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.decodeEntities,a=void 0===n||n,o=e.transform,s=e.preprocessNodes,u=void 0===s?function(t){return t}:s,l=u(r.default.parseDOM(t,{decodeEntities:a}));return(0,i.default)(l,o)};var r=a(n(41)),i=a(n(67));function a(t){return t&&t.__esModule?t:{default:t}}},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"Node",(function(){return rt})),n.d(e,"Parser",(function(){return F})),n.d(e,"Position",(function(){return j})),n.d(e,"SourceLocation",(function(){return I})),n.d(e,"TokContext",(function(){return ot})),n.d(e,"Token",(function(){return Mt})),n.d(e,"TokenType",(function(){return m})),n.d(e,"defaultOptions",(function(){return N})),n.d(e,"getLineInfo",(function(){return D})),n.d(e,"isIdentifierChar",(function(){return v})),n.d(e,"isIdentifierStart",(function(){return p})),n.d(e,"isNewLine",(function(){return T})),n.d(e,"keywordTypes",(function(){return b})),n.d(e,"lineBreak",(function(){return S})),n.d(e,"lineBreakG",(function(){return k})),n.d(e,"nonASCIIwhitespace",(function(){return E})),n.d(e,"parse",(function(){return It})),n.d(e,"parseExpressionAt",(function(){return Dt})),n.d(e,"tokContexts",(function(){return st})),n.d(e,"tokTypes",(function(){return w})),n.d(e,"tokenizer",(function(){return Nt})),n.d(e,"version",(function(){return jt}));var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:i,"5module":i+" export import",6:i+" const class extends export import super"},o=/^in(stanceof)?$/,s="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",u="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",l=new RegExp("["+s+"]"),c=new RegExp("["+s+u+"]");s=u=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function d(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&d(t,h)))}function v(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==e&&(d(t,h)||d(t,f)))))}var m=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new m(t,{beforeExpr:!0,binop:e})}var y={beforeExpr:!0},_={startsExpr:!0},b={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,b[t]=new m(t,e)}var w={num:new m("num",_),regexp:new m("regexp",_),string:new m("string",_),name:new m("name",_),eof:new m("eof"),bracketL:new m("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new m("]"),braceL:new m("{",{beforeExpr:!0,startsExpr:!0}),braceR:new m("}"),parenL:new m("(",{beforeExpr:!0,startsExpr:!0}),parenR:new m(")"),comma:new m(",",y),semi:new m(";",y),colon:new m(":",y),dot:new m("."),question:new m("?",y),questionDot:new m("?."),arrow:new m("=>",y),template:new m("template"),invalidTemplate:new m("invalidTemplate"),ellipsis:new m("...",y),backQuote:new m("`",_),dollarBraceL:new m("${",{beforeExpr:!0,startsExpr:!0}),eq:new m("=",{beforeExpr:!0,isAssign:!0}),assign:new m("_=",{beforeExpr:!0,isAssign:!0}),incDec:new m("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new m("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new m("**",{beforeExpr:!0}),coalesce:g("??",1),_break:x("break"),_case:x("case",y),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",y),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",y),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",_),_if:x("if"),_return:x("return",y),_switch:x("switch"),_throw:x("throw",y),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",_),_super:x("super",_),_class:x("class",_),_extends:x("extends",y),_export:x("export"),_import:x("import",_),_null:x("null",_),_true:x("true",_),_false:x("false",_),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\r\n?|\n|\u2028|\u2029/,k=new RegExp(S.source,"g");function T(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var E=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,O=Object.prototype,M=O.hasOwnProperty,A=O.toString;function P(t,e){return M.call(t,e)}var L=Array.isArray||function(t){return"[object Array]"===A.call(t)};function R(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var j=function(t,e){this.line=t,this.column=e};j.prototype.offset=function(t){return new j(this.line,this.column+t)};var I=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var n=1,r=0;;){k.lastIndex=r;var i=k.exec(t);if(!(i&&i.index<e))return new j(n,e-r);++n,r=i.index+i[0].length}}var N={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var n in N)e[n]=t&&P(t,n)?t[n]:N[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return L(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(u.loc=new I(this,o,s)),t.ranges&&(u.range=[i,a]),e.push(u)}}(e,e.onComment)),e}function z(t,e){return 2|(t?4:0)|(e?8:0)}var F=function(t,e,n){this.options=t=B(t),this.sourceFile=t.sourceFile,this.keywords=R(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(i=r[o]);o--);"module"===t.sourceType&&(i+=" await")}this.reservedWords=R(i);var s=(i?i+" ":"")+r.strict;this.reservedWordsStrict=R(s),this.reservedWordsStrictBind=R(s+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},V={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};F.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},V.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},V.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},V.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},V.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},V.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},V.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},F.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},F.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},F.parse=function(t,e){return new this(e,t).parse()},F.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},F.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(F.prototype,V);var U=F.prototype,q=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=q.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){C.lastIndex=t+e[0].length;var n=C.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||S.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},U.eat=function(t){return this.type===t&&(this.next(),!0)},U.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},U.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},U.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},U.expect=function(t){this.eat(t)||this.unexpected()},U.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},U.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},U.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var W=F.prototype;W.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var G={kind:"loop"},X={kind:"switch"};W.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(p(r,!0)){for(var i=n+1;v(this.input.charCodeAt(i),!0);)++i;var a=this.input.slice(n,i);if(!o.test(a))return!0}return!1},W.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!S.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!v(this.input.charAt(e+8)))},W.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=w._var,r="let"),i){case w._break:case w._continue:return this.parseBreakContinueStatement(a,i.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock(!0,a);case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:if(this.options.ecmaVersion>10&&i===w._import){C.lastIndex=this.pos;var o=C.exec(this.input),s=this.pos+o[0].length,u=this.input.charCodeAt(s);if(40===u||46===u)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var l=this.value,c=this.parseExpression();return i===w.name&&"Identifier"===c.type&&this.eat(w.colon)?this.parseLabeledStatement(a,l,c,t):this.parseExpressionStatement(a,c)}},W.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},W.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},W.parseDoStatement=function(t){return this.next(),this.labels.push(G),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},W.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(G),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new H,o=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},W.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Z|(n?0:Q),!1,e)},W.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},W.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},W.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(X),this.enterScope(0);for(var n=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var r=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},W.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Y=[];W.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},W.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},W.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(G),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},W.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},W.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},W.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===w._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},W.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},W.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);this.type!==w.braceR;){var r=this.parseStatement(null);e.body.push(r)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},W.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},W.parseForIn=function(t,e){var n=this.type===w._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},W.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(w.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===w._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(w.comma))break}return t},W.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var Z=1,Q=2;W.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===w.star&&e&Q&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&Z&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&Q||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(z(t.async,t.generator)),e&Z||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Z?"FunctionDeclaration":"FunctionExpression")},W.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},W.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(w.braceL);this.type!==w.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},W.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(w.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,i,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},W.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},W.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},W.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},W.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,4|Z,!1,n)}else if(this.type===w._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},W.checkExport=function(t,e,n){t&&(P(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},W.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},W.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},W.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},W.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},W.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=Y,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},W.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportSpecifier"))}return t},W.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},W.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var J=F.prototype;J.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},J.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},J.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},J.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},J.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},J.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(w.comma),e&&this.type===w.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},J.parseBindingListItem=function(t){return t},J.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},J.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(P(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var K=F.prototype;K.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[r="$"+r];if(o)("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property");else o=e[r]={init:!1,get:!1,set:!1};o[a]=!0}}},K.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===w.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},K.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new H,r=!0);var o=this.start,s=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var l=this.startNodeAt(o,s);return l.operator=this.value,l.left=this.type===w.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(t),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),u},K.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(w.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},K.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},K.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==w._in)&&a>r){var o=this.type===w.logicalOR||this.type===w.logicalAND,s=this.type===w.coalesce;s&&(a=w.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,a,i),f=this.buildBinary(e,n,t,h,u,o||s);return(o&&this.type===w.coalesce||s&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,e,n,r,i)}return t},K.buildBinary=function(t,e,n,r,i,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},K.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===w.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},K.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},K.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,r,i,a);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var s=this.startNodeAt(e,n);s.expression=o,o=this.finishNode(s,"ChainExpression")}return o}t=o}},K.parseSubscript=function(t,e,n,r,i,a){var o=this.options.ecmaVersion>=11,s=o&&this.eat(w.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(w.bracketL);if(u||s&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var l=this.startNodeAt(e,n);l.object=t,l.property=u?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),l.computed=!!u,u&&this.expect(w.bracketR),o&&(l.optional=s),t=this.finishNode(l,"MemberExpression")}else if(!r&&this.eat(w.parenL)){var c=new H,h=this.yieldPos,f=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,c);if(i&&!s&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=h,this.awaitPos=f,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(e,n),p,!0);this.checkExpressionErrors(c,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var v=this.startNodeAt(e,n);v.callee=t,v.arguments=p,o&&(v.optional=s),t=this.finishNode(v,"CallExpression")}else if(this.type===w.backQuote){(s||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,n);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},K.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===w.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case w.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},K.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case w.parenL:return this.parseDynamicImport(t);case w.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},K.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(w.parenR)){var e=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},K.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},K.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},K.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},K.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],l=!0,c=!1,h=new H,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(l?l=!1:this.expect(w.comma),i&&this.afterTrailingComma(w.parenR,!0)){c=!0;break}if(this.type===w.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,v=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,r,u);u.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,u.length>1?((e=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(e,"SequenceExpression",p,v)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},K.parseParenItem=function(t){return t},K.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var $=[];K.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===w._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):t.arguments=$,this.finishNode(t,"NewExpression")},K.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,"TemplateElement")},K.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(w.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},K.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},K.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},K.parseProperty=function(t,e){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(w.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,e)):r=!1,this.parsePropertyValue(o,t,n,r,i,a,e,s),this.finishNode(o,"Property")},K.parsePropertyValue=function(t,e,n,r,i,a,o,s){if((n||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR||this.type===w.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},K.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},K.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},K.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|z(e,r.generator)|(n?128:0)),this.expect(w.parenL),r.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},K.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|z(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},K.parseFunctionBody=function(t,e,n){var r=e&&this.type!==w.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLVal(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!i),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope()},K.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},K.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,1,e?null:n)}},K.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===w.comma?o=null:this.type===w.ellipsis?(o=this.parseSpread(r),r&&this.type===w.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},K.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},K.parseIdent=function(t,e){var n=this.startNode();return this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},K.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},K.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var tt=F.prototype;tt.raise=function(t,e){var n=D(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},tt.raiseRecoverable=tt.raise,tt.curPosition=function(){if(this.options.locations)return new j(this.curLine,this.pos-this.lineStart)};var et=F.prototype,nt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};et.enterScope=function(t){this.scopeStack.push(new nt(t))},et.exitScope=function(){this.scopeStack.pop()},et.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},et.declareName=function(t,e,n){var r=!1;if(2===e){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&1&i.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(32&s.flags&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){r=!0;break}if(s.var.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t],3&s.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},et.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},et.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},et.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var rt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new I(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},it=F.prototype;function at(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}it.startNode=function(){return new rt(this,this.start,this.startLoc)},it.startNodeAt=function(t,e){return new rt(this,t,e)},it.finishNode=function(t,e){return at.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},it.finishNodeAt=function(t,e,n,r){return at.call(this,t,e,n,r)};var ot=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},st={b_stat:new ot("{",!1),b_expr:new ot("{",!0),b_tmpl:new ot("${",!1),p_stat:new ot("(",!1),p_expr:new ot("(",!0),q_tmpl:new ot("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new ot("function",!1),f_expr:new ot("function",!0),f_expr_gen:new ot("function",!0,!1,null,!0),f_gen:new ot("function",!1,!1,null,!0)},ut=F.prototype;ut.initialContext=function(){return[st.b_stat]},ut.braceIsBlock=function(t){var e=this.curContext();return e===st.f_expr||e===st.f_stat||(t!==w.colon||e!==st.b_stat&&e!==st.b_expr?t===w._return||t===w.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===st.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},ut.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},ut.updateContext=function(t){var e,n=this.type;n.keyword&&t===w.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===st.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?st.b_stat:st.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(st.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?st.p_stat:st.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&S.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===st.b_stat?this.context.push(st.f_stat):this.context.push(st.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===st.q_tmpl?this.context.pop():this.context.push(st.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===st.f_expr?this.context[e]=st.f_expr_gen:this.context[e]=st.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var lt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ct=lt+" Extended_Pictographic",ht={9:lt,10:ct,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},ft="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",dt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",pt=dt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",vt={9:dt,10:pt,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},mt={};function gt(t){var e=mt[t]={binary:R(ht[t]+" "+ft),nonBinary:{General_Category:R(ft),Script:R(vt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}gt(9),gt(10),gt(11);var yt=F.prototype,_t=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=mt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function bt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function xt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function wt(t){return t>=65&&t<=90||t>=97&&t<=122}function St(t){return wt(t)||95===t}function kt(t){return St(t)||Tt(t)}function Tt(t){return t>=48&&t<=57}function Et(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ct(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ot(t){return t>=48&&t<=55}_t.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},_t.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},_t.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,r=n.length;if(t>=r)return-1;var i=n.charCodeAt(t);if(!e&&!this.switchU||i<=55295||i>=57344||t+1>=r)return i;var a=n.charCodeAt(t+1);return a>=56320&&a<=57343?(i<<10)+a-56613888:i},_t.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,r=n.length;if(t>=r)return r;var i,a=n.charCodeAt(t);return!e&&!this.switchU||a<=55295||a>=57344||t+1>=r||(i=n.charCodeAt(t+1))<56320||i>57343?t+1:t+2},_t.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},_t.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},_t.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},_t.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},yt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},yt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},yt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},yt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},yt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},yt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},yt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},yt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},yt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},yt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},yt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},yt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},yt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},yt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},yt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},yt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},yt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!xt(e)&&(t.lastIntValue=e,t.advance(),!0)},yt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!xt(n);)t.advance();return t.pos!==e},yt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},yt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},yt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},yt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=bt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=bt(t.lastIntValue);return!0}return!1},yt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},yt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),function(t){return v(t,!0)||36===t||95===t||8204===t||8205===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},yt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},yt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},yt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},yt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},yt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},yt.regexp_eatZero=function(t){return 48===t.current()&&!Tt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},yt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},yt.regexp_eatControlLetter=function(t){var e=t.current();return!!wt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},yt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n,r=t.pos,i=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(i&&a>=55296&&a<=56319){var o=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(a-55296)+(s-56320)+65536,!0}t.pos=o,t.lastIntValue=a}return!0}if(i&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((n=t.lastIntValue)>=0&&n<=1114111))return!0;i&&t.raise("Invalid unicode escape"),t.pos=r}return!1},yt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},yt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},yt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},yt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},yt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){P(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},yt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},yt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";St(e=t.current());)t.lastStringValue+=bt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";kt(e=t.current());)t.lastStringValue+=bt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},yt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},yt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},yt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Ot(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},yt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},yt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Tt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},yt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},yt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Tt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},yt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Et(n=t.current());)t.lastIntValue=16*t.lastIntValue+Ct(n),t.advance();return t.pos!==e},yt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},yt.regexp_eatOctalDigit=function(t){var e=t.current();return Ot(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},yt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Et(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Ct(i),t.advance()}return!0};var Mt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new I(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},At=F.prototype;function Pt(t){return"function"!==typeof BigInt?null:BigInt(t.replace(/_/g,""))}function Lt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}At.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Mt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},At.getToken=function(){return this.next(),new Mt(this)},"undefined"!==typeof Symbol&&(At[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),At.curContext=function(){return this.context[this.context.length-1]},At.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},At.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},At.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},At.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(k.lastIndex=n;(t=k.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},At.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!T(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},At.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&E.test(String.fromCharCode(t))))break t;++this.pos}}},At.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},At.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},At.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},At.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,n+1):this.finishOp(r,n)},At.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(w.assign,3);return this.finishOp(124===t?w.logicalOR:w.logicalAND,2)}return 61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},At.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},At.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},At.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},At.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},At.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(w.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(w.assign,3);return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},At.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+Lt(t)+"'")},At.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},At.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(S.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new _t(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(l){}return this.finishToken(w.regexp,{pattern:i,flags:o,value:u})},At.readInt=function(t,e,n){for(var r=this.options.ecmaVersion>=12&&void 0===e,i=n&&48===this.input.charCodeAt(this.pos),a=this.pos,o=0,s=0,u=0,l=null==e?1/0:e;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(r&&95===c)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=c;else{if((h=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=t)break;s=c,o=o*t+h}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||null!=e&&this.pos-a!==e?null:o},At.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Pt(this.input.slice(e,this.pos)),++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,n)},At.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=Pt(this.input.slice(e,this.pos));return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,i)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a,o=(a=this.input.slice(e,this.pos),n?parseInt(a,8):parseFloat(a.replace(/_/g,"")));return this.finishToken(w.num,o)},At.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},At.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(T(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(w.string,e)};var Rt={};At.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Rt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},At.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Rt;this.raise(t,e)},At.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===n?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(T(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},At.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},At.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Lt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return T(e)?"":String.fromCharCode(e)}},At.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},At.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(v(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?p:v)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Lt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},At.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(e=b[t]),this.finishToken(e,t)};var jt="7.4.1";function It(t,e){return F.parse(t,e)}function Dt(t,e,n){return F.parseExpressionAt(t,e,n)}function Nt(t,e){return F.tokenizer(t,e)}F.acorn={Parser:F,version:jt,defaultOptions:N,Position:j,SourceLocation:I,getLineInfo:D,Node:rt,TokenType:m,tokTypes:w,keywordTypes:b,TokContext:ot,tokContexts:st,isIdentifierChar:v,isIdentifierStart:p,Token:Mt,isNewLine:T,lineBreak:S,lineBreakG:k,nonASCIIwhitespace:E}},,,,,,,,,,,function(t,e,n){var r=n(209),i=n(210),a=n(211),o=n(213);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(212);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},,,,,,,,,,,function(t,e,n){"use strict";var r=n(10),i=n.n(r),a=n(21),o=n.n(a),s=n(20);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var f=s.Util.camelCase,d=s.Util.withCamelCaseKeys,p=s.Util.isEmpty,v=["accessibility","breakpoints","dataSrc","placeholder","publicId","signature"],m={flv:"x-flv","3gp":"3gpp",mov:"quicktime",mpg:"mpeg",avi:"x-msvideo",wmv:"x-ms-wmv",ogv:"ogg"},g={m4a:"mp4",wav:"vnd.wav",m3u:"x-mpegurl",mp3:"mpeg",ogv:"ogg",aif:"x-aiff",aifc:"x-aiff",aiff:"x-aiff"},y=[].concat(s.Transformation.PARAM_NAMES,v).map(s.Util.camelCase).reduce((function(t,e){return t[e]=!0,t}),{}),_=function(t){var e,n=h((e=t,Object.entries(e).reduce((function(t,e){var n,r=e[0],i=e[1];return null==i?t:u({},t,((n={})[r]=i,n))}),{})),["public_id"]),r=s.Util.withSnakeCaseKeys(n);return s.Cloudinary.new(r)},b=function(t){return function(t,e){var n=t.publicId,r=h(t,["publicId"]);return _(r)[e+"Tag"](n,s.Util.withSnakeCaseKeys(r))}(t,"image")},x=function(t,e){var n=s.Util.withSnakeCaseKeys(e),r=_(n);return r.cloudinary_update(t,n),r.responsive(n,!1)},w=function(t){var e=t.children,n=h(t,["children"]),r={children:e,cloudinaryProps:{},nonCloudinaryProps:{},cloudinaryReactProps:{}};return Object.keys(n).forEach((function(t){var e=s.Util.camelCase(t),i=n[t];y[e]?void 0!==n[t]&&null!==n[t]&&(r.cloudinaryProps[e]=i):"includeOwnBody"===e?r.cloudinaryReactProps[e]=i:r.nonCloudinaryProps[t]=i})),r},S=function(t,e){return!(!i.a.isValidElement(t)||!t.type||t.type.displayName!==e)},k=function(){return[].slice.call(arguments).reduce((function(t,e){return Object.keys(e||{}).forEach((function(n){var r=e[n];null!==r&&void 0!==r&&(t[n]=r)})),t}),{})},T=function t(e){var n=e?i.a.Children.toArray(e).filter((function(t){return S(t,"CloudinaryTransformation")})).map((function(e){var n=k(e.props,e.context),r=t(e.props.children);return r&&(n.transformation=r),n})):[];return n.length?n:null},E=function(t){var e,n,r=t.children,i=t.accessibility,a=t.placeholder,o=h(t,["children","accessibility","placeholder"]),u=(e=d(o),void 0===(n=s.Transformation.methods)&&(n=[]),(e?n.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{}):e)||{}),l=T(r);p(l)||(u.transformation=l);var c={accessibility:i,placeholder:a};return Object.keys(c).filter((function(t){return c[t]})).forEach((function(t){u[t]=c[t]})),u},C=Object(r.createContext)(),O=s.Util.camelCase,M=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).getContext=function(){return i.context||{}},i.onIntersect=function(){i.setState({isInView:!0})},i.getExtendedProps=function(t,e){return void 0===t&&(t=i.props),void 0===e&&(e=i.getContext()),k(e,t)},i.attachRef=function(t){var e=i.props.innerRef;i.element.current=t,e&&(e instanceof Function?e(t):e.current=t)},i.element=Object(r.createRef)(),i}return l(e,t),e.prototype.render=function(){return null},e}(r.PureComponent);M.defaultProps={innerRef:null,publicId:null},M.propTypes=u({},function(t){t=t||[];for(var e={},n=0;n<t.length;n++){var r=t[n];e[f(r)]=o.a.any}return e}(s.Transformation.PARAM_NAMES.map(O)),{innerRef:o.a.any,publicId:o.a.string}),M.contextType=C;var A=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.render=function(){var t=u({},this.getContext(),this.props),e=w(t),n=e.children,r=e.cloudinaryProps,a=e.nonCloudinaryProps,o=e.cloudinaryReactProps;return i.a.createElement(C.Provider,{value:r},o.includeOwnBody?n:i.a.createElement("div",a,n))},e}(M);A.propTypes=u({},M.propTypes,{includeOwnBody:o.a.bool}),A.defaultProps={includeOwnBody:!1};var P="\nWarning: passing a number value for width cancels the 'responsive' prop's effect on the image transformation.\nThe 'responsive' prop affects the image transformation only when width === 'auto'.\nPassing 'width=\"auto\" responsive' will affect the actual image width that is fetched from Cloudinary.\nThe 'responsive' prop causes the Image component to request an image which width is equal to the width of it's container.\nWhen passing 'width=\"auto\" responsive', you can set the <img> element width by passing a 'style' prop".trim(),L=function(t){function e(e,n){var a;return(a=t.call(this,e,n)||this).isResponsive=function(){var t=a.getExtendedProps(),e=t.responsive,n=t.width;return e&&"auto"!==n&&console.warn(P),e&&a.element&&a.element.current},a.getOptions=function(){var t=a.getExtendedProps(),e=h(u({},t,E(t)),["children","innerRef"]);return a.shouldLazyLoad()||delete e.loading,e},a.getAttributes=function(t){void 0===t&&(t={});var e=t.placeholder,n=w(u({},a.getOptions(),t)),r=n.cloudinaryProps,i=n.nonCloudinaryProps,o=n.cloudinaryReactProps,l=b(u({},r,o)),c=u({},s.Util.withCamelCaseKeys(l.attributes()),i);return c.dataSrc&&(c["data-src"]=c.dataSrc),e&&c.id&&(c.id+="-cld-placeholder"),a.shouldLazyLoad()&&(c["data-src"]=c.dataSrc||c.src,delete c.src),v.forEach((function(t){delete c[t]})),c},a.update=function(){if(a.shouldLazyLoad())s.Util.detectIntersection(a.element.current,a.onIntersect);else if(a.isResponsive()){var t=a.getOptions(),e=a.getPlaceholderType();if(e){var n=x(a.placeholderElement.current,u({},t,{placeholder:e}));a.listenerRemovers.push(n)}var r=x(a.element.current,t);a.listenerRemovers.push(r)}},a.shouldLazyLoad=function(){var t=a.getExtendedProps().loading;return!a.state.isInView&&("lazy"===t||"auto"===t)},a.handleImageLoaded=function(){var t=a.props.onLoad;a.setState({isLoaded:!0},(function(){t&&t()}))},a.renderPlaceholder=function(t,e){e.style=u({},e.style||{},{opacity:0,position:"absolute"}),e.onLoad=a.handleImageLoaded;var n=a.getAttributes({placeholder:t});return i.a.createElement(r.Fragment,null,a.renderImage(e),i.a.createElement("div",{style:{display:"inline"}},i.a.createElement("img",u({ref:a.placeholderElement},n))))},a.renderImage=function(t){return i.a.createElement("img",u({ref:a.attachRef},t))},a.getPlaceholderType=function(){var t=function(t){var e=null;return t&&(e=i.a.Children.toArray(t).find((function(t){return S(t,"CloudinaryPlaceholder")}))),e}(a.getExtendedProps().children);return t?t.props.type:null},a.placeholderElement=Object(r.createRef)(),a.state={isLoaded:!1},a.listenerRemovers=[],a}l(e,t);var n=e.prototype;return n.componentDidMount=function(){this.update()},n.componentDidUpdate=function(){this.update()},n.componentWillUnmount=function(){this.listenerRemovers.forEach((function(t){return t()}))},n.render=function(){var t=this.state.isLoaded,e=this.getAttributes(),n=this.getPlaceholderType();return!t&&n?this.renderPlaceholder(n,e):this.renderImage(e)},e}(M);L.defaultProps={},L.propTypes=M.propTypes,L.propTypes.responsive=o.a.bool,L.propTypes.loading=o.a.string,L.propTypes.accessibility=o.a.string;var R=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.render=function(){return null},e}(M);R.propTypes=M.propTypes,R.defaultProps={},R.exposesProps=!0,R.displayName="CloudinaryTransformation";var j=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).mimeType="video",e.mimeSubTypes=m,e.getMergedProps=function(){return u({},e.getContext(),e.props)},e.generateVideoUrl=function(t,e,n,r,i){var a=s.Util.withSnakeCaseKeys(s.Util.defaults({},r,n,{resource_type:"video",format:i}));return t.url(e,a)},e.generateUsingSourceTypes=function(t,n,r,i,a){return a.map((function(a){return e.toSourceTag(t,n,r,i[a]||{},a,e.buildMimeType(a))}))},e.generateUsingSources=function(t,n,r,i){return i.map((function(i){var a=i.transformations,o=void 0===a?{}:a,s=i.type,u=i.codecs;return e.toSourceTag(t,n,r,o,s,e.buildMimeType(s,u))}))},e.toSourceTag=function(t,n,r,a,o,s){var u=e.generateVideoUrl(t,n,r,a,o);return i.a.createElement("source",{key:u+s,src:u,type:s})},e.buildMimeType=function(t,n){var r=e.mimeType+"/"+(e.mimeSubTypes[t]||t);return s.Util.isEmpty(n)||(r+="; codecs="+(s.Util.isArray(n)?n.join(", "):n)),r},e.getVideoTagProps=function(){var t=e.getMergedProps(),n=t.publicId,r=t.children,i=t.sourceTypes,a=t.sourceTransformation,o=void 0===a?{}:a,l=t.sources,c=h(t,["innerRef","publicId","fallback","children","sourceTypes","sourceTransformation","sources"]);c=k(c,{});var f=w(c),d=f.cloudinaryProps,p=f.cloudinaryReactProps,v=f.nonCloudinaryProps;c=u({},d,p);var m=s.Util.withSnakeCaseKeys(c),g=s.Cloudinary.new(m),y=g.videoTag(n,c).attributes();y=u({},s.Util.withCamelCaseKeys(y),v);var _=E(u({},c,{children:r})),b=null;return s.Util.isArray(l)&&!s.Util.isEmpty(l)?b=e.generateUsingSources(g,n,_,l):s.Util.isArray(i)?b=e.generateUsingSourceTypes(g,n,_,o,i):y.src=e.generateVideoUrl(g,n,_,o[i]||{},i),{sources:b,tagAttributes:y}},e.reloadVideo=function(){e.element&&e.element.current&&e.element.current.load()},e}l(e,t);var n=e.prototype;return n.componentDidUpdate=function(){this.reloadVideo()},n.render=function(){var t=this.props,e=t.fallback,n=t.children,r=this.getVideoTagProps(),a=r.tagAttributes,o=r.sources;return i.a.createElement("video",u({ref:this.attachRef},a),o,e,n)},e}(M);j.propTypes={publicId:o.a.string,sources:o.a.arrayOf(o.a.shape({type:o.a.string,codecs:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),transformations:o.a.object}))},j.defaultProps={sourceTypes:s.Cloudinary.DEFAULT_VIDEO_PARAMS.source_types};var I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).mimeType="audio",e.mimeSubTypes=g,e}return l(e,t),e.prototype.render=function(){var t=this.props,e=t.innerRef,n=t.fallback,r=t.children,a=this.getVideoTagProps(),o=a.tagAttributes,s=a.sources;return delete o.poster,i.a.createElement("audio",u({ref:e},o),s,n,r)},e}(j);I.propTypes={publicId:o.a.string},I.defaultProps={sourceTypes:["aac","mp3","ogg"]};var D=function(t){return null};D.propTypes={type:o.a.string},D.defaultProps={type:"blur"},D.displayName="CloudinaryPlaceholder"},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(69),i=n(42),a=n(107),o=n(43),s=n(55),u=n(44),l=Object.prototype.hasOwnProperty,c=a((function(t,e){if(s(e)||o(e))i(e,u(e),t);else for(var n in e)l.call(e,n)&&r(t,n,e[n])}));t.exports=c},function(t,e,n){var r=n(48),i=n(232),a=n(32),o=n(106),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?f:s).test(o(t))}},function(t,e,n){var r=n(49),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(233),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(28)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(236),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=a[o];return l[e]=n(u),r(t,this,l)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(238),i=n(240)(r);t.exports=i},function(t,e,n){var r=n(239),i=n(104),a=n(71),o=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),a=16-(i-r);if(r=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(54),i=n(43),a=n(110),o=n(32);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(37),i=n(29);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(37),i=n(109),a=n(29),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e,n){var r=n(55),i=n(247),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(249);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(114),i=n(272),a=n(69),o=n(273),s=n(274),u=n(116),l=n(117),c=n(277),h=n(278),f=n(279),d=n(280),p=n(80),v=n(285),m=n(286),g=n(123),y=n(34),_=n(73),b=n(292),x=n(32),w=n(294),S=n(44),k=n(50),T="[object Arguments]",E="[object Function]",C="[object Object]",O={};O[T]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[C]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[E]=O["[object WeakMap]"]=!1,t.exports=function t(e,n,M,A,P,L){var R,j=1&n,I=2&n,D=4&n;if(M&&(R=P?M(e,A,P,L):M(e)),void 0!==R)return R;if(!x(e))return e;var N=y(e);if(N){if(R=v(e),!j)return l(e,R)}else{var B=p(e),z=B==E||"[object GeneratorFunction]"==B;if(_(e))return u(e,j);if(B==C||B==T||z&&!P){if(R=I||z?{}:g(e),!j)return I?h(e,s(R,e)):c(e,o(R,e))}else{if(!O[B])return P?e:{};R=m(e,B,j)}}L||(L=new r);var F=L.get(e);if(F)return F;L.set(e,R),w(e)?e.forEach((function(r){R.add(t(r,n,M,r,e,L))})):b(e)&&e.forEach((function(r,i){R.set(i,t(r,n,M,i,e,L))}));var V=N?void 0:(D?I?d:f:I?k:S)(e);return i(V||e,(function(r,i){V&&(r=e[i=r]),a(R,i,t(r,n,M,i,e,L))})),R}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(58),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(58);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(57),i=n(76),a=n(115);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(261),i=n(57),a=n(76);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){var r=n(262),i=n(263),a=n(264),o=n(265),s=n(266);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(59);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(59),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(59),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(59);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(60);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(60);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(60);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(60);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(42),i=n(44);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(42),i=n(50);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(32),i=n(55),a=n(276),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(42),i=n(77);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(42),i=n(120);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(121),i=n(77),a=n(44);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(121),i=n(120),a=n(50);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(36)(n(28),"DataView");t.exports=r},function(t,e,n){var r=n(36)(n(28),"Promise");t.exports=r},function(t,e,n){var r=n(36)(n(28),"Set");t.exports=r},function(t,e,n){var r=n(36)(n(28),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(81),i=n(288),a=n(289),o=n(290),s=n(122);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return a(t);case"[object Set]":return new u;case"[object Symbol]":return o(t)}}},function(t,e,n){var r=n(28).Uint8Array;t.exports=r},function(t,e,n){var r=n(81);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(49),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var r=n(32),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var r=n(293),i=n(56),a=n(75),o=a&&a.isMap,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(80),i=n(29);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(295),i=n(56),a=n(75),o=a&&a.isSet,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(80),i=n(29);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i}},function(t,e,n){var r=n(298),i=n(308),a=n(108),o=n(124),s=a((function(t,e){return o(t)?r(t,i(e,1,o,!0)):[]}));t.exports=s},function(t,e,n){var r=n(299),i=n(302),a=n(306),o=n(82),s=n(56),u=n(307);t.exports=function(t,e,n,l){var c=-1,h=i,f=!0,d=t.length,p=[],v=e.length;if(!d)return p;n&&(e=o(e,s(n))),l?(h=a,f=!1):e.length>=200&&(h=u,f=!1,e=new r(e));t:for(;++c<d;){var m=t[c],g=null==n?m:n(m);if(m=l||0!==m?m:0,f&&g===g){for(var y=v;y--;)if(e[y]===g)continue t;p.push(m)}else h(e,g,l)||p.push(m)}return p}},function(t,e,n){var r=n(115),i=n(300),a=n(301);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(61);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},function(t,e){t.exports=function(t){return t!==t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(78),i=n(309);t.exports=function t(e,n,a,o,s){var u=-1,l=e.length;for(a||(a=i),s||(s=[]);++u<l;){var c=e[u];n>0&&a(c)?n>1?t(c,n-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}},function(t,e,n){var r=n(49),i=n(72),a=n(34),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(o&&t&&t[o])}},function(t,e,n){var r=n(311),i=n(44);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(118),i=n(48);t.exports=function(t,e){return r(e,(function(e){return i(t[e])}))}},function(t,e,n){var r=n(61),i=n(43),a=n(125),o=n(313),s=n(317),u=Math.max;t.exports=function(t,e,n,l){t=i(t)?t:s(t),n=n&&!l?o(n):0;var c=t.length;return n<0&&(n=u(c+n,0)),a(t)?n<=c&&t.indexOf(e,n)>-1:!!c&&r(t,e,n)>-1}},function(t,e,n){var r=n(314);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(315),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(126),i=n(32),a=n(127),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):o.test(t)?NaN:+t}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e,n){var r=n(318),i=n(44);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(82);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){var r=n(29),i=n(83);t.exports=function(t){return r(t)&&1===t.nodeType&&!i(t)}},function(t,e,n){var r=n(321),i=n(107)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r=n(114),i=n(128),a=n(322),o=n(324),s=n(32),u=n(50),l=n(129);t.exports=function t(e,n,c,h,f){e!==n&&a(n,(function(a,u){if(f||(f=new r),s(a))o(e,n,u,c,t,h,f);else{var d=h?h(l(e,u),a,u+"",e,n,f):void 0;void 0===d&&(d=a),i(e,u,d)}}),u)}},function(t,e,n){var r=n(323)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},function(t,e,n){var r=n(128),i=n(116),a=n(122),o=n(117),s=n(123),u=n(72),l=n(34),c=n(124),h=n(73),f=n(48),d=n(32),p=n(83),v=n(112),m=n(129),g=n(325);t.exports=function(t,e,n,y,_,b,x){var w=m(t,n),S=m(e,n),k=x.get(S);if(k)r(t,n,k);else{var T=b?b(w,S,n+"",t,e,x):void 0,E=void 0===T;if(E){var C=l(S),O=!C&&h(S),M=!C&&!O&&v(S);T=S,C||O||M?l(w)?T=w:c(w)?T=o(w):O?(E=!1,T=i(S,!0)):M?(E=!1,T=a(S,!0)):T=[]:p(S)||u(S)?(T=w,u(w)?T=g(w):d(w)&&!f(w)||(T=s(S))):E=!1}E&&(x.set(S,T),_(T,S,y,b,x),x.delete(S)),r(t,n,T)}}},function(t,e,n){var r=n(42),i=n(50);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(130),i=n(126),a=n(327),o=n(329),s=n(330),u=n(331),l=n(335);t.exports=function(t,e,n){if((t=l(t))&&(n||void 0===e))return i(t);if(!t||!(e=r(e)))return t;var c=u(t),h=u(e),f=s(c,h),d=o(c,h)+1;return a(c,f,d).join("")}},function(t,e,n){var r=n(328);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}},function(t,e,n){var r=n(61);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(61);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(332),i=n(333),a=n(334);t.exports=function(t){return i(t)?a(t):r(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+u+("(?:\\u200d(?:"+[a,o,s].join("|")+")"+l+u+")*"),h="(?:"+[a+r+"?",r,o,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+c,"g");t.exports=function(t){return t.match(f)||[]}},function(t,e,n){var r=n(130);t.exports=function(t){return null==t?"":r(t)}},,function(t,e,n){"use strict";n.r(e);var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return r.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));e.default=i}]]);
//# sourceMappingURL=2.eb8237bb.chunk.js.map